<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="网站简要描述——大飞的简要描述"><title>YII2搭建后台并实现rbac权限控制 | 大飞</title><!--link(rel="stylesheet", type="text/css", href="//fonts.css.network/css?family=Source+Code+Pro")--><link rel="stylesheet" type="text/css" href="/css/source_code_pro/source-code-pro.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=2.0.1"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=2.0.1"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">YII2搭建后台并实现rbac权限控制</h1><a id="logo" href="/.">大飞</a><p class="description">大飞</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a><a href="/categories/"><i class="fa fa fa-gui"> 分类</i></a><a href="/tags/"><i class="fa fa fa-biao"> 标签</i></a></div><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="Arama"></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">YII2搭建后台并实现rbac权限控制</h1><div class="post-meta"><a href="/2015/09/04/Yii2/Yii2搭建后台并实现rbac权限控/#comments" class="comment-count"></a><p><span class="date">Sep 04, 2015</span><span><a href="/categories/PHP/" class="category">PHP</a><a href="/categories/PHP/Yii/" class="category">Yii</a></span><span><i id="busuanzi_container_page_pv"><i id="busuanzi_value_page_pv"></i><i>点击</i></i></span></p></div><div class="post-content"><p>YII2搭建后台并实现rbac权限控制<br>YII2搭建后台并实现rbac权限控制<br>YII2搭建后台并实现rbac权限控制</p>
<a id="more"></a>
<h3 id="安装Yii2"><a href="#安装Yii2" class="headerlink" title="安装Yii2"></a>安装Yii2</h3><p>参考官网安装文档<br><a href="http://www.yiiframework.com/download" target="_blank" rel="noopener"><font color="red">yiiframework</font></a><br><a href="http://www.yiichina.com/download" target="_blank" rel="noopener"><font color="red">yiichina</font></a></p>
<h3 id="配置数据库"><a href="#配置数据库" class="headerlink" title="配置数据库"></a>配置数据库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">创建数据库： create database yii2advanced default charset utf8;</span><br><span class="line"></span><br><span class="line">修改common/config/main-local.php数据库配置</span><br><span class="line"></span><br><span class="line">        <span class="string">'db'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'yii\db\Connection'</span>,</span><br><span class="line">            <span class="string">'dsn'</span> =&gt; <span class="string">'mysql:host=localhost;dbname=yii2advanced'</span>,</span><br><span class="line">            <span class="string">'username'</span> =&gt; <span class="string">'root'</span>,</span><br><span class="line">            <span class="string">'password'</span> =&gt; <span class="string">'root'</span>,</span><br><span class="line">            <span class="string">'charset'</span> =&gt; <span class="string">'utf8'</span>,</span><br><span class="line">        ],</span><br></pre></td></tr></table></figure>
<p><img src="/img/Yii2/mysql_config.png" alt="数据配置"></p>
<h3 id="使用composer安装yii2-admin"><a href="#使用composer安装yii2-admin" class="headerlink" title="使用composer安装yii2-admin"></a>使用composer安装yii2-admin</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">composer require mdmsoft/yii2-admin <span class="string">"~2.0"</span></span><br><span class="line"></span><br><span class="line">!!!温馨提示：建议安装 1.0 版本不安装 2.0 版本!!!</span><br><span class="line">composer require mdmsoft/yii2-admin <span class="string">"~1.0"</span></span><br></pre></td></tr></table></figure>
<h3 id="配置yii2-admin运行环境"><a href="#配置yii2-admin运行环境" class="headerlink" title="配置yii2-admin运行环境"></a>配置yii2-admin运行环境</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">权限控制在后台，所以在 backend/config/main.php 中配置以下内容：</span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="string">'modules'</span> =&gt; [</span><br><span class="line">        <span class="string">'admin'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'mdm\admin\Module'</span>,</span><br><span class="line">             <span class="string">'layout'</span> =&gt; <span class="string">'left-menu'</span>,<span class="comment">//yii2-admin的导航菜单</span></span><br><span class="line">        ]</span><br><span class="line">        ...</span><br><span class="line">    ],</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">'components'</span> =&gt; [</span><br><span class="line">        ...</span><br><span class="line">        <span class="string">'authManager'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'yii\rbac\DbManager'</span>, <span class="comment">// 使用数据库管理配置文件</span></span><br><span class="line">        ]</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'as access'</span> =&gt; [</span><br><span class="line">        <span class="string">'class'</span> =&gt; <span class="string">'mdm\admin\components\AccessControl'</span>,</span><br><span class="line">        <span class="string">'allowActions'</span> =&gt; [</span><br><span class="line">            <span class="string">'site/*'</span>,<span class="comment">//允许访问的节点，可自行添加</span></span><br><span class="line">            <span class="string">'admin/*'</span>,<span class="comment">//允许所有人访问admin节点及其子节点</span></span><br><span class="line">        ]</span><br><span class="line">    ],</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<h3 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">php yii migrate --migrationPath=@mdm/admin/migrations</span><br><span class="line"></span><br><span class="line">执行sql：（自带的rbac）  </span><br><span class="line">修改配置文件console/config/main-local.php</span><br><span class="line"><span class="built_in">return</span> [</span><br><span class="line">    <span class="string">'bootstrap'</span> =&gt; [<span class="string">'gii'</span>],</span><br><span class="line">    <span class="string">'modules'</span> =&gt; [</span><br><span class="line">        <span class="string">'gii'</span> =&gt; <span class="string">'yii\gii\Module'</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'components'</span> =&gt; [</span><br><span class="line">        <span class="string">"authManager"</span> =&gt; [</span><br><span class="line">            <span class="string">"class"</span> =&gt; <span class="string">'yii\rbac\DbManager'</span>,</span><br><span class="line">            <span class="string">"defaultRoles"</span> =&gt; [<span class="string">"guest"</span>],</span><br><span class="line">        ],</span><br><span class="line">    ],</span><br><span class="line">];</span><br><span class="line"><span class="built_in">cd</span>到advance目录下面执行</span><br><span class="line">yii migrate --migrationPath=@yii/rbac/migrations</span><br></pre></td></tr></table></figure>
<h3 id="中文显示"><a href="#中文显示" class="headerlink" title="中文显示"></a>中文显示</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">在 common\config\main.php 中配置</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="string">'language'</span> =&gt; <span class="string">'zh-CN'</span>, <span class="comment">//中文显示</span></span><br><span class="line">    <span class="string">'aliases'</span> =&gt; [</span><br><span class="line">        <span class="string">'@bower'</span> =&gt; <span class="string">'@vendor/bower-asset'</span>,</span><br><span class="line">        <span class="string">'@npm'</span>   =&gt; <span class="string">'@vendor/npm-asset'</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'vendorPath'</span> =&gt; dirname(dirname(<span class="keyword">__DIR__</span>)) . <span class="string">'/vendor'</span>,</span><br><span class="line">    <span class="string">'components'</span> =&gt; [</span><br><span class="line">        <span class="string">'cache'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'yii\caching\FileCache'</span>,</span><br><span class="line">        ],</span><br><span class="line">    ],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">现在可以查看后台：</span><br><span class="line">&lt;Your domain name&gt;/index.php?r=admin/user</span><br><span class="line">&lt;Your domain name&gt;/index.php?r=admin</span><br><span class="line">&lt;Your domain name&gt;/index.php?r=admin/route</span><br><span class="line">&lt;Your domain name&gt;/index.php?r=admin/permission</span><br><span class="line">&lt;Your domain name&gt;/index.php?r=admin/menu</span><br><span class="line">&lt;Your domain name&gt;/index.php?r=admin/role</span><br><span class="line">&lt;Your domain name&gt;/index.php?r=admin/assignment</span><br></pre></td></tr></table></figure>
<p><img src="/img/Yii2/yii2_admin_install_end.png" alt="yii2-admin 安装完成"></p>
<h3 id="配置授权demo"><a href="#配置授权demo" class="headerlink" title="配置授权demo"></a>配置授权demo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">以一个自定义的节点books为例，节点books下共有index 图书列表，view 查看图书，create创建图书，update 更新图书，delete 删除图书这个5个节点，，可以通过gii生成这些代码。</span><br><span class="line"></span><br><span class="line">配置目标：</span><br><span class="line">未登录用户仅能访问index节点</span><br><span class="line">一般用户能访问index，view，create三个节点</span><br><span class="line">管理员能访问所有节点</span><br><span class="line">---------------------------</span><br><span class="line">在 backend/config/main.php 中修改配置以下内容：</span><br><span class="line">    <span class="string">'as access'</span> =&gt; [</span><br><span class="line">        <span class="string">'class'</span> =&gt; <span class="string">'mdm\admin\components\AccessControl'</span>,</span><br><span class="line">        <span class="string">'allowActions'</span> =&gt; [</span><br><span class="line">            //<span class="string">'site/*'</span>,//允许访问的节点，可自行添加</span><br><span class="line">            //<span class="string">'admin/*'</span>,//允许所有人访问admin节点及其子节点</span><br><span class="line">            <span class="string">"*"</span>//不配置这个是访问不到gii，使用完记得修改回来，否则权限会出问题</span><br><span class="line">        ]</span><br><span class="line">    ],</span><br></pre></td></tr></table></figure>
<h3 id="添加可分配权限列表"><a href="#添加可分配权限列表" class="headerlink" title="添加可分配权限列表"></a>添加可分配权限列表</h3><p>在路由列表中，添加book各个节点路由由表添加至右侧可分配路由列表中，如下:</p>
<p><img src="/img/Yii2/book_route.png" alt="路由列表 图书"></p>
<p>在权限列表=》新增权限，填好后提交，然后填的路由规则即可，如下：</p>
<p><img src="/img/Yii2/authority_add_01.png" alt="权限列表 新增权限"></p>
<p><img src="/img/Yii2/authority_add_03.png" alt="权限列表 新增权限的对应路由"></p>
<p><img src="/img/Yii2/authority_add_04.png" alt="权限列表"></p>
<h3 id="添加角色并分配权限"><a href="#添加角色并分配权限" class="headerlink" title="添加角色并分配权限"></a>添加角色并分配权限</h3><p><img src="/img/Yii2/role_add_01.png" alt="角色列表 新增角色"></p>
<p><img src="/img/Yii2/role_add_02.png" alt="角色列表 新增角色对应的权限"></p>
<p><img src="/img/Yii2/role_add_03.png" alt="角色列表"></p>
<h3 id="分配角色"><a href="#分配角色" class="headerlink" title="分配角色"></a>分配角色</h3><p>手动注册用户，我这里注册admin和test进行测试。其中admin为管理员，test为一般用户</p>
<p><img src="/img/Yii2/register_user.png" alt="分配列表 00"></p>
<p><img src="/img/Yii2/assignments_list_01.png" alt="分配列表 list 01"></p>
<p><img src="/img/Yii2/assignments_list_02.png" alt="分配列表 add 02"></p>
<p><img src="/img/Yii2/assignments_list_03.png" alt="分配列表 add 03"></p>
<h2 id="！！！测试权限之前"><a href="#！！！测试权限之前" class="headerlink" title="！！！测试权限之前"></a><font color="red">！！！测试权限之前</font></h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">！！！ 测试权限之前，把这里注释掉</span><br><span class="line">在 backend/config/main.php 中修改配置以下内容：</span><br><span class="line">    <span class="string">'as access'</span> =&gt; [</span><br><span class="line">        <span class="string">'class'</span> =&gt; <span class="string">'mdm\admin\components\AccessControl'</span>,</span><br><span class="line">        <span class="string">'allowActions'</span> =&gt; [</span><br><span class="line">            <span class="comment">//'site/*',//允许访问的节点，可自行添加</span></span><br><span class="line">            <span class="comment">//'admin/*',//允许所有人访问admin节点及其子节点</span></span><br><span class="line">            <span class="comment">//"*"//把这个注释掉！！！</span></span><br><span class="line">        ]</span><br><span class="line">    ],</span><br></pre></td></tr></table></figure>
<h3 id="开始测试"><a href="#开始测试" class="headerlink" title="开始测试"></a>开始测试</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、以管理员身份登录时，可以进行所有操作。ok</span><br><span class="line"><span class="number">2</span>、如果不登录，在访问book首页的时候会跳转到登录页面。预期结果是未登录时能访问book首页，就是说当前系统默认不认可我们配置给未登录用户的权限。</span><br><span class="line">有<span class="number">2</span>中办法</span><br><span class="line">第一种 在 backend/config/main.php 中加一行指定默认规则的代码即可，如下：</span><br><span class="line"></span><br><span class="line"><span class="string">'authManager'</span>=&gt; [</span><br><span class="line">    <span class="string">'class'</span> =&gt; <span class="string">'yii\rbac\DbManager'</span>,</span><br><span class="line">    <span class="string">'defaultRoles'</span> =&gt; [<span class="string">'未登录用户'</span>],<span class="comment">//添加此行代码，指定默认规则为 '未登录用户'</span></span><br><span class="line">],</span><br><span class="line"></span><br><span class="line">或者在 backend/config/main.php 修改为：</span><br><span class="line">    <span class="string">'as access'</span> =&gt; [</span><br><span class="line">        <span class="string">'class'</span> =&gt; <span class="string">'mdm\admin\components\AccessControl'</span>,</span><br><span class="line">        <span class="string">'allowActions'</span> =&gt; [</span><br><span class="line">            <span class="comment">//'site/*',//允许访问的节点，可自行添加</span></span><br><span class="line">            <span class="comment">//'admin/*',//允许所有人访问admin节点及其子节点</span></span><br><span class="line">            <span class="comment">//"*"//不配置这个是访问不到gii，使用完记得修改回来，否则权限会出问题</span></span><br><span class="line">            <span class="string">"book/index"</span>,<span class="comment">//未登录用户也可以访问图书列表</span></span><br><span class="line">        ]</span><br><span class="line">    ],</span><br></pre></td></tr></table></figure>
<h3 id="……"><a href="#……" class="headerlink" title="……"></a>……</h3><hr>
<h3 id="安装yii2-AdminLTE后台主题"><a href="#安装yii2-AdminLTE后台主题" class="headerlink" title="安装yii2 AdminLTE后台主题"></a>安装yii2 AdminLTE后台主题</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">composer require dmstr/yii2-adminlte-asset <span class="string">"^2.1"</span></span><br><span class="line"></span><br><span class="line">安装过程中可能需要输入github的token</span><br></pre></td></tr></table></figure>
<h3 id="引入主题"><a href="#引入主题" class="headerlink" title="引入主题"></a>引入主题</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">方式一：(建议使用这种方式)</span><br><span class="line">复制整个vendor/dmstr/yii2-adminlte-asset/example-views/yiisoft/yii2-app目录下的layouts目录和site目录到backend/views，覆盖原始文件。</span><br><span class="line"></span><br><span class="line">方式二：</span><br><span class="line"><span class="string">'components'</span> =&gt; [</span><br><span class="line">    <span class="string">'view'</span> =&gt; [</span><br><span class="line">         <span class="string">'theme'</span> =&gt; [</span><br><span class="line">             <span class="string">'pathMap'</span> =&gt; [</span><br><span class="line">                <span class="string">'@app/views'</span> =&gt; <span class="string">'@vendor/dmstr/yii2-adminlte-asset/example-views/yiisoft/yii2-app'</span></span><br><span class="line">             ],</span><br><span class="line">         ],</span><br><span class="line">    ],</span><br><span class="line">],</span><br><span class="line"></span><br><span class="line">现在可以查看后台：</span><br><span class="line">&lt;Your domain name&gt;/index.php?r=admin%<span class="number">2</span>Fuser</span><br><span class="line">！！！如果访问权限相关的路径，如/admin/route/index并不是上面看到的样式，请将配置文件中的modules数组中配置的layouts的值删掉即可。如下：</span><br><span class="line">        <span class="string">'admin'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'mdm\admin\Module'</span>,</span><br><span class="line">            <span class="comment">//'layout' =&gt; 'left-menu',//yii2-admin的导航菜单</span></span><br><span class="line">        ]</span><br></pre></td></tr></table></figure>
<p><img src="/img/Yii2/yii2_adminlte_install_end.png" alt="yii2-adminlte 安装完成"></p>
<h3 id="配置数据库，登录"><a href="#配置数据库，登录" class="headerlink" title="配置数据库，登录"></a>配置数据库，登录</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、修改common/config/main-local.php数据库配置</span><br><span class="line"></span><br><span class="line">        <span class="string">'db'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'yii\db\Connection'</span>,</span><br><span class="line">            <span class="string">'dsn'</span> =&gt; <span class="string">'mysql:host=localhost;dbname=yii2advanced'</span>,</span><br><span class="line">            <span class="string">'username'</span> =&gt; <span class="string">'root'</span>,</span><br><span class="line">            <span class="string">'password'</span> =&gt; <span class="string">'root'</span>,</span><br><span class="line">            <span class="string">'charset'</span> =&gt; <span class="string">'utf8'</span>,</span><br><span class="line">        ],</span><br><span class="line"><span class="number">2</span>、注册后台账户，登录     </span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、在 common\config\main.php 中配置</span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="string">'language'</span> =&gt; <span class="string">'zh-CN'</span>, <span class="comment">//中文显示</span></span><br><span class="line">    <span class="string">'aliases'</span> =&gt; [</span><br><span class="line">        <span class="string">'@bower'</span> =&gt; <span class="string">'@vendor/bower-asset'</span>,</span><br><span class="line">        <span class="string">'@npm'</span>   =&gt; <span class="string">'@vendor/npm-asset'</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'vendorPath'</span> =&gt; dirname(dirname(<span class="keyword">__DIR__</span>)) . <span class="string">'/vendor'</span>,</span><br><span class="line">    <span class="string">'components'</span> =&gt; [</span><br><span class="line">        <span class="string">'cache'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'yii\caching\FileCache'</span>,</span><br><span class="line">        ],</span><br><span class="line">    ],</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<h3 id="配置简短路由"><a href="#配置简短路由" class="headerlink" title="配置简短路由"></a>配置简短路由</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">在 backend/config/main.php文件的compontents加上下面的配置</span><br><span class="line"><span class="string">"urlManager"</span> =&gt; [    </span><br><span class="line">    <span class="comment">//用于表明urlManager是否启用URL美化功能，在Yii1.1中称为path格式URL，    </span></span><br><span class="line">    <span class="comment">// Yii2.0中改称美化。   </span></span><br><span class="line">    <span class="comment">// 默认不启用。但实际使用中，特别是产品环境，一般都会启用。   </span></span><br><span class="line">    <span class="string">"enablePrettyUrl"</span> =&gt; <span class="keyword">true</span>,    </span><br><span class="line">    <span class="comment">// 是否启用严格解析，如启用严格解析，要求当前请求应至少匹配1个路由规则，    </span></span><br><span class="line">    <span class="comment">// 否则认为是无效路由。    </span></span><br><span class="line">    <span class="comment">// 这个选项仅在 enablePrettyUrl 启用后才有效。    </span></span><br><span class="line">    <span class="string">"enableStrictParsing"</span> =&gt; <span class="keyword">false</span>,    </span><br><span class="line">    <span class="comment">// 是否在URL中显示入口脚本。是对美化功能的进一步补充。    </span></span><br><span class="line">    <span class="string">"showScriptName"</span> =&gt; <span class="keyword">false</span>,    </span><br><span class="line">    <span class="comment">// 指定续接在URL后面的一个后缀，如 .html 之类的。仅在 enablePrettyUrl 启用时有效。    </span></span><br><span class="line">    <span class="string">"suffix"</span> =&gt; <span class="string">""</span>,    </span><br><span class="line">    <span class="string">"rules"</span> =&gt; [        </span><br><span class="line">        <span class="string">"&lt;controller:\w+&gt;/&lt;id:\d+&gt;"</span>=&gt;<span class="string">"&lt;controller&gt;/view"</span>,  </span><br><span class="line">        <span class="string">"&lt;controller:\w+&gt;/&lt;action:\w+&gt;"</span>=&gt;<span class="string">"&lt;controller&gt;/&lt;action&gt;"</span>    </span><br><span class="line">    ],</span><br><span class="line">],</span><br><span class="line"></span><br><span class="line">配置web server</span><br><span class="line">Apache作为服务器，在应用的目录 backend/web下面创建.htaccess文件并添加如下内容：</span><br><span class="line">Options +FollowSymLinks</span><br><span class="line">IndexIgnore  *<span class="comment">/*</span></span><br><span class="line"><span class="comment">RewriteEngine on</span></span><br><span class="line"><span class="comment"># if a directory or a file exists, use it directly</span></span><br><span class="line"><span class="comment">RewriteCond  %&#123;REQUEST_FILENAME&#125; !-f</span></span><br><span class="line"><span class="comment">RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span></span><br><span class="line"><span class="comment"># otherwise forward it to index.php</span></span><br><span class="line"><span class="comment">RewriteRule . index.php</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">nginx用户，修改server部分，如下：</span></span><br><span class="line"><span class="comment">server &#123;</span></span><br><span class="line"><span class="comment">    listen       80;</span></span><br><span class="line"><span class="comment">    server_name  yourdomain;</span></span><br><span class="line"><span class="comment">    root yourdirectory/backend/web;</span></span><br><span class="line"><span class="comment">    index  index.php index.html;</span></span><br><span class="line"><span class="comment">    charset utf-8;</span></span><br><span class="line"><span class="comment">    location / &#123;</span></span><br><span class="line"><span class="comment">        index  index.php;</span></span><br><span class="line"><span class="comment">        if (!-e $request_filename) &#123;</span></span><br><span class="line"><span class="comment">            rewrite  ^(.*)$  /index.php/$1  last;</span></span><br><span class="line"><span class="comment">            break;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    location ~ .+\.php($|/) &#123;</span></span><br><span class="line"><span class="comment">        fastcgi_pass 127.0.0.1:9000;</span></span><br><span class="line"><span class="comment">        fastcgi_index index.php;</span></span><br><span class="line"><span class="comment">        include fastcgi.conf;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="启动更多分配路由"><a href="#启动更多分配路由" class="headerlink" title="启动更多分配路由"></a>启动更多分配路由</h3><p>我们先访问路由页面 /admin/route ，尽可能的把左侧的全部选中，然后移动到右侧，并记得给当前用户分配相关的可访问权限。</p>
<p><img src="/img/Yii2/adminLTE_route_all.png" alt="yii2-adminlte 所有路由"></p>
<h3 id="添加菜单"><a href="#添加菜单" class="headerlink" title="添加菜单"></a>添加菜单</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">访问菜单列表 admin/menu 点击添加菜单admin/menu/create按钮。</span><br><span class="line">&gt; 如果这个时候你没有权限访问了，需要在配置文件（backend/config/main.php）的 <span class="keyword">as</span> access数组暂时允许当前用户访问任意权限，并在我们添加完权限的时候去掉<span class="keyword">as</span> access的设置，切记。</span><br><span class="line">    <span class="string">'as access'</span> =&gt; [</span><br><span class="line">        <span class="string">'class'</span> =&gt; <span class="string">'mdm\admin\components\AccessControl'</span>,</span><br><span class="line">        <span class="string">'allowActions'</span> =&gt; [</span><br><span class="line">            <span class="comment">//'site/*',//允许访问的节点，可自行添加</span></span><br><span class="line">            <span class="comment">//'admin/*',//允许所有人访问admin节点及其子节点</span></span><br><span class="line">            <span class="string">"*"</span><span class="comment">//不配置这个是访问不到gii，使用完记得修改回来，否则权限会出问题</span></span><br><span class="line">            <span class="comment">//"book/index",//未登录用户也可以访问图书列表</span></span><br><span class="line">        ]</span><br><span class="line">    ],</span><br><span class="line">    </span><br><span class="line">？？？？？？？？？父级一直添加不上？？？先手动修改数据库？？？？最后解决这个问题？？？？    </span><br><span class="line">添加界面如下：</span><br></pre></td></tr></table></figure>
<p><img src="/img/Yii2/adminLTE_menu_add_01.png" alt="yii2-adminlte 添加菜单01"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">一、例如添加一级菜单&quot;权限管理&quot;，按照如下填写：</span><br><span class="line">名称：权限管理</span><br><span class="line">父级名称：不填</span><br><span class="line">路由：/admin/default/index</span><br><span class="line">排序：1</span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">二、添加一个二级菜单&quot;角色列表&quot;，如下：</span><br><span class="line">名称：角色列表</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/admin/role/index</span><br><span class="line">排序：2</span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">三、添加一个二级菜单&quot;权限列表&quot;，如下：</span><br><span class="line">名称：权限列表</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/admin/permission/index</span><br><span class="line">排序：3</span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">四、添加一个二级菜单&quot;路由列表&quot;，如下：</span><br><span class="line">名称：路由列表</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/admin/route/index</span><br><span class="line">排序：4</span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">五、添加一个二级菜单&quot;规则管理&quot;，如下：</span><br><span class="line">名称：规则管理</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/admin/rule/index</span><br><span class="line">排序：5</span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">六、添加一个二级菜单&quot;分配用户到角色&quot;，如下：</span><br><span class="line">名称：分配用户到角色</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/admin/assignment/index</span><br><span class="line">排序：6</span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">七、添加一个二级菜单&quot;菜单列表&quot;，如下：</span><br><span class="line">名称：菜单列表</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/admin/menu/index</span><br><span class="line">排序：7</span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">八、添加一个二级菜单&quot;用户列表&quot;，如下：</span><br><span class="line">名称：用户列表</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/admin/user/index</span><br><span class="line">排序：8</span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">九、添加一个二级菜单&quot;图书列表&quot;，如下：</span><br><span class="line">名称：图书列表</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/book/index</span><br><span class="line">排序：9</span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">具体如下</span><br></pre></td></tr></table></figure>
<p><img src="/img/Yii2/adminLTE_menu_add_02.png" alt="yii2-adminlte 添加菜单02"></p>
<h3 id="左侧菜单展示"><a href="#左侧菜单展示" class="headerlink" title="左侧菜单展示"></a>左侧菜单展示</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">修改</span><br><span class="line">&lt;project&gt;/backend/views/layouts/left.php</span><br><span class="line">文件（保证这个文件是从</span><br><span class="line">&lt;project&gt;/vendor/dmstr/yii2-adminlte-asset/example-views/yiisoft/yii2-app/views/layouts/left.php</span><br><span class="line">地方复制过来的，否则去修改源文件），添加如下代码：</span><br><span class="line">侧菜单上把权限的栏目加上,代码可直接复制，放置于 &lt;section class=<span class="string">"sidebar"</span>&gt;&lt;/section&gt;标签内即可</span><br><span class="line"></span><br><span class="line">        //第一种显示方式</span><br><span class="line">        <span class="variable">$callback</span> = <span class="keyword">function</span>(<span class="variable">$menu</span>)&#123;</span><br><span class="line">            <span class="built_in">return</span> [</span><br><span class="line">                <span class="string">'label'</span> =&gt; <span class="variable">$menu</span>[<span class="string">'name'</span>],</span><br><span class="line">                <span class="string">'url'</span> =&gt; [<span class="variable">$menu</span>[<span class="string">'route'</span>]],</span><br><span class="line">                <span class="string">'icon'</span> =&gt; <span class="variable">$menu</span>[<span class="string">'data'</span>],</span><br><span class="line">                <span class="string">'items'</span> =&gt; <span class="variable">$menu</span>[<span class="string">'children'</span>]</span><br><span class="line">            ];</span><br><span class="line">        &#125;;</span><br><span class="line">        use mdm\admin\components\MenuHelper;</span><br><span class="line">        <span class="variable">$items</span> = MenuHelper::getAssignedMenu(Yii::<span class="variable">$app</span>-&gt;user-&gt;id, null, <span class="variable">$callback</span>, <span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">echo</span> dmstr\widgets\Menu::widget([</span><br><span class="line">            <span class="string">'options'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'sidebar-menu'</span>, <span class="string">'data-widget'</span>=&gt; <span class="string">'tree'</span>],</span><br><span class="line">            <span class="string">'items'</span> =&gt; <span class="variable">$items</span></span><br><span class="line">        ]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //第二种显示方式</span><br><span class="line">        //use mdm\admin\components\MenuHelper;</span><br><span class="line">        use yii\bootstrap\Nav;</span><br><span class="line">        <span class="built_in">echo</span> Nav::widget(</span><br><span class="line">            [</span><br><span class="line">                //<span class="string">"encodeLabels"</span> =&gt; <span class="literal">false</span>,</span><br><span class="line">                <span class="string">"options"</span> =&gt; [<span class="string">"class"</span> =&gt; <span class="string">"sidebar-menu"</span>, <span class="string">'data-widget'</span>=&gt; <span class="string">'tree'</span>],</span><br><span class="line">                <span class="string">"items"</span> =&gt; MenuHelper::getAssignedMenu(Yii::<span class="variable">$app</span>-&gt;user-&gt;id),</span><br><span class="line">            ]</span><br><span class="line">        );</span><br></pre></td></tr></table></figure>
<p><img src="/img/Yii2/adminLTE_left.png" alt="yii2-adminlte 左侧菜单"></p>
<h3 id="整合完毕后存在问题（原因是-yii2-admin-2-0版本）"><a href="#整合完毕后存在问题（原因是-yii2-admin-2-0版本）" class="headerlink" title="整合完毕后存在问题（原因是 yii2-admin 2.0版本）"></a>整合完毕后存在问题（原因是 yii2-admin 2.0版本）</h3><p>一、菜单小图标并控制菜单显示：<br>我们在创建菜单的时候，没填写的”数据”一栏，我们填写 <a href="http://www.runoob.com/font-awesome/fontawesome-tutorial.html" target="_blank" rel="noopener"><font color="red">Font Awesome</font></a> 从这里面选择图标，例如在品牌图标中 使用这个是    fa fa-android  ；我们在 菜单“数据”一栏应该写 android，如图：<br><img src="/img/Yii2/bug_menu_icon.png" alt="bug 图标填写错误"></p>
<p>二、菜单列表中父级一直添加不上 ，父级名意图提示样式会跑到最左侧，路由意图样式会跑到最左侧（yii2-admin 版本1.0没有此问题）<br><img src="/img/Yii2/bug_menu_add_menu.png" alt="bug 新增菜单样式错误"></p>
<p>解决办法：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">一、解决父级添加不上：</span><br><span class="line">修改&lt;project&gt;/vendor/mdmsoft/yii2-admin/models/Menu.php中</span><br><span class="line">原来：</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">rules</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            [[<span class="string">'name'</span>], <span class="string">'required'</span>],</span><br><span class="line">            [[<span class="string">'parent_name'</span>], <span class="string">'in'</span>,</span><br><span class="line">                <span class="string">'range'</span> =&gt; <span class="keyword">static</span>::find()-&gt;select([<span class="string">'name'</span>])-&gt;column(),</span><br><span class="line">                <span class="string">'message'</span> =&gt; <span class="string">'Menu "&#123;value&#125;" not found.'</span>],</span><br><span class="line">            [[<span class="string">'parent'</span>, <span class="string">'route'</span>, <span class="string">'data'</span>, <span class="string">'order'</span>], <span class="string">'default'</span>],</span><br><span class="line">            [[<span class="string">'parent'</span>], <span class="string">'filterParent'</span>, <span class="string">'when'</span> =&gt; <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> !<span class="keyword">$this</span>-&gt;isNewRecord;</span><br><span class="line">            &#125;], </span><br><span class="line">            [[<span class="string">'order'</span>], <span class="string">'integer'</span>],</span><br><span class="line">            [[<span class="string">'route'</span>], <span class="string">'in'</span>,</span><br><span class="line">                <span class="string">'range'</span> =&gt; <span class="keyword">static</span>::getSavedRoutes(),</span><br><span class="line">                <span class="string">'message'</span> =&gt; <span class="string">'Route "&#123;value&#125;" not found.'</span>]</span><br><span class="line">        ];</span><br><span class="line">    &#125;</span><br><span class="line">    修改后：</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">rules</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            [[<span class="string">'name'</span>], <span class="string">'required'</span>],</span><br><span class="line">            [[<span class="string">'parent_name'</span>], <span class="string">'in'</span>,</span><br><span class="line">                <span class="string">'range'</span> =&gt; <span class="keyword">static</span>::find()-&gt;select([<span class="string">'name'</span>])-&gt;column(),</span><br><span class="line">                <span class="string">'message'</span> =&gt; <span class="string">'Menu "&#123;value&#125;" not found.'</span>],</span><br><span class="line">            [[<span class="string">'parent'</span>, <span class="string">'route'</span>, <span class="string">'data'</span>, <span class="string">'order'</span>], <span class="string">'default'</span>],</span><br><span class="line">            <span class="comment">/*[['parent'], 'filterParent', 'when' =&gt; function() &#123;</span></span><br><span class="line"><span class="comment">                return !$this-&gt;isNewRecord;</span></span><br><span class="line"><span class="comment">            &#125;],*/</span></span><br><span class="line">            [[<span class="string">'parent_name'</span>], <span class="string">'filterParent'</span>],<span class="comment">//修改此方法</span></span><br><span class="line">            [[<span class="string">'order'</span>], <span class="string">'integer'</span>],</span><br><span class="line">            [[<span class="string">'route'</span>], <span class="string">'in'</span>,</span><br><span class="line">                <span class="string">'range'</span> =&gt; <span class="keyword">static</span>::getSavedRoutes(),</span><br><span class="line">                <span class="string">'message'</span> =&gt; <span class="string">'Route "&#123;value&#125;" not found.'</span>]</span><br><span class="line">        ];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    原来：</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">filterParent</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $parent = <span class="keyword">$this</span>-&gt;parent;</span><br><span class="line">        $db = <span class="keyword">static</span>::getDb();</span><br><span class="line">        $query = (<span class="keyword">new</span> Query)-&gt;select([<span class="string">'parent'</span>])</span><br><span class="line">            -&gt;from(<span class="keyword">static</span>::tableName())</span><br><span class="line">            -&gt;where(<span class="string">'[[id]]=:id'</span>);</span><br><span class="line">        <span class="keyword">while</span> ($parent) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;id == $parent) &#123;</span><br><span class="line">                <span class="keyword">$this</span>-&gt;addError(<span class="string">'parent_name'</span>, <span class="string">'Loop detected.'</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            $parent = $query-&gt;params([<span class="string">':id'</span> =&gt; $parent])-&gt;scalar($db);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    修改后：</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">filterParent</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//修改此方法</span></span><br><span class="line">        $value = <span class="keyword">$this</span>-&gt;parent_name;</span><br><span class="line">        $parent = <span class="keyword">self</span>::findOne([<span class="string">'name'</span> =&gt; $value]);</span><br><span class="line">        <span class="keyword">if</span> ($parent) &#123;</span><br><span class="line">            $id = <span class="keyword">$this</span>-&gt;id;</span><br><span class="line">            $parent_id = $parent-&gt;id;</span><br><span class="line">            <span class="keyword">while</span> ($parent) &#123;</span><br><span class="line">                <span class="keyword">if</span> ($parent-&gt;id == $id) &#123;</span><br><span class="line">                    <span class="keyword">$this</span>-&gt;addError(<span class="string">'parent_name'</span>, <span class="string">'Loop detected.'</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                $parent = $parent-&gt;menuParent;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parent = $parent_id;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">二、解决意图提示样式</span><br><span class="line">下载 yiisoft/yii2-jui</span><br><span class="line">php composer.phar <span class="keyword">require</span> --prefer-dist yiisoft/yii2-jui</span><br><span class="line"></span><br><span class="line">现在已经可以上试试效果，完全没有问题，如果不想用form中原来的书写方式可以按下面的办法；</span><br><span class="line">修改 &lt;project&gt;/vendor/mdmsoft/yii2-admin/views/menu/_form.php中parent_name和route表单：</span><br><span class="line">修改之前：</span><br><span class="line">            <span class="meta">&lt;?</span>= $form-&gt;field($model, <span class="string">'parent_name'</span>)-&gt;textInput([<span class="string">'id'</span> =&gt; <span class="string">'parent_name'</span>]) <span class="meta">?&gt;</span></span><br><span class="line">            <span class="meta">&lt;?</span>= $form-&gt;field($model, <span class="string">'route'</span>)-&gt;textInput([<span class="string">'id'</span> =&gt; <span class="string">'route'</span>]) <span class="meta">?&gt;</span></span><br><span class="line">修改之后：</span><br><span class="line">            <span class="meta">&lt;?</span>= $form-&gt;field($model, <span class="string">'parent_name'</span>)-&gt;widget(<span class="string">'yii\jui\AutoComplete'</span>,[</span><br><span class="line">                <span class="string">'options'</span>=&gt;[<span class="string">'class'</span>=&gt;<span class="string">'form-control'</span>],</span><br><span class="line">                <span class="string">'clientOptions'</span>=&gt;[</span><br><span class="line">                    <span class="string">'source'</span>=&gt;  Menu::find()-&gt;select([<span class="string">'name'</span>])-&gt;column()</span><br><span class="line">                ]</span><br><span class="line">            ]) <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="meta">&lt;?</span>= $form-&gt;field($model, <span class="string">'route'</span>)-&gt;widget(<span class="string">'yii\jui\AutoComplete'</span>,[</span><br><span class="line">                <span class="string">'options'</span>=&gt;[<span class="string">'class'</span>=&gt;<span class="string">'form-control'</span>],</span><br><span class="line">                <span class="string">'clientOptions'</span>=&gt;[</span><br><span class="line">                    <span class="string">'source'</span>=&gt; Menu::getSavedRoutes()</span><br><span class="line">                ]</span><br><span class="line">            ]) <span class="meta">?&gt;</span></span><br><span class="line">三、在 &lt;project&gt;/vendor/mdmsoft/yii2-admin/views/role/_form.php 同样会有样式问题，按照二的步骤修改即可</span><br><span class="line">   使用到的时候再改就可以。</span><br><span class="line">   修改后的：</span><br><span class="line">   <span class="meta">&lt;?</span>=</span><br><span class="line">    $form-&gt;field($model, <span class="string">'ruleName'</span>)-&gt;widget(<span class="string">'yii\jui\AutoComplete'</span>, [</span><br><span class="line">        <span class="string">'options'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'form-control'</span>,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">'clientOptions'</span> =&gt; [</span><br><span class="line">            <span class="string">'source'</span> =&gt; array_keys(Yii::$app-&gt;authManager-&gt;getRules()),</span><br><span class="line">        ]</span><br><span class="line">    ])</span><br><span class="line">    <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="/img/Yii2/bug_menu_add_menu_ok_01.png" alt="bug 新增菜单父级改好1"></p>
<p><img src="/img/Yii2/bug_menu_add_menu_ok_02.png" alt="bug 新增菜单父级改好2"></p>
<p><img src="/img/Yii2/bug_menu_add_menu_ok_03.png" alt="bug 新增菜单父级改好3"></p>
</div><div class="tags"><a href="/tags/Yii/">Yii</a><a href="/tags/PHP/">PHP</a></div><div class="post-share"></div><div class="post-nav"><a href="/2015/09/04/Yii2/Yii2_杂项x/" class="pre">Yii2 杂项整理</a><a href="/2015/09/04/Yii2/Yii2_常用操作/" class="next">Yii2  -console层不为人知的秘密</a></div><div id="comments"></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="search-pla"></div><div id="toc" class="widget"><div class="widget-title"><i class="fa fa-fei">文章目录</i></div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#安装Yii2"><span class="toc-text">安装Yii2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置数据库"><span class="toc-text">配置数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用composer安装yii2-admin"><span class="toc-text">使用composer安装yii2-admin</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置yii2-admin运行环境"><span class="toc-text">配置yii2-admin运行环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建数据表"><span class="toc-text">创建数据表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#中文显示"><span class="toc-text">中文显示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置授权demo"><span class="toc-text">配置授权demo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加可分配权限列表"><span class="toc-text">添加可分配权限列表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加角色并分配权限"><span class="toc-text">添加角色并分配权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#分配角色"><span class="toc-text">分配角色</span></a></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#！！！测试权限之前"><span class="toc-text">！！！测试权限之前</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#开始测试"><span class="toc-text">开始测试</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#……"><span class="toc-text">……</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装yii2-AdminLTE后台主题"><span class="toc-text">安装yii2 AdminLTE后台主题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#引入主题"><span class="toc-text">引入主题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置数据库，登录"><span class="toc-text">配置数据库，登录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置简短路由"><span class="toc-text">配置简短路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启动更多分配路由"><span class="toc-text">启动更多分配路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加菜单"><span class="toc-text">添加菜单</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#左侧菜单展示"><span class="toc-text">左侧菜单展示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#整合完毕后存在问题（原因是-yii2-admin-2-0版本）"><span class="toc-text">整合完毕后存在问题（原因是 yii2-admin 2.0版本）</span></a></li></ol></li></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2022/07/24/java/springBoot_常见使用01/">springBoot -基本介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/06/14/JavaScript/JavaScript_20_原生发送请求/">JavaScript原生GET,POST请求</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/06/05/c_start/fC_03_demo_02/">C 语言随笔demo02</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/22/z_interview/算法/C算法_01/">-C算法01</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/12/java/springBoot_分环境打包/">springBoot -分环境打包</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/01/vue/axios_文件下载/">-vue_axios 文件下载</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/05/01/java/springBoot_文件下载/">springBoot -文件下载</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/04/03/math/m_03_析取范式/">离散数学-析取范式</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/04/02/math/m_02_联结词/">离散数学-联结词</a></li><li class="post-list-item"><a class="post-list-link" href="/2022/04/01/math/m_01_基础/">离散数学</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Apache/">Apache</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Axios/">Axios</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Browser/">Browser</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Browser/Developer/">Developer</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Browser/Developer/Chrome/">Chrome</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Browser/Developer/Chrome/Firefox/">Firefox</a><span class="category-list-count">1</span></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/C/">C</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a><span class="category-list-count">24</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/CentOS/">CentOS</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/CentOS/Ubuntu/">Ubuntu</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/C语言/">C语言</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Docker/">Docker</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ESX/">ESX</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Eclipse/">Eclipse</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Element/">Element</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/English/">English</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Flex/">Flex</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Git/">Git</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Grid/">Grid</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTTP/">HTTP</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/IDEA/">IDEA</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/IIS/">IIS</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Java/Maven/">Maven</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a><span class="category-list-count">23</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Jenkins/">Jenkins</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">44</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/CentOS/">CentOS</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/CentOS/MySQL/">MySQL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/CentOS/PHP/">PHP</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/CentOS/Redis/">Redis</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/Ubuntu/">Ubuntu</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/Vagrant/">Vagrant</a><span class="category-list-count">3</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Markdown/">Markdown</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Maths/">Maths</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyEclipse/">MyEclipse</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL8/">MySQL8</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mybatis/">Mybatis</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Oracle/">Oracle</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Other/">Other</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a><span class="category-list-count">29</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/Laravel/">Laravel</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/Swoole/">Swoole</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/Yii/">Yii</a><span class="category-list-count">7</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Postman/">Postman</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redmine/">Redmine</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/RegExp/">RegExp</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SSM/">SSM</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/SVN/">SVN</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Shipyard/">Shipyard</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tengine/">Tengine</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tomact/">Tomact</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/TypeScript/">TypeScript</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ubuntu/">Ubuntu</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/">Vue</a><span class="category-list-count">25</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/ECharts/">ECharts</a><span class="category-list-count">8</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue3/">Vue3</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/VueRouter4-x/">VueRouter4.x</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vuex/">Vuex</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/">WEB</a><span class="category-list-count">13</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/Emmet/">Emmet</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/HTTP/">HTTP</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/JavaScript/">JavaScript</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/JavaScript/setTimeout/">setTimeout</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/JavaScript/setTimeout/Promise/">Promise</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/JavaScript/单体模式/">单体模式</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/WEB/Vue/">Vue</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/WIN/">WIN</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Webpack/">Webpack</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Win/">Win</a><span class="category-list-count">5</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Win/Yii/">Yii</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Yii2/">Yii2</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Yii2/Laravel/">Laravel</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/drools/">drools</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/iframe/">iframe</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/jjwt/">jjwt</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mvn/">mvn</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/setTimeout/">setTimeout</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/setTimeout/setInterval/">setInterval</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/springBoot/">springBoot</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/svg/">svg</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/xxx/">xxx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/离散数学/">离散数学</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/计算机/">计算机</a><span class="category-list-count">5</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/head/" style="font-size: 15px;">head</a> <a href="/tags/math/" style="font-size: 15px;">math</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/ESX/" style="font-size: 15px;">ESX</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/运算符/" style="font-size: 15px;">运算符</a> <a href="/tags/iframe/" style="font-size: 15px;">iframe</a> <a href="/tags/setTimeout/" style="font-size: 15px;">setTimeout</a> <a href="/tags/Promise/" style="font-size: 15px;">Promise</a> <a href="/tags/优化/" style="font-size: 15px;">优化</a> <a href="/tags/Apache/" style="font-size: 15px;">Apache</a> <a href="/tags/TypeScript/" style="font-size: 15px;">TypeScript</a> <a href="/tags/setInterval/" style="font-size: 15px;">setInterval</a> <a href="/tags/Yii/" style="font-size: 15px;">Yii</a> <a href="/tags/Win/" style="font-size: 15px;">Win</a> <a href="/tags/Webpack/" style="font-size: 15px;">Webpack</a> <a href="/tags/PHP/" style="font-size: 15px;">PHP</a> <a href="/tags/C语言/" style="font-size: 15px;">C语言</a> <a href="/tags/CentOS/" style="font-size: 15px;">CentOS</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/crontab/" style="font-size: 15px;">crontab</a> <a href="/tags/MySQL5/" style="font-size: 15px;">MySQL5</a> <a href="/tags/Redis/" style="font-size: 15px;">Redis</a> <a href="/tags/PHP7/" style="font-size: 15px;">PHP7</a> <a href="/tags/xdebug/" style="font-size: 15px;">xdebug</a> <a href="/tags/Vagrant/" style="font-size: 15px;">Vagrant</a> <a href="/tags/Ubuntu/" style="font-size: 15px;">Ubuntu</a> <a href="/tags/CSS/" style="font-size: 15px;">CSS</a> <a href="/tags/BFC/" style="font-size: 15px;">BFC</a> <a href="/tags/animation/" style="font-size: 15px;">animation</a> <a href="/tags/float/" style="font-size: 15px;">float</a> <a href="/tags/text-align/" style="font-size: 15px;">text-align</a> <a href="/tags/margin/" style="font-size: 15px;">margin</a> <a href="/tags/position/" style="font-size: 15px;">position</a> <a href="/tags/transform/" style="font-size: 15px;">transform</a> <a href="/tags/CSS选择器/" style="font-size: 15px;">CSS选择器</a> <a href="/tags/svg/" style="font-size: 15px;">svg</a> <a href="/tags/Grid/" style="font-size: 15px;">Grid</a> <a href="/tags/Flex/" style="font-size: 15px;">Flex</a> <a href="/tags/Docker/" style="font-size: 15px;">Docker</a> <a href="/tags/Markdown/" style="font-size: 15px;">Markdown</a> <a href="/tags/drools/" style="font-size: 15px;">drools</a> <a href="/tags/WEB特殊字符/" style="font-size: 15px;">WEB特殊字符</a> <a href="/tags/IDEA/" style="font-size: 15px;">IDEA</a> <a href="/tags/SSM/" style="font-size: 15px;">SSM</a> <a href="/tags/JSP/" style="font-size: 15px;">JSP</a> <a href="/tags/MySQL/" style="font-size: 15px;">MySQL</a> <a href="/tags/BlueLake/" style="font-size: 15px;">BlueLake</a> <a href="/tags/Mybatis/" style="font-size: 15px;">Mybatis</a> <a href="/tags/MyEclipse/" style="font-size: 15px;">MyEclipse</a> <a href="/tags/Java/" style="font-size: 15px;">Java</a> <a href="/tags/jjwt/" style="font-size: 15px;">jjwt</a> <a href="/tags/Eclipse/" style="font-size: 15px;">Eclipse</a> <a href="/tags/springBoot/" style="font-size: 15px;">springBoot</a> <a href="/tags/mvn/" style="font-size: 15px;">mvn</a> <a href="/tags/Yii2/" style="font-size: 15px;">Yii2</a> <a href="/tags/Laravel/" style="font-size: 15px;">Laravel</a> <a href="/tags/离散数学/" style="font-size: 15px;">离散数学</a> <a href="/tags/MySQL8/" style="font-size: 15px;">MySQL8</a> <a href="/tags/Oracle/" style="font-size: 15px;">Oracle</a> <a href="/tags/Nginx/" style="font-size: 15px;">Nginx</a> <a href="/tags/MySQL-shell/" style="font-size: 15px;">MySQL-shell</a> <a href="/tags/WEB/" style="font-size: 15px;">WEB</a> <a href="/tags/Emmet/" style="font-size: 15px;">Emmet</a> <a href="/tags/Maths/" style="font-size: 15px;">Maths</a> <a href="/tags/Browser/" style="font-size: 15px;">Browser</a> <a href="/tags/Developer/" style="font-size: 15px;">Developer</a> <a href="/tags/Chrome/" style="font-size: 15px;">Chrome</a> <a href="/tags/Firefox/" style="font-size: 15px;">Firefox</a> <a href="/tags/English/" style="font-size: 15px;">English</a> <a href="/tags/Other/" style="font-size: 15px;">Other</a> <a href="/tags/Postman/" style="font-size: 15px;">Postman</a> <a href="/tags/HTTP/" style="font-size: 15px;">HTTP</a> <a href="/tags/HTTPS/" style="font-size: 15px;">HTTPS</a> <a href="/tags/cat/" style="font-size: 15px;">cat</a> <a href="/tags/split/" style="font-size: 15px;">split</a> <a href="/tags/编程/" style="font-size: 15px;">编程</a> <a href="/tags/tail/" style="font-size: 15px;">tail</a> <a href="/tags/sed/" style="font-size: 15px;">sed</a> <a href="/tags/find/" style="font-size: 15px;">find</a> <a href="/tags/less/" style="font-size: 15px;">less</a> <a href="/tags/more/" style="font-size: 15px;">more</a> <a href="/tags/curl/" style="font-size: 15px;">curl</a> <a href="/tags/cp/" style="font-size: 15px;">cp</a> <a href="/tags/Redmine/" style="font-size: 15px;">Redmine</a> <a href="/tags/ln/" style="font-size: 15px;">ln</a> <a href="/tags/nl/" style="font-size: 15px;">nl</a> <a href="/tags/nohup/" style="font-size: 15px;">nohup</a> <a href="/tags/locate/" style="font-size: 15px;">locate</a> <a href="/tags/mkdir/" style="font-size: 15px;">mkdir</a> <a href="/tags/rmdir/" style="font-size: 15px;">rmdir</a> <a href="/tags/ls/" style="font-size: 15px;">ls</a> <a href="/tags/tar/" style="font-size: 15px;">tar</a> <a href="/tags/mv/" style="font-size: 15px;">mv</a> <a href="/tags/rename/" style="font-size: 15px;">rename</a> <a href="/tags/RegExp/" style="font-size: 15px;">RegExp</a> <a href="/tags/vim/" style="font-size: 15px;">vim</a> <a href="/tags/uniq/" style="font-size: 15px;">uniq</a> <a href="/tags/rm/" style="font-size: 15px;">rm</a> <a href="/tags/scp/" style="font-size: 15px;">scp</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-archive"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/">2022</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/">2021</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/">2020</a><span class="archive-list-count">18</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/">2015</a><span class="archive-list-count">147</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/">2014</a><span class="archive-list-count">69</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/">2013</a><span class="archive-list-count">10</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="https://www.cnblogs.com/dafei4" title="联系方式QQ:1097625354" target="_blank">联系方式QQ:1097625354</a><ul></ul><a href="https://github.com" title="github" target="_blank">github</a><ul></ul><a href="https://www.jetbrains.com" title="Jetbrains" target="_blank">Jetbrains</a><ul></ul><a href="http://blog.jamci.cn" title="飛鳥的学习日记" target="_blank">飛鳥的学习日记</a><ul></ul><a href="https://icewak.github.io" title="三哥的日常" target="_blank">三哥的日常</a><ul></ul><a href="https://chaoo.oschina.io" title="BlueLake主题" target="_blank">BlueLake主题</a></div></div></div></div><a id="totop" href="#top"></a><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">Baidu Site Haritası</a> |  <a href="/atom.xml">订阅</a> |  <a href="/about/">关于</a></p><p>本站总访问量：<i id="busuanzi_container_site_pv"><i id="busuanzi_value_site_pv"></i></i>次</p><p><span> Copyright &copy;<a href="/." rel="nofollow">大飞.</a></span><span> Theme by<a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> BlueLake.</a></span><span> Count by<a href="http://busuanzi.ibruce.info/"> busuanzi.</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span></p></div></div></div><script src="/js/self_busuanzi.pure.mini.js?v=2.0.1"></script><script type="text/javascript" src="/js/search.json.js?v=2.0.1"></script><script type="text/javascript" src="/js/toctotop.js?v=2.0.1" async></script></body></html>