<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>JavaScript_常见使用_02</title>
      <link href="/2020/09/08/JavaScript/JavaScript_%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8_02/"/>
      <url>/2020/09/08/JavaScript/JavaScript_%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8_02/</url>
      <content type="html"><![CDATA[<p> JavaScript常用使用<br> JavaScript常用使用<br> JavaScript常用使用</p><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> daFei = &#123;</span><br><span class="line">    age: <span class="number">18</span>,</span><br><span class="line">    name: <span class="string">"daFei"</span>,</span><br><span class="line">    height: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"身高"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">daFei.height &amp;&amp; daFei.height();  <span class="comment">// 短路与</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"执行下面数据"</span>);</span><br></pre></td></tr></table></figure><h3 id="for-in-遍历对象"><a href="#for-in-遍历对象" class="headerlink" title="for/in 遍历对象"></a><code>for/in</code> 遍历对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">age</span>: <span class="number">18</span>, <span class="attr">name</span>: <span class="string">"daFei"</span>&#125;;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(key,<span class="string">"___"</span>,obj[key]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-特殊字符Unicode编码 -HTML -CSS -JavaScript</title>
      <link href="/2020/08/28/css/%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6Unicode%E7%BC%96%E7%A0%81/"/>
      <url>/2020/08/28/css/%E7%89%B9%E6%AE%8A%E5%AD%97%E7%AC%A6Unicode%E7%BC%96%E7%A0%81/</url>
      <content type="html"><![CDATA[<h3 id="after-content"><a href="#after-content" class="headerlink" title="after content"></a>after content</h3><p>在每个li后面添加一个星星</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">li</span><span class="selector-pseudo">:after</span> &#123;</span></span><br><span class="line"><span class="undefined">        content: "\2605";</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>在每个li后面添加一个星星<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>大飞<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>大飞<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>大飞<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>大飞<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>大飞<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/after_content.png" alt="after content" title="after content"></p><p>特殊字符Unicode编码 -HTML -CSS -JavaScript</p><h3 id="01-箭头类"><a href="#01-箭头类" class="headerlink" title="01)箭头类"></a>01)箭头类</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">⇠</td><td style="text-align:center">&amp;#8672</td><td style="text-align:center">\u21E0</td><td style="text-align:center">\21E0</td><td style="text-align:center">⇢</td><td style="text-align:center">&amp;#8674</td><td>\u21E2</td><td>\21E2</td></tr><tr><td style="text-align:center">⇡</td><td style="text-align:center">&amp;#8673</td><td style="text-align:center">\u21E1</td><td style="text-align:center">\21E1</td><td style="text-align:center">⇣</td><td style="text-align:center">&amp;#8675</td><td>\u21E3</td><td>\21E3</td></tr><tr><td style="text-align:center">↞</td><td style="text-align:center">&amp;#8606</td><td style="text-align:center">\u219E</td><td style="text-align:center">\219E</td><td style="text-align:center">↠</td><td style="text-align:center">&amp;#8608</td><td>\u21A0</td><td>\21A0</td></tr><tr><td style="text-align:center">↟</td><td style="text-align:center">&amp;#8607</td><td style="text-align:center">\u219F</td><td style="text-align:center">\219F</td><td style="text-align:center">↡</td><td style="text-align:center">&amp;#8609</td><td>\u21A1</td><td>\21A1</td></tr><tr><td style="text-align:center">←</td><td style="text-align:center">&amp;#8592</td><td style="text-align:center">\u2190</td><td style="text-align:center">\2190</td><td style="text-align:center">→</td><td style="text-align:center">&amp;#8594</td><td>\u2192</td><td>\2192</td></tr><tr><td style="text-align:center">↑</td><td style="text-align:center">&amp;#8593</td><td style="text-align:center">\u2191</td><td style="text-align:center">\2191</td><td style="text-align:center">↓</td><td style="text-align:center">&amp;#8595</td><td>\u2193</td><td>\2193</td></tr><tr><td style="text-align:center">↔</td><td style="text-align:center">&amp;#8596</td><td style="text-align:center">\u2194</td><td style="text-align:center">\2194</td><td style="text-align:center">↕</td><td style="text-align:center">&amp;#8597</td><td>\u2195</td><td>\2195</td></tr><tr><td style="text-align:center">⇄</td><td style="text-align:center">&amp;#8644</td><td style="text-align:center">\u21C4</td><td style="text-align:center">\21C4</td><td style="text-align:center">⇅</td><td style="text-align:center">&amp;#8645</td><td>\u21C5</td><td>\21C5</td></tr><tr><td style="text-align:center">↢</td><td style="text-align:center">&amp;#8610</td><td style="text-align:center">\u21A2</td><td style="text-align:center">\21A2</td><td style="text-align:center">↣</td><td style="text-align:center">&amp;#8611</td><td>\u21A3</td><td>\21A3</td></tr><tr><td style="text-align:center">⇞</td><td style="text-align:center">&amp;#8670</td><td style="text-align:center">\u21DE</td><td style="text-align:center">\21DE</td><td style="text-align:center">⇟</td><td style="text-align:center">&amp;#8671</td><td>\u21DF</td><td>\21DF</td></tr><tr><td style="text-align:center">↫</td><td style="text-align:center">&amp;#8619</td><td style="text-align:center">\u21AB</td><td style="text-align:center">\21AB</td><td style="text-align:center">↬</td><td style="text-align:center">&amp;#8620</td><td>\u21AC</td><td>\21AC</td></tr><tr><td style="text-align:center">⇜</td><td style="text-align:center">&amp;#8668</td><td style="text-align:center">\u21DC</td><td style="text-align:center">\21DC</td><td style="text-align:center">⇝</td><td style="text-align:center">&amp;#8669</td><td>\u21DD</td><td>\21DD</td></tr><tr><td style="text-align:center">↚</td><td style="text-align:center">&amp;#8602</td><td style="text-align:center">\u219A</td><td style="text-align:center">\219A</td><td style="text-align:center">↛</td><td style="text-align:center">&amp;#8603</td><td>\u219B</td><td>\219B</td></tr><tr><td style="text-align:center">↮</td><td style="text-align:center">&amp;#8622</td><td style="text-align:center">\u21AE</td><td style="text-align:center">\21AE</td><td style="text-align:center">↭</td><td style="text-align:center">&amp;#8621</td><td>\u21AD</td><td>\21AD</td></tr><tr><td style="text-align:center">⇦</td><td style="text-align:center">&amp;#8678</td><td style="text-align:center">\u21E6</td><td style="text-align:center">\21E6</td><td style="text-align:center">⇨</td><td style="text-align:center">&amp;#8680</td><td>\u21E8</td><td>\21E8</td></tr><tr><td style="text-align:center">⇧</td><td style="text-align:center">&amp;#8679</td><td style="text-align:center">\u21E7</td><td style="text-align:center">\21E7</td><td style="text-align:center">⇩</td><td style="text-align:center">&amp;#8681</td><td>\u21E9</td><td>\21E9</td></tr><tr><td style="text-align:center">▲</td><td style="text-align:center">&amp;#9650</td><td style="text-align:center">\u25B2</td><td style="text-align:center">\25B2</td><td style="text-align:center">►</td><td style="text-align:center">&amp;#9658</td><td>\u25BA</td><td>\25BA</td></tr><tr><td style="text-align:center">▼</td><td style="text-align:center">&amp;#9660</td><td style="text-align:center">\u25BC</td><td style="text-align:center">\25BC</td><td style="text-align:center">◄</td><td style="text-align:center">&amp;#9668</td><td>\u25C4</td><td>\25C4</td></tr><tr><td style="text-align:center">➔</td><td style="text-align:center">&amp;#10132</td><td style="text-align:center">\u2794</td><td style="text-align:center">\2794</td><td style="text-align:center">➙</td><td style="text-align:center">&amp;#10137</td><td>\u2799</td><td>\2799</td></tr><tr><td style="text-align:center">➨</td><td style="text-align:center">&amp;#10152</td><td style="text-align:center">\u27A8</td><td style="text-align:center">\27A8</td><td style="text-align:center">➲</td><td style="text-align:center">&amp;#10162</td><td>\u27B2</td><td>\27B2</td></tr><tr><td style="text-align:center">➜</td><td style="text-align:center">&amp;#10140</td><td style="text-align:center">\u279C</td><td style="text-align:center">\279C</td><td style="text-align:center">➞</td><td style="text-align:center">&amp;#10142</td><td>\u279E</td><td>\279E</td></tr><tr><td style="text-align:center">➟</td><td style="text-align:center">&amp;#10143</td><td style="text-align:center">\u279F</td><td style="text-align:center">\279F</td><td style="text-align:center">➠</td><td style="text-align:center">&amp;#10144</td><td>\u27A0</td><td>\27A0</td></tr><tr><td style="text-align:center">➤</td><td style="text-align:center">&amp;#10148</td><td style="text-align:center">\u27A4</td><td style="text-align:center">\27A4</td><td style="text-align:center">➥</td><td style="text-align:center">&amp;#10149</td><td>\u27A5</td><td>\27A5</td></tr><tr><td style="text-align:center">➦</td><td style="text-align:center">&amp;#10150</td><td style="text-align:center">\u27A6</td><td style="text-align:center">\27A6</td><td style="text-align:center">➧</td><td style="text-align:center">&amp;#10151</td><td>\u27A7</td><td>\27A7</td></tr><tr><td style="text-align:center">➵</td><td style="text-align:center">&amp;#10165</td><td style="text-align:center">\u27B5</td><td style="text-align:center">\27B5</td><td style="text-align:center">➸</td><td style="text-align:center">&amp;#10168</td><td>\u27B8</td><td>\27B8</td></tr><tr><td style="text-align:center">➼</td><td style="text-align:center">&amp;#10172</td><td style="text-align:center">\u27BC</td><td style="text-align:center">\27BC</td><td style="text-align:center">➽</td><td style="text-align:center">&amp;#10173</td><td>\u27BD</td><td>\27BD</td></tr><tr><td style="text-align:center">➺</td><td style="text-align:center">&amp;#10170</td><td style="text-align:center">\u27BA</td><td style="text-align:center">\27BA</td><td style="text-align:center">➳</td><td style="text-align:center">&amp;#10163</td><td>\u27B3</td><td>\27B3</td></tr><tr><td style="text-align:center">↷</td><td style="text-align:center">&amp;#8631</td><td style="text-align:center">\u21B7</td><td style="text-align:center">\21B7</td><td style="text-align:center">↶</td><td style="text-align:center">&amp;#8630</td><td>\u21B6</td><td>\21B6</td></tr><tr><td style="text-align:center">↻</td><td style="text-align:center">&amp;#8635</td><td style="text-align:center">\u21BB</td><td style="text-align:center">\21BB</td><td style="text-align:center">↺</td><td style="text-align:center">&amp;#8634</td><td>\u21BA</td><td>\21BA</td></tr><tr><td style="text-align:center">↵</td><td style="text-align:center">&amp;#8629</td><td style="text-align:center">\u21B5</td><td style="text-align:center">\21B5</td><td style="text-align:center">↯</td><td style="text-align:center">&amp;#8623</td><td>\u21AF</td><td>\21AF</td></tr><tr><td style="text-align:center">➾</td><td style="text-align:center">&amp;#10174</td><td style="text-align:center">\u27BE</td><td style="text-align:center">\27BE</td><td style="text-align:center"></td><td style="text-align:center"></td><td></td></tr></tbody></table><h3 id="02-❤-基本形状类"><a href="#02-❤-基本形状类" class="headerlink" title="02)❤ 基本形状类"></a>02)❤ 基本形状类</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">❤</td><td style="text-align:center">&amp;#10084</td><td style="text-align:center">\u2764</td><td style="text-align:center">\2764</td><td style="text-align:center">✈</td><td style="text-align:center">&amp;#9992</td><td>\u2708</td><td>\2708</td></tr><tr><td style="text-align:center">★</td><td style="text-align:center">&amp;#9733</td><td style="text-align:center">\u2605</td><td style="text-align:center">\2605</td><td style="text-align:center">✦</td><td style="text-align:center">&amp;#10022</td><td>\u2726</td><td>\2726</td></tr><tr><td style="text-align:center">☀</td><td style="text-align:center">&amp;#9728</td><td style="text-align:center">\u2600</td><td style="text-align:center">\2600</td><td style="text-align:center">◆</td><td style="text-align:center">&amp;#9670</td><td>\u25C6</td><td>\25C6</td></tr><tr><td style="text-align:center">◈</td><td style="text-align:center">&amp;#9672</td><td style="text-align:center">\u25C8</td><td style="text-align:center">\25C8</td><td style="text-align:center">▣</td><td style="text-align:center">&amp;#9635</td><td>\u25A3</td><td>\25A3</td></tr><tr><td style="text-align:center">☻</td><td style="text-align:center">&amp;#9787</td><td style="text-align:center">\u263B</td><td style="text-align:center">\263B</td><td style="text-align:center">☺</td><td style="text-align:center">&amp;#9786</td><td>\u263A</td><td>\263A</td></tr><tr><td style="text-align:center">☹</td><td style="text-align:center">&amp;#9785</td><td style="text-align:center">\u2639</td><td style="text-align:center">\2639</td><td style="text-align:center">✉</td><td style="text-align:center">&amp;#9993</td><td>\u2709</td><td>\2709</td></tr><tr><td style="text-align:center">☎</td><td style="text-align:center">&amp;#9742</td><td style="text-align:center">\u260E</td><td style="text-align:center">\260E</td><td style="text-align:center">☏</td><td style="text-align:center">&amp;#9743</td><td>\u260F</td><td>\260F</td></tr><tr><td style="text-align:center">✆</td><td style="text-align:center">&amp;#9990</td><td style="text-align:center">\u2706</td><td style="text-align:center">\2706</td><td style="text-align:center">�</td><td style="text-align:center">&amp;#65533</td><td>\uFFFD</td><td>\FFFD</td></tr><tr><td style="text-align:center">☁</td><td style="text-align:center">&amp;#9729</td><td style="text-align:center">\u2601</td><td style="text-align:center">\2601</td><td style="text-align:center">☂</td><td style="text-align:center">&amp;#9730</td><td>\u2602</td><td>\2602</td></tr><tr><td style="text-align:center">❄</td><td style="text-align:center">&amp;#10052</td><td style="text-align:center">\u2744</td><td style="text-align:center">\2744</td><td style="text-align:center">☃</td><td style="text-align:center">&amp;#9731</td><td>\u2603</td><td>\2603</td></tr><tr><td style="text-align:center">❈</td><td style="text-align:center">&amp;#10056</td><td style="text-align:center">\u2748</td><td style="text-align:center">\2748</td><td style="text-align:center">✿</td><td style="text-align:center">&amp;#10047</td><td>\u273F</td><td>\273F</td></tr><tr><td style="text-align:center">❀</td><td style="text-align:center">&amp;#10048</td><td style="text-align:center">\u2740</td><td style="text-align:center">\2740</td><td style="text-align:center">❁</td><td style="text-align:center">&amp;#10049</td><td>\u2741</td><td>\2741</td></tr><tr><td style="text-align:center">☘</td><td style="text-align:center">&amp;#9752</td><td style="text-align:center">\u2618</td><td style="text-align:center">\2618</td><td style="text-align:center">❦</td><td style="text-align:center">&amp;#10086</td><td>\u2766</td><td>\2766</td></tr><tr><td style="text-align:center">☕</td><td style="text-align:center">&amp;#9749</td><td style="text-align:center">\u9749</td><td style="text-align:center">\9749</td><td style="text-align:center">❂</td><td style="text-align:center">&amp;#10050</td><td>\u2742</td><td>\2742</td></tr><tr><td style="text-align:center">☥</td><td style="text-align:center">&amp;#9765</td><td style="text-align:center">\u2625</td><td style="text-align:center">\2625</td><td style="text-align:center">☮</td><td style="text-align:center">&amp;#9774</td><td>\u262E</td><td>\262E</td></tr><tr><td style="text-align:center">☯</td><td style="text-align:center">&amp;#9775</td><td style="text-align:center">\u262F</td><td style="text-align:center">\262F</td><td style="text-align:center">☪</td><td style="text-align:center">&amp;#9770</td><td>\u262A</td><td>\262A</td></tr><tr><td style="text-align:center">☤</td><td style="text-align:center">&amp;#9764</td><td style="text-align:center">\u2624</td><td style="text-align:center">\2624</td><td style="text-align:center">✄</td><td style="text-align:center">&amp;#9988</td><td>\u2704</td><td>\2704</td></tr><tr><td style="text-align:center">✂</td><td style="text-align:center">&amp;#9986</td><td style="text-align:center">\u2702</td><td style="text-align:center">\2702</td><td style="text-align:center">☸</td><td style="text-align:center">&amp;#9784</td><td>\u2638</td><td>\2638</td></tr><tr><td style="text-align:center">⚓</td><td style="text-align:center">&amp;#9875</td><td style="text-align:center">\u2693</td><td style="text-align:center">\2693</td><td style="text-align:center">☣</td><td style="text-align:center">&amp;#9763</td><td>\u2623</td><td>\2623</td></tr><tr><td style="text-align:center">⚠</td><td style="text-align:center">&amp;#9888</td><td style="text-align:center">\u26A0</td><td style="text-align:center">\26A0</td><td style="text-align:center">⚡</td><td style="text-align:center">&amp;#9889</td><td>\u26A1</td><td>\26A1</td></tr><tr><td style="text-align:center">☢</td><td style="text-align:center">&amp;#9762</td><td style="text-align:center">\u2622</td><td style="text-align:center">\2622</td><td style="text-align:center">♻</td><td style="text-align:center">&amp;#9851</td><td>\u267B</td><td>\267B</td></tr><tr><td style="text-align:center">♿</td><td style="text-align:center">&amp;#9855</td><td style="text-align:center">\u267F</td><td style="text-align:center">\267F</td><td style="text-align:center">☠</td><td style="text-align:center">&amp;#9760</td><td>\u2620</td><td>\2620</td></tr></tbody></table><h3 id="03-¥-货币类"><a href="#03-¥-货币类" class="headerlink" title="03)¥ 货币类"></a>03)¥ 货币类</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">$</td><td style="text-align:center">&amp;#36</td><td style="text-align:center">\u0024</td><td style="text-align:center">\0024</td><td style="text-align:center">¢</td><td style="text-align:center">&amp;#162</td><td>\u00A2</td><td>\00A2</td></tr><tr><td style="text-align:center">£</td><td style="text-align:center">&amp;#163</td><td style="text-align:center">\u00A3</td><td style="text-align:center">\00A3</td><td style="text-align:center">¤</td><td style="text-align:center">&amp;#164</td><td>\u00A4</td><td>\00A4</td></tr><tr><td style="text-align:center">€</td><td style="text-align:center">&amp;#8364</td><td style="text-align:center">\u20AC</td><td style="text-align:center">\20AC</td><td style="text-align:center">¥</td><td style="text-align:center">&amp;#165</td><td>\u00A5</td><td>\00A5</td></tr><tr><td style="text-align:center">₱</td><td style="text-align:center">&amp;#8369</td><td style="text-align:center">\u20B1</td><td style="text-align:center">\20B1</td><td style="text-align:center">₹</td><td style="text-align:center">&amp;#8377</td><td>\u20B9</td><td>\20B9</td></tr></tbody></table><h3 id="04-½-数学类"><a href="#04-½-数学类" class="headerlink" title="04)½ 数学类"></a>04)½ 数学类</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">½</td><td style="text-align:center">&amp;#189</td><td style="text-align:center">\u00BD</td><td style="text-align:center">\00BD</td><td style="text-align:center">¼</td><td style="text-align:center">&amp;#188</td><td>\u00BC</td><td>\00BC</td></tr><tr><td style="text-align:center">¾</td><td style="text-align:center">&amp;#190</td><td style="text-align:center">\u00BE</td><td style="text-align:center">\00BE</td><td style="text-align:center">⅓</td><td style="text-align:center">&amp;#8531</td><td>\u2153</td><td>\2153</td></tr><tr><td style="text-align:center">⅔</td><td style="text-align:center">&amp;#8532</td><td style="text-align:center">\u2154</td><td style="text-align:center">\2154</td><td style="text-align:center">⅛</td><td style="text-align:center">&amp;#8539</td><td>\u215B</td><td>\215B</td></tr><tr><td style="text-align:center">⅜</td><td style="text-align:center">&amp;#8540</td><td style="text-align:center">\u215C</td><td style="text-align:center">\215C</td><td style="text-align:center">⅝</td><td style="text-align:center">&amp;#8541</td><td>\u215D</td><td>\215D</td></tr><tr><td style="text-align:center">‰</td><td style="text-align:center">&amp;#8240</td><td style="text-align:center">\u2030</td><td style="text-align:center">\2030</td><td style="text-align:center">%</td><td style="text-align:center">&amp;#37</td><td>\u0025</td><td>\0025</td></tr><tr><td style="text-align:center">&lt;</td><td style="text-align:center">&amp;#60</td><td style="text-align:center">\u003C</td><td style="text-align:center">\003C</td><td style="text-align:center">&gt;</td><td style="text-align:center">&amp;#62</td><td>\u003E</td><td>\003E</td></tr></tbody></table><h3 id="05-♫-音乐符号类"><a href="#05-♫-音乐符号类" class="headerlink" title="05)♫ 音乐符号类"></a>05)♫ 音乐符号类</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">♩</td><td style="text-align:center">&amp;#9833</td><td style="text-align:center">\u2669</td><td style="text-align:center">\2669</td><td style="text-align:center">♪</td><td style="text-align:center">&amp;#9834</td><td>\u266A</td><td>\266A</td></tr><tr><td style="text-align:center">♫</td><td style="text-align:center">&amp;#9835</td><td style="text-align:center">\u266B</td><td style="text-align:center">\266B</td><td style="text-align:center">♬</td><td style="text-align:center">&amp;#9836</td><td>\u266C</td><td>\266C</td></tr><tr><td style="text-align:center">♭</td><td style="text-align:center">&amp;#9837</td><td style="text-align:center">\u266D</td><td style="text-align:center">\266D</td><td style="text-align:center">♯</td><td style="text-align:center">&amp;#9839</td><td>\u266F</td><td>\266F</td></tr></tbody></table><h3 id="06-☞-手型、铅笔、笔"><a href="#06-☞-手型、铅笔、笔" class="headerlink" title="06)☞ 手型、铅笔、笔"></a>06)☞ 手型、铅笔、笔</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">☜</td><td style="text-align:center">&amp;#9756</td><td style="text-align:center">\u261C</td><td style="text-align:center">\261C</td><td style="text-align:center">✍</td><td style="text-align:center">&amp;#9997</td><td>\u270D</td><td>\270D</td></tr><tr><td style="text-align:center">☞</td><td style="text-align:center">&amp;#9758</td><td style="text-align:center">\u261E</td><td style="text-align:center">\261E</td><td style="text-align:center">✎</td><td style="text-align:center">&amp;#9998</td><td>\u270E</td><td>\270E</td></tr><tr><td style="text-align:center">☝</td><td style="text-align:center">&amp;#9757</td><td style="text-align:center">\u261D</td><td style="text-align:center">\261D</td><td style="text-align:center">✐</td><td style="text-align:center">&amp;#10000</td><td>\u2710</td><td>\2710</td></tr><tr><td style="text-align:center">☟</td><td style="text-align:center">&amp;#9759</td><td style="text-align:center">\u261F</td><td style="text-align:center">\261F</td><td style="text-align:center">✏</td><td style="text-align:center">&amp;#9999</td><td>\u270F</td><td>\270F</td></tr><tr><td style="text-align:center">✌</td><td style="text-align:center">&amp;#9996</td><td style="text-align:center">\u270C</td><td style="text-align:center">\270C</td><td style="text-align:center">✑</td><td style="text-align:center">&amp;#10001</td><td>\u2711</td><td>\2711</td></tr><tr><td style="text-align:center">✒</td><td style="text-align:center">&amp;#10002</td><td style="text-align:center">\u2712</td><td style="text-align:center">\2712</td><td style="text-align:center"></td><td style="text-align:center"></td><td></td></tr></tbody></table><h3 id="07-✖-对错号"><a href="#07-✖-对错号" class="headerlink" title="07)✖ 对错号"></a>07)✖ 对错号</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center"></td><td style="text-align:center">&amp;#160</td><td style="text-align:center">\u00A0</td><td style="text-align:center">\00A0</td><td style="text-align:center">☐</td><td style="text-align:center">&amp;#9744</td><td>\u2610</td><td>\2610</td></tr><tr><td style="text-align:center">☑</td><td style="text-align:center">&amp;#9745</td><td style="text-align:center">\u2611</td><td style="text-align:center">\2611</td><td style="text-align:center">☒</td><td style="text-align:center">&amp;#9746</td><td>\u2612</td><td>\2612</td></tr><tr><td style="text-align:center">✓</td><td style="text-align:center">&amp;#10003</td><td style="text-align:center">\u2713</td><td style="text-align:center">\2713</td><td style="text-align:center">✔</td><td style="text-align:center">&amp;#10004</td><td>\u2714</td><td>\2714</td></tr><tr><td style="text-align:center">✕</td><td style="text-align:center">&amp;#10005</td><td style="text-align:center">\u10005</td><td style="text-align:center">\10005</td><td style="text-align:center">✖</td><td style="text-align:center">&amp;#10006</td><td>\u2716</td><td>\2716</td></tr><tr><td style="text-align:center">✗</td><td style="text-align:center">&amp;#10007</td><td style="text-align:center">\u2717</td><td style="text-align:center">\2717</td><td style="text-align:center">✘</td><td style="text-align:center">&amp;#10008</td><td>\u2718</td><td>\2718</td></tr></tbody></table><h3 id="08-★-星星"><a href="#08-★-星星" class="headerlink" title="08)★ 星星"></a>08)★ 星星</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">★</td><td style="text-align:center">&amp;#9733</td><td style="text-align:center">\u2605</td><td style="text-align:center">\2605</td><td style="text-align:center">✭</td><td style="text-align:center">&amp;#10029</td><td>\u272D</td><td>\272D</td></tr><tr><td style="text-align:center">✮</td><td style="text-align:center">&amp;#10030</td><td style="text-align:center">\u272E</td><td style="text-align:center">\272E</td><td style="text-align:center">☆</td><td style="text-align:center">&amp;#9734</td><td>\u2606</td><td>\2606</td></tr><tr><td style="text-align:center">✪</td><td style="text-align:center">&amp;#10026</td><td style="text-align:center">\u272A</td><td style="text-align:center">\272A</td><td style="text-align:center">✡</td><td style="text-align:center">&amp;#10017</td><td>\u2721</td><td>\2721</td></tr><tr><td style="text-align:center">✯</td><td style="text-align:center">&amp;#10031</td><td style="text-align:center">\u272F</td><td style="text-align:center">\272F</td><td style="text-align:center">✵</td><td style="text-align:center">&amp;#10037</td><td>\u2735</td><td>\2735</td></tr><tr><td style="text-align:center">✶</td><td style="text-align:center">&amp;#10038</td><td style="text-align:center">\u2736</td><td style="text-align:center">\2736</td><td style="text-align:center">✸</td><td style="text-align:center">&amp;#10040</td><td>\u2738</td><td>\2738</td></tr><tr><td style="text-align:center">✹</td><td style="text-align:center">&amp;#10041</td><td style="text-align:center">\u2739</td><td style="text-align:center">\2739</td><td style="text-align:center">✺</td><td style="text-align:center">&amp;#10042</td><td>\u273A</td><td>\273A</td></tr><tr><td style="text-align:center">✱</td><td style="text-align:center">&amp;#10033</td><td style="text-align:center">\u2731</td><td style="text-align:center">\2731</td><td style="text-align:center">✲</td><td style="text-align:center">&amp;#10034</td><td>\u2732</td><td>\2732</td></tr><tr><td style="text-align:center">✴</td><td style="text-align:center">&amp;#10036</td><td style="text-align:center">\u2734</td><td style="text-align:center">\2734</td><td style="text-align:center">✳</td><td style="text-align:center">&amp;#10035</td><td>\u2733</td><td>\2733</td></tr><tr><td style="text-align:center">✻</td><td style="text-align:center">&amp;#10043</td><td style="text-align:center">\u273B</td><td style="text-align:center">\273B</td><td style="text-align:center">✽</td><td style="text-align:center">&amp;#10045</td><td>\u273D</td><td>\273D</td></tr><tr><td style="text-align:center">❋</td><td style="text-align:center">&amp;#10059</td><td style="text-align:center">\u274B</td><td style="text-align:center">\274B</td><td style="text-align:center">❆</td><td style="text-align:center">&amp;#10054</td><td>\u2746</td><td>\2746</td></tr><tr><td style="text-align:center">❄</td><td style="text-align:center">&amp;#10052</td><td style="text-align:center">\u2744</td><td style="text-align:center">\2744</td><td style="text-align:center">❅</td><td style="text-align:center">&amp;#10053</td><td>\u2745</td><td>\2745</td></tr></tbody></table><h3 id="09-♒-星座类"><a href="#09-♒-星座类" class="headerlink" title="09)♒ 星座类"></a>09)♒ 星座类</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">♈</td><td style="text-align:center">&amp;#9800</td><td style="text-align:center">\u2648</td><td style="text-align:center">\2648</td><td style="text-align:center">♉</td><td style="text-align:center">&amp;#9801</td><td>\u2649</td><td>\2649</td></tr><tr><td style="text-align:center">♊</td><td style="text-align:center">&amp;#9802</td><td style="text-align:center">\u264A</td><td style="text-align:center">\264A</td><td style="text-align:center">♋</td><td style="text-align:center">&amp;#9803</td><td>\u264B</td><td>\264B</td></tr><tr><td style="text-align:center">♌</td><td style="text-align:center">&amp;#9804</td><td style="text-align:center">\u264C</td><td style="text-align:center">\264C</td><td style="text-align:center">♍</td><td style="text-align:center">&amp;#9805</td><td>\u264D</td><td>\264D</td></tr><tr><td style="text-align:center">♎</td><td style="text-align:center">&amp;#9806</td><td style="text-align:center">\u264E</td><td style="text-align:center">\264E</td><td style="text-align:center">♏</td><td style="text-align:center">&amp;#9807</td><td>\u264F</td><td>\264F</td></tr><tr><td style="text-align:center">♐</td><td style="text-align:center">&amp;#9808</td><td style="text-align:center">\u2650</td><td style="text-align:center">\2650</td><td style="text-align:center">♑</td><td style="text-align:center">&amp;#9809</td><td>\u2651</td><td>\2651</td></tr><tr><td style="text-align:center">♒</td><td style="text-align:center">&amp;#9810</td><td style="text-align:center">\u2652</td><td style="text-align:center">\2652</td><td style="text-align:center">♓</td><td style="text-align:center">&amp;#9811</td><td>\u2653</td><td>\2653</td></tr></tbody></table><h3 id="10-♚-国际象棋类"><a href="#10-♚-国际象棋类" class="headerlink" title="10)♚ 国际象棋类"></a>10)♚ 国际象棋类</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">♚</td><td style="text-align:center">&amp;#9818</td><td style="text-align:center">\u265A</td><td style="text-align:center">\265A</td><td style="text-align:center">♛</td><td style="text-align:center">&amp;#9819</td><td>\u265B</td><td>\265B</td></tr><tr><td style="text-align:center">♜</td><td style="text-align:center">&amp;#9820</td><td style="text-align:center">\u265C</td><td style="text-align:center">\265C</td><td style="text-align:center">♝</td><td style="text-align:center">&amp;#9821</td><td>\u265D</td><td>\265D</td></tr><tr><td style="text-align:center">♞</td><td style="text-align:center">&amp;#9822</td><td style="text-align:center">\u265E</td><td style="text-align:center">\265E</td><td style="text-align:center">♟</td><td style="text-align:center">&amp;#9823</td><td>\u265F</td><td>\265F</td></tr><tr><td style="text-align:center">♔</td><td style="text-align:center">&amp;#9812</td><td style="text-align:center">\u2654</td><td style="text-align:center">\2654</td><td style="text-align:center">♕</td><td style="text-align:center">&amp;#9813</td><td>\u2655</td><td>\2655</td></tr><tr><td style="text-align:center">♖</td><td style="text-align:center">&amp;#9814</td><td style="text-align:center">\u2656</td><td style="text-align:center">\2656</td><td style="text-align:center">♗</td><td style="text-align:center">&amp;#9815</td><td>\u2657</td><td>\2657</td></tr><tr><td style="text-align:center">♘</td><td style="text-align:center">&amp;#9816</td><td style="text-align:center">\u2658</td><td style="text-align:center">\2658</td><td style="text-align:center">♙</td><td style="text-align:center">&amp;#9817</td><td>\u2659</td><td>\2659</td></tr></tbody></table><h3 id="11-♣-扑克牌类"><a href="#11-♣-扑克牌类" class="headerlink" title="11)♣ 扑克牌类"></a>11)♣ 扑克牌类</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">♠</td><td style="text-align:center">&amp;#9824</td><td style="text-align:center">\u2660</td><td style="text-align:center">\2660</td><td style="text-align:center">♣</td><td style="text-align:center">&amp;#9827</td><td>\u2663</td><td>\2663</td></tr><tr><td style="text-align:center">♥</td><td style="text-align:center">&amp;#9829</td><td style="text-align:center">\u2665</td><td style="text-align:center">\2665</td><td style="text-align:center">♦</td><td style="text-align:center">&amp;#9830</td><td>\u2666</td><td>\2666</td></tr><tr><td style="text-align:center">♤</td><td style="text-align:center">&amp;#9828</td><td style="text-align:center">\u2664</td><td style="text-align:center">\2664</td><td style="text-align:center">♧</td><td style="text-align:center">&amp;#9831</td><td>\u2667</td><td>\2667</td></tr><tr><td style="text-align:center">♡</td><td style="text-align:center">&amp;#9825</td><td style="text-align:center">\u2661</td><td style="text-align:center">\2661</td><td style="text-align:center">♢</td><td style="text-align:center">&amp;#9826</td><td>\u2662</td><td>\2662</td></tr></tbody></table><h3 id="12-Ω-希腊字母"><a href="#12-Ω-希腊字母" class="headerlink" title="12)Ω 希腊字母"></a>12)Ω 希腊字母</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">Α</td><td style="text-align:center">&amp;#913</td><td style="text-align:center">\u0391</td><td style="text-align:center">\0391</td><td style="text-align:center">Β</td><td style="text-align:center">&amp;#914</td><td>\u0392</td><td>\0392</td></tr><tr><td style="text-align:center">Γ</td><td style="text-align:center">&amp;#915</td><td style="text-align:center">\u0393</td><td style="text-align:center">\0393</td><td style="text-align:center">Δ</td><td style="text-align:center">&amp;#916</td><td>\u0394</td><td>\0394</td></tr><tr><td style="text-align:center">Ε</td><td style="text-align:center">&amp;#917</td><td style="text-align:center">\u0395</td><td style="text-align:center">\0395</td><td style="text-align:center">Ζ</td><td style="text-align:center">&amp;#918</td><td>\u0396</td><td>\0396</td></tr><tr><td style="text-align:center">Η</td><td style="text-align:center">&amp;#919</td><td style="text-align:center">\u0397</td><td style="text-align:center">\0397</td><td style="text-align:center">Θ</td><td style="text-align:center">&amp;#920</td><td>\u0398</td><td>\0398</td></tr><tr><td style="text-align:center">Ι</td><td style="text-align:center">&amp;#921</td><td style="text-align:center">\u0399</td><td style="text-align:center">\0399</td><td style="text-align:center">Κ</td><td style="text-align:center">&amp;#922</td><td>\u039A</td><td>\039A</td></tr><tr><td style="text-align:center">Λ</td><td style="text-align:center">&amp;#923</td><td style="text-align:center">\u039B</td><td style="text-align:center">\039B</td><td style="text-align:center">Μ</td><td style="text-align:center">&amp;#924</td><td>\u039C</td><td>\039C</td></tr><tr><td style="text-align:center">Ν</td><td style="text-align:center">&amp;#925</td><td style="text-align:center">\u039D</td><td style="text-align:center">\039D</td><td style="text-align:center">Ξ</td><td style="text-align:center">&amp;#926</td><td>\u039E</td><td>\039E</td></tr><tr><td style="text-align:center">Ο</td><td style="text-align:center">&amp;#927</td><td style="text-align:center">\u039F</td><td style="text-align:center">\039F</td><td style="text-align:center">Π</td><td style="text-align:center">&amp;#928</td><td>\u03A0</td><td>\03A0</td></tr><tr><td style="text-align:center">Ρ</td><td style="text-align:center">&amp;#929</td><td style="text-align:center">\u03A1</td><td style="text-align:center">\03A1</td><td style="text-align:center">Σ</td><td style="text-align:center">&amp;#931</td><td>\u03A3</td><td>\03A3</td></tr><tr><td style="text-align:center">Τ</td><td style="text-align:center">&amp;#932</td><td style="text-align:center">\u03A4</td><td style="text-align:center">\03A4</td><td style="text-align:center">Υ</td><td style="text-align:center">&amp;#933</td><td>\u03A5</td><td>\03A5</td></tr><tr><td style="text-align:center">Φ</td><td style="text-align:center">&amp;#934</td><td style="text-align:center">\u03A6</td><td style="text-align:center">\03A6</td><td style="text-align:center">Χ</td><td style="text-align:center">&amp;#935</td><td>\u03A7</td><td>\03A7</td></tr><tr><td style="text-align:center">Ψ</td><td style="text-align:center">&amp;#936</td><td style="text-align:center">\u03A8</td><td style="text-align:center">\03A8</td><td style="text-align:center">Ω</td><td style="text-align:center">&amp;#937</td><td>\u03A9</td><td>\03A9</td></tr></tbody></table><h3 id="13-☩-十字"><a href="#13-☩-十字" class="headerlink" title="13)☩ 十字"></a>13)☩ 十字</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">☨</td><td style="text-align:center">&amp;#9768</td><td style="text-align:center">\u2628</td><td style="text-align:center">\2628</td><td style="text-align:center">☩</td><td style="text-align:center">&amp;#9769</td><td>\u2629</td><td>\2629</td></tr><tr><td style="text-align:center">✝</td><td style="text-align:center">&amp;#10013</td><td style="text-align:center">\u271D</td><td style="text-align:center">\271D</td><td style="text-align:center">✞</td><td style="text-align:center">&amp;#10014</td><td>\u271E</td><td>\271E</td></tr><tr><td style="text-align:center">✟</td><td style="text-align:center">&amp;#10015</td><td style="text-align:center">\u271F</td><td style="text-align:center">\271F</td><td style="text-align:center">✠</td><td style="text-align:center">&amp;#10016</td><td>\u2720</td><td>\2720</td></tr><tr><td style="text-align:center">✚</td><td style="text-align:center">&amp;#10010</td><td style="text-align:center">\u271A</td><td style="text-align:center">\271A</td><td style="text-align:center">†</td><td style="text-align:center">&amp;#8224</td><td>\u2020</td><td>\2020</td></tr><tr><td style="text-align:center">✢</td><td style="text-align:center">&amp;#10018</td><td style="text-align:center">\u2722</td><td style="text-align:center">\2722</td><td style="text-align:center">✤</td><td style="text-align:center">&amp;#10020</td><td>\u2724</td><td>\2724</td></tr><tr><td style="text-align:center">✣</td><td style="text-align:center">&amp;#10019</td><td style="text-align:center">\u2723</td><td style="text-align:center">\2723</td><td style="text-align:center">✥</td><td style="text-align:center">&amp;#10021</td><td>\u2725</td><td>\2725</td></tr></tbody></table><h3 id="14-©-法律符号"><a href="#14-©-法律符号" class="headerlink" title="14)© 法律符号"></a>14)© 法律符号</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">®</td><td style="text-align:center">&amp;#174</td><td style="text-align:center">\u00AE</td><td style="text-align:center">\00AE</td><td style="text-align:center">©</td><td style="text-align:center">&amp;#169</td><td>\u00A9</td><td>\00A9</td></tr><tr><td style="text-align:center">℗</td><td style="text-align:center">&amp;#8471</td><td style="text-align:center">\u2117</td><td style="text-align:center">\2117</td><td style="text-align:center">™</td><td style="text-align:center">&amp;#153</td><td>\u0099</td><td>\0099</td></tr><tr><td style="text-align:center">℠</td><td style="text-align:center">&amp;#8480</td><td style="text-align:center">\u2120</td><td style="text-align:center">\2120</td><td style="text-align:center"></td><td style="text-align:center"></td><td></td></tr></tbody></table><h3 id="15-标点和符号"><a href="#15-标点和符号" class="headerlink" title="15)@ 标点和符号"></a>15)@ 标点和符号</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">«</td><td style="text-align:center">&amp;#171</td><td style="text-align:center">\u00AB</td><td style="text-align:center">\00AB</td><td style="text-align:center">»</td><td style="text-align:center">&amp;#187</td><td>\u00BB</td><td>\00BB</td></tr><tr><td style="text-align:center">‹</td><td style="text-align:center">&amp;#139</td><td style="text-align:center">\u008B</td><td style="text-align:center">\008B</td><td style="text-align:center">›</td><td style="text-align:center">&amp;#155</td><td>\u009B</td><td>\009B</td></tr><tr><td style="text-align:center">“</td><td style="text-align:center">&amp;#8220</td><td style="text-align:center">\u201C</td><td style="text-align:center">\201C</td><td style="text-align:center">”</td><td style="text-align:center">&amp;#8221</td><td>\u201D</td><td>\201D</td></tr><tr><td style="text-align:center">‘</td><td style="text-align:center">&amp;#8216</td><td style="text-align:center">\u2018</td><td style="text-align:center">\2018</td><td style="text-align:center">’</td><td style="text-align:center">&amp;#8217</td><td>\u2019</td><td>\2019</td></tr><tr><td style="text-align:center">•</td><td style="text-align:center">&amp;#8226</td><td style="text-align:center">\u2022</td><td style="text-align:center">\2022</td><td style="text-align:center">◦</td><td style="text-align:center">&amp;#9702</td><td>\u25E6</td><td>\25E6</td></tr><tr><td style="text-align:center">¡</td><td style="text-align:center">&amp;#161</td><td style="text-align:center">\u00A1</td><td style="text-align:center">\00A1</td><td style="text-align:center">¿</td><td style="text-align:center">&amp;#191</td><td>\u00BF</td><td>\00BF</td></tr><tr><td style="text-align:center">℅</td><td style="text-align:center">&amp;#8453</td><td style="text-align:center">\u2105</td><td style="text-align:center">\2105</td><td style="text-align:center">№</td><td style="text-align:center">&amp;#8470</td><td>\u2116</td><td>\2116</td></tr><tr><td style="text-align:center">&amp;</td><td style="text-align:center">&amp;#38</td><td style="text-align:center">\u0026</td><td style="text-align:center">\0026</td><td style="text-align:center">@</td><td style="text-align:center">&amp;#64</td><td>\u0040</td><td>\0040</td></tr><tr><td style="text-align:center">℞</td><td style="text-align:center">&amp;#8478</td><td style="text-align:center">\u211E</td><td style="text-align:center">\211E</td><td style="text-align:center">℃</td><td style="text-align:center">&amp;#8451</td><td>\u2103</td><td>\2103</td></tr><tr><td style="text-align:center">℉</td><td style="text-align:center">&amp;#8457</td><td style="text-align:center">\u2109</td><td style="text-align:center">\2109</td><td style="text-align:center">°</td><td style="text-align:center">&amp;#176</td><td>\u00B0</td><td>\00B0</td></tr><tr><td style="text-align:center">\</td><td style="text-align:center"></td><td style="text-align:center">&amp;#124</td><td style="text-align:center">\u007C</td><td style="text-align:center">\007C</td><td style="text-align:center">¦</td><td>&amp;#166</td><td>\u00A6</td><td>\00A6</td></tr><tr><td style="text-align:center">–</td><td style="text-align:center">&amp;#8211</td><td style="text-align:center">\u2013</td><td style="text-align:center">\2013</td><td style="text-align:center">—</td><td style="text-align:center">&amp;#8212</td><td>\u2014</td><td>\2014</td></tr><tr><td style="text-align:center">…</td><td style="text-align:center">&amp;#8230</td><td style="text-align:center">\u2026</td><td style="text-align:center">\2026</td><td style="text-align:center">¶</td><td style="text-align:center">&amp;#182</td><td>\u00B6</td><td>\00B6</td></tr><tr><td style="text-align:center">∼</td><td style="text-align:center">&amp;#8764</td><td style="text-align:center">\u223C</td><td style="text-align:center">\223C</td><td style="text-align:center">≠</td><td style="text-align:center">&amp;#8800</td><td>\u2260</td><td>\2260</td></tr></tbody></table><h3 id="16-♂-其他"><a href="#16-♂-其他" class="headerlink" title="16)♂ 其他"></a>16)♂ 其他</h3><table><thead><tr><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center">符号</th><th style="text-align:center">UNICODE</th><th style="text-align:center"></th><th style="text-align:center"></th><th></th><th></th></tr></thead><tbody><tr><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td style="text-align:center">HTML</td><td style="text-align:center">JS</td><td style="text-align:center">CSS</td><td></td><td></td></tr><tr><td style="text-align:center">☽</td><td style="text-align:center">&amp;#9789</td><td style="text-align:center">\u263D</td><td style="text-align:center">\263D</td><td style="text-align:center">♃</td><td style="text-align:center">&amp;#9795</td><td>\u2643</td><td>\2643</td></tr><tr><td style="text-align:center">☾</td><td style="text-align:center">&amp;#9790</td><td style="text-align:center">\u263E</td><td style="text-align:center">\263E</td><td style="text-align:center">♄</td><td style="text-align:center">&amp;#9796</td><td>\u2644</td><td>\2644</td></tr><tr><td style="text-align:center">♂</td><td style="text-align:center">&amp;#9794</td><td style="text-align:center">\u2642</td><td style="text-align:center">\2642</td><td style="text-align:center">♅</td><td style="text-align:center">&amp;#9797</td><td>\u2645</td><td>\2645</td></tr><tr><td style="text-align:center">♀</td><td style="text-align:center">&amp;#9792</td><td style="text-align:center">\u2640</td><td style="text-align:center">\2640</td><td style="text-align:center">♆</td><td style="text-align:center">&amp;#9798</td><td>\u2646</td><td>\2646</td></tr><tr><td style="text-align:center">☿</td><td style="text-align:center">&amp;#9791</td><td style="text-align:center">\u263F</td><td style="text-align:center">\263F</td><td style="text-align:center">♇</td><td style="text-align:center">&amp;#9799</td><td>\u2647</td><td>\2647</td></tr><tr><td style="text-align:center">♁</td><td style="text-align:center">&amp;#9793</td><td style="text-align:center">\u2641</td><td style="text-align:center">\2641</td><td style="text-align:center"></td><td style="text-align:center"></td><td></td><td></td></tr></tbody></table>]]></content>
      
      <categories>
          
          <category> HTML </category>
          
          <category> CSS </category>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
            <tag> CSS </tag>
            
            <tag> HTML </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>CSS 属性 -float</title>
      <link href="/2020/08/10/css/css_float/"/>
      <url>/2020/08/10/css/css_float/</url>
      <content type="html"><![CDATA[<p><code>css</code> 属性<code>float</code>,<code>六</code>个基本规则<br><code>css</code> 属性<code>float</code>,<code>六</code>个基本规则<br><code>css</code> 属性<code>float</code>,<code>六</code>个基本规则</p><h3 id="规则一"><a href="#规则一" class="headerlink" title="规则一"></a>规则一</h3><p>元素一但浮动后,脱离标准流,然后向左或者向右平移，一直平移直到碰到了<em>所处的容器</em>的边框，或者碰到<strong>另外一个浮动的元素</strong></p><h3 id="规则二"><a href="#规则二" class="headerlink" title="规则二"></a>规则二</h3><p>浮动元素不能与行内级内容层叠,行内内容会被浮动元素推出<br>比如:行内级元素: inline-block元素、块级元素的文字内容</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    div &#123;</span></span><br><span class="line"><span class="undefined">        float: left;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#c0c0c0</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">span</span> &#123; <span class="attribute">background-color</span>: <span class="number">#eee8aa</span>; &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">strong</span> &#123; <span class="attribute">background-color</span>: <span class="number">#dda0dd</span>; &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>我是span<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span>我是strong<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span>我是div,我浮动<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/float/rule_2.png" alt="rule_02" title="rule_02"></p><h3 id="规则三"><a href="#规则三" class="headerlink" title="规则三"></a>规则三</h3><p>行内级元素、inline-block元素浮动后,其顶部将于所在行的顶部对齐</p><p>demo中图片和<code>网站用于设计网页</code>这行文字,浮动后还是在这一行</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> &#123;<span class="attribute">width</span>: <span class="number">500px</span>;&#125;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">img</span> &#123; <span class="attribute">float</span>: left; &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    超文本标记语言（英语：HyperText Markup Language，简称：HTML）</span><br><span class="line">    是一种用于创建网页的标准标记语言。HTML是一种基础技术，</span><br><span class="line">    常与CSS、JavaScript一起被众多 <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"http://localhost:5000/img/avatar.png"</span> <span class="attr">style</span>=<span class="string">"width: 50px;height: 50px;"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span>网站用于设计网页、网页应用程序以及移动应用程序的用户界面</span><br><span class="line">    。</span><br><span class="line">    网页浏览器可以读取HTML文件，并将其渲染成可视化网页。</span><br><span class="line">    HTML描述了一个网站的结构语义随着线索的呈现，使之成为一种标记语言而非编程语言。</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/float/rule_3.png" alt="rule_03" title="rule_03"></p><h3 id="规则四"><a href="#规则四" class="headerlink" title="规则四"></a>规则四</h3><p>如果元素是向左(右)浮动,浮动元素的左(右)边界不能超出包含块的左(右)边界</p><h3 id="规则五"><a href="#规则五" class="headerlink" title="规则五"></a>规则五</h3><p>浮动元素之间不能层叠<br>如果一个元素浮动,另一个浮动元素已经在那个位置了,后面的浮动元素将紧贴着前一个浮动元素(左浮动找左浮动,右侧浮动找右浮动)<br>如果水平方向剩余的的空间不够实现浮动元素,浮动元素将向下移动,直到有充足的空间位置</p><h3 id="规则六"><a href="#规则六" class="headerlink" title="规则六"></a>规则六</h3><p>浮动元素的顶端不能超过包含块的顶端,也不能超过之前所有浮动元素的顶端</p><h3 id="demo1"><a href="#demo1" class="headerlink" title="demo1:"></a>demo1:</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 990px;</span></span><br><span class="line"><span class="undefined">        height: 500px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#c0c0c0</span>;</span></span><br><span class="line"><span class="undefined">        margin: 0 auto;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.wrapper</span> &#123; <span class="comment">/* 处理最后一个多出的margin */</span> <span class="comment">/* 使用公式 */</span></span></span><br><span class="line"><span class="undefined">        margin-right: -10px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.item</span> &#123;</span></span><br><span class="line"><span class="undefined">        float: left;</span></span><br><span class="line"><span class="undefined">        margin-top: 10px;</span></span><br><span class="line"><span class="undefined">        width: 190px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#eee8aa</span>;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">margin-right</span>: 10<span class="selector-tag">px</span>; <span class="comment">/* 注意这行和 .wrapper 对应 */</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item3"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item4"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item5"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item6"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item7"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item8"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item9"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item item10"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/float/demo_01.png" alt="demo_01" title="demo_01"></p><p>公式公式</p><p>width of containing block= ‘margin-left’ + ‘border-left-width’ + ‘padding-left’ + ‘width’ + ‘padding-right’ + ‘border-right-width’ + ‘margin-right’ </p><h3 id="demo2"><a href="#demo2" class="headerlink" title="demo2"></a>demo2</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.container</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 990px;</span></span><br><span class="line"><span class="undefined">        height: 500px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#c0c0c0</span>;</span></span><br><span class="line"><span class="undefined">        margin: 0 auto;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.item</span> &#123;</span></span><br><span class="line"><span class="undefined">        float: left;</span></span><br><span class="line"><span class="undefined">        margin-right: 10px;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        width: 240px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#eee8aa</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.itema</span> &#123;</span></span><br><span class="line"><span class="undefined">        height: 306px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.itemb</span> &#123;</span></span><br><span class="line"><span class="undefined">        height: 148px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.wrapper</span> &#123;</span></span><br><span class="line"><span class="undefined">        margin-right: -10px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.item-last</span> &#123;</span></span><br><span class="line"><span class="undefined">        margin-top: 10px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item itema"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item itema"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item itemb"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item itemb"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item itemb item-last"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item itemb item-last"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/float/demo_02.png" alt="demo_02" title="demo_02"></p><h3 id="demo3"><a href="#demo3" class="headerlink" title="demo3"></a>demo3</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    h2 &#123;</span></span><br><span class="line"><span class="undefined">        margin: 0;</span></span><br><span class="line"><span class="undefined">        padding: 0;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    a&#123;</span></span><br><span class="line"><span class="undefined">        text-decoration: none;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.header</span>&#123;</span></span><br><span class="line"><span class="undefined">        width: 1100px;</span></span><br><span class="line"><span class="undefined">        margin: 0 auto;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#c0c0c0</span>;</span></span><br><span class="line"><span class="undefined">        height: 49px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.f-left</span>&#123;</span></span><br><span class="line"><span class="undefined">        float: left;   </span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.f-right</span>&#123;</span></span><br><span class="line"><span class="undefined">        float: right;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.header-left</span>&#123;</span></span><br><span class="line"><span class="undefined">        font-size: 14px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.header-left</span> <span class="selector-tag">h2</span>,<span class="selector-class">.header-left</span> <span class="selector-tag">span</span>,<span class="selector-class">.header-left</span> <span class="selector-tag">a</span>&#123;</span></span><br><span class="line"><span class="undefined">        float: left;</span></span><br><span class="line"><span class="undefined">        margin-right: 20px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.header-left</span> <span class="selector-tag">h2</span>&#123;</span></span><br><span class="line"><span class="undefined">        font-size: 22px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.header-left</span> <span class="selector-tag">span</span>&#123;</span></span><br><span class="line"><span class="undefined">      </span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.header-left</span> <span class="selector-class">.f-left</span>&#123;</span></span><br><span class="line"><span class="undefined">        margin-top: 9px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.header-right</span>&#123;</span></span><br><span class="line"><span class="undefined">        margin-top: 9px;</span></span><br><span class="line"><span class="undefined">        font-size: 14px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header-left f-left"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>美妆专区<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"search f-left"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>热搜词：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>面膜<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>面膜<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>面膜<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>面膜<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>面膜<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"header-right f-right"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>更多好货&gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/float/demo_03.png" alt="demo_03" title="demo_03"></p><h3 id="demo-4-把2px-变为1px"><a href="#demo-4-把2px-变为1px" class="headerlink" title="demo 4, 把2px,变为1px"></a>demo 4, 把2px,变为1px</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    ul &#123;</span></span><br><span class="line"><span class="undefined">        list-style: none;</span></span><br><span class="line"><span class="undefined">        margin: 0;</span></span><br><span class="line"><span class="undefined">        padding: 0;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.brand</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 1100px;</span></span><br><span class="line"><span class="undefined">        height: 180px;</span></span><br><span class="line"><span class="undefined">        margin: 0 auto;</span></span><br><span class="line"><span class="css">        <span class="comment">/*background-color: #c0c0c0;*/</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.brand</span> <span class="selector-tag">ul</span> &#123;</span></span><br><span class="line"><span class="undefined">        margin-left: -10px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.brand</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> &#123;</span></span><br><span class="line"><span class="undefined">        float: left;</span></span><br><span class="line"><span class="undefined">        width: 220px;</span></span><br><span class="line"><span class="undefined">        height: 167px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#dda0dd</span>;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">margin-left</span>: <span class="selector-tag">-1px</span>; <span class="comment">/*  减少1px,去掉边框的2像素 */</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ff6b81</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"brand"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/float/demo_04.png" alt="demo_04" title="demo_04"></p><h3 id="demo-5-把2px-变为1px"><a href="#demo-5-把2px-变为1px" class="headerlink" title="demo 5, 把2px 变为1px"></a>demo 5, 把2px 变为1px</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    ul &#123;</span></span><br><span class="line"><span class="undefined">        list-style: none;</span></span><br><span class="line"><span class="undefined">        margin: 0;</span></span><br><span class="line"><span class="undefined">        padding: 0;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.today</span>&#123;</span></span><br><span class="line"><span class="undefined">        width: 1100px;</span></span><br><span class="line"><span class="undefined">        margin: 0 auto;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.today</span> <span class="selector-tag">ul</span>&#123;</span></span><br><span class="line"><span class="undefined">        margin-right: -6px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.today</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span>&#123;</span></span><br><span class="line"><span class="undefined">        float: left;</span></span><br><span class="line"><span class="undefined">        width: 420px;</span></span><br><span class="line"><span class="undefined">        height: 190px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#c0c0c0</span>;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#ff6b81</span>;</span></span><br><span class="line"><span class="undefined">        margin-right: -1px;</span></span><br><span class="line"><span class="undefined">        margin-bottom: -1px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.today</span> <span class="selector-tag">ul</span> <span class="selector-class">.last</span>&#123;</span></span><br><span class="line"><span class="undefined">        float: right;</span></span><br><span class="line"><span class="undefined">        width: 260px;</span></span><br><span class="line"><span class="undefined">        height: 381px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#eee8aa</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"today"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"last"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/float/demo_05.png" alt="demo_05" title="demo_05"></p><h3 id="清除浮动"><a href="#清除浮动" class="headerlink" title="清除浮动"></a>清除浮动</h3><p>给父元素增加<code>::after</code>伪元素</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.clear-item</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">""</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">0</span>; <span class="comment">/* 为了兼容旧版浏览器*/</span></span><br><span class="line">    <span class="attribute">visibility</span>: hidden; <span class="comment">/* 为了兼容旧版浏览器*/</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.clear-item</span>&#123;</span><br><span class="line">    *zoom: 1; /* 为了兼容IE6-7浏览器 */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p><code>浮动</code>常用在水平布局</p><p> <a href="https://www.w3.org/TR/CSS2/visudet.html#blockwidth" title="Block-level, non-replaced elements in normal flow" target="_blank" rel="noopener">公式Block-level, non-replaced elements in normal flow</a></p>]]></content>
      
      <categories>
          
          <category> CSS </category>
          
          <category> float </category>
          
      </categories>
      
      
        <tags>
            
            <tag> none </tag>
            
            <tag> left </tag>
            
            <tag> right </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>CSS 属性 -position</title>
      <link href="/2020/08/08/css/css_position/"/>
      <url>/2020/08/08/css/css_position/</url>
      <content type="html"><![CDATA[<p><code>CSS</code> 定位属性 <code>position</code>,四个定位类型 <code>static/relative/absolute/fixed</code>,<br><code>top,right,bottom,left</code>属性则决定了该元素的最终位置<br><code>position</code>默认值<code>static</code>,此时<code>top,right,bottom,left</code>和<code>z-index</code>无效</p><p><code>static</code>  静态定位[ 默认值 ]<br><code>relative</code>  相对定位[ 相对于元素自己原来的位置 ]<br><code>absolute</code>  绝对定位[ 找到自己的父元素非position:static开始定位 ]<br><code>fixed</code>  固定定位[ 直接相对于浏览器左上角(视口)开始定位]</p><p><code>absolute</code> 总则<br>a)定位参照对象的<code>宽度</code>=left+right+margin-left+margin-right+绝对定位元素的实际占用宽度<br>b)定位参照对象的<code>高度</code>=top+bottom+margin-top+margin-bottom+绝对定位元素的实际占用高度<br>c)让绝对定位元素的<code>宽高</code>和定位参照对象一样,可以给绝对定位元素设置以下属性<br>d)让绝对定位元素在定位对象中<code>居中</code>显示,可以给绝对定位元素这是以下属性</p><h3 id="相对定位-relative"><a href="#相对定位-relative" class="headerlink" title="相对定位 relative"></a>相对定位 <code>relative</code></h3><p>不会脱离文档流,还会占用原来位置,Two这个div原来位置还在</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="undefined">        display: inline-block;</span></span><br><span class="line"><span class="undefined">        width: 100px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#c0c0c0</span>;</span></span><br><span class="line"><span class="undefined">        color: white;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#two</span> &#123;</span></span><br><span class="line"><span class="undefined">        position: relative;</span></span><br><span class="line"><span class="undefined">        top: 20px;</span></span><br><span class="line"><span class="undefined">        left: 20px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#eee8aa</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"one"</span>&gt;</span>One<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"two"</span>&gt;</span>Two<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"three"</span>&gt;</span>Three<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"four"</span>&gt;</span>Four<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/position/relative.png" alt="relative 相对定位" title="relative 相对定位"></p><h3 id="绝对定位absolute"><a href="#绝对定位absolute" class="headerlink" title="绝对定位absolute"></a>绝对定位<code>absolute</code></h3><p>常使用方法:<font style="color:red">[ 子绝父相 ] </font>: 父元素用相对定位<code>relative</code>,子元素用绝对定位<code>absolute</code></p><h4 id="01-脱离文档流"><a href="#01-脱离文档流" class="headerlink" title="01) 脱离文档流"></a>01) 脱离文档流</h4><p>不会占用原来位置,Three这个div不再占用原来位置</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="undefined">        display: inline-block;</span></span><br><span class="line"><span class="undefined">        width: 100px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#c0c0c0</span>;</span></span><br><span class="line"><span class="undefined">        color: white;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#three</span> &#123;</span></span><br><span class="line"><span class="undefined">        position: absolute;</span></span><br><span class="line"><span class="undefined">        top: 20px;</span></span><br><span class="line"><span class="undefined">        left: 20px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#eee8aa</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"one"</span>&gt;</span>One<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"two"</span>&gt;</span>Two<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"three"</span>&gt;</span>Three<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"four"</span>&gt;</span>Four<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/position/absolute.png" alt="absolute 绝对定位" title="absolute 绝对定位"></p><h4 id="02-脱离文档流"><a href="#02-脱离文档流" class="headerlink" title="02) 脱离文档流"></a>02) 脱离文档流</h4><p>定位参照对象是最近相邻的祖先元素<br>如果找不到这样的祖先元素,参照对象是视口<br>定位元素<code>position</code>值不为<code>static</code>的元素,也就是position值为<code>relative/absolute/fixed</code></p><p>demo: 注意观察 position: relative; 这个值所在的父元素</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#one</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="comment">/*position: relative;*/</span></span></span><br><span class="line"><span class="undefined">        width: 400px;</span></span><br><span class="line"><span class="undefined">        height: 400px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#c0c0c0</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#two</span> &#123;</span></span><br><span class="line"><span class="undefined">        position: relative;</span></span><br><span class="line"><span class="undefined">        width: 300px;</span></span><br><span class="line"><span class="undefined">        height: 300px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#eee8aa</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#three</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="comment">/*position: relative;*/</span></span></span><br><span class="line"><span class="undefined">        width: 200px;</span></span><br><span class="line"><span class="undefined">        height: 200px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#dda0dd</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#four</span> &#123;</span></span><br><span class="line"><span class="undefined">        position: absolute;</span></span><br><span class="line"><span class="undefined">        right: 50px;</span></span><br><span class="line"><span class="undefined">        width: 100px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#ff6b81</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"one"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"two"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"three"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"four"</span>&gt;</span>我要找祖元素,position值为relative/absolute/fixed<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/position/absolute_02.png" alt="absolute 绝对定位" title="absolute 绝对定位"></p><h4 id="04-定位参照对象的宽度和高度和居中"><a href="#04-定位参照对象的宽度和高度和居中" class="headerlink" title="04) 定位参照对象的宽度和高度和居中"></a>04) 定位参照对象的<code>宽度</code>和<code>高度</code>和<code>居中</code></h4><p>a)定位参照对象的<code>宽度</code>=left+right+margin-left+margin-right+绝对定位元素的实际占用宽度</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">left</span>: 0;<span class="selector-tag">right</span>: 0;<span class="selector-tag">height</span>: 50<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure><p><img src="/img/css/position/width.png" alt="width 绝对定位" title="width 绝对定位"></p><p>b)定位参照对象的<code>高度</code>=top+bottom+margin-top+margin-bottom+绝对定位元素的实际占用高度</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">top</span>: 0;<span class="selector-tag">bottom</span>: 0;<span class="selector-tag">width</span>: 50<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure><p><img src="/img/css/position/height.png" alt="height 绝对定位" title="height 绝对定位"></p><p>c)让绝对定位元素的<code>宽高</code>和定位参照对象一样,可以给绝对定位元素设置以下属性</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">left</span><span class="selector-pseudo">:0</span>;<span class="selector-tag">right</span><span class="selector-pseudo">:0</span>;<span class="selector-tag">top</span><span class="selector-pseudo">:0</span>;<span class="selector-tag">bottom</span><span class="selector-pseudo">:0</span>;<span class="selector-tag">margin</span><span class="selector-pseudo">:0</span>;</span><br></pre></td></tr></table></figure><p><img src="/img/css/position/width_height.png" alt="width和height 绝对定位" title="width和height 绝对定位"></p><p>d)让绝对定位元素在定位对象中<code>居中</code>显示,可以给绝对定位元素这是以下属性</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">top</span>: 0;<span class="selector-tag">bottom</span>: 0;<span class="selector-tag">left</span>: 0;<span class="selector-tag">right</span>: 0;<span class="selector-tag">margin</span>: <span class="selector-tag">auto</span> <span class="selector-tag">auto</span>;</span><br></pre></td></tr></table></figure><p><img src="/img/css/position/center.png" alt="center 绝对定位" title="center 绝对定位"></p><h5 id="a-宽度"><a href="#a-宽度" class="headerlink" title="a)宽度"></a>a)宽度</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#two</span> &#123;</span></span><br><span class="line"><span class="undefined">        position: relative;</span></span><br><span class="line"><span class="undefined">        width: 150px;</span></span><br><span class="line"><span class="undefined">        height: 150px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#eee8aa</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#four</span> &#123;</span></span><br><span class="line"><span class="undefined">        position: absolute;</span></span><br><span class="line"><span class="css">        <span class="comment">/*width: 50px;*/</span> <span class="comment">/*注意这里*/</span></span></span><br><span class="line"><span class="undefined">        height: 50px;left: 0;right: 0;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#ff6b81</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"two"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"four"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="b-高度"><a href="#b-高度" class="headerlink" title="b)高度"></a>b)高度</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#two</span> &#123;</span></span><br><span class="line"><span class="undefined">        position: relative;</span></span><br><span class="line"><span class="undefined">        width: 150px;</span></span><br><span class="line"><span class="undefined">        height: 150px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#eee8aa</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#four</span> &#123;</span></span><br><span class="line"><span class="undefined">        position: absolute;</span></span><br><span class="line"><span class="css">        <span class="comment">/*height: 50px;*/</span> <span class="comment">/*注意这里*/</span></span></span><br><span class="line"><span class="undefined">        width: 50px;top: 0;bottom: 0;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#ff6b81</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"two"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"four"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="c-宽高-注意这里four中-并没有设置width和height"><a href="#c-宽高-注意这里four中-并没有设置width和height" class="headerlink" title="c)宽高,注意这里four中,并没有设置width和height"></a>c)宽高,注意这里<code>four</code>中,并没有设置<code>width</code>和<code>height</code></h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#two</span> &#123;</span></span><br><span class="line"><span class="undefined">        position: relative;</span></span><br><span class="line"><span class="undefined">        width: 150px;</span></span><br><span class="line"><span class="undefined">        height: 150px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#eee8aa</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#four</span> &#123;</span></span><br><span class="line"><span class="undefined">        position: absolute;</span></span><br><span class="line"><span class="css">        <span class="comment">/*width: 50px;*/</span> <span class="comment">/*注意这里*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*height: 50px;*/</span> <span class="comment">/*注意这里*/</span></span></span><br><span class="line"><span class="undefined">        top: 0;bottom: 0;left: 0;right: 0;margin: 0;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#ff6b81</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"two"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"four"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="d-居中"><a href="#d-居中" class="headerlink" title="d) 居中"></a>d) 居中</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#two</span> &#123;</span></span><br><span class="line"><span class="undefined">        position: relative;</span></span><br><span class="line"><span class="undefined">        width: 150px;</span></span><br><span class="line"><span class="undefined">        height: 150px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#eee8aa</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-id">#four</span> &#123;</span></span><br><span class="line"><span class="undefined">        position: absolute;</span></span><br><span class="line"><span class="undefined">        width: 50px;</span></span><br><span class="line"><span class="undefined">        height: 50px;</span></span><br><span class="line"><span class="undefined">        top: 0;bottom: 0;left: 0;right: 0;margin: auto auto;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#ff6b81</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"two"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span> <span class="attr">id</span>=<span class="string">"four"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="固定定位-fixed"><a href="#固定定位-fixed" class="headerlink" title="固定定位 fixed"></a>固定定位 <code>fixed</code></h3><p>定位参照对象是视口(浏览器我左上角)</p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p><code>绝对定位</code>常用在层叠样式的布局和小功能调整</p><h3 id="经典demo"><a href="#经典demo" class="headerlink" title="经典demo"></a>经典demo</h3><h4 id="一张大图实现居中相对定位-relative"><a href="#一张大图实现居中相对定位-relative" class="headerlink" title="一张大图实现居中相对定位 relative"></a>一张大图实现居中<code>相对定位 relative</code></h4><p>比较大的一张图片,实现垂直居中和水平居中,浏览器窗口随意怎么变换,一直显示图片中间位置</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#c0c0c0</span>;</span></span><br><span class="line"><span class="undefined">        height: 600px;</span></span><br><span class="line"><span class="undefined">        overflow: hidden;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    img &#123;</span></span><br><span class="line"><span class="undefined">        position: relative;</span></span><br><span class="line"><span class="css">        <span class="comment">/* 垂直居中*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*top: 50%;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*transform: translate(0, -50%);*/</span></span></span><br><span class="line"><span class="undefined">        </span></span><br><span class="line"><span class="css">        <span class="comment">/* 水平居中*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*left: 50%;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*transform: translate(-50%,0);*/</span></span></span><br><span class="line"><span class="undefined">        </span></span><br><span class="line"><span class="css">        <span class="comment">/* 水平居中+垂直居中*/</span></span></span><br><span class="line"><span class="undefined">        top: 50%;</span></span><br><span class="line"><span class="undefined">        left: 50%;</span></span><br><span class="line"><span class="undefined">        transform: translate(-50%, -50%);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>比较大的一张图片,实现垂直居中和水平居中<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;img src="./images/img_center_01.png" alt="这是一张大图"&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./images/star.png"</span> <span class="attr">alt</span>=<span class="string">"这是一张小图"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>参考地址:<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/position" title="position" target="_blank" rel="noopener">position</a></p>]]></content>
      
      <categories>
          
          <category> CSS </category>
          
          <category> position </category>
          
      </categories>
      
      
        <tags>
            
            <tag> static </tag>
            
            <tag> relative </tag>
            
            <tag> absolute </tag>
            
            <tag> fixed </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JavaScript_常见使用</title>
      <link href="/2020/08/01/JavaScript/JavaScript_%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/08/01/JavaScript/JavaScript_%E5%B8%B8%E8%A7%81%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p> JavaScript常用使用<br> JavaScript常用使用<br> JavaScript常用使用</p><h3 id="随机数测试"><a href="#随机数测试" class="headerlink" title="随机数测试"></a>随机数测试</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Math</span>.floor(<span class="built_in">Math</span>.random()*<span class="number">10000</span>)</span><br></pre></td></tr></table></figure><h3 id="获取逗号拼接字符串"><a href="#获取逗号拼接字符串" class="headerlink" title="获取逗号拼接字符串"></a>获取逗号拼接字符串</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> ids = <span class="string">"1,2,3,4,5,6,"</span>;</span><br><span class="line">ids.substr(<span class="number">0</span>, ids.length - <span class="number">1</span>); <span class="comment">//去掉末尾逗号</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> feiArr = [</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">"daFei"</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">"foo"</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">"bar"</span>&#125;,</span><br><span class="line">];</span><br><span class="line">feiArr.map(<span class="function"><span class="params">m</span> =&gt;</span> m.id).join(<span class="string">","</span>);<span class="comment">// 输出 1,2,3</span></span><br></pre></td></tr></table></figure><h3 id="hasOwnProperty-判断自身属性是否存在"><a href="#hasOwnProperty-判断自身属性是否存在" class="headerlink" title="hasOwnProperty 判断自身属性是否存在"></a>hasOwnProperty 判断自身属性是否存在</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hasOwnProperty 判断自身属性是否存在 </span></span><br><span class="line"><span class="keyword">let</span> test = &#123;<span class="attr">author</span>: <span class="string">"dafei"</span>, <span class="attr">bookName</span>: <span class="string">"史记"</span>&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(test.hasOwnProperty(<span class="string">"author"</span>));<span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(test.hasOwnProperty(<span class="string">"price"</span>));<span class="comment">// false</span></span><br></pre></td></tr></table></figure><h3 id="px、em、rem区别介绍"><a href="#px、em、rem区别介绍" class="headerlink" title="px、em、rem区别介绍"></a>px、em、rem区别介绍</h3><p>如果你不指定一个字体的大小，默认大小和普通文本段落一样，是16像素（1em=16px）</p><h3 id="判断一个对象是否是数组"><a href="#判断一个对象是否是数组" class="headerlink" title="判断一个对象是否是数组"></a>判断一个对象是否是数组</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="built_in">console</span>.log(arr <span class="keyword">instanceof</span> <span class="built_in">Array</span>); <span class="comment">// 返回true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"eeee"</span> <span class="keyword">instanceof</span> <span class="built_in">Array</span>); <span class="comment">// 返回false</span></span><br></pre></td></tr></table></figure><h3 id="数组去重ES6"><a href="#数组去重ES6" class="headerlink" title="数组去重ES6"></a>数组去重ES6</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> newIds = <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr));</span><br><span class="line"><span class="built_in">console</span>.log(newIds);<span class="comment">// 输出 [1, 2, 3]</span></span><br></pre></td></tr></table></figure><h3 id="对象2种取值方式"><a href="#对象2种取值方式" class="headerlink" title="对象2种取值方式"></a>对象2种取值方式</h3><p>当对象是一个变量的时候,使用[]会方便很多</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>: <span class="string">"daFei"</span>&#125;;</span><br><span class="line"><span class="built_in">console</span>.log(obj.name);</span><br><span class="line"><span class="built_in">console</span>.log(obj[<span class="string">'name'</span>]); <span class="comment">// 常使用在,对象是个变量</span></span><br></pre></td></tr></table></figure><h3 id="获取对象中某个属性的所有值ES6"><a href="#获取对象中某个属性的所有值ES6" class="headerlink" title="获取对象中某个属性的所有值ES6"></a>获取对象中某个属性的所有值ES6</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = [</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"daFei"</span>, <span class="attr">age</span>: <span class="string">"18"</span>, <span class="attr">hobby</span>: <span class="string">"JavaScript"</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"daFei"</span>, <span class="attr">age</span>: <span class="string">"18"</span>, <span class="attr">hobby</span>: <span class="string">"HTML"</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"daFei"</span>, <span class="attr">age</span>: <span class="string">"18"</span>, <span class="attr">hobby</span>: <span class="string">"CSS"</span>&#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">let</span> arr = obj.map(<span class="function"><span class="params">item</span> =&gt;</span> item.hobby);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// 输出 ["JavaScript", "HTML", "CSS"]</span></span><br></pre></td></tr></table></figure><h3 id="获取一个对象中的所有属性"><a href="#获取一个对象中的所有属性" class="headerlink" title="获取一个对象中的所有属性"></a>获取一个对象中的所有属性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;<span class="attr">name</span>: <span class="string">"daFei"</span>, <span class="attr">age</span>: <span class="string">"18"</span>, <span class="attr">hobby</span>: <span class="string">"JavaScript"</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> arr = <span class="built_in">Object</span>.keys(obj);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// 输出 ["name", "age", "hobby"]</span></span><br></pre></td></tr></table></figure><h3 id="判断一个数组或者字符串中存在某个值"><a href="#判断一个数组或者字符串中存在某个值" class="headerlink" title="判断一个数组或者字符串中存在某个值"></a>判断一个数组或者字符串中存在某个值</h3><p>indexOf ,不存在则返回-1</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// indexOf()方法返回在数组中可以找到一个给定元素的第一个索引，如果不存在，则返回-1。</span></span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> index = arr.indexOf(<span class="number">3</span>);</span><br><span class="line"><span class="built_in">console</span>.log(index);<span class="comment">// 返回对应的下标2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// indexOf() 方法返回调用它的 String 对象中第一次出现的指定值的索引。如果未找到该值，则返回 -1。</span></span><br><span class="line"><span class="keyword">let</span> str = <span class="string">"fei,da,foo,bar,JavaScript"</span>;</span><br><span class="line"><span class="keyword">let</span> index_str = str.indexOf(<span class="string">"foo"</span>); <span class="comment">// 返回对应的下标7</span></span><br><span class="line"><span class="built_in">console</span>.log(index_str);</span><br></pre></td></tr></table></figure><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf" target="_blank" rel="noopener">数组中属性</a> 和  <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf" target="_blank" rel="noopener">字符串中属性</a></p>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-CSS 常见属性使用</title>
      <link href="/2020/07/21/css/css%E5%B8%B8%E8%A7%81%E5%B1%9E%E6%80%A7%E4%BD%BF%E7%94%A8/"/>
      <url>/2020/07/21/css/css%E5%B8%B8%E8%A7%81%E5%B1%9E%E6%80%A7%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>CSS 常见属性使用<br>CSS 常见属性使用<br>CSS 常见属性使用</p><h3 id="border-和-outline-区别"><a href="#border-和-outline-区别" class="headerlink" title="border 和 outline 区别"></a><code>border</code> 和 <code>outline</code> 区别</h3><p><code>outline</code>轮廓不占据空间，绘制于元素内容周围。<br>根据规范，轮廓通常是矩形，但也可以是非矩形的</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">div</span> &#123;</span><br><span class="line">    <span class="attribute">outline</span>:<span class="number">3px</span> solid red;  <span class="comment">/* 查看网页布局的时候很方便 */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/css/css_01/outline.png" alt="outline 和 border" title="outline 和 border"></p><h3 id="display属性值"><a href="#display属性值" class="headerlink" title="display属性值"></a><code>display</code>属性值</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* display: block; */</span>   <span class="comment">/* 浏览器默认样式 */</span></span><br><span class="line"><span class="comment">/* display: inline; */</span>  <span class="comment">/* 设置为行内元素 */</span></span><br><span class="line"><span class="comment">/* display: none; */</span>   <span class="comment">/* 隐藏元素不占空间 */</span></span><br><span class="line"><span class="comment">/* display: inline-block; */</span>  <span class="comment">/* 可以和行内元素在同一行, 可以设置宽度和高度*/</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/css_01/display.png" alt="display" title="display"></p><h3 id="min-width-和max-width-属性值"><a href="#min-width-和max-width-属性值" class="headerlink" title="min-width 和max-width 属性值"></a><code>min-width</code> 和<code>max-width</code> 属性值</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* width: 100px;*/</span></span><br><span class="line"><span class="comment">/* min-width: 800px; */</span>  <span class="comment">/* 内容宽度小于盒子宽度800的时候出现滚动条 */</span></span><br><span class="line"><span class="comment">/* max-width: 100px; */</span>  <span class="comment">/*  内容在宽度大于盒子宽度100的时候换行 */</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/css_01/width.png" alt="min-width 和 max-width" title="min-width 和 max-width"></p><h3 id="border属性"><a href="#border属性" class="headerlink" title="border属性"></a><code>border</code>属性</h3><p>利用 <code>border</code> 制作三角图形</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.div1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border-top</span>: 50<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#85194B</span>;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border-right</span>: 50<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#add8e6</span>;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border-bottom</span>: 50<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#f0e68c</span>;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border-left</span>: 50<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#cd5c5c</span>;</span></span><br><span class="line"><span class="undefined">        width: 0;</span></span><br><span class="line"><span class="undefined">        height: 0;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.div2</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">border-top</span>: 50<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#add8e6</span>;</span></span><br><span class="line"><span class="undefined">        border-left: 50px solid rgba(0,0,0,0);</span></span><br><span class="line"><span class="undefined">        width: 0;</span></span><br><span class="line"><span class="undefined">        height: 0;</span></span><br><span class="line"><span class="undefined">        transform: rotate(45deg);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/css_01/border.png" alt="border" title="border"></p><h3 id="box-sizing-属性"><a href="#box-sizing-属性" class="headerlink" title="box-sizing 属性"></a><code>box-sizing</code> 属性</h3><figure class="highlight maxima"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">属性值: <span class="built_in">box</span>-sizing: <span class="built_in">border</span>-<span class="built_in">box</span>  /  <span class="built_in">content</span>-<span class="built_in">box</span> [默认值 不盒子是否包括边框 ]</span><br><span class="line"></span><br><span class="line"><span class="built_in">content</span>-<span class="built_in">box</span></span><br><span class="line">元素实际占用宽度= 内容的宽度wdith</span><br><span class="line">元素实际占用高度= 内容的宽度<span class="built_in">height</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">border</span>-<span class="built_in">box</span></span><br><span class="line">元素实际占用宽度= <span class="built_in">border</span> + padding + 内容的宽度<span class="built_in">width</span></span><br><span class="line">元素实际占用高度= <span class="built_in">border</span> + padding + 内容的高度<span class="built_in">height</span></span><br></pre></td></tr></table></figure><h3 id="水平居中"><a href="#水平居中" class="headerlink" title="水平居中"></a>水平居中</h3><p>[ text-align:center | marigin: 0,auto ] 2个属性使用<br>垂直方向的时候 margin 不能实现居中</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">text-align:center 可以居中的元素</span><br><span class="line">01) 普通文本</span><br><span class="line">02) 行内元素</span><br><span class="line">03) 图片:行内替换元素</span><br><span class="line">04) 行内块级元素</span><br><span class="line"></span><br><span class="line">marigin: 0,auto  可以居中的元素</span><br><span class="line">05) 块级元素  [ marigin: 0,auto ]</span><br><span class="line"></span><br><span class="line">demo:</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.box</span>&#123;</span></span><br><span class="line"><span class="undefined">        height: 200px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#c0c0c0</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="selector-class">.inner</span>&#123;</span></span><br><span class="line"><span class="undefined">        width: 200px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#eee8aa</span>;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">margin</span>: 0 <span class="selector-tag">auto</span>; <span class="comment">/*盒子水平居中了*/</span></span></span><br><span class="line"><span class="css">        <span class="selector-tag">text-align</span>: <span class="selector-tag">center</span>; <span class="comment">/*内容水平居中了*/</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span>盒子水平居中了<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/css_01/text_align.png" alt="text-align和margin" title="text-align和margin"></p><h3 id="background-image-属性"><a href="#background-image-属性" class="headerlink" title="background-image 属性"></a><code>background-image</code> 属性</h3><p>01)  图片先后顺序,先写谁,谁在上面;<br>02)  前面图片错误,会显示后面图片</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">background-image: url("./images/lizard.png"),  /*lizard 图片在上面*/</span><br><span class="line">url("./images/star.png");</span><br><span class="line"></span><br><span class="line">background-image: url("./images/star.png"),  /* star 图片在上面 */</span><br><span class="line">url("./images/lizard.png");</span><br></pre></td></tr></table></figure><p><img src="/img/css/css_01/background_image.png" alt="background-image" title="background-image"></p><p>background-image 和 img 的选择使用</p><table><thead><tr><th></th><th>img</th><th>background-image</th></tr></thead><tbody><tr><td>性质</td><td>HTML元素</td><td>CSS样式</td></tr><tr><td>图片是否占用空间</td><td>V</td><td>X</td></tr><tr><td>浏览器右键直接查看地址</td><td>V</td><td>X</td></tr><tr><td>支持CSS Sprite</td><td>X</td><td>V</td></tr><tr><td>更有可能被搜索引擎收录</td><td>V(结合alt属性)</td><td>X</td></tr><tr><td>加载顺序</td><td>优先加载</td><td>等加载完HTML元素后在加载</td></tr></tbody></table><h3 id="CSS常见颜色"><a href="#CSS常见颜色" class="headerlink" title="CSS常见颜色"></a>CSS常见颜色</h3><p>01) HTML中常用颜色 #c0c0c0    silver（银）<br>02) HTML中常用颜色 #808080    gray[*]（灰）<br>03) HTML中常用颜色 #eee8aa    palegoldenrod（灰菊黄）<br>04) HTML中常用颜色 #dda0dd    plum（李子色）<br>05) HTML中常用颜色 #90ee90    lightgreen（浅绿）<br>06) HTML中常用颜色 #afeeee     paleturquoise（苍宝石绿）<br>07) HTML中常用颜色 #ffd700      gold（金）<br>08) HTML中常用颜色 #add8e6    lightblue（淡蓝）<br>09) HTML中常用颜色 #ff6b81      Wild Watermelon(野生西瓜)<br>10) HTML中常用颜色 #00ffff        aqua（水绿）</p><p><img src="/img/css/css_01/color.png" alt="color" title="color"></p><p><a href="https://www.w3.org/TR/CSS2/indexlist.html" target="_blank" rel="noopener">W3-CSS属性查询</a></p>]]></content>
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-IDEA -JSP 操作MySQL</title>
      <link href="/2020/07/15/java/IDEA_JSP_MySQL/"/>
      <url>/2020/07/15/java/IDEA_JSP_MySQL/</url>
      <content type="html"><![CDATA[<p>IDEA 中JSP页面操作MySQL<br>IDEA 中JSP页面操作MySQL<br>IDEA 中JSP页面操作MySQL</p><h3 id="新建Java-web-工程"><a href="#新建Java-web-工程" class="headerlink" title="新建Java web 工程"></a>新建<code>Java web</code> 工程</h3><p><img src="/img/java/jsp/jsp_01.png" alt="JSP" title="JSP"></p><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><p>在 WEB-INF 目录下面新建<code>lib</code> 和 <code>classes</code> 文件,然后把<code>MySQL</code>的驱动包放到<code>lib</code>目录下面</p><p><img src="/img/java/jsp/jsp_02.png" alt="JSP" title="JSP"></p><h3 id="配置Tomcat"><a href="#配置Tomcat" class="headerlink" title="配置Tomcat"></a>配置<code>Tomcat</code></h3><p><img src="/img/java/jsp/jsp_03.png" alt="JSP" title="JSP"></p><h3 id="配置lib"><a href="#配置lib" class="headerlink" title="配置lib"></a>配置<code>lib</code></h3><p>配置<code>lib</code>导入<code>MySQL</code>驱动包</p><p><img src="/img/java/jsp/jsp_04.png" alt="JSP" title="JSP"></p><p><img src="/img/java/jsp/jsp_05.png" alt="JSP" title="JSP"></p><h3 id="解决代码中红色"><a href="#解决代码中红色" class="headerlink" title="解决代码中红色"></a>解决代码中红色</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">比如:</span><br><span class="line">  out.print(<span class="string">"print显示红色,解决红色"</span>);</span><br></pre></td></tr></table></figure><p><img src="/img/java/jsp/jsp_06.png" alt="JSP" title="JSP"></p><h3 id="demo-练习index-jsp页面内容如下"><a href="#demo-练习index-jsp页面内容如下" class="headerlink" title="demo 练习index.jsp页面内容如下"></a><code>demo</code> 练习<code>index.jsp</code>页面内容如下</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&lt;%@ page <span class="keyword">import</span>=<span class="string">"java.sql.*"</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;MySQL数据库&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line"></span><br><span class="line">  &lt;table border=<span class="string">"2"</span>&gt;</span><br><span class="line">    &lt;thead&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">      &lt;td&gt;id&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;用户名&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;邮箱&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;手机号&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;密码&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;/thead&gt;</span><br><span class="line">  &lt;%</span><br><span class="line">    <span class="comment">// mysql-connector-java-5.1.30 的连接数据库</span></span><br><span class="line">    <span class="comment">// Class.forName("org.gjt.mm.mysql.Driver").newInstance();</span></span><br><span class="line">    <span class="comment">// String url="jdbc:mysql://localhost:3306/temp_demo?characterEncoding=utf8&amp;useSSL=false";</span></span><br><span class="line">    <span class="comment">// Connection conn= DriverManager.getConnection(url,"afei2","123456");</span></span><br><span class="line">    <span class="comment">// Statement stmt=conn.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_UPDATABLE);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// mysql-connector-java-8.0.18.jar 的连接数据库</span></span><br><span class="line">    Class.forName(<span class="string">"com.mysql.cj.jdbc.Driver"</span>);<span class="comment">//加载驱动包</span></span><br><span class="line">    String url=<span class="string">"jdbc:mysql://localhost:3306/temp_demo?useSSL=true&amp;serverTimezone=GMT%2B8"</span>;</span><br><span class="line">    Connection conn = DriverManager.getConnection(url,<span class="string">"afei2"</span>,<span class="string">"123456"</span>);</span><br><span class="line">    Statement stmt=conn.createStatement();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    String sql=<span class="string">"select * from user"</span>;</span><br><span class="line">    ResultSet rs=stmt.executeQuery(sql);</span><br><span class="line">    <span class="keyword">while</span>(rs.next()) &#123;</span><br><span class="line">   %&gt;</span><br><span class="line"></span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">      &lt;td&gt;&lt;%=rs.getString("id")%&gt;&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;&lt;%=rs.getString("username")%&gt;&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;&lt;%=rs.getString("email")%&gt;&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;&lt;%=rs.getString("mobile")%&gt;&lt;/td&gt;</span><br><span class="line">      &lt;td&gt;&lt;%=rs.getString("password")%&gt;&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">  &lt;/table&gt;</span><br><span class="line">  &lt;%</span><br><span class="line">    out.print(<span class="string">"恭喜你,已经学会数据库操作"</span>);</span><br><span class="line">    rs.close();</span><br><span class="line">    stmt.close();</span><br><span class="line">    conn.close();</span><br><span class="line">  %&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p><img src="/img/java/jsp/jsp_07.png" alt="JSP 效果图" title="JSP 效果图"></p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p> <a href="https://mvnrepository.com/artifact/mysql/mysql-connector-java" title="mysql-connector-java各版本下载地址" target="_blank" rel="noopener">mysql-connector-java各版本下载地址</a></p>]]></content>
      
      <categories>
          
          <category> IDEA </category>
          
          <category> JSP </category>
          
          <category> MySQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
            <tag> JSP </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-IDEA搭建-SSM 步骤03</title>
      <link href="/2020/07/09/java/IDEA_SSM_%E6%90%AD%E5%BB%BA_%E6%AD%A5%E9%AA%A403/"/>
      <url>/2020/07/09/java/IDEA_SSM_%E6%90%AD%E5%BB%BA_%E6%AD%A5%E9%AA%A403/</url>
      <content type="html"><![CDATA[<p>使用 <code>IDEA</code>搭建<code>SSM</code>项目[ SSM 全名: Spring+SpringMVC+MyBatis ]<br>环境:  IDEA,  JDK1.8, Maven3.6,Tomcat7.0<br>步骤分为三步:<br> 01: 创建maven 工程;<br> 02: 创建spring工程<br> 03: 写个查询demo测试</p><h2 id="第三步-写个查询demo测试"><a href="#第三步-写个查询demo测试" class="headerlink" title="第三步,写个查询demo测试"></a>第三步,写个查询demo测试</h2><h3 id="数据库SQL"><a href="#数据库SQL" class="headerlink" title="数据库SQL"></a>数据库<code>SQL</code></h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`user`</span> (</span><br><span class="line">  <span class="string">`id`</span> <span class="built_in">int</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  <span class="string">`username`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'用户名'</span>,</span><br><span class="line">  <span class="string">`password`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'密码'</span>,</span><br><span class="line">  <span class="string">`email`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'邮箱'</span>,</span><br><span class="line">  <span class="string">`mobile`</span> <span class="built_in">varchar</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="literal">NULL</span> <span class="keyword">COMMENT</span> <span class="string">'手机号'</span>,</span><br><span class="line">  PRIMARY <span class="keyword">KEY</span> (<span class="string">`id`</span>)</span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> AUTO_INCREMENT=<span class="number">4</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8 <span class="keyword">COMMENT</span>=<span class="string">'用户表'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入三条数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`feissm`</span>.<span class="string">`user`</span>(<span class="string">`id`</span>, <span class="string">`username`</span>, <span class="string">`password`</span>, <span class="string">`email`</span>, <span class="string">`mobile`</span>) <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">'dafei'</span>, <span class="string">'123456'</span>, <span class="string">'dafei@qq.com'</span>, <span class="string">'11111111'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`feissm`</span>.<span class="string">`user`</span>(<span class="string">`id`</span>, <span class="string">`username`</span>, <span class="string">`password`</span>, <span class="string">`email`</span>, <span class="string">`mobile`</span>) <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">'dafei_02'</span>, <span class="string">'123456'</span>, <span class="string">'dafei_02@qq.com'</span>, <span class="string">'1111111122'</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="string">`feissm`</span>.<span class="string">`user`</span>(<span class="string">`id`</span>, <span class="string">`username`</span>, <span class="string">`password`</span>, <span class="string">`email`</span>, <span class="string">`mobile`</span>) <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">'dafei_03'</span>, <span class="string">'123456'</span>, <span class="string">'dafei_03@qq.com'</span>, <span class="string">'1111111133'</span>);</span><br></pre></td></tr></table></figure><h3 id="model-目录下-User-java文件"><a href="#model-目录下-User-java文件" class="headerlink" title="model 目录下 User.java文件"></a><code>model</code> 目录下 <code>User.java</code>文件</h3><p><code>User.java</code> 文件内容</p><details><br>    <summary>点击查看model目录下User.java文件</summary><br>    <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"> public class User &#123;</span><br><span class="line">    private long id;</span><br><span class="line">    private String username;</span><br><span class="line">    private String password;</span><br><span class="line">    private String email;</span><br><span class="line">    private String mobile;</span><br><span class="line">    public long <span class="function"><span class="title">getId</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setId(long id) &#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    public String <span class="function"><span class="title">getUsername</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setUsername(String username) &#123;</span><br><span class="line">        this.username = username;</span><br><span class="line">    &#125;</span><br><span class="line">    public String <span class="function"><span class="title">getPassword</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setPassword(String password) &#123;</span><br><span class="line">        this.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">    public String <span class="function"><span class="title">getEmail</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> email;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setEmail(String email) &#123;</span><br><span class="line">        this.email = email;</span><br><span class="line">    &#125;</span><br><span class="line">    public String <span class="function"><span class="title">getMobile</span></span>() &#123;</span><br><span class="line">        <span class="built_in">return</span> mobile;</span><br><span class="line">    &#125;</span><br><span class="line">    public void setMobile(String mobile) &#123;</span><br><span class="line">        this.mobile = mobile;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><br><br> </details><p><img src="/img/java/ssm/03_demo_test/ssm_3_01.png" alt="ssm demo" title="ssm demo"></p><h3 id="dao目录下-UserDao-java文件"><a href="#dao目录下-UserDao-java文件" class="headerlink" title="dao目录下 UserDao.java文件"></a><code>dao</code>目录下 <code>UserDao.java</code>文件</h3><p><code>UserDao.java</code>文件内容</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dafei.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.dafei.model.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> </span>&#123;</span><br><span class="line">    <span class="function">User <span class="title">selectUser</span><span class="params">(<span class="keyword">long</span> id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/java/ssm/03_demo_test/ssm_3_02.png" alt="ssm demo" title="ssm demo"></p><h3 id="resources-gt-mapper目录下面-UserMapper-xml"><a href="#resources-gt-mapper目录下面-UserMapper-xml" class="headerlink" title="resources--&gt;mapper目录下面 UserMapper.xml"></a><code>resources--&gt;mapper</code>目录下面 <code>UserMapper.xml</code></h3><p><code>UserMapper.xml</code>文件内容</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 设置为UserDao接口方法提供sql语句配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">"com.dafei.dao.UserDao"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"selectUser"</span> <span class="attr">resultType</span>=<span class="string">"User"</span> <span class="attr">parameterType</span>=<span class="string">"long"</span>&gt;</span></span><br><span class="line">      SELECT * FROM user WHERE id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/java/ssm/03_demo_test/ssm_3_03.png" alt="ssm demo" title="ssm demo"></p><h3 id="service目录下面UsrService-java文件"><a href="#service目录下面UsrService-java文件" class="headerlink" title="service目录下面UsrService.java文件"></a><code>service</code>目录下面<code>UsrService.java</code>文件</h3><p><code>UsrService.java</code> 文件内容</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dafei.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.dafei.model.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">selectUser</span><span class="params">(<span class="keyword">long</span> userId)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/java/ssm/03_demo_test/ssm_3_04.png" alt="ssm demo" title="ssm demo"></p><h3 id="service-gt-impl目录下面UsrServiceImpl-java文件"><a href="#service-gt-impl目录下面UsrServiceImpl-java文件" class="headerlink" title="service--&gt;impl目录下面UsrServiceImpl.java文件"></a><code>service--&gt;impl</code>目录下面<code>UsrServiceImpl.java</code>文件</h3><p><code>UsrServiceImpl.java</code>文件内容</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dafei.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.dafei.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.dafei.model.User;</span><br><span class="line"><span class="keyword">import</span> com.dafei.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span>(<span class="string">"userService"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserServiceImpl</span> <span class="keyword">implements</span> <span class="title">UserService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> UserDao userDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> User <span class="title">selectUser</span><span class="params">(<span class="keyword">long</span> userId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> userDao.selectUser(userId);      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/java/ssm/03_demo_test/ssm_3_05.png" alt="ssm demo" title="ssm demo"></p><h3 id="controller目录下面UserController-java"><a href="#controller目录下面UserController-java" class="headerlink" title="controller目录下面UserController.java"></a><code>controller</code>目录下面<code>UserController.java</code></h3><p><code>UserController.java</code>文件内容</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.dafei.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.dafei.model.User;</span><br><span class="line"><span class="keyword">import</span> com.dafei.service.UserService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/user"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/select"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">selectUser</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        ModelAndView mv = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        User user = userService.selectUser(<span class="number">1</span>);</span><br><span class="line">        mv.addObject(<span class="string">"user"</span>, user);</span><br><span class="line">        mv.setViewName(<span class="string">"user"</span>);</span><br><span class="line">        <span class="keyword">return</span> mv;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/java/ssm/03_demo_test/ssm_3_06.png" alt="ssm demo" title="ssm demo"></p><h3 id="启动项目测试"><a href="#启动项目测试" class="headerlink" title="启动项目测试"></a>启动项目测试</h3><p>访问地址  <code>localhost:8080/user/select</code>  查看数据</p><p><img src="/img/java/ssm/03_demo_test/ssm_3_07.png" alt="ssm demo" title="ssm demo"></p><h3 id="整个项目的目录和文件结构"><a href="#整个项目的目录和文件结构" class="headerlink" title="整个项目的目录和文件结构"></a>整个项目的目录和文件结构</h3><details><br>  <summary>点击查看整个目录和文件结构</summary><br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">E:\selfweb\git_dev\java\java01\simplessm\src</span><br><span class="line">└─main</span><br><span class="line">    ├─java</span><br><span class="line">    │  └─com</span><br><span class="line">    │      └─dafei</span><br><span class="line">    │          ├─controller</span><br><span class="line">    │          │      UserController.java</span><br><span class="line">    │          │</span><br><span class="line">    │          ├─dao</span><br><span class="line">    │          │      UserDao.java</span><br><span class="line">    │          │</span><br><span class="line">    │          ├─model</span><br><span class="line">    │          │      User.java</span><br><span class="line">    │          │</span><br><span class="line">    │          └─service</span><br><span class="line">    │              │  UserService.java</span><br><span class="line">    │              │</span><br><span class="line">    │              └─impl</span><br><span class="line">    │                      UserServiceImpl.jav</span><br><span class="line">    │</span><br><span class="line">    ├─resources</span><br><span class="line">    │  │  jdbc.properties</span><br><span class="line">    │  │  log4j.properties</span><br><span class="line">    │  │  spring-mvc.xml</span><br><span class="line">    │  │  spring-mybatis.xml</span><br><span class="line">    │  │</span><br><span class="line">    │  └─mapper</span><br><span class="line">    │          UserMapper.xml</span><br><span class="line">    │</span><br><span class="line">    └─webapp</span><br><span class="line">        │  index.jsp</span><br><span class="line">        │</span><br><span class="line">        └─WEB-INF</span><br><span class="line">            │  web.xml</span><br><span class="line">            │</span><br><span class="line">            └─jsp</span><br><span class="line">                    user.jsp</span><br><span class="line">                    userAll.jsp</span><br></pre></td></tr></table></figure><br><br></details><p>​        </p><p><img src="/img/java/ssm/03_demo_test/ssm_3_08.png" alt="ssm demo" title="ssm demo"></p><p> <a href="../IDEA_SSM_搭建_步骤01/" title="IDEA_SSM_搭建_步骤01">IDEA_SSM_搭建_步骤01</a></p><p> <a href="../IDEA_SSM_搭建_步骤02/" title="IDEA_SSM_搭建_步骤02">IDEA_SSM_搭建_步骤02</a></p>]]></content>
      
      <categories>
          
          <category> SSM </category>
          
          <category> ssm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
            <tag> idea </tag>
            
            <tag> SSM </tag>
            
            <tag> ssm </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-IDEA搭建-SSM 步骤02</title>
      <link href="/2020/07/09/java/IDEA_SSM_%E6%90%AD%E5%BB%BA_%E6%AD%A5%E9%AA%A402/"/>
      <url>/2020/07/09/java/IDEA_SSM_%E6%90%AD%E5%BB%BA_%E6%AD%A5%E9%AA%A402/</url>
      <content type="html"><![CDATA[<p>使用 <code>IDEA</code>搭建<code>SSM</code>项目[ SSM 全名: Spring+SpringMVC+MyBatis ]<br>环境:  IDEA,  JDK1.8, Maven3.6,Tomcat7.0<br>步骤分为三步:<br> 01: 创建maven 工程;<br> 02: 创建spring工程<br> 03: 写个查询demo测试</p><h2 id="第二步-创建spring工程"><a href="#第二步-创建spring工程" class="headerlink" title="第二步,创建spring工程"></a>第二步,创建<code>spring</code>工程</h2><h3 id="基本目录结构"><a href="#基本目录结构" class="headerlink" title="基本目录结构"></a>基本目录结构</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">目录位置\simplessm\src</span><br><span class="line">└─main</span><br><span class="line">    ├─java</span><br><span class="line">    │  └─com</span><br><span class="line">    │      └─dafei</span><br><span class="line">    │          ├─controller</span><br><span class="line">    │          ├─dao</span><br><span class="line">    │          ├─model</span><br><span class="line">    │          └─service</span><br><span class="line">    │              └─impl</span><br><span class="line">    ├─resources</span><br><span class="line">    │  └─mapper</span><br><span class="line">    └─webapp</span><br><span class="line">        └─WEB-INF</span><br><span class="line">            └─jsp</span><br></pre></td></tr></table></figure><h3 id="第二步最终所有文件结构"><a href="#第二步最终所有文件结构" class="headerlink" title="第二步最终所有文件结构"></a>第二步最终所有文件结构</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">目录位置\simplessm\src</span><br><span class="line">└─main</span><br><span class="line">    ├─java</span><br><span class="line">    │  └─com</span><br><span class="line">    │      └─dafei</span><br><span class="line">    │          ├─controller</span><br><span class="line">    │          ├─dao</span><br><span class="line">    │          ├─model</span><br><span class="line">    │          └─service</span><br><span class="line">    │              └─impl</span><br><span class="line">    ├─resources</span><br><span class="line">    │  │  jdbc.properties</span><br><span class="line">    │  │  log4j.properties</span><br><span class="line">    │  │  spring-mvc.xml</span><br><span class="line">    │  │  spring-mybatis.xml</span><br><span class="line">    │  │</span><br><span class="line">    │  └─mapper</span><br><span class="line">    └─webapp</span><br><span class="line">        │  index.jsp</span><br><span class="line">        │</span><br><span class="line">        └─WEB-INF</span><br><span class="line">            │  web.xml</span><br></pre></td></tr></table></figure><p><img src="/img/java/ssm/02_create_spring/ssm_2_01.png" alt="ssm spring" title="ssm spring"></p><h3 id="配置-pom-xml-文件-内容如下"><a href="#配置-pom-xml-文件-内容如下" class="headerlink" title="配置 pom.xml 文件,内容如下"></a>配置 <code>pom.xml</code> 文件,内容如下</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>pw.dafei<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>simplessm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>war<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>simplessm Maven Webapp<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- FIXME change it to the project's website --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://www.example.com<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- spring版本号 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- mybatis版本号 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatis.version</span>&gt;</span>3.2.6<span class="tag">&lt;/<span class="name">mybatis.version</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- log4j日志文件管理包版本 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slf4j.version</span>&gt;</span>1.7.7<span class="tag">&lt;/<span class="name">slf4j.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">log4j.version</span>&gt;</span>1.2.15<span class="tag">&lt;/<span class="name">log4j.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">druid.version</span>&gt;</span>1.0.9<span class="tag">&lt;/<span class="name">druid.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 表示开发的时候引入，发布的时候不会加载此包 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- spring 核心包 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-oxm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-tx<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-context-support<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">            mybatis核心包</span></span><br><span class="line"><span class="comment">            mybatis/spring包</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 导入java ee jar 包 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">            &lt;groupId&gt;javax&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">            &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">            &lt;version&gt;7.0&lt;/version&gt;</span></span><br><span class="line"><span class="comment">        &lt;/dependency&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--  数据库驱动 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.30<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 导入dbcp的jar包，用来在 spring-mybatis.xml 中配置数据库 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-dbcp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- JSTL标签类 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jstl<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 日志文件管理包 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- log start --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 格式化对象，方便输出日志 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>fastjson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.41<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-log4j12<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- log end --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 映入JSON --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;dependency&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;version&gt;1.9.13&lt;/version&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;/dependency&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 上传组件包 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;dependency&gt;</span></span><br><span class="line"><span class="comment">            &lt;groupId&gt;commons-fileupload&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">            &lt;artifactId&gt;commons-fileupload&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">            &lt;version&gt;1.3.1&lt;/version&gt;</span></span><br><span class="line"><span class="comment">        &lt;/dependency&gt;</span></span><br><span class="line"><span class="comment">        &lt;dependency&gt;</span></span><br><span class="line"><span class="comment">            &lt;groupId&gt;commons-io&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">            &lt;version&gt;2.4&lt;/version&gt;</span></span><br><span class="line"><span class="comment">        &lt;/dependency&gt;</span></span><br><span class="line"><span class="comment">        &lt;dependency&gt;</span></span><br><span class="line"><span class="comment">            &lt;groupId&gt;commons-codec&lt;/groupId&gt;</span></span><br><span class="line"><span class="comment">            &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;</span></span><br><span class="line"><span class="comment">            &lt;version&gt;1.9&lt;/version&gt;</span></span><br><span class="line"><span class="comment">        &lt;/dependency&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 连接池 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;druid.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>simplessm<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">pluginManagement</span>&gt;</span><span class="comment">&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-clean-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="comment">&lt;!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-resources-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.8.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.22.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-war-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-install-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">pluginManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建数据库配置-和-日志配置文件"><a href="#创建数据库配置-和-日志配置文件" class="headerlink" title="创建数据库配置 和 日志配置文件"></a>创建数据库配置 和 日志配置文件</h3><p>数据库配置文件<code>jdbc.properties</code><br>日志配置文件<code>log4j.properties</code></p><p><code>jdbc.properties</code> 文件内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">driver=com.mysql.jdbc.Driver</span><br><span class="line">url=jdbc:mysql://localhost:3306/feissm?characterEncoding=utf8&amp;useSSL=false</span><br><span class="line">#数据库的用户名 和 密码</span><br><span class="line">username=afei2</span><br><span class="line">password=123456</span><br><span class="line">#定义初始连接数</span><br><span class="line">initialSize=0</span><br><span class="line">#定义最大连接数</span><br><span class="line">maxActive=20</span><br><span class="line">#定义最大空闲</span><br><span class="line">maxIdle=20</span><br><span class="line">#定义最小空闲</span><br><span class="line">minIdle=1</span><br><span class="line">#定义最长等待时间</span><br><span class="line">maxWait=60000</span><br></pre></td></tr></table></figure><p><code>log4j.properties</code> 问内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#日志输出级别</span><br><span class="line">log4j.rootLogger=debug,stdout,D,E</span><br><span class="line">#设置stdout的日志输出控制台</span><br><span class="line">log4j.appender.stdout=org.apache.log4j.ConsoleAppender</span><br><span class="line">#输出日志到控制台的方式，默认为System.out</span><br><span class="line">log4j.appender.stdout.Target = System.out</span><br><span class="line">#设置使用灵活布局</span><br><span class="line">log4j.appender.stdout.layout=org.apache.log4j.PatternLayout</span><br><span class="line">#灵活定义输出格式</span><br><span class="line">log4j.appender.stdout.layout.ConversionPattern=%d&#123;yyyy-MM-dd HH:mm:ss,SSS&#125; -[%p]  method:[%c (%rms)] - %m%n</span><br></pre></td></tr></table></figure><p><img src="/img/java/ssm/02_create_spring/ssm_2_02.png" alt="ssm spring" title="ssm spring"></p><h3 id="创建-spring-mvc-和-spring-mybatis"><a href="#创建-spring-mvc-和-spring-mybatis" class="headerlink" title="创建 spring-mvc 和 spring-mybatis"></a>创建 <code>spring-mvc</code> 和 <code>spring-mybatis</code></h3><p><code>spring-mvc</code> 文件内容</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc</span></span></span><br><span class="line"><span class="tag"><span class="string">       http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 自动扫描 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.dafei"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 开启SpringMVC注解模式 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 静态资源默认servlet配置 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:default-servlet-handler</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置返回视图的路径，以及识别后缀是jsp文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"viewClass"</span> <span class="attr">value</span>=<span class="string">"org.springframework.web.servlet.view.JstlView"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/jsp/"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>spring-mybatis</code> 文件内容</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/tx</span></span></span><br><span class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/tx/spring-tx.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 加载properties文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"propertyConfigurer"</span> <span class="attr">class</span>=<span class="string">"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"location"</span> <span class="attr">value</span>=<span class="string">"classpath:jdbc.properties"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 配置数据源 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"driverClassName"</span> <span class="attr">value</span>=<span class="string">"$&#123;driver&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"url"</span> <span class="attr">value</span>=<span class="string">"$&#123;url&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">value</span>=<span class="string">"$&#123;username&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">value</span>=<span class="string">"$&#123;password&#125;"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- mybatis和spring完美整合，不需要mybatis的配置映射文件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"sqlSessionFactory"</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 扫描model包 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"typeAliasesPackage"</span> <span class="attr">value</span>=<span class="string">"com.dafei"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 扫描sql配置文件:mapper需要的xml文件 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapperLocations"</span> <span class="attr">value</span>=<span class="string">"classpath:mapper/*.xml"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Mapper动态代理开发，扫描dao接口包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.mybatis.spring.mapper.MapperScannerConfigurer"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 注入sqlSessionFactory --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sqlSessionFactoryBeanName"</span> <span class="attr">value</span>=<span class="string">"sqlSessionFactory"</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 给出需要扫描Dao接口包 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"basePackage"</span> <span class="attr">value</span>=<span class="string">"com.dafei.dao"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 事务管理 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"transactionManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--数据库连接池--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dataSource"</span> <span class="attr">ref</span>=<span class="string">"dataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/java/ssm/02_create_spring/ssm_2_03.png" alt="ssm spring" title="ssm spring"></p><h3 id="修改web-xml"><a href="#修改web-xml" class="headerlink" title="修改web.xml"></a>修改<code>web.xml</code></h3><p><code>web.xml</code>文件内容</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE web-app PUBLIC</span></span><br><span class="line"><span class="meta">        "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"</span></span><br><span class="line"><span class="meta">        "http://java.sun.com/dtd/web-app_2_3.dtd" &gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee</span></span></span><br><span class="line"><span class="tag"><span class="string">         http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Archetype Created Web Application<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--项目的欢迎页，项目运行起来后访问的页面--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 注册ServletContext监听器，创建容器对象，并且将ApplicationContext对象放到Application域中 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 指定spring核心配置文件 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-mybatis.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 解决乱码的过滤器 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- 配置前端控制器 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 指定配置文件位置和名称 如果不设置,默认找/WEB-INF/&lt;servlet-name&gt;-servlet.xml --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:spring-mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">async-supported</span>&gt;</span>true<span class="tag">&lt;/<span class="name">async-supported</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/java/ssm/02_create_spring/ssm_2_04.png" alt="ssm spring" title="ssm spring"></p><h3 id="运行测试"><a href="#运行测试" class="headerlink" title="运行测试"></a>运行测试</h3><p>如果在第一步已经配置<code>Tomcat</code>,这里可以直接启动</p><p><img src="/img/java/ssm/02_create_spring/ssm_2_05.png" alt="ssm spring" title="ssm spring"></p><p> <a href="../IDEA_SSM_搭建_步骤01/" title="IDEA_SSM_搭建_步骤01">IDEA_SSM_搭建_步骤01</a></p><p> <a href="../IDEA_SSM_搭建_步骤03/" title="IDEA_SSM_搭建_步骤03">IDEA_SSM_搭建_步骤03</a></p>]]></content>
      
      <categories>
          
          <category> SSM </category>
          
          <category> ssm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
            <tag> idea </tag>
            
            <tag> SSM </tag>
            
            <tag> ssm </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-IDEA搭建-SSM 步骤01</title>
      <link href="/2020/07/09/java/IDEA_SSM_%E6%90%AD%E5%BB%BA_%E6%AD%A5%E9%AA%A401/"/>
      <url>/2020/07/09/java/IDEA_SSM_%E6%90%AD%E5%BB%BA_%E6%AD%A5%E9%AA%A401/</url>
      <content type="html"><![CDATA[<p>使用 <code>IDEA</code>搭建<code>SSM</code>项目[ SSM 全名: Spring+SpringMVC+MyBatis ]<br>环境:  IDEA,  JDK1.8, Maven3.6,Tomcat7.0<br>步骤分为三步:<br> 01: 创建maven 工程;<br> 02: 创建spring工程<br> 03: 写个查询demo测试</p><h2 id="第一步-创建-maven-工程"><a href="#第一步-创建-maven-工程" class="headerlink" title="第一步, 创建 maven 工程"></a>第一步, 创建 <code>maven</code> 工程</h2><p><img src="/img/java/ssm/01_create_maven/ssm_1_01.png" alt="ssm maven" title="ssm maven"></p><p><img src="/img/java/ssm/01_create_maven/ssm_1_02.png" alt="ssm maven" title="ssm maven"></p><p><img src="/img/java/ssm/01_create_maven/ssm_1_03.png" alt="ssm maven" title="ssm maven"></p><p><img src="/img/java/ssm/01_create_maven/ssm_1_04.png" alt="ssm maven" title="ssm maven"></p><p><img src="/img/java/ssm/01_create_maven/ssm_1_05.png" alt="ssm maven" title="ssm maven"></p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>到这里为止,可以测试一下,前几步有没问题</p><p><img src="/img/java/ssm/01_create_maven/ssm_1_06.png" alt="ssm maven" title="ssm maven"></p><p><img src="/img/java/ssm/01_create_maven/ssm_1_07.png" alt="ssm maven" title="ssm maven"></p><p><img src="/img/java/ssm/01_create_maven/ssm_1_08.png" alt="ssm maven" title="ssm maven"></p><h3 id="运行-hello-world"><a href="#运行-hello-world" class="headerlink" title="运行 hello world"></a>运行 <code>hello world</code></h3><p><img src="/img/java/ssm/01_create_maven/ssm_1_09.png" alt="ssm maven" title="ssm maven"></p><p> <a href="../IDEA_SSM_搭建_步骤02/" title="IDEA_SSM_搭建_步骤02">IDEA_SSM_搭建_步骤02</a></p><p> <a href="../IDEA_SSM_搭建_步骤03/" title="IDEA_SSM_搭建_步骤03">IDEA_SSM_搭建_步骤03</a></p>]]></content>
      
      <categories>
          
          <category> SSM </category>
          
          <category> ssm </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
            <tag> idea </tag>
            
            <tag> SSM </tag>
            
            <tag> ssm </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>CSS 之 -margin 兼容文字方向</title>
      <link href="/2020/07/03/css/css_margin/"/>
      <url>/2020/07/03/css/css_margin/</url>
      <content type="html"><![CDATA[<p> <code>css</code> 之 <code>margin-block-start</code>  和 <code>margin-top</code><br> <code>css</code> 之 <code>margin-inline-start</code> 和 <code>margin-left</code></p><h3 id="兼容文字阅读方向-margin-inline-start"><a href="#兼容文字阅读方向-margin-inline-start" class="headerlink" title="兼容文字阅读方向 margin-inline-start"></a>兼容文字阅读方向 <code>margin-inline-start</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.rtl-tb</span> &#123;</span></span><br><span class="line"><span class="undefined">        direction: rtl;</span></span><br><span class="line"><span class="css">        <span class="comment">/*margin-block-start: 50px; */</span> <span class="comment">/* 文本垂直从上到下的距离 */</span></span></span><br><span class="line"><span class="undefined">        margin-top: 50px;</span></span><br><span class="line"><span class="undefined">        unicode-bidi: bidi-override;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.ltr-tb</span> &#123;</span></span><br><span class="line"><span class="undefined">        direction: ltr;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">margin-inline-start</span>: 50<span class="selector-tag">px</span>; <span class="comment">/* 文本水平左右的距离*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*margin-left: 50px;*/</span> <span class="comment">/* 文本水平左右的距离 */</span></span></span><br><span class="line"><span class="undefined">        unicode-bidi: bidi-override;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.fei_03</span> &#123;</span></span><br><span class="line"><span class="undefined">        direction: rtl;</span></span><br><span class="line"><span class="undefined">        /** </span></span><br><span class="line"><span class="undefined">        可以兼容文件方向,这里在使用原来的 margin-left 就没有效果,</span></span><br><span class="line"><span class="undefined">        要使用margin-right,才能回出现右边的距离</span></span><br><span class="line"><span class="undefined">        */</span></span><br><span class="line"><span class="undefined">        margin-inline-start: 50px; </span></span><br><span class="line"><span class="css">        <span class="comment">/*margin-right: 50px;*/</span></span></span><br><span class="line"><span class="undefined">        unicode-bidi: bidi-override;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"fei_01 rtl-tb"</span>&gt;</span></span><br><span class="line">    水平从右到左的。 hello world</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"fei_02 ltr-tb"</span>&gt;</span></span><br><span class="line">    水平从左到右的。 hello world</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"fei_03"</span>&gt;</span></span><br><span class="line">    水平从右到左的。 hello world</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>fei<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>fei<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>fei<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/margin.png" alt="margin" title="margin"></p><h3 id="margin-和-padding-参数"><a href="#margin-和-padding-参数" class="headerlink" title="margin 和 padding 参数"></a><code>margin</code> 和 <code>padding</code> 参数</h3><h5 id="A-margin-和-padding-参数顺时针方向顺序-上右下左"><a href="#A-margin-和-padding-参数顺时针方向顺序-上右下左" class="headerlink" title="A) margin 和 padding 参数顺时针方向顺序[ 上右下左]"></a>A) margin 和 padding 参数顺时针方向顺序[ 上右下左]</h5><p>​    两个 值时，第一个值被匹配给 上和下, 第二个值被匹配给 左和右.<br>​    三个 值时，第一个值被匹配给 上, 第二个值被匹配给 左和右, 第三个值被匹配给 下</p><p>​    两个值的时候,上和右,没有下和左,下跟随上,左跟随右<br>​    三个值的时候,上右下,没有左,左边的值跟随右边的值</p><h5 id="B-折叠-发生在垂直方向-垂直方向上margin折叠计算规则-2个值进行比较-取较大的值"><a href="#B-折叠-发生在垂直方向-垂直方向上margin折叠计算规则-2个值进行比较-取较大的值" class="headerlink" title="B) 折叠(发生在垂直方向),垂直方向上margin折叠计算规则: 2个值进行比较,取较大的值"></a>B) 折叠(发生在垂直方向),垂直方向上margin折叠计算规则: 2个值进行比较,取较大的值</h5><p>​      demo: div1 和 div2 页面上实际效果是20px</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.div1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#add8e6</span>;</span></span><br><span class="line"><span class="undefined">        width: 100px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="undefined">        margin-bottom: 20px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.div2</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#cd5c5c</span>;</span></span><br><span class="line"><span class="undefined">        width: 100px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="undefined">        margin-top: 10px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="C-传递-子元素和父元素基线对齐的时候-子元素传给父元素"><a href="#C-传递-子元素和父元素基线对齐的时候-子元素传给父元素" class="headerlink" title="C) 传递(子元素和父元素基线对齐的时候,子元素传给父元素)"></a>C) 传递(子元素和父元素基线对齐的时候,子元素传给父元素)</h4><p>​               margin-top 传递 demo1: div2_01 中的  margin-top: 30px; 发生了传递</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.div1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#add8e6</span>;</span></span><br><span class="line"><span class="undefined">        width: 100px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="undefined">        margin-bottom: 20px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="css">    <span class="selector-class">.div2</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#cd5c5c</span>;</span></span><br><span class="line"><span class="undefined">        width: 100px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="undefined">        margin-top: 10px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.div2_01</span> &#123;</span></span><br><span class="line"><span class="undefined">        background: red;</span></span><br><span class="line"><span class="undefined">        width: 50px;</span></span><br><span class="line"><span class="undefined">        height: 50px;</span></span><br><span class="line"><span class="undefined">        margin-top: 30px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div2_01"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>margin-bottom 传递 demo2</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.div1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#add8e6</span>;</span></span><br><span class="line"><span class="undefined">        width: 100px;</span></span><br><span class="line"><span class="css">        <span class="comment">/*height: 100px;*/</span></span></span><br><span class="line"><span class="undefined">        height: auto;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="css">    <span class="selector-class">.div2</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#cd5c5c</span>;</span></span><br><span class="line"><span class="undefined">        width: 100px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.div1_01</span> &#123;</span></span><br><span class="line"><span class="undefined">        background: red;</span></span><br><span class="line"><span class="undefined">        width: 50px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="undefined">        margin-bottom: 20px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span> margin-bottom 传递<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div1"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div1_01"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div2"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="C-02-防止传递方法3种"><a href="#C-02-防止传递方法3种" class="headerlink" title="C-02) 防止传递方法3种"></a>C-02) 防止传递方法3种</h4><p> 01) 给父元素设置padding-top 或者 padding-bottom<br> 02) 给父元素设置border<br> 03) 触发BFC: 设置overflow为auto 或者 hidden</p><h4 id="D-margin-和-padding-总结"><a href="#D-margin-和-padding-总结" class="headerlink" title="D) margin 和 padding 总结"></a>D) margin 和 padding 总结</h4><p>margin一般是用来设置兄弟元素之间的间距<br>padding一般是用来设置父子元素之间的间距<br>一个padding的demo:   子元素向下移动20px, 父元素总高度为120px</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.div1</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#add8e6</span>;</span></span><br><span class="line"><span class="undefined">        width: 100px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="undefined">        margin-bottom: 20px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="css">    <span class="selector-class">.div2</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#cd5c5c</span>;</span></span><br><span class="line"><span class="undefined">        width: 100px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">padding-top</span>: 20<span class="selector-tag">px</span>;<span class="comment">/*  子元素移动20px, 父元素总高度为120px */</span></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.div2_01</span> &#123;</span></span><br><span class="line"><span class="undefined">        background: red;</span></span><br><span class="line"><span class="undefined">        width: 50px;</span></span><br><span class="line"><span class="undefined">        height: 50px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div1"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div2"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"div2_01"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> margin </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Postman 中批量运行多个请求</title>
      <link href="/2020/07/03/other/postman_02/"/>
      <url>/2020/07/03/other/postman_02/</url>
      <content type="html"><![CDATA[<p><code>Postman</code>  中批量运行请求<br><code>Postman</code>  中批量运行请求<br><code>Postman</code>  中批量运行请求</p><p>背景: 使用<code>postman</code>的时候调用接口做测试的时候需要大量测试数据</p><h3 id="批量运行"><a href="#批量运行" class="headerlink" title="批量运行"></a>批量运行</h3><p><img src="/img/other/postman/postman_runner.png" alt="批量运行" title="批量运行"></p>]]></content>
      
      <categories>
          
          <category> Postman </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Postman </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-CSS 特性</title>
      <link href="/2020/06/27/css/css%E7%89%B9%E6%80%A7/"/>
      <url>/2020/06/27/css/css%E7%89%B9%E6%80%A7/</url>
      <content type="html"><![CDATA[<p>css特性<br>css特性<br>css特性</p><h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-tag">div</span><span class="selector-class">.foo</span>&#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>: <span class="selector-id">#ff0000</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"foo"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">官网看是否可以继承:</span><br><span class="line">https://developer.mozilla.org/zh-CN/docs/Web</span><br><span class="line">https://developer.mozilla.org/zh-CN/docs/Web</span><br><span class="line">demo:</span><br><span class="line">搜索: </span><br><span class="line">font-size  然后找有 The font-size CSS property 的文章进去看:是否是继承属性yes</span><br><span class="line"></span><br><span class="line">color 然后找有  The color CSS property 的文章进去进去看: 是否是继承属性yes</span><br></pre></td></tr></table></figure><p><img src="/img/css/css_inherit.png" alt="css 继承" title="css继承"></p><p><img src="/img/css/css_inherit_02.png" alt="css 继承" title="css继承"></p><p> <a href="https://developer.mozilla.org/zh-CN/docs/Web" title="MDN" target="_blank" rel="noopener">MDN</a></p><h4 id="继承02"><a href="#继承02" class="headerlink" title="继承02"></a>继承02</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">        <span class="selector-tag">div</span><span class="selector-class">.foo</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">color</span>: <span class="selector-id">#ff0000</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#00c3ff</span>;</span></span><br><span class="line"><span class="undefined">            width: 40px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        </span></span><br><span class="line"><span class="undefined">        /* </span></span><br><span class="line"><span class="undefined">        width  本身不支持继承</span></span><br><span class="line"><span class="undefined">        想让width继承方法2中</span></span><br><span class="line"><span class="undefined">        */</span></span><br><span class="line"><span class="undefined">        img&#123;            </span></span><br><span class="line"><span class="css">            <span class="comment">/* width: inherit; */</span>  <span class="comment">/* 第一种方案 */</span></span></span><br><span class="line"><span class="css">            <span class="selector-tag">width</span>: 100%; <span class="comment">/* 第二种方案 */</span>  <span class="comment">/* 相对于包含块的百分百*/</span></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"foo"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./avatar.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">参见文档:</span><br><span class="line">https://developer.mozilla.org/zh-CN/docs/Web/CSS/width</span><br><span class="line">中 </span><br><span class="line">Percentagesrefer to the width of the containing block</span><br></pre></td></tr></table></figure><p> <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/width" title="MDN width" target="_blank" rel="noopener">MDN width</a></p><h3 id="其他-浏览器代理样式"><a href="#其他-浏览器代理样式" class="headerlink" title="其他_浏览器代理样式"></a>其他_浏览器代理样式</h3><p>有些HTML元素本身有样式比如 h1,h3,strong,i </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span>我是标题<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span>foo<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span>&gt;</span>dafei<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/css_chrome.png" alt="chrome代理样式" title="chrome代理样式"></p><p><img src="/img/css/css_firefox.png" alt="火狐代理样式" title="火狐代理样式"></p><h3 id="CSS-权重"><a href="#CSS-权重" class="headerlink" title="CSS 权重"></a><code>CSS</code> 权重</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">权重从高到低</span><br><span class="line">!important</span><br><span class="line">内联样式[ 行内样式 ]</span><br><span class="line">id选择器</span><br><span class="line">类选择器,属性选择器,伪类</span><br><span class="line">元素选择器,伪元素</span><br></pre></td></tr></table></figure><h3 id="行内替换元素无效属性"><a href="#行内替换元素无效属性" class="headerlink" title="行内替换元素无效属性"></a>行内替换元素无效属性</h3><p>以下属性对行内非替换元素不起作用</p><p><code>width</code> <code>height</code> <code>margin-top</code> <code>margin-bottom</code></p><p>一下属性对行内非替换元素的效果比较特殊</p><p><code>padding-top</code>  <code>padding-bottom</code> 上下方向的<code>border</code></p>]]></content>
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS特性 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>选择器 -CSS</title>
      <link href="/2020/06/24/css/css_%E9%80%89%E6%8B%A9%E5%99%A8/"/>
      <url>/2020/06/24/css/css_%E9%80%89%E6%8B%A9%E5%99%A8/</url>
      <content type="html"><![CDATA[<p>选择器 -css<br>选择器 -css<br>项目和实际中使用频率高的<code>后代选择器</code> 和  <code>子代选择器</code> 和 <code>伪元素</code></p><h3 id="后代选择器"><a href="#后代选择器" class="headerlink" title="后代选择器"></a>后代选择器</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    后代选择器(以空格分隔)</span></span><br><span class="line"><span class="comment">    选择div 元素内的所有p 元素 中的 所有span 元素</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    div p span&#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>: <span class="selector-id">#ff0000</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei01<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei02<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei03 红色 <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei04 红色<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei05<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="子代选择器"><a href="#子代选择器" class="headerlink" title="子代选择器"></a>子代选择器</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    子元素选择器(以大于号分隔）</span></span><br><span class="line"><span class="comment">    选择div 元素内的子代p 元素 中的子代span 元素 </span></span><br><span class="line"><span class="comment">    [ 必须是div p span 层级模式,中间不能有其他元素 ]</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    div &gt; p &gt; span &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>: <span class="selector-id">#ff0000</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei01<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei02<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei03 红色 <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei04<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei06 红色 <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei05<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="伪元素-before-和-after"><a href="#伪元素-before-和-after" class="headerlink" title="伪元素 ::before 和  ::after"></a>伪元素 <code>::before</code> 和  <code>::after</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">其他不常用的伪元素 </span><br><span class="line">::first-letter选择指定元素的第一个单词</span><br><span class="line">::first-line选择指定元素的第一行</span><br><span class="line">::selection选择指定元素中被用户选中的内容</span><br><span class="line"></span><br><span class="line">01) --------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    /* </span></span><br><span class="line"><span class="undefined">    所有的span标签前面添加foo_</span></span><br><span class="line"><span class="undefined">    也可以是图片 content: url('./img.png')</span></span><br><span class="line"><span class="undefined">    */</span></span><br><span class="line"><span class="undefined">    /*这2种等效,习惯选择第一种,使用2个冒号, </span></span><br><span class="line"><span class="undefined">    其实就是为了  把伪元素和伪类区分开*/</span></span><br><span class="line"><span class="undefined">    /*</span></span><br><span class="line"><span class="undefined">      这里的content 属性不能省略      </span></span><br><span class="line"><span class="undefined">    */</span></span><br><span class="line"><span class="css">    <span class="selector-tag">span</span><span class="selector-pseudo">::before</span> &#123;  <span class="comment">/* 习惯写2个冒号 */</span></span></span><br><span class="line"><span class="undefined">        content: 'foo_';</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="css">    <span class="comment">/*span:before &#123;*/</span></span></span><br><span class="line"><span class="css">        <span class="comment">/*content: 'foo_';*/</span></span></span><br><span class="line"><span class="css">    <span class="comment">/*&#125;*/</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei01<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei02 红色<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei03<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei04<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei06<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei05<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">02) ----------------------------------------------------------------------------</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="comment">/* 为元素可以看做行内元素 */</span></span></span><br><span class="line"><span class="css">    <span class="selector-tag">span</span><span class="selector-pseudo">::before</span> &#123; </span></span><br><span class="line"><span class="undefined">        content: 'foo_';</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background-color</span>: <span class="selector-id">#ff0000</span>;</span></span><br><span class="line"><span class="undefined">        display: inline-block;</span></span><br><span class="line"><span class="undefined">        width: 50px;</span></span><br><span class="line"><span class="undefined">        height: 50px;</span></span><br><span class="line"><span class="undefined">        margin-right: 30px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei01<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei02 红色<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei05<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/css_before.png" alt="css_before" title="css_before"></p><h3 id="相邻兄弟选择器"><a href="#相邻兄弟选择器" class="headerlink" title="相邻兄弟选择器"></a>相邻兄弟选择器</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    相邻兄弟选择器（以加号分隔）</span></span><br><span class="line"><span class="comment">    div p span 三个元素是相邻的兄弟[ 必须是第一个 ]</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    div + p +span&#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>: <span class="selector-id">#ff0000</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei01<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei02<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei03 <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei04<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei06 <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei05<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei07 红色<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei08<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="并集选择器"><a href="#并集选择器" class="headerlink" title="并集选择器"></a>并集选择器</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    并集选择器(以逗号分隔)</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    div, p, span &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>: <span class="selector-id">#ff0000</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei01 红色<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei02 红色<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei03 红色<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei04 红色<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei06 红色<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei05 红色<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h5</span>&gt;</span>dafei07<span class="tag">&lt;/<span class="name">h5</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="交集选择器"><a href="#交集选择器" class="headerlink" title="交集选择器"></a>交集选择器</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">    交集选择器(标签和class构成)</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="comment">/* 标签是div且class为class_foo */</span></span></span><br><span class="line"><span class="css">    <span class="selector-tag">div</span><span class="selector-class">.class_foo</span> &#123;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">color</span>: <span class="selector-id">#ff0000</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"class_foo"</span>&gt;</span>dafei01<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"class_foo"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei02 红色<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"class_foo"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"class_foo"</span>&gt;</span>dafei03<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">strong</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"class_foo"</span>&gt;</span>dafei04<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei06<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"class_foo"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>dafei05<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="伪类选择器-nth-child"><a href="#伪类选择器-nth-child" class="headerlink" title="伪类选择器 nth-child"></a>伪类选择器 <code>nth-child</code></h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(2)</span> &#123; <span class="comment">/* 第二行 */</span></span><br><span class="line">    <span class="attribute">background-color</span>: yellowgreen;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(even)</span> &#123;  <span class="comment">/* 偶数 */</span></span><br><span class="line">    <span class="attribute">background-color</span>: yellowgreen;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(odd)</span> &#123; <span class="comment">/* 奇数 */</span></span><br><span class="line">    <span class="attribute">background-color</span>: yellowgreen;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span>&gt;<span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(2n+1)</span> &#123; <span class="comment">/* 奇数 */</span></span><br><span class="line">    <span class="attribute">background-color</span>: yellowgreen;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;<span class="selector-tag">ul</span>&gt;</span><br><span class="line">    &lt;li&gt;1&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;2&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;3&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;4&lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure><h3 id="伪类选择器-not"><a href="#伪类选择器-not" class="headerlink" title="伪类选择器 :not"></a>伪类选择器 <code>:not</code></h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h2</span><span class="selector-pseudo">:not(</span><span class="selector-attr">[data-fei]</span>)&#123;  <span class="comment">/* 不含data-fei 属性 */</span></span><br><span class="line">    <span class="attribute">color</span>: yellowgreen;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;h2 data-fei="da"&gt;1111111&lt;/h2&gt;</span><br><span class="line">&lt;h2&gt;2222222222&lt;/h2&gt;</span><br><span class="line">&lt;h2&gt;333333333333&lt;/h2&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> CSS选择器 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vue -meta 元数据</title>
      <link href="/2020/06/14/vue/vue_meta_login/"/>
      <url>/2020/06/14/vue/vue_meta_login/</url>
      <content type="html"><![CDATA[<p> <code>vue</code> 中 <code>meta</code> 元数据使用和页面中<code>title</code>处理,登录判断处理<br> <code>vue</code> 中 <code>meta</code> 元数据使用和页面中<code>title</code>处理,登录判断处理<br> <code>vue</code> 中 <code>meta</code> 元数据使用和页面中<code>title</code>处理,登录判断处理</p><h3 id="router-js-路由文件中设置meta"><a href="#router-js-路由文件中设置meta" class="headerlink" title="router.js 路由文件中设置meta"></a><code>router.js</code> 路由文件中设置<code>meta</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">    <span class="comment">// mode: 'history',</span></span><br><span class="line">    routes: [</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">'/'</span>,</span><br><span class="line">            name: <span class="string">'home'</span>,</span><br><span class="line">            meta:&#123;</span><br><span class="line">                title: <span class="string">"首页-title"</span>,</span><br><span class="line">                content: <span class="string">"首页-content"</span>,</span><br><span class="line">                isLogin: <span class="literal">false</span>, <span class="comment">// 是否需要登录</span></span><br><span class="line">                selfContent: <span class="string">"首页-selfContent"</span>, <span class="comment">// 自定义属性</span></span><br><span class="line">            &#125;,</span><br><span class="line">            component: <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'../views/Home.vue'</span>),</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">'/HelloWorld'</span>,</span><br><span class="line">            name: <span class="string">'HelloWorld'</span>,</span><br><span class="line">            meta:&#123;</span><br><span class="line">                title: <span class="string">"我是title"</span>,</span><br><span class="line">                content: <span class="string">"我是content"</span>,</span><br><span class="line">                isLogin: <span class="literal">true</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">            component: HelloWorld</span><br><span class="line">        &#125;,</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="main-js-中代码"><a href="#main-js-中代码" class="headerlink" title="main.js 中代码"></a><code>main.js</code> 中代码</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">router.beforeEach(<span class="function">(<span class="params">to, form, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">/* 路由发生变化修改页面meta */</span></span><br><span class="line">    <span class="keyword">if</span> (to.meta.content) &#123;</span><br><span class="line">        <span class="comment">// !!!这里的meta在页面上会越来越多,请自行解决!!!</span></span><br><span class="line">        <span class="keyword">let</span> head = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>);</span><br><span class="line">        <span class="keyword">let</span> meta = <span class="built_in">document</span>.createElement(<span class="string">'meta'</span>);</span><br><span class="line">        meta.content = to.meta.content;</span><br><span class="line">        head[<span class="number">0</span>].appendChild(meta)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/* 路由发生变化修改页面title */</span></span><br><span class="line">    <span class="keyword">if</span> (to.meta.title) &#123;</span><br><span class="line">        <span class="built_in">document</span>.title = to.meta.title;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 登录判断</span></span><br><span class="line">    <span class="keyword">if</span> (to.path === <span class="string">'/http-login'</span>) &#123;</span><br><span class="line">        sessionStorage.removeItem(<span class="string">'user'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 没有登录跳转到登录界面</span></span><br><span class="line">    <span class="keyword">if</span> (to.meta.isLogin &amp;&amp; !<span class="built_in">JSON</span>.parse(sessionStorage.getItem(<span class="string">'user'</span>))) &#123;</span><br><span class="line">        next(&#123;<span class="attr">path</span>: <span class="string">'/http-login'</span>&#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    next()</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> meta </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Postman 中设置全局变量,token</title>
      <link href="/2020/06/12/other/postman/"/>
      <url>/2020/06/12/other/postman/</url>
      <content type="html"><![CDATA[<p><code>Postman</code>  中设置全局变量,解决token传参更新问题<br><code>Postman</code>  中设置全局变量,解决token传参更新问题<br><code>Postman</code>  中设置全局变量,解决token传参更新问题</p><p>背景: 使用<code>postman</code>的时候调用接口添加<code>token</code>越来越多,每次手动更新token太浪时间</p><h3 id="全局添加变量"><a href="#全局添加变量" class="headerlink" title="全局添加变量"></a>全局添加变量</h3><p><img src="/img/other/postman/postman_01.png" alt="全局添加变量" title="全局添加变量"></p><h3 id="全局变量使用"><a href="#全局变量使用" class="headerlink" title="全局变量使用"></a>全局变量使用</h3><p><img src="/img/other/postman/postman_02.png" alt="全局变量使用" title="全局变量使用"></p><h3 id="更新全局变量token"><a href="#更新全局变量token" class="headerlink" title="更新全局变量token"></a>更新全局变量<code>token</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//把json字符串转化为对象</span></span><br><span class="line"><span class="keyword">var</span> data=<span class="built_in">JSON</span>.parse(responseBody);</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取data对象的access_token值。 [ access_token 看自己实际场景 ]</span></span><br><span class="line"><span class="keyword">var</span> token=data.data.access_token;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置成全局变量,可以替换刚才写的 fei_token 的值</span></span><br><span class="line">pm.environment.set(<span class="string">"fei_token"</span>, <span class="string">"Bearer "</span>+token);</span><br></pre></td></tr></table></figure><p><img src="/img/other/postman/postman_03.png" alt="更新全局变量token" title="更新全局变量token"></p><p><img src="/img/other/postman/postman_token.gif" alt="更新全局变量token" title="更新全局变量token"></p>]]></content>
      
      <categories>
          
          <category> Postman </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Postman </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>CSS 之 text-align</title>
      <link href="/2020/06/07/css/css_text_align/"/>
      <url>/2020/06/07/css/css_text_align/</url>
      <content type="html"><![CDATA[<p> css 之 text-align<br> css 之 text-align<br> css 之 text-align</p><h3 id="text-align-文本对齐"><a href="#text-align-文本对齐" class="headerlink" title="text-align  文本对齐"></a><code>text-align</code>  文本对齐</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css"><span class="selector-class">.box</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background-color</span>: <span class="selector-id">#00ff00</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">text-align</span>: <span class="selector-tag">center</span>;  <span class="comment">/** 让inner中内容居中对齐,不是对inner的div居中*/</span></span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-class">.inner</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">background-color</span>: <span class="selector-id">#9b5384</span>;</span></span><br><span class="line"><span class="css">    <span class="selector-tag">width</span>: 200<span class="selector-tag">px</span>;  <span class="comment">/*这行*/</span></span></span><br><span class="line"><span class="css">    <span class="selector-tag">display</span>: <span class="selector-tag">inline-block</span>;  <span class="comment">/*这行*/</span></span></span><br><span class="line"><span class="css">    <span class="comment">/* text-align-last: justify; */</span></span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"inner"</span>&gt;</span>我是div元素<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>### </p><p><img src="/img/css/text_align.png" alt="root passwd" title="text-align"></p>]]></content>
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> text-align </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-CSS -transform特效</title>
      <link href="/2020/06/06/css/css_transform/"/>
      <url>/2020/06/06/css/css_transform/</url>
      <content type="html"><![CDATA[<p><code>css</code> <code>transform</code> 抽奖特效 实现2D和3D<br><code>css</code> <code>transform</code> 抽奖特效 实现2D和3D</p><h3 id="transform-抽奖特效"><a href="#transform-抽奖特效" class="headerlink" title="transform 抽奖特效"></a><code>transform</code> 抽奖特效</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>daFei_transform<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.con</span> &#123;</span></span><br><span class="line"><span class="undefined">        width: 200px;</span></span><br><span class="line"><span class="undefined">        height: 50px;</span></span><br><span class="line"><span class="css">        <span class="selector-tag">background</span>: <span class="selector-id">#138ce0</span>;</span></span><br><span class="line"><span class="undefined">        overflow: hidden;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.item</span> &#123;</span></span><br><span class="line"><span class="undefined">        display: inline-block;</span></span><br><span class="line"><span class="undefined">        width: 20px;</span></span><br><span class="line"><span class="undefined">        height: 100px;</span></span><br><span class="line"><span class="undefined">        margin-left: 30px;</span></span><br><span class="line"><span class="undefined">        margin-top: 5px;</span></span><br><span class="line"><span class="undefined">        transform: translate3d(0px, 0px, 0px);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.item</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.item</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">    <span class="selector-class">.item</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    img &#123;</span></span><br><span class="line"><span class="undefined">        width: 100%;</span></span><br><span class="line"><span class="undefined">        height: auto;</span></span><br><span class="line"><span class="undefined">        margin-bottom: 40px;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"con"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"duihao.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"duihao.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"duihao.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"duihao.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"duihao.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"duihao.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"duihao.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"duihao.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"duihao.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"duihao.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"duihao.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"duihao.png"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">dafei</span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn"</span>&gt;</span>走起来<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"btn2"</span>&gt;</span>初始化<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> cliItem = $(<span class="string">'.item'</span>);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">'#btn'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            cliItem.css(<span class="string">'transition'</span>, <span class="string">'all 1s'</span>);</span></span><br><span class="line"><span class="actionscript">            cliItem.eq(<span class="number">0</span>).css(<span class="string">'transform'</span>, <span class="string">'translate3d(0px,-128px,0px)'</span>);</span></span><br><span class="line"><span class="actionscript">            setTimeout(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                cliItem.eq(<span class="number">1</span>).css(<span class="string">'transform'</span>, <span class="string">'translate3d(0px,-128px,0px)'</span>)</span></span><br><span class="line"><span class="undefined">            &#125;, 100);</span></span><br><span class="line"><span class="actionscript">            setTimeout(<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                cliItem.eq(<span class="number">2</span>).css(<span class="string">'transform'</span>, <span class="string">'translate3d(0px,-128px,0px)'</span>)</span></span><br><span class="line"><span class="undefined">            &#125;, 200)</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">        $(<span class="string">'#btn2'</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">            cliItem.css(<span class="string">'transition'</span>, <span class="string">''</span>);</span></span><br><span class="line"><span class="actionscript">            cliItem.css(<span class="string">'transform'</span>, <span class="string">''</span>);</span></span><br><span class="line"><span class="undefined">        &#125;)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    &#125;)</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/css/transform_01.gif" alt="transform" title="transform"></p><p><img src="/img/css/transform_02.png" alt="transform" title="transform"></p>]]></content>
      
      <categories>
          
          <category> CSS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSS </tag>
            
            <tag> transform </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-vue-router 路由</title>
      <link href="/2020/06/05/vue/vue_config_js%E9%85%8D%E7%BD%AE/"/>
      <url>/2020/06/05/vue/vue_config_js%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<p><code>vue-cli3</code> 中 <code>vue.config.js</code> 配置<br><code>vue-cli3</code> 中 <code>vue.config.js</code> 配置</p><h3 id="vue-config-js-配置文件"><a href="#vue-config-js-配置文件" class="headerlink" title="vue.config.js  配置文件"></a><code>vue.config.js</code>  配置文件</h3><p> 在根目录下创建 vue.config.js 即可使用  [ 和 package.json 同级]</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="comment">// 基本路径</span></span><br><span class="line">    publicPath: <span class="string">'./'</span>,</span><br><span class="line">    <span class="comment">// 打包输出文件目录</span></span><br><span class="line">    outputDir: <span class="string">'dist'</span>,</span><br><span class="line">    <span class="comment">// eslint-loader 是否在保存的时候检查</span></span><br><span class="line">    lintOnSave: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// use the full build with in-browser compiler?</span></span><br><span class="line">    <span class="comment">// https://vuejs.org/v2/guide/installation.html#Runtime-Compiler-vs-Runtime-only</span></span><br><span class="line">    runtimeCompiler: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// webpack配置</span></span><br><span class="line">    <span class="comment">// see https://github.com/vuejs/vue-cli/blob/dev/docs/webpack.md</span></span><br><span class="line">    chainWebpack: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">    configureWebpack: <span class="function"><span class="params">()</span> =&gt;</span> &#123;&#125;,</span><br><span class="line">    <span class="comment">// 生产环境是否生成 sourceMap 文件</span></span><br><span class="line">    productionSourceMap: <span class="literal">false</span>,</span><br><span class="line">    <span class="comment">// css相关配置</span></span><br><span class="line">    <span class="comment">/*css: &#123;</span></span><br><span class="line"><span class="comment">        // 是否使用css分离插件 ExtractTextPlugin</span></span><br><span class="line"><span class="comment">        extract: true,</span></span><br><span class="line"><span class="comment">        // 开启 CSS source maps?</span></span><br><span class="line"><span class="comment">        sourceMap: false,</span></span><br><span class="line"><span class="comment">        // css预设器配置项</span></span><br><span class="line"><span class="comment">        loaderOptions: &#123;&#125;,</span></span><br><span class="line"><span class="comment">        // 启用 CSS modules for all css / pre-processor files.</span></span><br><span class="line"><span class="comment">        modules: false</span></span><br><span class="line"><span class="comment">    &#125;,*/</span></span><br><span class="line">    <span class="comment">// use thread-loader for babel &amp; TS in production build</span></span><br><span class="line">    <span class="comment">// enabled by default if the machine has more than 1 cores</span></span><br><span class="line">    parallel: <span class="built_in">require</span>(<span class="string">'os'</span>).cpus().length &gt; <span class="number">1</span>,</span><br><span class="line">    <span class="comment">// 是否启用dll</span></span><br><span class="line">    <span class="comment">// See https://github.com/vuejs/vue-cli/blob/dev/docs/cli-service.md#dll-mode</span></span><br><span class="line">    <span class="comment">// dll: false,</span></span><br><span class="line">    <span class="comment">// PWA 插件相关配置</span></span><br><span class="line">    <span class="comment">// see https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-pwa</span></span><br><span class="line">    pwa: &#123;&#125;,</span><br><span class="line">    <span class="comment">// webpack-dev-server 相关配置</span></span><br><span class="line">    devServer: &#123;</span><br><span class="line">        <span class="comment">// open: process.platform === 'darwin',</span></span><br><span class="line">        <span class="comment">//将服务启动后默认打开浏览器</span></span><br><span class="line">        open: <span class="literal">true</span>,</span><br><span class="line">        host: <span class="string">'0.0.0.0'</span>,</span><br><span class="line">        port: <span class="number">8080</span>,</span><br><span class="line">        https: <span class="literal">false</span>,</span><br><span class="line">        hotOnly: <span class="literal">false</span>,</span><br><span class="line">        proxy: &#123;<span class="comment">// 设置代理</span></span><br><span class="line">            <span class="string">'/api'</span>: &#123;</span><br><span class="line">                target: <span class="string">'https://www.cnblogs.com/'</span>,</span><br><span class="line">                changeOrigin: <span class="literal">true</span>,</span><br><span class="line">                pathRewrite: &#123;</span><br><span class="line">                    <span class="string">'^/api'</span>: <span class="string">'/'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        before: <span class="function"><span class="params">app</span> =&gt;</span> &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 第三方插件配置</span></span><br><span class="line">    pluginOptions: &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> web前端 </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> vue.config.js </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-vue-router 路由02</title>
      <link href="/2020/06/05/vue/vue_router_02/"/>
      <url>/2020/06/05/vue/vue_router_02/</url>
      <content type="html"><![CDATA[<p>路由 <code>vue-router</code><br>路由 <code>vue-route</code> 基本使用</p><p>路由 <code>vue-router</code> 基本使用</p><h3 id="全局导航守卫beforeEach处理元数据meta"><a href="#全局导航守卫beforeEach处理元数据meta" class="headerlink" title="全局导航守卫beforeEach处理元数据meta"></a>全局导航守卫<code>beforeEach</code>处理元数据<code>meta</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/router/index.js 文件中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局导航守卫</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = to.meta.title;</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在组件中获取meta数据信息</span></span><br><span class="line">&lt;div&gt; &#123;&#123; $route.meta.title&#125;&#125; &lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure><h3 id="组件内导航守卫"><a href="#组件内导航守卫" class="headerlink" title="组件内导航守卫"></a>组件内导航守卫</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// beforeRouteEnter</span></span><br><span class="line"><span class="comment">// beforeRouteUpdate </span></span><br><span class="line"><span class="comment">// beforeRouteLeave</span></span><br><span class="line"></span><br><span class="line">beforeRouteLeave(to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(to,<span class="string">"去那个页面"</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">from</span>,<span class="string">"来自哪个页面"</span>);</span><br><span class="line">    next();  <span class="comment">//这个不要丢了</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <a href="https://router.vuejs.org/zh/api/#tag" title="vue-router" target="_blank" rel="noopener">vue-router</a></p>]]></content>
      
      <categories>
          
          <category> web前端 </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> vue-router </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vue_webstorm_debug</title>
      <link href="/2020/06/01/vue/vue_webstorm_%E6%96%AD%E7%82%B9/"/>
      <url>/2020/06/01/vue/vue_webstorm_%E6%96%AD%E7%82%B9/</url>
      <content type="html"><![CDATA[<p>vue 和 debug 断点调试<br>vue 和 debug 断点调试</p><p>vue 和 debug 断点调试</p><h3 id="vue-打断点debug-普通断点"><a href="#vue-打断点debug-普通断点" class="headerlink" title="vue 打断点debug [ 普通断点]"></a>vue 打断点debug [ 普通断点]</h3><p><img src="/img/vue/other/vue_debug.png" alt="vue debug" title="vue debug"></p><h3 id="在webstorm中断点调试"><a href="#在webstorm中断点调试" class="headerlink" title="在webstorm中断点调试"></a>在webstorm中断点调试</h3><h4 id="01-在chrome中安装插件-JetBrains-IDE-Support-想办法自己下载"><a href="#01-在chrome中安装插件-JetBrains-IDE-Support-想办法自己下载" class="headerlink" title="01) 在chrome中安装插件 JetBrains IDE Support [ 想办法自己下载 ]"></a>01) 在chrome中安装插件 <a href="https://chrome.google.com/webstore/detail/jetbrains-ide-support/hmhgeddbohgjknpmjagkdomcpobmllji" target="_blank" rel="noopener">JetBrains IDE Support</a> [ 想办法自己下载 ]</h4><h4 id="02-创建demo项目-vue-init-webpack-vuejs-webpack-project-dafei"><a href="#02-创建demo项目-vue-init-webpack-vuejs-webpack-project-dafei" class="headerlink" title="02) 创建demo项目 vue init webpack vuejs-webpack-project-dafei"></a>02) 创建demo项目 vue init webpack vuejs-webpack-project-dafei</h4><h4 id="03-在config-index-js-中-修改-devtool-‘source-map’-不配置这项-后面断点的时候会显示不出结果"><a href="#03-在config-index-js-中-修改-devtool-‘source-map’-不配置这项-后面断点的时候会显示不出结果" class="headerlink" title="03) 在config/index.js 中 修改 devtool: ‘source-map’ , [ 不配置这项,后面断点的时候会显示不出结果 ]"></a>03) 在config/index.js 中 修改 devtool: ‘source-map’ , [ 不配置这项,后面断点的时候会显示不出结果 ]</h4><h4 id="04-01-先使用npn-正常启动vue项目-可以使用-http-localhost-8080-访问到项目"><a href="#04-01-先使用npn-正常启动vue项目-可以使用-http-localhost-8080-访问到项目" class="headerlink" title="04-01) 先使用npn 正常启动vue项目,可以使用  http://localhost:8080/#/ 访问到项目"></a>04-01) 先使用npn 正常启动vue项目,可以使用  <a href="http://localhost:8080/#/" target="_blank" rel="noopener">http://localhost:8080/#/</a> 访问到项目</h4><h4 id="04-02-配置debug启动-Edit-Configurations-–-gt-JavaScript-Debug–-gt-Name自己随便写-URL-http-localhost-8080-注意要he04-01中端口保持一致"><a href="#04-02-配置debug启动-Edit-Configurations-–-gt-JavaScript-Debug–-gt-Name自己随便写-URL-http-localhost-8080-注意要he04-01中端口保持一致" class="headerlink" title="04-02) 配置debug启动 Edit Configurations –&gt;JavaScript Debug–&gt; Name自己随便写, URL:[ http://localhost:8080/#/ 注意要he04-01中端口保持一致 ]"></a>04-02) 配置debug启动 Edit Configurations –&gt;JavaScript Debug–&gt; Name自己随便写, URL:[ <a href="http://localhost:8080/#/" target="_blank" rel="noopener">http://localhost:8080/#/</a> 注意要he04-01中端口保持一致 ]</h4><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">http:</span><span class="comment">//localhost:8080/#/ </span></span><br><span class="line">选中src 目录,在右侧写 </span><br><span class="line"><span class="symbol">webpack:</span><span class="comment">///src</span></span><br></pre></td></tr></table></figure><p><img src="/img/vue/debug/debug_01.png" alt="vue debug" title="vue debug"></p><h4 id="05-测试代码-在-src-components-HelloWorld-vue-中写测试代码-在test方法上打上断点-点击虫子启动debug"><a href="#05-测试代码-在-src-components-HelloWorld-vue-中写测试代码-在test方法上打上断点-点击虫子启动debug" class="headerlink" title="05) 测试代码,在  src/components/HelloWorld.vue 中写测试代码,在test方法上打上断点,点击虫子启动debug"></a>05) 测试代码,在  src/components/HelloWorld.vue 中写测试代码,在test方法上打上断点,点击虫子启动debug</h4><p><img src="/img/vue/debug/debug_02.png" alt="vue debug" title="vue debug"></p>]]></content>
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> webstorm </tag>
            
            <tag> debug </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-vue 随笔02</title>
      <link href="/2020/05/25/vue/%E9%9A%8F%E7%AC%94_02/"/>
      <url>/2020/05/25/vue/%E9%9A%8F%E7%AC%94_02/</url>
      <content type="html"><![CDATA[<p>-vue 随笔02<br>-vue 随笔02</p><h3 id="vue-组件名字使用"><a href="#vue-组件名字使用" class="headerlink" title="vue  组件名字使用"></a>vue  组件名字使用</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 组件使用</span><br><span class="line"><span class="tag">&lt;<span class="name">loginLikeBtn</span> <span class="attr">style</span>=<span class="string">"margin-left: 0;"</span>&gt;</span>我是组件<span class="tag">&lt;/<span class="name">loginLikeBtn</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">loginCloseBtn</span> <span class="attr">style</span>=<span class="string">"margin-left: 10px;"</span>&gt;</span>我是组件<span class="tag">&lt;/<span class="name">loginCloseBtn</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">login-like-btn</span> <span class="attr">style</span>=<span class="string">"margin-left: 0;"</span>&gt;</span>我是组件<span class="tag">&lt;/<span class="name">login-like-btn</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">login-close-btn</span> <span class="attr">style</span>=<span class="string">"margin-left: 10px;"</span>&gt;</span>我是组件<span class="tag">&lt;/<span class="name">login-close-btn</span>&gt;</span></span><br><span class="line"></span><br><span class="line">#组件引入</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> likeBtn <span class="keyword">from</span> <span class="string">'../components/like-btn.vue'</span>   </span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> closeBtn <span class="keyword">from</span> <span class="string">'../components/close-btn.vue'</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">        components: &#123;</span></span><br><span class="line"><span class="undefined">            loginLikeBtn: likeBtn,</span></span><br><span class="line"><span class="undefined">            loginCloseBtn: closeBtn</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/vue/other/components_name.png" alt="vue components" title="vue components"></p><h3 id="vue-打断点debug"><a href="#vue-打断点debug" class="headerlink" title="vue 打断点debug"></a>vue 打断点debug</h3><p><img src="/img/vue/other/vue_debug.png" alt="vue debug" title="vue debug"></p><h3 id="vue-router-打开新页面"><a href="#vue-router-打开新页面" class="headerlink" title="vue -router 打开新页面"></a>vue -router 打开新页面</h3><h4 id="方法01"><a href="#方法01" class="headerlink" title="方法01"></a>方法01</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//打开新页面</span></span><br><span class="line"><span class="keyword">let</span> routeUrl = <span class="keyword">this</span>.$router.resolve(&#123;</span><br><span class="line">    name: <span class="string">'HelloWorld'</span>,</span><br><span class="line">    query: &#123;<span class="attr">username</span>: <span class="string">"dafei_name"</span>&#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">window</span>.open(routeUrl.href, <span class="string">'_blank'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接受参数</span></span><br><span class="line">&#123;&#123;<span class="keyword">this</span>.$route.query.username&#125;&#125;</span><br></pre></td></tr></table></figure><h4 id="方法02"><a href="#方法02" class="headerlink" title="方法02"></a>方法02</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">"&#123; path: '/404',query: &#123;username:'我是大飞'&#125; &#125;"</span>&gt;</span>404<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-eclipse创建项目</title>
      <link href="/2020/05/18/java/eclipse_%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE/"/>
      <url>/2020/05/18/java/eclipse_%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE/</url>
      <content type="html"><![CDATA[<p>eclipse创建项目</p><p>eclipse创建项目</p><h3 id="01-MyEclipse-配置Tomcat"><a href="#01-MyEclipse-配置Tomcat" class="headerlink" title="01) MyEclipse 配置Tomcat"></a>01) MyEclipse 配置Tomcat</h3><p><img src="/img/java/Eclipse/Eclipse_add_Tomcat_001.gif" alt="Eclipse 配置Tomcat" title="Eclipse配置Tomcat"></p><h3 id="02-创建项目"><a href="#02-创建项目" class="headerlink" title="02) 创建项目"></a>02) 创建项目</h3><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">F<span class="function"><span class="title">ile</span> --&gt;</span> <span class="function"><span class="title">new</span>--&gt;</span> D<span class="function"><span class="title">ynamic</span> Web Project--&gt;</span> 写上项目名字H<span class="function"><span class="title">elloWorld</span> (选择Tomcat)--&gt;</span>完成</span><br></pre></td></tr></table></figure><p><img src="/img/java/Eclipse/Eclipse_create_01.gif" alt="Eclipse" title="Eclipse"></p><h3 id="03-运行项目"><a href="#03-运行项目" class="headerlink" title="03) 运行项目"></a>03) 运行项目</h3><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">01</span>) 创建index.jsp</span><br><span class="line"><span class="number">02</span>) 右键H<span class="function"><span class="title">elloWorld</span>项目--&gt;</span>N<span class="function"><span class="title">ew</span> --&gt;</span>jsp</span><br></pre></td></tr></table></figure><p><img src="/img/java/Eclipse/Eclipse_create_02.gif" alt="Eclipse" title="Eclipse"></p>]]></content>
      
      <categories>
          
          <category> eclipse </category>
          
      </categories>
      
      
        <tags>
            
            <tag> eclipse </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-MyEclipse导入其他人的MyEclipse项目</title>
      <link href="/2020/05/18/java/MyEclipse%E5%AF%BC%E5%85%A5%E5%85%B6%E4%BB%96%E4%BA%BA%E7%9A%84MyEclipse%E9%A1%B9%E7%9B%AE/"/>
      <url>/2020/05/18/java/MyEclipse%E5%AF%BC%E5%85%A5%E5%85%B6%E4%BB%96%E4%BA%BA%E7%9A%84MyEclipse%E9%A1%B9%E7%9B%AE/</url>
      <content type="html"><![CDATA[<p><code>MyEclipse</code>导入其他人的<code>MyEclipse</code>项目</p><p><code>MyEclipse</code>导入其他人的<code>MyEclipse</code>项目</p><h3 id="01-开始导入项目"><a href="#01-开始导入项目" class="headerlink" title="01) 开始导入项目"></a>01) 开始导入项目</h3><p><img src="/img/java/MyEclipse/MyEclipse_01.gif" alt="MyEclipse 导入项目" title="MyEclipse导入项目"></p><h3 id="02-重新添加-libraries-和-JRE"><a href="#02-重新添加-libraries-和-JRE" class="headerlink" title="02)  重新添加 libraries 和 JRE"></a>02)  重新添加 libraries 和 JRE</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Referenced libraries 重新添加</span><br><span class="line">添加 JRE<span class="built_in"> System </span>Library </span><br><span class="line"></span><br><span class="line">在项目上右键--&gt;Properties--&gt;Java Build Path --&gt; Libraries(删掉原来的)--&gt;<span class="builtin-name">Add</span> Library--&gt;Alternate JRE(选择自己的jdk)</span><br></pre></td></tr></table></figure><p><img src="/img/java/MyEclipse/MyEclipse_02.gif" alt="MyEclipse 导入项目" title="MyEclipse导入项目"></p><h3 id="03-运行项目"><a href="#03-运行项目" class="headerlink" title="03) 运行项目"></a>03) 运行项目</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在项目上右键--&gt;Properties--&gt;<span class="builtin-name">Run</span> as --&gt; MyEclipse<span class="built_in"> Server </span>Application</span><br></pre></td></tr></table></figure><p><img src="/img/java/MyEclipse/MyEclipse_03.gif" alt="MyEclipse 导入项目" title="MyEclipse导入项目"></p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><h4 id="a-01-使用自己的jdk"><a href="#a-01-使用自己的jdk" class="headerlink" title="a-01) 使用自己的jdk"></a>a-01) 使用自己的jdk</h4><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">W<span class="function"><span class="title">indow</span>--&gt;</span>P<span class="function"><span class="title">references</span>--&gt;</span>J<span class="function"><span class="title">ava</span>--&gt;</span>I<span class="function"><span class="title">nstalled</span> JREs--&gt;</span>添加自己的jdk</span><br></pre></td></tr></table></figure><p><img src="/img/java/MyEclipse/MyEclipse_jdk.png" alt="MyEclipse配置jdk" title="MyEclipse配置jdk"></p><h4 id="a-02-使用自己的Tomcat"><a href="#a-02-使用自己的Tomcat" class="headerlink" title="a-02) 使用自己的Tomcat"></a>a-02) 使用自己的Tomcat</h4><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">W<span class="function"><span class="title">indow</span>--&gt;</span>P<span class="function"><span class="title">references</span>--&gt;</span>M<span class="function"><span class="title">yEclipse</span>--&gt;</span>S<span class="function"><span class="title">ervers</span>--&gt;</span>T<span class="function"><span class="title">omcat</span>--&gt;</span> 配置tomcat</span><br></pre></td></tr></table></figure><p><img src="/img/java/MyEclipse/MyEclipse_Tomcat.png" alt="MyEclipse配置自己的Tomcat" title="MyEclipse配置自己的Tomcat"></p><h4 id="b-01-创建一个-Hello-world-的web项目"><a href="#b-01-创建一个-Hello-world-的web项目" class="headerlink" title="b-01)  创建一个 Hello world 的web项目"></a>b-01)  创建一个 Hello world 的web项目</h4><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">01</span>) 创建项目</span><br><span class="line">F<span class="function"><span class="title">ile</span>--&gt;</span>N<span class="function"><span class="title">ew</span>--&gt;</span> Web Project, 输入项目名字HelloWorld</span><br><span class="line"><span class="number">02</span>) 运行项目</span><br><span class="line">在项目上右键:</span><br><span class="line">R<span class="function"><span class="title">un</span> <span class="keyword">as</span> --&gt;</span> MyEclipse Server Application, </span><br><span class="line"><span class="number">03</span>) 在浏览器输入</span><br><span class="line">http:<span class="comment">//localhost:8080/HelloWorld/index.jsp 就可以访问了</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> MyEclipse </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MyEclipse </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-mysql8</title>
      <link href="/2020/05/16/mysql/mysql8/"/>
      <url>/2020/05/16/mysql/mysql8/</url>
      <content type="html"><![CDATA[<p>mysql8 使用<br>mysql8 使用<br>mysql8 使用</p><h3 id="mysql8忘记密码"><a href="#mysql8忘记密码" class="headerlink" title="mysql8忘记密码"></a>mysql8忘记密码</h3><p>01) 停止mysql服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net stop mysql</span><br></pre></td></tr></table></figure><p>02) 打开命令窗口,跳过验证密码,[ 注意:这个窗口不要关闭,不要动 ]</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --console  --skip-grant-tables --shared-memory</span><br></pre></td></tr></table></figure><p>03) 打开一个新的窗口,无密码登录mysql</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p  #输入密码行,直接回车跳过</span><br></pre></td></tr></table></figure><p>04) 重置密码</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">use mysql</span><br><span class="line">update user set authentication_string='' where user='root';</span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">注意这里不能使用  alter user <span class="string">'root'</span>@<span class="string">'localhost'</span> identified by <span class="string">''</span>; ,</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 到这里为止就可以无密码登录数据库,可以在打开一个命令窗口测试一下</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> !!!这里也可以直接设置上密码!!!</span></span><br></pre></td></tr></table></figure><p>05) 退出<code>02</code> 步骤的跳过密码窗口</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">重启mysql服务,无密码登录mysql数据库</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 现在可以使用 alert 修改密码</span></span><br><span class="line">mysql -u root -p  #无密码登录数据库</span><br><span class="line">alter user 'root'@'localhost' identified by '123456'; #修改密码</span><br><span class="line">flush privileges;</span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/doc/refman/8.0/en/resetting-permissions.html" title="Resetting the Root Password" target="_blank" rel="noopener">Resetting the Root Password 官网</a></p>]]></content>
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql8 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-IntelliJ IDEA 导入项目</title>
      <link href="/2020/05/14/java/IntelliJ_IDEA%E5%AF%BC%E5%85%A5%E9%A1%B9%E7%9B%AE/"/>
      <url>/2020/05/14/java/IntelliJ_IDEA%E5%AF%BC%E5%85%A5%E9%A1%B9%E7%9B%AE/</url>
      <content type="html"><![CDATA[<p>使用<code>idea</code>做开发,需要从<code>MyEclipse</code>导入老项目.</p><p>使用<code>idea</code>做开发,需要从<code>MyEclipse</code>导入老项目.</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果没有<span class="keyword">import</span> 导入,在<span class="keyword">File</span>--&gt;<span class="keyword">New</span>--&gt;<span class="keyword">Project</span> <span class="keyword">from</span> Existing <span class="keyword">Source</span></span><br></pre></td></tr></table></figure><p><img src="/img/java/ide_eclipse_1.png" alt="导入" title="导入"></p><h3 id="开始导入项目"><a href="#开始导入项目" class="headerlink" title="开始导入项目"></a>开始导入项目</h3><p><img src="/img/java/IDEA_MyEclipse_01.gif" alt="开始导入项目" title="开始导入项目"></p><h3 id="Modules-配置"><a href="#Modules-配置" class="headerlink" title="Modules 配置"></a>Modules 配置</h3><p><img src="/img/java/IDEA_MyEclipse_02.gif" alt="Modules 配置" title="Modules 配置"></p><h3 id="Libraries-配置"><a href="#Libraries-配置" class="headerlink" title="Libraries 配置"></a>Libraries 配置</h3><p><img src="/img/java/IDEA_MyEclipse_03.gif" alt="Libraries 配置" title="Libraries 配置"></p><h3 id="Facets-配置"><a href="#Facets-配置" class="headerlink" title="Facets 配置"></a>Facets 配置</h3><p><img src="/img/java/IDEA_MyEclipse_04.gif" alt="Facets  配置" title="Facets  配置"></p><h3 id="Artifacts-配置"><a href="#Artifacts-配置" class="headerlink" title="Artifacts 配置"></a>Artifacts 配置</h3><p><img src="/img/java/IDEA_MyEclipse_05.gif" alt="Artifacts 配置" title="Artifacts 配置"></p><h3 id="Tomcat-配置"><a href="#Tomcat-配置" class="headerlink" title="Tomcat 配置"></a>Tomcat 配置</h3><p><img src="/img/java/IDEA_MyEclipse_06.gif" alt="Tomcat 配置" title="Tomcat 配置"></p><h3 id="成功运行"><a href="#成功运行" class="headerlink" title="成功运行"></a>成功运行</h3><p><img src="/img/java/IDEA_MyEclipse_07.png" alt="成功运行" title="成功运行"></p>]]></content>
      
      <categories>
          
          <category> JetBrains </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IDEA </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-flex布局</title>
      <link href="/2020/05/12/JavaScript/flex_%E5%B8%83%E5%B1%80/"/>
      <url>/2020/05/12/JavaScript/flex_%E5%B8%83%E5%B1%80/</url>
      <content type="html"><![CDATA[<p>flex 布局<br>flex 布局</p><h3 id="flex-container-的7个容器属性"><a href="#flex-container-的7个容器属性" class="headerlink" title="flex container 的7个容器属性"></a><code>flex container</code> 的7个容器属性</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">diplay:flex | inline-flex  (块级 | 行内)</span><br><span class="line"></span><br><span class="line">flex-direction  (主轴方向)</span><br><span class="line">justify-content (主轴对齐方式)</span><br><span class="line">align-items     (交叉轴对齐方式)</span><br><span class="line">align-content   (多根轴线在交叉轴上对齐方式)(属性类似align-items)</span><br><span class="line">flex-wrap       (轴线上换行)</span><br><span class="line">flex-flow       (是flex-direction 和 flex-wrap 的简写)</span><br></pre></td></tr></table></figure><h4 id="1-01-flex-direction-属性决定主轴的方向"><a href="#1-01-flex-direction-属性决定主轴的方向" class="headerlink" title="1-01)flex-direction 属性决定主轴的方向"></a>1-01)<code>flex-direction</code> 属性决定主轴的方向</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* flex-direction:决定主轴的方向 */</span></span><br><span class="line"><span class="comment">/* row 主轴从左到右(默认) */</span></span><br><span class="line"><span class="comment">/* row-reverse 主轴从右到左 */</span></span><br><span class="line"><span class="comment">/* column 交叉轴从上到下 */</span></span><br><span class="line"><span class="comment">/* column-reverse 交叉轴从下到上 */</span>       </span><br><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line"> <span class="attribute">flex-direction</span>: row;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-02-justify-content-属性决定主轴对齐方式"><a href="#1-02-justify-content-属性决定主轴对齐方式" class="headerlink" title="1-02) justify-content  属性决定主轴对齐方式"></a>1-02) <code>justify-content</code>  属性决定主轴对齐方式</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* justify-content 决定在主轴对齐方式 */</span></span><br><span class="line"><span class="comment">/* flex-start 左对齐(默认)*/</span></span><br><span class="line"><span class="comment">/* center 居中*/</span></span><br><span class="line"><span class="comment">/* flex-end 右对齐*/</span></span><br><span class="line"><span class="comment">/* space-between 两端对齐,item之间的间隔都相等 */</span></span><br><span class="line"><span class="comment">/* space-around 每个item两侧间隔相等,是 main start 和 main end 距离的2倍*/</span></span><br><span class="line"><span class="comment">/* space-evenly 每个item两侧间隔相等, 和 main start 和 main end 距离也相等 */</span></span><br><span class="line"><span class="selector-class">.container</span>&#123; </span><br><span class="line">    <span class="attribute">justify-content</span>: flex-start;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-03-align-items-属性决定在交叉轴对齐方式"><a href="#1-03-align-items-属性决定在交叉轴对齐方式" class="headerlink" title="1-03) align-items   属性决定在交叉轴对齐方式"></a>1-03) <code>align-items</code>   属性决定在交叉轴对齐方式</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* align-items 决定在交叉轴对齐方式*/</span></span><br><span class="line"><span class="comment">/* flex-start 左对齐 */</span></span><br><span class="line"><span class="comment">/* center 居中 */</span></span><br><span class="line"><span class="comment">/* flex-end 右对齐 */</span></span><br><span class="line"><span class="comment">/* baseline 基于item第一行文字的基线对齐 */</span></span><br><span class="line"><span class="comment">/* stretch 如果 item没有设置高度,会自动拉伸占满flex container (默认) */</span></span><br><span class="line"><span class="selector-class">.container</span>&#123; </span><br><span class="line"><span class="attribute">align-items</span>: stretch ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-04-align-content-多根轴线在交叉轴上对齐方式"><a href="#1-04-align-content-多根轴线在交叉轴上对齐方式" class="headerlink" title="1-04) align-content 多根轴线在交叉轴上对齐方式"></a>1-04) <code>align-content</code> 多根轴线在交叉轴上对齐方式</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 可以消除 flex-wrap 换行后的间隙 */</span></span><br><span class="line"><span class="comment">/* 属性类似align-items */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* align-items 决定在交叉轴对齐方式*/</span></span><br><span class="line"><span class="comment">/* flex-start 左对齐 */</span></span><br><span class="line"><span class="comment">/* center 居中 */</span></span><br><span class="line"><span class="comment">/* flex-end 右对齐 */</span></span><br><span class="line"><span class="comment">/* baseline 基于item第一行文字的基线对齐 */</span></span><br><span class="line"><span class="comment">/* stretch 如果 item没有设置高度,会自动拉伸占满flex container (默认) */</span></span><br><span class="line"><span class="selector-class">.container</span>&#123; </span><br><span class="line"><span class="attribute">align-content</span>: stretch ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-05-flex-wrap-一条轴线方不下-轴线上换行"><a href="#1-05-flex-wrap-一条轴线方不下-轴线上换行" class="headerlink" title="1-05) flex-wrap  一条轴线方不下,轴线上换行"></a>1-05) <code>flex-wrap</code>  一条轴线方不下,轴线上换行</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* flex-wrap 一条轴线方不下,轴线上换行*/</span></span><br><span class="line"><span class="comment">/* nowrap 不换行(默认) */</span></span><br><span class="line"><span class="comment">/* wrap 主轴上换行,第一行在上方*/</span></span><br><span class="line"><span class="comment">/* wrap-reverse 主轴上换行,第一行在下方*/</span></span><br><span class="line"><span class="selector-class">.container</span>&#123; </span><br><span class="line"><span class="attribute">flex-wrap</span>: nowrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-06-flex-flow-是-flex-direction-和-flex-wrap-的简写"><a href="#1-06-flex-flow-是-flex-direction-和-flex-wrap-的简写" class="headerlink" title="1-06) flex-flow 是 flex-direction 和 flex-wrap 的简写"></a>1-06) <code>flex-flow</code> 是 flex-direction 和 flex-wrap 的简写</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* flex-flow 是 flex-direction 和 flex-wrap 的简写*/</span></span><br><span class="line"><span class="comment">/* 默认值 row nowrap */</span></span><br><span class="line"><span class="selector-class">.container</span>&#123; </span><br><span class="line"><span class="attribute">flex-flow</span>: row nowrap;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/JavaScript/flex/flex.png" alt="flex" title="flex"></p><p> <a href="https://philipwalton.github.io/solved-by-flexbox/" title="flex" target="_blank" rel="noopener">flex</a></p><p> <a href="https://developer.mozilla.org/ca/docs/Web/CSS/CSS_Flexible_Box_Layout/Aligning_Items_in_a_Flex_Container" title="flex" target="_blank" rel="noopener">flex</a></p>]]></content>
      
      <categories>
          
          <category> flex </category>
          
      </categories>
      
      
        <tags>
            
            <tag> flex </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-vue_axios</title>
      <link href="/2020/05/04/vue/axios/"/>
      <url>/2020/05/04/vue/axios/</url>
      <content type="html"><![CDATA[<h3 id="vue-和-axios"><a href="#vue-和-axios" class="headerlink" title="vue 和 axios"></a><code>vue</code> 和 <code>axios</code></h3><p><code>vue</code> 和 <code>axios</code></p><h3 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">--networkAxios</span><br><span class="line">----axios_instance.js</span><br><span class="line">----home.js</span><br></pre></td></tr></table></figure><h3 id="src-networkAxios-axios-instance-js-文件内容"><a href="#src-networkAxios-axios-instance-js-文件内容" class="headerlink" title="src/networkAxios/axios_instance.js 文件内容"></a>src/networkAxios/axios_instance.js 文件内容</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// axios 封装............</span></span><br><span class="line"><span class="keyword">import</span> Axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="comment">// import Qs from 'qs'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// qs 对请求的参数进行序列化</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">axios_instance</span>(<span class="params">option</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// 创建 axios 实例</span></span><br><span class="line">        <span class="keyword">const</span> instance = Axios.create(&#123;</span><br><span class="line">            baseURL: <span class="string">'http://demo.yizheng_fei.com/api'</span>,</span><br><span class="line">            <span class="comment">// baseURL: 'https://gank.io/api',</span></span><br><span class="line">            timeout: <span class="number">300000</span>,</span><br><span class="line">            headers:&#123;</span><br><span class="line">                <span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 配置请求</span></span><br><span class="line">        instance.interceptors.request.use(<span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 判断token,用于登录</span></span><br><span class="line">            <span class="comment">// 请求数据序列号</span></span><br><span class="line">            <span class="comment">// config.data = Qs.stringify(config.data)</span></span><br><span class="line">            <span class="keyword">return</span> config;</span><br><span class="line">        &#125;, error =&gt; &#123;</span><br><span class="line">            <span class="comment">// 网络请求失败</span></span><br><span class="line">            <span class="keyword">return</span> error;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 配置响应拦截</span></span><br><span class="line">        instance.interceptors.response.use(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> response.data;</span><br><span class="line">        &#125;, error =&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (error &amp;&amp; error.response) &#123;</span><br><span class="line">                <span class="keyword">switch</span> (error.response.status) &#123;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">400</span>:</span><br><span class="line">                        error.message = <span class="string">'请求错误'</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">401</span>:</span><br><span class="line">                        error.message = <span class="string">'未授权的访问'</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">403</span>:</span><br><span class="line">                        error.message = <span class="string">'没有权限'</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">500</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">501</span>:</span><br><span class="line">                    <span class="keyword">case</span> <span class="number">503</span>:</span><br><span class="line">                    <span class="keyword">default</span>:</span><br><span class="line">                        error.message = <span class="string">'服务器出问题'</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> error;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 传入对象进行网络访问</span></span><br><span class="line">        instance(option).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">            resolve(res);</span><br><span class="line">        &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">            reject(error)</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="src-networkAxios-home-js-文件内容"><a href="#src-networkAxios-home-js-文件内容" class="headerlink" title="src/networkAxios/home.js 文件内容"></a>src/networkAxios/home.js 文件内容</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios_instance <span class="keyword">from</span> <span class="string">'./axios_instance'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">getWeatherData</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> axios_instance(&#123;</span><br><span class="line">        url: <span class="string">'/user/detail?id=3'</span></span><br><span class="line">        <span class="comment">// url: '/v2/categories/GanHuo'</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="src-views-Home-vue-文件内容"><a href="#src-views-Home-vue-文件内容" class="headerlink" title="src/views/Home.vue 文件内容"></a>src/views/Home.vue 文件内容</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"home"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span>&gt;</span>我是home <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"点击请求数据"</span> @<span class="attr">click</span>=<span class="string">"fetch_data()"</span>&gt;</span>点击请求数据<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> &#123;getWeatherData&#125; <span class="keyword">from</span> <span class="string">"../networkAxios/home"</span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">        name: <span class="string">"Home"</span>,</span></span><br><span class="line"><span class="undefined">        methods:&#123;</span></span><br><span class="line"><span class="undefined">            fetch_data() &#123;</span></span><br><span class="line"><span class="javascript">                getWeatherData().then(<span class="function"><span class="params">res</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">console</span>.log(res.data);</span></span><br><span class="line"><span class="undefined">                &#125;)</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/vue/axios.png" alt="axios" title="axios"></p><p> <a href="http://www.axios-js.com/zh-cn/docs/index.html#axios-create-config" title="axios" target="_blank" rel="noopener">axios</a></p>]]></content>
      
      <categories>
          
          <category> web前端 </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> axios </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-vuex 状态管理</title>
      <link href="/2020/05/03/vue/vuex/"/>
      <url>/2020/05/03/vue/vuex/</url>
      <content type="html"><![CDATA[<h3 id="vuex-状态管理"><a href="#vuex-状态管理" class="headerlink" title="vuex 状态管理"></a><code>vuex</code> 状态管理</h3><p>vuex 状态管理demo</p><h4 id="01-基本目录结构-自己创建"><a href="#01-基本目录结构-自己创建" class="headerlink" title="01) 基本目录结构(自己创建)"></a>01) 基本目录结构(自己创建)</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">--vuex</span><br><span class="line">------actions.js</span><br><span class="line">------getters.js</span><br><span class="line">------index.js</span><br><span class="line">------mutations.js</span><br></pre></td></tr></table></figure><h4 id="02-src-vuex-index-js-内容"><a href="#02-src-vuex-index-js-内容" class="headerlink" title="02)  src/vuex/index.js 内容"></a>02)  <code>src/vuex/index.js</code> 内容</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> mutations <span class="keyword">from</span> <span class="string">'./mutations'</span></span><br><span class="line"><span class="keyword">import</span> actions <span class="keyword">from</span> <span class="string">'./actions'</span></span><br><span class="line"><span class="keyword">import</span> getters <span class="keyword">from</span> <span class="string">'./getters'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = &#123; <span class="comment">//demo ,定义需要的属性</span></span><br><span class="line">    count: <span class="number">10</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state,</span><br><span class="line">    mutations,</span><br><span class="line">    actions,</span><br><span class="line">    getters</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><h4 id="03-src-vuex-mutations-js-内容"><a href="#03-src-vuex-mutations-js-内容" class="headerlink" title="03)src/vuex/mutations.js 内容"></a>03)<code>src/vuex/mutations.js</code> 内容</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// mutations 同步函数</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    increment_vuex(state) &#123;  <span class="comment">//demo</span></span><br><span class="line">        state.count++</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> mutations</span><br></pre></td></tr></table></figure><h4 id="04-src-vuex-actions-js-内容"><a href="#04-src-vuex-actions-js-内容" class="headerlink" title="04)src/vuex/actions.js 内容"></a>04)<code>src/vuex/actions.js</code> 内容</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// actions 异步函数;提交使用dispatch</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> actions</span><br></pre></td></tr></table></figure><h4 id="05-src-vuex-getters-js-内容"><a href="#05-src-vuex-getters-js-内容" class="headerlink" title="05)src/vuex/getters.js 内容"></a><code>05)src/vuex/getters.js</code> 内容</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 相当于计算属性 computed</span></span><br><span class="line"><span class="keyword">const</span> getters = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> getters</span><br></pre></td></tr></table></figure><h4 id="06-src-main-js-注册vuex"><a href="#06-src-main-js-注册vuex" class="headerlink" title="06)src/main.js 注册vuex"></a>06)<code>src/main.js</code> 注册vuex</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router/index'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./vuex/index'</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">Vue.prototype.$dafei = <span class="string">"我是自定义全局变量"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">  router,</span><br><span class="line">  store <span class="comment">//demo</span></span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>);</span><br></pre></td></tr></table></figure><h4 id="07-src-App-vue中使用"><a href="#07-src-App-vue中使用" class="headerlink" title="07)src/App.vue中使用"></a>07)<code>src/App.vue</code>中使用</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    &#123;&#123; $route.meta.title&#125;&#125; ---我是元数据title</span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"点击vuex"</span> @<span class="attr">click</span>=<span class="string">"increment()"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">    name: <span class="string">'app'</span>,</span></span><br><span class="line"><span class="undefined">    methods:&#123;</span></span><br><span class="line"><span class="undefined">      increment() &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// increment_vuex 为 src/vuex/index.js mutations中的方法</span></span></span><br><span class="line"><span class="actionscript">        <span class="keyword">this</span>.$store.commit(<span class="string">'increment_vuex'</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.$store.state.count);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/vue/vue_vuex.png" alt="vuex" title=" vuex"></p><p> <a href="https://vuex.vuejs.org/zh/installation.html" title="vuexzh状态管理" target="_blank" rel="noopener">vuex状态管理</a></p>]]></content>
      
      <categories>
          
          <category> web前端 </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> vuex </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-vue-router 路由01</title>
      <link href="/2020/05/03/vue/vue_router/"/>
      <url>/2020/05/03/vue/vue_router/</url>
      <content type="html"><![CDATA[<p>路由 <code>vue-router</code></p><p>路由 <code>vue-router</code> 基本使用</p><p><code>$route</code> 和 <code>$router</code> 的区别<br><code>$router</code> 为<code>VueRouter</code> 实例,想要导航到不同的<code>URL</code>,则使用 <code>$router.push</code>方法<br><code>$route</code> 为当前 <code>router</code>跳转对象里面可以获取 <code>name</code>、<code>path</code>、<code>query</code>、<code>params</code>等</p><h3 id="01-基本目录结构"><a href="#01-基本目录结构" class="headerlink" title="01) 基本目录结构"></a>01) 基本目录结构</h3><p><img src="/img/vue/vue_router.png" alt="vue-router" title="vue-router"></p><h3 id="02-src-router-index-js-路由文件"><a href="#02-src-router-index-js-路由文件" class="headerlink" title="02)  src/router/index.js 路由文件"></a>02)  <code>src/router/index.js</code> 路由文件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Home = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'../views/Home.vue'</span>);</span><br><span class="line"><span class="keyword">const</span> Login = <span class="function"><span class="params">()</span> =&gt;</span> <span class="keyword">import</span>(<span class="string">'../views/Login.vue'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 01)安装 VueRouter</span></span><br><span class="line">Vue.use(VueRouter);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 02)配置路由信息</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">'/'</span>, <span class="attr">component</span>: Home, <span class="attr">meta</span>: &#123;<span class="attr">title</span>: <span class="string">'首页'</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">'/home'</span>, <span class="attr">component</span>: Home, <span class="attr">meta</span>: &#123;<span class="attr">title</span>: <span class="string">'home首页'</span>&#125;&#125;,</span><br><span class="line">    &#123;<span class="attr">path</span>: <span class="string">'/login'</span>, <span class="attr">component</span>: Login, <span class="attr">meta</span>: &#123;<span class="attr">title</span>: <span class="string">'login页面'</span>&#125;&#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 03)创建路由对象</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    mode: <span class="string">'history'</span>,</span><br><span class="line">    routes</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//04) 导出</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure><h3 id="03-src-main-js-加载路由"><a href="#03-src-main-js-加载路由" class="headerlink" title="03) src/main.js 加载路由"></a>03) <code>src/main.js</code> 加载路由</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router/index'</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">  router</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>);</span><br></pre></td></tr></table></figure><h3 id="04-src-App-vue-渲染路径匹配到的视图"><a href="#04-src-App-vue-渲染路径匹配到的视图" class="headerlink" title="04) src/App.vue  渲染路径匹配到的视图"></a>04) <code>src/App.vue</code>  渲染路径匹配到的视图</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    name: &apos;app&apos;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><h3 id="05-01-src-views-Home-vue-视图文件"><a href="#05-01-src-views-Home-vue-视图文件" class="headerlink" title="05-01) src/views/Home.vue 视图文件"></a>05-01) <code>src/views/Home.vue</code> 视图文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div id=&quot;home&quot;&gt;</span><br><span class="line">        &lt;div&gt;我是home&lt;/div&gt;</span><br><span class="line">        &lt;router-link :to=&quot;&#123;path: &apos;/login&apos;&#125;&quot;&gt;login&lt;/router-link&gt; &amp;nbsp;</span><br><span class="line">        &lt;router-link :to=&quot;&#123;path: &apos;/login&apos;&#125;&quot; tag=&quot;button&quot;&gt;</span><br><span class="line">            tag属性,我是自定义标签</span><br><span class="line">        &lt;/router-link&gt; &amp;nbsp;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;Home&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="05-02-src-views-Login-vue-视图文件"><a href="#05-02-src-views-Login-vue-视图文件" class="headerlink" title="05-02) src/views/Login.vue 视图文件"></a>05-02) <code>src/views/Login.vue</code> 视图文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div id=&quot;login&quot;&gt;</span><br><span class="line">        &lt;div&gt;我是login&lt;/div&gt;</span><br><span class="line">        &lt;router-link :to=&quot;&#123; path: &apos;/home&apos; &#125;&quot;&gt;home&lt;/router-link&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;Login&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="全局导航守卫处理元数据meta"><a href="#全局导航守卫处理元数据meta" class="headerlink" title="全局导航守卫处理元数据meta"></a>全局导航守卫处理元数据<code>meta</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/router/index.js 文件中</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 全局导航守卫</span></span><br><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = to.meta.title;</span><br><span class="line">    next();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在组件中获取meta数据信息</span></span><br><span class="line">&lt;div&gt; &#123;&#123; $route.meta.title&#125;&#125; &lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure><p> <a href="https://router.vuejs.org/zh/api/#tag" title="vue-router" target="_blank" rel="noopener">vue-router</a></p>]]></content>
      
      <categories>
          
          <category> web前端 </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> vue-router </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vue中main.js文件解析</title>
      <link href="/2020/05/03/vue/cli3_main_js/"/>
      <url>/2020/05/03/vue/cli3_main_js/</url>
      <content type="html"><![CDATA[<p>入口文件<code>mian.js</code> 中 <code>render</code>函数</p><h3 id="01-入口文件-mians-js-中-render-函数"><a href="#01-入口文件-mians-js-中-render-函数" class="headerlink" title="01) 入口文件 mians.js 中 render 函数"></a>01) 入口文件 <code>mians.js</code> 中 <code>render</code> 函数</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="comment">// import App from './App.vue'</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  <span class="comment">// render: h =&gt; h(App),</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// render:function (h) &#123;</span></span><br><span class="line">  <span class="comment">//   return h(App);</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// render:function (createdElement) &#123;</span></span><br><span class="line">  <span class="comment">//   return createdElement(App)</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// render: function (createdElement) &#123;</span></span><br><span class="line">  <span class="comment">//   return createdElement('h2', &#123;class: 'fei_foo'&#125;, ['hello world'])</span></span><br><span class="line">  <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 用h2标签替换掉App.vue中的内容</span></span><br><span class="line">  render: <span class="function"><span class="keyword">function</span> (<span class="params">createdElement</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> createdElement(</span><br><span class="line">        <span class="string">'h2'</span>,</span><br><span class="line">        &#123;<span class="attr">class</span>: <span class="string">'fei_foo'</span>&#125;,</span><br><span class="line">        [</span><br><span class="line">          <span class="string">'hello world'</span>,</span><br><span class="line">          createdElement(<span class="string">'button'</span>, [<span class="string">'点击'</span>])</span><br><span class="line">        ])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>);</span><br></pre></td></tr></table></figure><p><img src="/img/vue/vue_main_js.png" alt="vue main.js" title="vue main.js"></p><h3 id="02-render-传入组件对象"><a href="#02-render-传入组件对象" class="headerlink" title="02) render 传入组件对象"></a>02) <code>render</code> 传入组件对象</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js 内容如下</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="comment">// import App from './App.vue'</span></span><br><span class="line"><span class="keyword">import</span> Fei <span class="keyword">from</span> <span class="string">'./components/Fei.vue'</span></span><br><span class="line"></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  render: <span class="function"><span class="keyword">function</span> (<span class="params">createdElement</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// return createdElement(App)</span></span><br><span class="line">    <span class="keyword">return</span> createdElement(Fei)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>);</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// components/Fei.vue 中文件如下</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div&gt;我是组件Fei.vue&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;Fei&quot;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><h3 id="runtime-compiler-和-runtime-only"><a href="#runtime-compiler-和-runtime-only" class="headerlink" title="runtime-compiler 和 runtime-only"></a>runtime-compiler 和 runtime-only</h3><p>runtime-compiler:</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">template</span>(解析)--&gt;</span><span class="function"><span class="title">ast</span>(abstract syntax <span class="keyword">tree</span> 抽象语法树)--&gt;</span><span class="function"><span class="title">render</span>--&gt;</span><span class="function"><span class="title">virtual</span> dom--&gt;</span>UI</span><br></pre></td></tr></table></figure><p>runtime-only: 直接使用render渲染</p><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">template</span>(解析)--&gt;</span><span class="function"><span class="title">render</span>--&gt;</span><span class="function"><span class="title">virtual</span> dom--&gt;</span>UI</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> web前端 </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> main.js </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vue 插槽 -slot</title>
      <link href="/2020/05/02/vue/vue_%E6%8F%92%E6%A7%BD/"/>
      <url>/2020/05/02/vue/vue_%E6%8F%92%E6%A7%BD/</url>
      <content type="html"><![CDATA[<p>具名插槽、作用域插槽、理解编译作用域</p><p>编译作用域</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">父级模板里的所有内容都是在父级作用域中编译的；子模板里的所有内容都是在子作用域中编译的</span><br></pre></td></tr></table></figure><h3 id="插槽"><a href="#插槽" class="headerlink" title="插槽"></a>插槽</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">children_fei</span>&gt;</span><span class="tag">&lt;/<span class="name">children_fei</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">children_fei</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"center"</span>&gt;</span>父_中间<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">children_fei</span>&gt;</span><span class="comment">&lt;!-- 具名插槽 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">children_fei</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">slot</span>=<span class="string">"name_c"</span> <span class="attr">slot-scope</span>=<span class="string">"slot_bar"</span>&gt;</span> <span class="comment">&lt;!-- 作用域插槽 --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-for</span>=<span class="string">"item in slot_bar.data_fei"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">children_fei</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"children_foo"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>左边<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"center"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>中间<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>右边<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"name_c"</span> <span class="attr">:data_fei</span>=<span class="string">"c_books"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in c_books"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> children_fei = &#123;</span></span><br><span class="line"><span class="actionscript">        template: <span class="string">'#children_foo'</span>,</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                children_message: <span class="string">"我是子组件bar"</span>,</span></span><br><span class="line"><span class="actionscript">                c_books: [<span class="string">'论语'</span>, <span class="string">'史记'</span>, <span class="string">'左传'</span>, <span class="string">'汉书'</span>, <span class="string">'战国策'</span>]</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                message: <span class="string">'Hello Vue!'</span>,</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        components: &#123;</span></span><br><span class="line"><span class="undefined">            children_fei</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/vue/vue_slot.png" alt="vue slot" title="vue slot"></p>]]></content>
      
      <categories>
          
          <category> web前端 </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> slot </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vue 父子组件之间访问</title>
      <link href="/2020/05/02/vue/vue_%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E8%AE%BF%E9%97%AE/"/>
      <url>/2020/05/02/vue/vue_%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E8%AE%BF%E9%97%AE/</url>
      <content type="html"><![CDATA[<p>vue 父子组件之间访问 <code>this.$refs</code> 和 <code>this.$parent</code> </p><p>访问跟组件 <code>this.$root.xxxxxxxx</code></p><h3 id="vue-父组件访问子组件-this-refs"><a href="#vue-父组件访问子组件-this-refs" class="headerlink" title="vue 父组件访问子组件 this.$refs"></a><code>vue</code> 父组件访问子组件 <code>this.$refs</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    &#123;&#123; message &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">value</span>=<span class="string">"点击"</span> @<span class="attr">click</span>=<span class="string">"p_click"</span>&gt;</span>点击获取子组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">children_fei</span> <span class="attr">ref</span>=<span class="string">"children_ref"</span>&gt;</span> <span class="tag">&lt;/<span class="name">children_fei</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"children_foo"</span>&gt;</span> <span class="comment">&lt;!--子组件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span>  <span class="attr">value</span>=<span class="string">"点击"</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> children_fei = &#123;</span></span><br><span class="line"><span class="actionscript">        template: <span class="string">'#children_foo'</span>,</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                children_message: <span class="string">"我是子组件bar"</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        methods: &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                message: <span class="string">'Hello Vue!'</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        methods: &#123;</span></span><br><span class="line"><span class="actionscript">            p_click:<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123; <span class="comment">// 访问子组件 children_message</span></span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="keyword">this</span>.$refs.children_ref.children_message);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        components: &#123;</span></span><br><span class="line"><span class="undefined">            children_fei</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/vue/vue_refs.png" alt="vue refs" title="vue refs"></p><p> <a href="https://cn.vuejs.org/v2/guide/components-edge-cases.html#%E8%AE%BF%E9%97%AE%E5%AD%90%E7%BB%84%E4%BB%B6%E5%AE%9E%E4%BE%8B%E6%88%96%E5%AD%90%E5%85%83%E7%B4%A0" title="refs" target="_blank" rel="noopener">refs</a></p><h3 id="vue-子组件访问父组件-this-parent"><a href="#vue-子组件访问父组件-this-parent" class="headerlink" title="vue 子组件访问父组件  this.$parent"></a><code>vue</code> 子组件访问父组件  <code>this.$parent</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    &#123;&#123; message &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">children_fei</span>&gt;</span> <span class="tag">&lt;/<span class="name">children_fei</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"children_foo"</span>&gt;</span> <span class="comment">&lt;!--子组件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span>  <span class="attr">value</span>=<span class="string">"点击"</span> @<span class="attr">click</span>=<span class="string">"ccc_click"</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> children_fei = &#123;</span></span><br><span class="line"><span class="actionscript">        template: <span class="string">'#children_foo'</span>,</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;children_message: <span class="string">"我是子组件bar"</span>&#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        methods: &#123;</span></span><br><span class="line"><span class="actionscript">            ccc_click: <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="keyword">this</span>.$parent.message);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;message: <span class="string">'Hello Vue!'</span>&#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        methods: &#123;&#125;,</span></span><br><span class="line"><span class="undefined">        components: &#123; children_fei &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/vue/vue_parent.png" alt="vue parent" title="vue parent"></p>]]></content>
      
      <categories>
          
          <category> web前端 </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vue 组件之间传值</title>
      <link href="/2020/05/01/vue/vue_%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E4%BC%A0%E5%80%BC%E5%85%84%E5%BC%9F_%E7%88%B6%E5%AD%90%E4%BC%A0%E5%80%BC/"/>
      <url>/2020/05/01/vue/vue_%E7%BB%84%E4%BB%B6%E4%B9%8B%E9%97%B4%E4%BC%A0%E5%80%BC%E5%85%84%E5%BC%9F_%E7%88%B6%E5%AD%90%E4%BC%A0%E5%80%BC/</url>
      <content type="html"><![CDATA[<p>vue 父子之间传值 <code>props</code> 和  <code>emit</code></p><h3 id="vue-父组件传值子组件-props"><a href="#vue-父组件传值子组件-props" class="headerlink" title="vue 父组件传值子组件 props"></a><code>vue</code> 父组件传值子组件 <code>props</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    &#123;&#123; message &#125;&#125;  &#123;&#123; books &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">children_fei</span> <span class="attr">:children_message</span>=<span class="string">"message"</span> <span class="attr">:children_books</span>=<span class="string">"books"</span>&gt;</span><span class="tag">&lt;/<span class="name">children_fei</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"children_foo"</span>&gt;</span> <span class="comment">&lt;!-- 子组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span> &#123;&#123; children_message &#125;&#125; &#123;&#123; children_books &#125;&#125; <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> children_fei = &#123;</span></span><br><span class="line"><span class="actionscript">        template:<span class="string">'#children_foo'</span>,</span></span><br><span class="line"><span class="undefined">        props:&#123;</span></span><br><span class="line"><span class="javascript">            children_message: <span class="built_in">String</span>,</span></span><br><span class="line"><span class="javascript">            children_books: <span class="built_in">Array</span></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data()&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                message: <span class="string">'Hello Fei!'</span>,</span></span><br><span class="line"><span class="actionscript">                books: [<span class="string">'论语'</span>, <span class="string">'史记'</span>, <span class="string">'左传'</span>, <span class="string">'汉书'</span>, <span class="string">'战国策'</span>]</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        components:&#123;</span></span><br><span class="line"><span class="undefined">            children_fei</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/vue/vue_props.png" alt="vue props" title="vue props"></p><p> <a href="https://cn.vuejs.org/v2/api/#props" title="props" target="_blank" rel="noopener">props</a></p><h3 id="vue-子组件传值父组件-emit"><a href="#vue-子组件传值父组件-emit" class="headerlink" title="vue 子组件传值父组件  emit"></a><code>vue</code> 子组件传值父组件  <code>emit</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    &#123;&#123; message &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">children_fei</span> @<span class="attr">item_click</span>=<span class="string">"parent_function"</span>&gt;</span> <span class="tag">&lt;/<span class="name">children_fei</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"children_foo"</span>&gt;</span> <span class="comment">&lt;!--子组件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"btnClick()"</span> <span class="attr">value</span>=<span class="string">"点击"</span>&gt;</span>点击<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> children_fei = &#123;</span></span><br><span class="line"><span class="actionscript">        template: <span class="string">'#children_foo'</span>,</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                children_message: <span class="string">"我是子组件bar"</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        methods: &#123;</span></span><br><span class="line"><span class="undefined">            btnClick() &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.$emit(<span class="string">'item_click'</span>, <span class="keyword">this</span>.children_message) <span class="comment">// 发射一个事件</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                message: <span class="string">'Hello Vue!'</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        methods: &#123;</span></span><br><span class="line"><span class="undefined">            parent_function(items) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(items);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        components: &#123;</span></span><br><span class="line"><span class="undefined">            children_fei</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/vue/vue_emit.png" alt="vue emit" title="vue emit"></p><h3 id="vue-兄弟组件传值-事件总线-EventBus"><a href="#vue-兄弟组件传值-事件总线-EventBus" class="headerlink" title="vue 兄弟组件传值  事件总线 EventBus"></a><code>vue</code> 兄弟组件传值  <code>事件总线 EventBus</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// src/utils/eventBus.js 文件内容  ***新建全局vue实例***</span></span><br><span class="line"><span class="comment">// 事件总线</span></span><br><span class="line"><span class="comment">// 非父子组件传参  </span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">"vue"</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vue();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// src/App.vue  文件内容  ***接受事件***</span></span><br><span class="line"><span class="keyword">import</span> eventBus <span class="keyword">from</span> <span class="string">'./utils/eventBus'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        eventBus.$on(<span class="string">"daFei"</span>, <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"我是接受数据__"</span>, val);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// src/views/index.vue  文件内容  ***发送事件***</span></span><br><span class="line"><span class="keyword">import</span> eventBus <span class="keyword">from</span> <span class="string">'../../utils/eventBus'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    created() &#123;</span><br><span class="line">        eventBus.$emit(<span class="string">"daFei"</span>,<span class="string">"hello foo_bar"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/vue/vue_eventBus.png" alt="eventBus" title="eventBus"></p><h3 id="使用-vuex-状态管理"><a href="#使用-vuex-状态管理" class="headerlink" title="使用 vuex 状态管理"></a>使用 <code>vuex</code> 状态管理</h3><p>参考另一篇文章,有详细介绍</p><h3 id="vue-cli-中使用父子之间传值父组件传值子组件封装button按钮"><a href="#vue-cli-中使用父子之间传值父组件传值子组件封装button按钮" class="headerlink" title="vue-cli 中使用父子之间传值父组件传值子组件封装button按钮"></a>vue-cli 中使用父子之间传值<em>父组件传值子组件</em>封装button按钮</h3><p>study01.vue 中代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">header-btn</span> @<span class="attr">handleSave</span>=<span class="string">"handleSave"</span> @<span class="attr">handleSubmit</span>=<span class="string">"handleSubmit"</span> <span class="attr">:headerBtns</span>=<span class="string">"headerBtns"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">import</span> HeaderBtn <span class="keyword">from</span> <span class="string">"../../components/headerBtn.vue"</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="undefined">        components: &#123;</span></span><br><span class="line"><span class="undefined">            HeaderBtn,</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">                headerBtns: [</span></span><br><span class="line"><span class="actionscript">                    &#123;type: <span class="string">'primary'</span>, icon: <span class="string">'save'</span>, name: <span class="string">'保存'</span>, handleClick: <span class="string">'handleSave'</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                    &#123;type: <span class="string">'primary'</span>, icon: <span class="string">'check-submit'</span>, name: <span class="string">'提交'</span>, handleClick: <span class="string">'handleSubmit'</span>&#125;,</span></span><br><span class="line"><span class="undefined">                ],</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        methods: &#123;</span></span><br><span class="line"><span class="undefined">            handleSave() &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">"handleSave"</span>);</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            handleSubmit() &#123;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(<span class="string">"handleSubmit"</span>);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p> 02) 组件headerBtn.vue 中代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in headerBtns"</span> <span class="attr">:key</span>=<span class="string">"index"</span> @<span class="attr">click</span>=<span class="string">"$emit(item.handleClick)"</span>&gt;</span></span><br><span class="line">            &#123;&#123; item.name&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="actionscript">        name: <span class="string">"headerBtn"</span>,</span></span><br><span class="line"><span class="undefined">        props: &#123;</span></span><br><span class="line"><span class="actionscript">            headerBtns: &#123;  <span class="comment">//父组件没有传参时,使用这个</span></span></span><br><span class="line"><span class="javascript">                type: <span class="built_in">Array</span>,</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">default</span>() &#123;</span></span><br><span class="line"><span class="actionscript">                    <span class="keyword">return</span> [</span></span><br><span class="line"><span class="actionscript">                        &#123;type: <span class="string">'primary'</span>, icon: <span class="string">'goBack'</span>, name: <span class="string">'返回'</span>, handleClick: <span class="string">'handleBack'</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                        &#123;type: <span class="string">'primary'</span>, icon: <span class="string">'save'</span>, name: <span class="string">'保存'</span>, handleClick: <span class="string">'handleSave'</span>&#125;,</span></span><br><span class="line"><span class="actionscript">                        &#123;type: <span class="string">'primary'</span>, icon: <span class="string">'check-submit'</span>, name: <span class="string">'提交'</span>, handleClick: <span class="string">'handleSubmit'</span>&#125;,</span></span><br><span class="line"><span class="undefined">                    ]</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> web前端 </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vuex </tag>
            
            <tag> Bus </tag>
            
            <tag> props </tag>
            
            <tag> emit </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>other JavaScript</title>
      <link href="/2020/05/01/JavaScript/other_JavaScript/"/>
      <url>/2020/05/01/JavaScript/other_JavaScript/</url>
      <content type="html"><![CDATA[<h3 id="event-target-value-获取当前点击事件的值"><a href="#event-target-value-获取当前点击事件的值" class="headerlink" title="event.target.value 获取当前点击事件的值"></a>event.target.value 获取当前点击事件的值</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"123"</span> <span class="attr">onclick</span>=<span class="string">"foo(event.target.value)"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span>  foo = <span class="function"><span class="keyword">function</span> <span class="params">(val)</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(val); <span class="comment">// 123</span></span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="高阶函数-filter-map-reduce"><a href="#高阶函数-filter-map-reduce" class="headerlink" title="高阶函数 filter map reduce"></a>高阶函数 <code>filter</code> <code>map</code> <code>reduce</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 高阶函数 filter map reduce  用es6语法</span></span><br><span class="line"><span class="comment">// 过滤小于20的值,返回布尔值 true 或者 false</span></span><br><span class="line"><span class="comment">// 循环数组中的每一个元素</span></span><br><span class="line"><span class="comment">//接受一个函数作为参数，这个函数作为一个累加器，从左到右遍历整个类型数组，最后返回一个单一的值</span></span><br><span class="line"><span class="keyword">const</span> nums = [<span class="number">10</span>, <span class="number">15</span>, <span class="number">18</span>, <span class="number">25</span>, <span class="number">34</span>];</span><br><span class="line"><span class="keyword">let</span> newNums = nums.filter(<span class="function"><span class="params">item</span> =&gt;</span> item &lt; <span class="number">20</span>) </span><br><span class="line">.map(<span class="function"><span class="params">item2</span> =&gt;</span> item2 * <span class="number">2</span>) </span><br><span class="line">.reduce(<span class="function">(<span class="params">total, item3</span>) =&gt;</span> total + item3); </span><br><span class="line"></span><br><span class="line"><span class="comment">//--------------------</span></span><br><span class="line"><span class="keyword">const</span> nums = [<span class="number">10</span>, <span class="number">15</span>, <span class="number">18</span>, <span class="number">25</span>, <span class="number">34</span>];</span><br><span class="line"><span class="keyword">let</span> newNum_1 = nums.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item1</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> item1 &lt; <span class="number">20</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(newNum_1); <span class="comment">// [10, 15, 18]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newNum_2 = newNum_1.map(<span class="function"><span class="keyword">function</span> (<span class="params">item2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> item2 * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(newNum_2); <span class="comment">// [20, 30, 36]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newNum_3 = newNum_2.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">total, item3</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> total + item3;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(newNum_3); <span class="comment">// 86</span></span><br></pre></td></tr></table></figure><h3 id="map-获取对象中某个属性的所有值ES6"><a href="#map-获取对象中某个属性的所有值ES6" class="headerlink" title="map,获取对象中某个属性的所有值ES6"></a>map,获取对象中某个属性的所有值ES6</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = [</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"daFei"</span>, <span class="attr">age</span>: <span class="string">"18"</span>, <span class="attr">hobby</span>: <span class="string">"JavaScript"</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"daFei"</span>, <span class="attr">age</span>: <span class="string">"18"</span>, <span class="attr">hobby</span>: <span class="string">"HTML"</span>&#125;,</span><br><span class="line">    &#123;<span class="attr">name</span>: <span class="string">"daFei"</span>, <span class="attr">age</span>: <span class="string">"18"</span>, <span class="attr">hobby</span>: <span class="string">"CSS"</span>&#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">let</span> arr = obj.map(<span class="function"><span class="params">item</span> =&gt;</span> item.hobby);</span><br><span class="line"><span class="built_in">console</span>.log(arr); <span class="comment">// 输出 ["JavaScript", "HTML", "CSS"]</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>vue_webstorm _模板</title>
      <link href="/2020/05/01/vue/vue_webstorm%20_%E6%A8%A1%E6%9D%BF/"/>
      <url>/2020/05/01/vue/vue_webstorm%20_%E6%A8%A1%E6%9D%BF/</url>
      <content type="html"><![CDATA[<h3 id="webstrom-和-vue"><a href="#webstrom-和-vue" class="headerlink" title="webstrom 和 vue"></a><code>webstrom</code> 和 <code>vue</code></h3><p>webstorm 设置 vue 模板快捷方式</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    &#123;&#123; message &#125;&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                message: <span class="string">'Hello Vue!'</span></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/vue/vue_tab.png" alt="webstrom vue tab" title="webstrom vue tab"></p>]]></content>
      
      <categories>
          
          <category> web前端 </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> webstorm </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>web-Emmet  快捷使用  -Emmet</title>
      <link href="/2020/02/09/other/Emmet/"/>
      <url>/2020/02/09/other/Emmet/</url>
      <content type="html"><![CDATA[<h3 id="HTML-布局-01-子元素"><a href="#HTML-布局-01-子元素" class="headerlink" title="HTML 布局_01  子元素"></a><code>HTML</code> 布局_01  <code>子元素</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ul&gt;li*4&gt;&#123;tab$&#125;  按下tab 后 </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>tab1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>tab2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>tab3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>tab4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/other/Emmet/e_01.gif" alt="e_01" title="e_01"></p><h3 id="HTML-布局-02-id-和-class"><a href="#HTML-布局-02-id-和-class" class="headerlink" title="HTML 布局_02  id 和 class"></a><code>HTML</code> 布局_02  <code>id 和 class</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ul.da#fei&gt;li*4&gt;&#123;tab$&#125;  按下tab后</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"da"</span> <span class="attr">id</span>=<span class="string">"fei"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>tab1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>tab2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>tab3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>tab4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/other/Emmet/e_01.gif" alt="e_02" title="e_02"></p><h3 id="HTML-布局-03-兄弟元素"><a href="#HTML-布局-03-兄弟元素" class="headerlink" title="HTML 布局_03  兄弟元素"></a><code>HTML</code> 布局_03  <code>兄弟元素</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">div.item*3&gt;div.title&#123;标题$&#125;+div.val&#123;内容$&#125;  按下tab后</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>标题1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"val"</span>&gt;</span>内容1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>标题2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"val"</span>&gt;</span>内容2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"title"</span>&gt;</span>标题3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"val"</span>&gt;</span>内容3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/other/Emmet/e_01.gif" alt="e_03" title="e_03"></p><h3 id="HTML-布局-04-自定义属性"><a href="#HTML-布局-04-自定义属性" class="headerlink" title="HTML 布局_04 自定义属性"></a><code>HTML</code> 布局_04 <code>自定义属性</code></h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">div&gt;p[data-fei=fei]  按下tab键</span><br><span class="line">div&gt;p[data-fei="fei"]  按下tab键</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">data-fei</span>=<span class="string">"fei"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="demo-复杂实例"><a href="#demo-复杂实例" class="headerlink" title="demo 复杂实例"></a>demo 复杂实例</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">div#header&gt;nav#container&gt;ul.self-tabs&gt;li.self-tabs-item*3&gt;a[href="javascript:void(0)"]</span><br><span class="line"></span><br><span class="line">按下tab键</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"header"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">nav</span> <span class="attr">id</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"self-tabs"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"self-tabs-item"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:void(0)"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"self-tabs-item"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:void(0)"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"self-tabs-item"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:void(0)"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="CSS-布局"><a href="#CSS-布局" class="headerlink" title="CSS 布局"></a>CSS 布局</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">w20</span>  按下<span class="selector-tag">tab</span>后</span><br><span class="line"><span class="selector-tag">width</span>: 20<span class="selector-tag">px</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">w20</span>+<span class="selector-tag">h30</span>    按下<span class="selector-tag">tab</span>后</span><br><span class="line"><span class="selector-tag">width</span>: 20<span class="selector-tag">px</span>;</span><br><span class="line"><span class="selector-tag">height</span>: 30<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure><h3 id="隐式标签"><a href="#隐式标签" class="headerlink" title="隐式标签"></a>隐式标签</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">.foo   按下tab后</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"foo"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">#bar   按下tab后</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"bar"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p> <a href="https://docs.emmet.io/ceat-sheet" title="Emmet 官网" target="_blank" rel="noopener">Emmet 官网</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-vue 随笔01</title>
      <link href="/2020/02/02/vue/%E9%9A%8F%E7%AC%94_01/"/>
      <url>/2020/02/02/vue/%E9%9A%8F%E7%AC%94_01/</url>
      <content type="html"><![CDATA[<h3 id="vue-cli3-基本使用"><a href="#vue-cli3-基本使用" class="headerlink" title="vue-cli3 基本使用"></a><code>vue-cli3</code> 基本使用</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vue-cli3:</span><br><span class="line">vue create my-project</span><br><span class="line"></span><br><span class="line">npm install axios</span><br><span class="line">npm install element-ui</span><br><span class="line">npm install vue-router</span><br><span class="line">npm install qs</span><br><span class="line">npm install vuex</span><br><span class="line">npm install echarts</span><br></pre></td></tr></table></figure><h3 id="router-和-route-区别"><a href="#router-和-route-区别" class="headerlink" title="$router 和 $route 区别"></a><code>$router</code> 和 <code>$route</code> 区别</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$router 为 VueRouter 实例,想要导航到不同URL,则使用</span><br><span class="line">$router.push(&#123;path:'foo',query:&#123;id:'123',name:'大飞'&#125;&#125;)</span><br><span class="line"></span><br><span class="line">$route 为当前router跳转对象,里面可以获取到name、path、query、params</span><br><span class="line">this.$route.query</span><br><span class="line">this.$route.params</span><br></pre></td></tr></table></figure><h4 id="this-router-push-中get-和post-请求"><a href="#this-router-push-中get-和post-请求" class="headerlink" title="this.$router.push 中get 和post 请求"></a>this.$router.push 中get 和post 请求</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 01) 路由文件配置</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">    mode:<span class="string">'history'</span>,</span><br><span class="line">    routes: [</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">'/HelloWorld'</span>,</span><br><span class="line">            name: <span class="string">'HelloWorld'</span>,</span><br><span class="line">            component:HelloWorld</span><br><span class="line">        &#125;,</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//02) 点击事件</span></span><br><span class="line">&lt;button @click=<span class="string">"clickBut"</span>&gt;push 点击我&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/push 点击我 path ===&gt; 对应query |||| name==&gt;对应params</span></span><br><span class="line"><span class="regexp">clickBut() &#123;</span></span><br><span class="line"><span class="regexp">    this.$router.push(&#123;</span></span><br><span class="line"><span class="regexp">        path: 'HelloWorld',</span></span><br><span class="line"><span class="regexp">        query: &#123;</span></span><br><span class="line"><span class="regexp">            id: 123,</span></span><br><span class="line"><span class="regexp">            username: "dafei 我是path==&gt;query" </span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;);/</span><span class="regexp">/get 请求</span></span><br><span class="line"><span class="regexp">    this.$router.push(&#123;</span></span><br><span class="line"><span class="regexp">        name: 'HelloWorld',</span></span><br><span class="line"><span class="regexp">        params: &#123;</span></span><br><span class="line"><span class="regexp">            id: 123,</span></span><br><span class="line"><span class="regexp">            username: "dafei 我是name==&gt;params "</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;) /</span><span class="regexp">/post 请求</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 03) 在 HelloWorld 页面接受参数</span></span><br><span class="line"><span class="regexp">&lt;p&gt;get方法接收参数 &#123;&#123;this.$route.query.username&#125;&#125;&lt;/</span>p&gt;</span><br><span class="line">&lt;p&gt;post方法接收参数 &#123;&#123;<span class="keyword">this</span>.$route.params.username&#125;&#125;&lt;<span class="regexp">/p&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/vue/router_route/route_01.png" alt="路由" title="路由"></p><p><img src="/img/vue/router_route/route_02.png" alt="提交" title="提交"></p><p><img src="/img/vue/router_route/route_03.png" alt="接受参数" title="接受参数"></p><h3 id="ES6异步操作-promise"><a href="#ES6异步操作-promise" class="headerlink" title="ES6异步操作 promise"></a><code>ES6</code>异步操作 <code>promise</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输出 success bar</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="string">'success'</span>);<span class="comment">//成功调用函数resolve()</span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data + <span class="string">" bar"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//--------------------------</span></span><br><span class="line"><span class="comment">//输出 success bar foo</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        resolve(<span class="string">'success'</span>);</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data + <span class="string">" bar"</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">data</span>=&gt;</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"foo"</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//--------------------------</span></span><br><span class="line"><span class="comment">// 输出 failure foo</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        reject(<span class="string">'failure'</span>);<span class="comment">//失败调用函数reject()</span></span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data + <span class="string">" bar"</span>);</span><br><span class="line">&#125;,error=&gt;&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error + <span class="string">' foo'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p> <a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" title="Promise" target="_blank" rel="noopener">Promise</a></p><h3 id="那些数组操作是响应式"><a href="#那些数组操作是响应式" class="headerlink" title="那些数组操作是响应式"></a>那些数组操作是响应式</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in items"</span> <span class="attr">:key</span>=<span class="string">"item "</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data()&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                items: [<span class="string">'fei'</span>, <span class="string">'foo'</span>, <span class="string">'bar'</span>],</span></span><br><span class="line"><span class="undefined">                number: 123</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="actionscript"><span class="comment">// !!! 通过索引直接修改不是响应式 !!!</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// Vue.set(app.items, 3, 'aaa');</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// app.items.push('bbb','ccc'); //在数组最后面添加元素</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// app.items.pop(); // 删除最后一个元素</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// app.items.shift(); // 从数组中删除第一个元素</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// app.items.unshift('ddd','eee'); // 在数组中最前面添加元素</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// app.items.reverse()  // 翻转数组</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// app.items.sort()   //排序数组</span></span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="actionscript"><span class="comment">// splice作用:删除元素/插入元素/替换元素</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 只有一个参数,从第几个开始删除后面元素</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 2个参数从第几个开始,删除几个元素</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// 3个参数插入元素</span></span></span><br><span class="line"><span class="actionscript"><span class="comment">// app.items.splice(1,0,'bbbb');</span></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="设置全局变量-Vue-prototype"><a href="#设置全局变量-Vue-prototype" class="headerlink" title="设置全局变量 Vue.prototype"></a>设置全局变量 <code>Vue.prototype</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Vue.prototype.$appName = <span class="string">'My App'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  beforeCreate: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.$appName)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p> <a href="https://cn.vuejs.org/v2/cookbook/adding-instance-properties.html" title="Vue.prototype" target="_blank" rel="noopener">Vue.prototype</a></p><h3 id="高阶函数-filter-map-reduce"><a href="#高阶函数-filter-map-reduce" class="headerlink" title="高阶函数 filter map reduce"></a>高阶函数 <code>filter</code> <code>map</code> <code>reduce</code></h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 高阶函数 filter map reduce  用es6语法</span></span><br><span class="line"><span class="comment">// 过滤小于20的值,返回布尔值 true 或者 false</span></span><br><span class="line"><span class="comment">// 循环数组中的每一个元素</span></span><br><span class="line"><span class="comment">//接受一个函数作为参数，这个函数作为一个累加器，从左到右遍历整个类型数组，最后返回一个单一的值</span></span><br><span class="line"><span class="keyword">const</span> nums = [<span class="number">10</span>, <span class="number">15</span>, <span class="number">18</span>, <span class="number">25</span>, <span class="number">34</span>];</span><br><span class="line"><span class="keyword">let</span> newNums = nums.filter(<span class="function"><span class="params">item</span> =&gt;</span> item &lt; <span class="number">20</span>) </span><br><span class="line">.map(<span class="function"><span class="params">item2</span> =&gt;</span> item2 * <span class="number">2</span>) </span><br><span class="line">.reduce(<span class="function">(<span class="params">total, item3</span>) =&gt;</span> total + item3); </span><br><span class="line"></span><br><span class="line"><span class="comment">//--------------------</span></span><br><span class="line"><span class="keyword">const</span> nums = [<span class="number">10</span>, <span class="number">15</span>, <span class="number">18</span>, <span class="number">25</span>, <span class="number">34</span>];</span><br><span class="line"><span class="keyword">let</span> newNum_1 = nums.filter(<span class="function"><span class="keyword">function</span> (<span class="params">item1</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> item1 &lt; <span class="number">20</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(newNum_1); <span class="comment">// [10, 15, 18]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newNum_2 = newNum_1.map(<span class="function"><span class="keyword">function</span> (<span class="params">item2</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> item2 * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(newNum_2); <span class="comment">// [20, 30, 36]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newNum_3 = newNum_2.reduce(<span class="function"><span class="keyword">function</span> (<span class="params">total, item3</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> total + item3;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(newNum_3); <span class="comment">// 86</span></span><br></pre></td></tr></table></figure><h3 id="nginx中配置vue项目"><a href="#nginx中配置vue项目" class="headerlink" title="nginx中配置vue项目"></a>nginx中配置vue项目</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#这是在一个PHP的laravel中配置的前后端</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  demo.fei.com;</span><br><span class="line">    <span class="attribute">charset</span> utf-<span class="number">8</span>;</span><br><span class="line">    <span class="attribute">root</span>  E:/selfweb/fei_laravel/public/;</span><br><span class="line">    <span class="attribute">index</span> index.php index.html;</span><br><span class="line">    <span class="comment">#laravel</span></span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="comment">#autoindex on;</span></span><br><span class="line">        <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.php?<span class="variable">$query_string</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#php</span></span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ .+\.php($|/)</span> &#123;</span><br><span class="line">        <span class="attribute">fastcgi_pass</span> <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">        <span class="attribute">fastcgi_index</span> index.php;</span><br><span class="line">        <span class="attribute">include</span> fastcgi.conf;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#vue</span></span><br><span class="line">    <span class="attribute">location</span> /web &#123;</span><br><span class="line">        <span class="attribute">alias</span>   E:/selfweb/vue/temp_vue2/dist;</span><br><span class="line">        <span class="attribute">index</span>  index.html;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> web前端 </category>
          
          <category> vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> vue </tag>
            
            <tag> cli </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>随笔-xxxx</title>
      <link href="/2020/02/02/laravel/%E9%9A%8F%E7%AC%94_01/"/>
      <url>/2020/02/02/laravel/%E9%9A%8F%E7%AC%94_01/</url>
      <content type="html"><![CDATA[<h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir <span class="string">[选项]</span> <span class="string">[参数]</span></span><br></pre></td></tr></table></figure><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-m     安安分分分</span></span><br></pre></td></tr></table></figure><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>发的发的发的放的地方</p><p>demo</p><p><img src="/img/linux_command01_2017_1224/linux_00/root_passwd.png" alt="root passwd" title="fdfdsfd"></p><p> <a href="http://example.com/" title="这里是title" target="_blank" rel="noopener">我是a里面的内容</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>linux -DDU  文本处理  -awk</title>
      <link href="/2019/11/20/ubuntu/linux_DDU_awk/"/>
      <url>/2019/11/20/ubuntu/linux_DDU_awk/</url>
      <content type="html"><![CDATA[<h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">awk [options] 'script' var=value file(s)</span><br><span class="line">awk [options] -f scriptfile var=value file(s)</span><br><span class="line"></span><br><span class="line">-f 指定输入定界符</span><br><span class="line">-v 赋值一个用户定义变量</span><br></pre></td></tr></table></figure><h3 id="awk-脚本基本结构"><a href="#awk-脚本基本结构" class="headerlink" title="awk 脚本基本结构"></a>awk 脚本基本结构</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk 'BEGIN&#123; print "start" &#125; pattern&#123; commands &#125; END&#123; print "end" &#125;' file</span><br></pre></td></tr></table></figure><h3 id="DEMO"><a href="#DEMO" class="headerlink" title="DEMO"></a>DEMO</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##测试内容如下 </span></span></span><br><span class="line">001  title    author   date</span><br><span class="line">002 ****      ******   *****</span><br><span class="line">003 PHP        dafei_03  2015-01-01</span><br><span class="line">004 HTML       dafei_04  2015-01-15</span><br><span class="line">005 Java       dafei_05  2015-03-03</span><br><span class="line">006 MySQL      dafei_06  2015-04-04</span><br><span class="line">007 Oracle     dafei_07  2015-01-04</span><br><span class="line">008 JavaScript     dafei_08  2015-12-12</span><br></pre></td></tr></table></figure><h3 id="没有任何参数"><a href="#没有任何参数" class="headerlink" title="没有任何参数"></a>没有任何参数</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">显示文本所有内容</span></span><br><span class="line">awk '&#123;print&#125;' fei.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_awk/awk_001.png" alt="基础命令" title="基础命令"></p><h3 id="awk-print"><a href="#awk-print" class="headerlink" title="awk  print"></a>awk  print</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">awk '&#123;print $2&#125;' fei.txt    #或者</span><br><span class="line">cat fei.txt  | awk '&#123;print $2&#125;'</span><br><span class="line"></span><br><span class="line">cat fei.txt  | awk '&#123;print $2&#125;' | sort -r -n</span><br><span class="line">awk '&#123;print $2&#125;' fei.txt | sort -r -n</span><br><span class="line"></span><br><span class="line">awk '&#123;print $NF&#125;' fei.txt      #打印一行中最后1个字段</span><br><span class="line">awk '&#123;print $(NF-2)&#125;' fei.txt  #打印一行中倒数第2个字段</span><br><span class="line">awk '&#123;print $2&#125;' fei.txt       #打印一行中第2个字段</span><br><span class="line">awk '&#123;print $2,$3&#125;' fei.txt    #打印一行中第2个和第3个字段</span><br><span class="line"></span><br><span class="line">awk 'END&#123; print NR &#125;' fei.txt  #统计文件中行数</span><br><span class="line">awk '&#123; print NR &#125;' fei.txt   #显示每一行的行号</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_awk/awk_print.png" alt="awk print " title="awk print"></p><h3 id="v-指定定界符"><a href="#v-指定定界符" class="headerlink" title="-v 指定定界符"></a><code>-v</code> 指定定界符</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">默认是空白字符</span></span><br><span class="line">awk -F: '&#123; print $NF &#125;' /etc/passwd</span><br><span class="line">或</span><br><span class="line">awk 'BEGIN&#123; FS=":" &#125; &#123; print $NF &#125;' /etc/passwd</span><br><span class="line"></span><br><span class="line">head -3 /etc/passwd | awk -F: '&#123; print $NF &#125;' </span><br><span class="line">head -3 /etc/passwd | awk 'BEGIN&#123; FS=":" &#125; &#123; print $NF &#125;'  </span><br><span class="line">tail -3 fei.txt | awk -F- '&#123; print $NF &#125;'</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_awk/awk_f.png" alt="awk 使用定界符 " title="awk 使用定界符"></p><h3 id="V-使用变量"><a href="#V-使用变量" class="headerlink" title="-V  使用变量"></a><code>-V</code>  使用变量</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">awk 'BEGIN&#123; print "start" &#125; &#123; print &#125; END&#123; print "end" &#125;' fei.txt</span><br><span class="line">echo | awk '&#123; var1="v1"; var2="v2"; var3="v3"; print var1,var2,var3; &#125;'  #v1 v2 v3</span><br><span class="line">echo | awk '&#123; var1="v1"; var2="v2"; var3="v3"; print var1"="var2"="var3; &#125;'  #双引号拼接 v1=v2=v3</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">使用外部变量</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#使用 `-v` 选项</span></span></span><br><span class="line">VAR=10000</span><br><span class="line">echo | awk -v VARIABLE=$VAR '&#123; print VARIABLE &#125;'</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">#不使用 `-v` 选项</span></span></span><br><span class="line">var1="aaa"</span><br><span class="line">var2="bbb"</span><br><span class="line">echo | awk '&#123; print v1,v2 &#125;' v1=$var1 v2=$var2</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_awk/awk_var.png" alt="awk 使用变量 " title="awk 使用变量"></p><h3 id="运算"><a href="#运算" class="headerlink" title="运算"></a>运算</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost fei_test]# awk 'BEGIN&#123;a=1; print a++,++a;&#125;'</span><br><span class="line">1 3</span><br><span class="line">[root@localhost fei_test]# awk 'BEGIN&#123;a="b";print a=="b"?"ok":"err";&#125;'</span><br><span class="line">ok</span><br><span class="line">[root@localhost fei_test]#</span><br></pre></td></tr></table></figure><h3 id="next-跳行"><a href="#next-跳行" class="headerlink" title="next 跳行"></a>next 跳行</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost fei_test]# awk 'NR%2==1&#123;next&#125;&#123;print NR,$0;&#125;' fei.txt </span><br><span class="line">2 002 ****      ******   *****</span><br><span class="line">4 004 HTML       dafei_04  2015-01-15</span><br><span class="line">6 006 MySQL      dafei_06  2015-04-04</span><br><span class="line">8 008 JavaScript     dafei_08  2015-12-12</span><br><span class="line">[root@localhost fei_test]#</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_awk/awk_next.png" alt="awk next " title="awk next"></p><h3 id="输出到一个文件"><a href="#输出到一个文件" class="headerlink" title="输出到一个文件"></a>输出到一个文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">echo | awk '&#123;printf("hello word") &gt; "daFei.php"&#125;'</span><br><span class="line">或</span><br><span class="line">echo | awk '&#123;printf("hello word \n\r") &gt;&gt; "daFei.php"&#125;'</span><br></pre></td></tr></table></figure><h3 id="其他-awk-和-grep-正则区别"><a href="#其他-awk-和-grep-正则区别" class="headerlink" title="其他  awk 和 grep 正则区别"></a>其他  <code>awk</code> 和 <code>grep</code> 正则区别</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost fei_test]# awk '/^mysql/&#123;print&#125;' /etc/passwd</span><br><span class="line">mysql:x:987:1001::/home/mysql:/bin/false</span><br><span class="line">[root@localhost fei_test]# </span><br><span class="line">[root@localhost fei_test]# </span><br><span class="line">[root@localhost fei_test]# grep "^mysql" /etc/passwd</span><br><span class="line">mysql:x:987:1001::/home/mysql:/bin/false</span><br><span class="line">[root@localhost fei_test]#</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_awk/awk_grep.png" alt="awk grep区别 " title="awk grep区别"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-oracle 其他问题</title>
      <link href="/2019/10/11/oracle/oracle_%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98/"/>
      <url>/2019/10/11/oracle/oracle_%E5%85%B6%E4%BB%96%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<p>oracle 其他问题</p><h3 id="Navicat-连接-oracle-报错"><a href="#Navicat-连接-oracle-报错" class="headerlink" title="Navicat 连接  oracle 报错"></a><code>Navicat</code> 连接  <code>oracle</code> 报错</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">connection <span class="keyword">to</span><span class="built_in"> server </span>failed probale oracle net admin error</span><br><span class="line"></span><br><span class="line">Navicat 客户端的oci需要与oracle 的版本一致</span><br></pre></td></tr></table></figure><h3 id="Navicat-连接-oracle-数据库账号错误"><a href="#Navicat-连接-oracle-数据库账号错误" class="headerlink" title="Navicat 连接 oracle 数据库账号错误"></a><code>Navicat</code> 连接 <code>oracle</code> 数据库账号错误</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">connection <span class="keyword">as</span> SYS should <span class="keyword">be</span> <span class="keyword">as</span> SYSDBA <span class="built_in">or</span> SYSOPER</span><br><span class="line"></span><br><span class="line">不能使用sys账号,要使用<span class="built_in">system</span>账号登录</span><br></pre></td></tr></table></figure><h3 id="PL-SQL-Developer-连接oracle"><a href="#PL-SQL-Developer-连接oracle" class="headerlink" title="PL/SQL Developer 连接oracle"></a><code>PL/SQL Developer</code> 连接<code>oracle</code></h3><h3 id="PL-和-oracle在通一个系统中"><a href="#PL-和-oracle在通一个系统中" class="headerlink" title="#PL 和 oracle在通一个系统中"></a>#<code>PL</code> 和 <code>oracle</code>在通一个系统中</h3><p>安装完<code>PL/SQL Developer</code> 直接连接oracle数据库即可</p><p><img src="/img/oracle/connect_localhost.png" alt="PL oracle" title="PL oracle"></p><h4 id="PL-在windows系统-oracle在linux系统中"><a href="#PL-在windows系统-oracle在linux系统中" class="headerlink" title="PL 在windows系统, oracle在linux系统中"></a><code>PL</code> 在<code>windows</code>系统, <code>oracle</code>在<code>linux</code>系统中</h4><p> 01) 需要下载 instantclient-basic-linux.zseries64-11.2.0.4.0.zip 和  instantclient-basic-windows.x64-11.2.0.4.0.zip,注意版本要和<code>oracle</code>数据库版本一致,这2个都需要,在后面配置PL/SQL 的时候会用到</p><p><img src="/img/oracle/oci_pl_sql.png" alt="PL oracle" title="PL oracle"></p><p>02) 创建 tnsnames.ora 文件 ,向文件中添加如下内容</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">orcl =   </span><br><span class="line">    (DESCRIPTION =      </span><br><span class="line">            (ADDRESS_LIST =         </span><br><span class="line">                (ADDRESS = (PROTOCOL = TCP)(HOST = 10.168.69.199 )(PORT = 1521))      </span><br><span class="line">            )       </span><br><span class="line">            (CONNECT_DATA =        </span><br><span class="line">                (SERVICE_NAME = ehrv3 )      </span><br><span class="line">            )</span><br><span class="line"></span><br><span class="line">        )</span><br></pre></td></tr></table></figure><p><img src="/img/oracle/tnsnames.png" alt="PL oracle" title="PL oracle"></p><p>03) 解压 instantclient-basic-linux.zseries64-11.2.0.4.0.zip 和  instantclient-basic-windows.x64-11.2.0.4.0.zip 解压后名字是 instantclient_11_2 ,然后把这2个解压文件合并,有重复的文件直接覆盖替换, 我把文件 放到 C:\instantclient_11_2,然后把  tnsnames.ora 放到 C:\instantclient_11_2 下面,(网上有的说把 tnsnames.ora  放到新建的目录 C:\instantclient_11_2\network\admin 下面,其实不是必须的,只要后面配置的时候可以找到这个文件就可以)<br><img src="/img/oracle/oci_tnsnames_02.png" alt="PL oracle" title="PL oracle"></p><p>03-02)  !!! 下面这2个环境变量不配置也可以 ,( 我这里没有配置这2个环境变量 )</p><table><thead><tr><th style="text-align:left">变量名</th><th style="text-align:left">变量</th></tr></thead><tbody><tr><td style="text-align:left">TNS_ADMIN</td><td style="text-align:left">C:\instantclient_11_2</td></tr><tr><td style="text-align:left">NLS_LANG</td><td style="text-align:left">AMERICAN_AMERICA.AL32UTF8</td></tr></tbody></table><p>04) 配置 PL/SQL Developer ,  (汉化在后面会另加说明), 启动 PL/SQL 出现登录窗口,点击取消(calcel)按钮,这嗜好会进去软件界面</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">oracle 主目录 C:<span class="symbol">\i</span>nstantclient_11_2</span><br><span class="line"></span><br><span class="line">OCI库  C:<span class="symbol">\i</span>nstantclient_11_2<span class="symbol">\o</span>ci.dll</span><br></pre></td></tr></table></figure><p><img src="/img/oracle/pl_config.png" alt="PL oracle" title="PL oracle"></p><p>05) 重启 PL/SQl ,  输入账号密码,注意数据库的哪一行要写(192.168.1.200:1521/fei  [ IP  端口 数据库名称 ])</p><p><img src="/img/oracle/connect.png" alt="PL oracle" title="PL oracle"></p><p><img src="/img/oracle/table.png" alt="PL oracle" title="PL oracle"></p><p><a href="https://www.allroundautomations.com/bodyplsqldevreg.html" target="_blank" rel="noopener">PL/SQL Developer - Registered Download 下载__操作oracle数据库工具</a></p><p><a href="https://www.oracle.com/technetwork/cn/topics/winx64soft-101515-zhs.html" target="_blank" rel="noopener">instantclient-basic-windows.x64-11.2.0.4.0.zip 下载地址</a>   &amp;&amp;  <a href="https://www.oracle.com/technetwork/cn/topics/zlinuxsoft-087641-zhs.html" target="_blank" rel="noopener">instantclient-basic-linux.zseries64-11.2.0.4.0.zip 下载</a> </p><p><a href="https://www.oraclejsq.com/oracle.html" target="_blank" rel="noopener">oracle教程</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>linux-DDU  -git git-bash</title>
      <link href="/2019/09/29/win/git_02/"/>
      <url>/2019/09/29/win/git_02/</url>
      <content type="html"><![CDATA[<h3 id="git-bash-中添加-wget命令"><a href="#git-bash-中添加-wget命令" class="headerlink" title="git-bash  中添加 wget命令"></a>git-bash  中添加 wget命令</h3><p>01) 下载weget二进制包<br>02) 将下载好的 wget.exe 拷贝到 git 安装目录 …Git\mingw64\bin 下面<br>03)  现在可议 wget -help 查看</p><p><img src="/img/win/git/git_wget.png" alt="git wget" title="git wget"></p><h3 id="中文无法显示"><a href="#中文无法显示" class="headerlink" title="中文无法显示"></a>中文无法显示</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p> <a href="https://www.gnu.org/software/wget/faq.html" title="这里是title" target="_blank" rel="noopener">在哪里可以下载Wget </a></p><p> <a href="https://eternallybored.org/misc/wget/" title="windwos 二进制文件由JernejSimončič提供" target="_blank" rel="noopener">windwos 二进制文件由JernejSimončič提供</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>linux-DDU  -git基本使用</title>
      <link href="/2019/09/29/win/git_01/"/>
      <url>/2019/09/29/win/git_01/</url>
      <content type="html"><![CDATA[<h3 id="git基本使用"><a href="#git基本使用" class="headerlink" title="git基本使用"></a>git基本使用</h3><p>git常用分支：master主分支、dev开发分支、bug分支、feature临时功能分支</p><p>origin：默认远程分支；</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">初始化一个Git仓库，使用git init命令。</span><br><span class="line">git add <span class="tag">&lt;file&gt;</span>   注意，可反复多次使用，添加多个文件【 git add .】【git commit readme.md -m<span class="string">"readme备注信息"</span>】</span><br><span class="line">git commit       完成。 git commit -m<span class="string">"备注"</span></span><br><span class="line">git status       掌握工作区的状态</span><br><span class="line">git diff         可以查看修改内容。</span><br><span class="line">git reset --hard commit_id    在版本的历史之间穿梭</span><br><span class="line"><span class="comment">###  git reset --hard 远程覆盖本地</span></span><br><span class="line"><span class="comment">###  git pull origin dev  从dev分支获取最新提交</span></span><br><span class="line">git log                     （git log --<span class="attr">pretty=</span>oneline）可以查看提交历史</span><br><span class="line">git reflog                    查看命令历史</span><br><span class="line">git checkout -- file          把文件在工作区的修改全部撤销    命令中的--很重要</span><br><span class="line">git rm                       用于删除一个文件</span><br><span class="line"></span><br><span class="line">git remote add origin git@server-name:path/repo-name.git  要关联一个远程库，使用命令</span><br><span class="line">git push -u origin <span class="keyword">master</span>      <span class="title">关联后，使用命令git</span> push -u origin <span class="literal">master</span>第一次推送<span class="literal">master</span>分支的所有内容</span><br><span class="line"></span><br><span class="line">git <span class="keyword">clone</span>   <span class="title">克隆一个仓库</span></span><br><span class="line"><span class="title">git</span> <span class="keyword">clone</span> <span class="title">-b</span> name(分支名称)   克隆一个分支仓库</span><br><span class="line"></span><br><span class="line">////////分支修改后，分支提交了，切换到<span class="literal">master</span>后才会看不到内容，分支不提交，<span class="literal">master</span>可以看到修改内容///////</span><br><span class="line">git branch   查看分支</span><br><span class="line">git branch <span class="tag">&lt;name&gt;</span>             创建分支</span><br><span class="line">git checkout <span class="tag">&lt;name&gt;</span>           切换分支</span><br><span class="line">git checkout -b <span class="tag">&lt;name&gt;</span>        创建+切换分支</span><br><span class="line">git merge <span class="tag">&lt;name&gt;</span>              合并某分支到当前分支   </span><br><span class="line">git branch -d <span class="tag">&lt;name&gt;</span>          删除分支</span><br><span class="line">git branch -D <span class="tag">&lt;name&gt;</span>          强行删除分支（不需要合并）</span><br><span class="line">git log --graph               看到分支合并图</span><br><span class="line">git merge --no-ff -m <span class="string">"merge with no-ff"</span> dev   加上--no-ff参数就可以用普通模式合并</span><br><span class="line">git stash                     储藏</span><br><span class="line">git stash list                </span><br><span class="line">git stash pop                  恢复储藏并删除储藏</span><br><span class="line"></span><br><span class="line">git fetch origin <span class="keyword">master</span>        <span class="title">获取远程分支到本地</span></span><br><span class="line"><span class="title">git</span> merge origin/<span class="keyword">master</span>        <span class="title">合并到本地仓库</span></span><br><span class="line"><span class="title">git</span> pull                       获取最新提交【git pull = git fetch + git merge】</span><br><span class="line"></span><br><span class="line">git <span class="keyword">tag</span> <span class="title">&lt;name</span>&gt;                             用于新建一个标签，默认为HEAD，也可以指定一个commit id</span><br><span class="line">git <span class="keyword">tag</span> <span class="title">&lt;name</span>&gt; <span class="tag">&lt;commit id&gt;</span>                 新建一个标签在commit id上</span><br><span class="line">git <span class="keyword">tag</span> <span class="title">-a</span> <span class="tag">&lt;tagname&gt;</span> -m <span class="string">"blablabla..."</span>     可以指定标签信息</span><br><span class="line">git <span class="keyword">tag</span> <span class="title">-s</span> <span class="tag">&lt;tagname&gt;</span> -m <span class="string">"blablabla..."</span>     可以用PGP签名标签</span><br><span class="line">git <span class="keyword">tag</span>                                    <span class="title">可以查看所有标签</span></span><br><span class="line"><span class="title">git</span> push origin <span class="tag">&lt;tagname&gt;</span>                  可以推送一个本地标签</span><br><span class="line">git push origin --tags                     可以推送全部未推送过的本地标签</span><br><span class="line">git <span class="keyword">tag</span> <span class="title">-d</span> <span class="tag">&lt;tagname&gt;</span>                       可以删除一个本地标签</span><br><span class="line">git push origin :refs/tags/<span class="tag">&lt;tagname&gt;</span>       可以删除一个远程标签</span><br><span class="line">git ls-files                            如何知道目录里的文件是否在git仓库里</span><br></pre></td></tr></table></figure><p>### </p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-other -command 其他命令</title>
      <link href="/2019/08/06/other/other_command/"/>
      <url>/2019/08/06/other/other_command/</url>
      <content type="html"><![CDATA[<h3 id="explorer-直接打开可视化目录"><a href="#explorer-直接打开可视化目录" class="headerlink" title="explorer 直接打开可视化目录"></a><code>explorer</code> 直接打开可视化目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">执行后可以打开弹出当前路径的目录</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">windows中</span></span><br><span class="line">start explorer .  #注意这里有个点</span><br><span class="line">或者</span><br><span class="line">explorer .    #注意这里有个点</span><br><span class="line"><span class="meta">#</span><span class="bash">linux 中</span></span><br><span class="line">nautilus  .      #注意这里有个点</span><br></pre></td></tr></table></figure><p><img src="/img/other/explorer.gif" alt="explorer 可视化目录" title="explorer 可视化目录"></p><h3 id="tracert-路由跟踪命令"><a href="#tracert-路由跟踪命令" class="headerlink" title="tracert 路由跟踪命令"></a><code>tracert</code> 路由跟踪命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">路由跟踪命令,用于确定IP数据访问目标所经过的路径</span></span><br><span class="line">tracert  www.baidu.com</span><br><span class="line">tracert  php.net</span><br></pre></td></tr></table></figure><h3 id="route-显示和操作IP路由表"><a href="#route-显示和操作IP路由表" class="headerlink" title="route  显示和操作IP路由表"></a>route  显示和操作IP路由表</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">route</span><br><span class="line">route -n</span><br><span class="line">route add</span><br><span class="line">route del</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>php -GD -imagettftext库制作图片</title>
      <link href="/2019/07/25/php/php_gd_imagettftext/"/>
      <url>/2019/07/25/php/php_gd_imagettftext/</url>
      <content type="html"><![CDATA[<h3 id="php-GD-用-STHUPO-TTF-字体向图像写入文本"><a href="#php-GD-用-STHUPO-TTF-字体向图像写入文本" class="headerlink" title="php GD  用 STHUPO.TTF 字体向图像写入文本"></a>php GD  用 <code>STHUPO.TTF</code> 字体向图像写入文本</h3><p><code>php GD</code>  用 <code>STHUPO.TTF</code> 字体向图像写入文本</p><p><code>php GD</code>  用 <code>STHUPO.TTF</code> 字体向图像写入文本</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GD 和图像处理函数</span></span><br><span class="line"><span class="comment">// https://php.net/manual/zh/function.imagettftext.php</span></span><br><span class="line"><span class="comment">// https://php.net/manual/zh/function.imagettftext.php</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// !!!为 imagettftext() 这函数使用相对路径做准备----------------------</span></span><br><span class="line">putenv(<span class="string">'GDFONTPATH='</span> . realpath(<span class="string">'.'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">//1. 绘制图像资源（创建一个画布）</span></span><br><span class="line">$image = imagecreatetruecolor(<span class="number">500</span>, <span class="number">300</span>);</span><br><span class="line"><span class="comment">//2. 先分配一个绿色</span></span><br><span class="line">$green = imagecolorallocate($image, <span class="number">22</span>, <span class="number">153</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">//3. 使用绿色填充画布</span></span><br><span class="line"><span class="comment">// imagefill($image, 0, 0, $green);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//03-02)使用抗锯齿（antialias）功能  ↓↓↓</span></span><br><span class="line"><span class="comment">// imageantialias($image,true);</span></span><br><span class="line"><span class="comment">// $red_aa = imagecolorallocate($image, 255, 0, 0);</span></span><br><span class="line"><span class="comment">// $red_aa2 = imagecolorallocate($image, 255, 0, 0);</span></span><br><span class="line"><span class="comment">// imageline($image, 0, 0, 300, 300, $red_aa);</span></span><br><span class="line"><span class="comment">// imageline($image, 100, 0, 400, 300, $red_aa2);</span></span><br><span class="line"><span class="comment">//使用抗锯齿（antialias）功能  ↑↑↑</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 在画布中绘制图像</span></span><br><span class="line">$bai = imagecolorallocate($image, <span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line"><span class="comment">//使用指定的字体文件绘制文字</span></span><br><span class="line"><span class="comment">//参数2：字体大小</span></span><br><span class="line"><span class="comment">//参数3：字体倾斜的角度</span></span><br><span class="line"><span class="comment">//参数4、5：文字的x、y坐标</span></span><br><span class="line"><span class="comment">//参数6：文字的颜色</span></span><br><span class="line"><span class="comment">//参数7：字体文件</span></span><br><span class="line"><span class="comment">//参数8：绘制的文字</span></span><br><span class="line"><span class="comment">//------- !!! --------------  imagettftext() 这个函数中的路径使用绝对路径,要想使用相对路径请注意 第一行代码 putenv()</span></span><br><span class="line">imagettftext($image, <span class="number">30</span>, <span class="number">30</span>, <span class="number">200</span>, <span class="number">250</span>, $bai, <span class="string">'./STHUPO.TTF'</span>, <span class="string">'helloworld'</span>);</span><br><span class="line"><span class="comment">// imagettftext($image, 30, 30, 200, 250, $bai, __DIR__.'/STHUPO.TTF', 'helloworld');</span></span><br><span class="line"><span class="comment">// imagettftext($image, 30, 30, 200, 250, $bai, realpath('./').'/STHUPO.TTF', 'helloworld');</span></span><br><span class="line"><span class="comment">// imagettftext($image, 30, 30, 200, 250, $bai, 'C:/Windows/Fonts/aparajbi.ttf', 'helloworld');</span></span><br><span class="line"><span class="comment">// imagettftext($image, 30, 30, 200, 250, $bai, 'C:/Windows/Fonts/STHUPO.TTF', 'helloworld');</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//5. 在浏览器直接输出图像资源</span></span><br><span class="line">header(<span class="string">"Content-Type:image/jpeg"</span>);</span><br><span class="line">imagejpeg($image);</span><br><span class="line"></span><br><span class="line"><span class="comment">//6. 销毁图像资源</span></span><br><span class="line">imagedestroy($image);</span><br></pre></td></tr></table></figure><p><img src="/img/php/gd_imagettftext.png" alt="gd imagettftext" title="gd imagettftext"></p><p><img src="/img/php/gd_imageantialias.png" alt="gd imageantialias" title="gd imageantialias"></p><p> <a href="https://php.net/manual/zh/function.imagettftext.php" title="GD 和图像处理 函数" target="_blank" rel="noopener">GD 和图像处理 函数</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>php -GD 库制作图片</title>
      <link href="/2019/07/25/php/php_gd/"/>
      <url>/2019/07/25/php/php_gd/</url>
      <content type="html"><![CDATA[<h3 id="php-GD-库制作图片"><a href="#php-GD-库制作图片" class="headerlink" title="php GD 库制作图片"></a>php GD 库制作图片</h3><p>使用 <code>PHP GD</code> 库制作一张图片,并在图片中输出文字</p><p>使用 <code>PHP GD</code> 库制作一张图片,并在图片中输出文字</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GD 和图像处理函数</span></span><br><span class="line"><span class="comment">// https://www.php.net/manual/zh/ref.image.php</span></span><br><span class="line"><span class="comment">// https://www.php.net/manual/zh/ref.image.php</span></span><br><span class="line">$size = <span class="number">300</span>;</span><br><span class="line">$image=imagecreatetruecolor($size+<span class="number">200</span>, $size+<span class="number">400</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用黑色边框得到白色背景的东西</span></span><br><span class="line">$back = imagecolorallocate($image, <span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>);</span><br><span class="line">$border = imagecolorallocate($image, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">imagefilledrectangle($image, <span class="number">0</span>, <span class="number">0</span>, $size + <span class="number">150</span>, $size + <span class="number">100</span>, $back);</span><br><span class="line">imagerectangle($image, <span class="number">0</span>, <span class="number">0</span>, $size +<span class="number">150</span>, $size + <span class="number">100</span>, $border);</span><br><span class="line"></span><br><span class="line">$yellow_x = <span class="number">200</span>;</span><br><span class="line">$yellow_y = <span class="number">175</span>;</span><br><span class="line">$radius = <span class="number">250</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 alpha 值分配颜色</span></span><br><span class="line">$yellow = imagecolorallocatealpha($image, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>, <span class="number">75</span>);</span><br><span class="line">$text_color = imagecolorallocate($image, <span class="number">233</span>, <span class="number">14</span>, <span class="number">91</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 画一个圆</span></span><br><span class="line">imagefilledellipse($image, $yellow_x, $yellow_y, $radius, $radius, $yellow);</span><br><span class="line"><span class="comment">// 画一个矩形</span></span><br><span class="line"><span class="comment">// imagefilledrectangle($image,$yellow_x-100, $yellow_y-100, $radius+50, $radius+40, $yellow);</span></span><br><span class="line"><span class="comment">// 水平地画一行字符串</span></span><br><span class="line">imagestring($image, <span class="number">5</span>, <span class="number">150</span>, <span class="number">150</span>, <span class="string">"hello world"</span>, $text_color);</span><br><span class="line"><span class="comment">// 垂直地画一行字符串</span></span><br><span class="line"><span class="comment">// imagestringup ($image, 5, 150, 150, "hello world", $text_color);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 告诉浏览器输出 png 图片</span></span><br><span class="line">header(<span class="string">'Content-type: image/png'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 输出结果</span></span><br><span class="line">imagepng($image);</span><br><span class="line">imagedestroy($image);</span><br></pre></td></tr></table></figure><p><img src="/img/php/gd.png" alt="gd" title="gd"></p><p> <a href="https://www.php.net/manual/zh/ref.image.php" title="GD 和图像处理 函数" target="_blank" rel="noopener">GD 和图像处理 函数</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-虚拟机 -centos7 -扩容</title>
      <link href="/2019/07/22/centos/centos_%E6%89%A9%E5%AE%B9/"/>
      <url>/2019/07/22/centos/centos_%E6%89%A9%E5%AE%B9/</url>
      <content type="html"><![CDATA[<h3 id="在虚拟机VMware上增加磁盘空间"><a href="#在虚拟机VMware上增加磁盘空间" class="headerlink" title="在虚拟机VMware上增加磁盘空间"></a>在虚拟机<code>VMware</code>上增加磁盘空间</h3><p>使用了一段时间虚拟机后发现磁盘不够用了,需要扩容。在客户端操作扩容出现<code>磁盘已成功扩展。您必须从客户机操作系统内部对磁盘重新进行分区和扩展文件系统。</code>  然后进<code>centos7</code>系统进行操作</p><p><img src="/img/centos/lvm/lvm_01.jpg" alt="扩容" title="扩容"></p><h3 id="使用-df-h-查看磁盘空间大小"><a href="#使用-df-h-查看磁盘空间大小" class="headerlink" title="使用 df -h 查看磁盘空间大小"></a>使用 <code>df -h</code> 查看磁盘空间大小</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 挂载跟目录节点的 /dev/mapper/centos-root 只有23容量</span></span></span><br><span class="line">[root@localhost ~]# df -h</span><br><span class="line">Filesystem               Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/centos-root   23G   23G   20K 100% /</span><br><span class="line">devtmpfs                  20G     0   20G   0% /dev</span><br><span class="line">tmpfs                     20G  4.0K   20G   1% /dev/shm</span><br><span class="line">tmpfs                     20G  8.5M   20G   1% /run</span><br><span class="line">tmpfs                     20G     0   20G   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1                497M  120M  378M  25% /boot</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><h3 id="使用-fdisk-l-命令查看磁盘信息"><a href="#使用-fdisk-l-命令查看磁盘信息" class="headerlink" title="使用 fdisk -l 命令查看磁盘信息"></a>使用 <code>fdisk -l</code> 命令查看磁盘信息</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 第一行 Disk /dev/sda: 107.4 GB 与实际 df -好现实内容不符,说明增加磁盘成功</span></span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# fdisk -l</span><br><span class="line"></span><br><span class="line">Disk /dev/sda: 107.4 GB, 107374182400 bytes, 209715200 sectors  ---与上面(df -h)不符,说明新增成功</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x0004148c</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sda1   *        2048     1026047      512000   83  Linux</span><br><span class="line">/dev/sda2         1026048    41943039    20458496   8e  Linux LVM</span><br><span class="line">/dev/sda3        41943040    52428799     5242880   8e  Linux LVM</span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/centos-root: 24.1 GB, 24121442304 bytes, 47112192 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/centos-swap: 2147 MB, 2147483648 bytes, 4194304 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line"></span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><p><img src="/img/centos/lvm/fdisk_l.png" alt="磁盘信息" title="磁盘信息"></p><h3 id="使用-fdisk-dev-sda-创建新的分区"><a href="#使用-fdisk-dev-sda-创建新的分区" class="headerlink" title="使用 fdisk  /dev/sda 创建新的分区"></a>使用 <code>fdisk  /dev/sda</code> 创建新的分区</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 注意：不同操作系统的磁盘命名方式不同，有些是/dev/vda。</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 具体使用方式参考第三步中fdisk -l首行显示Disk。</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 如笔者在该系统中首行显示为Disk /dev/sda: 107.4 GB, 107374182400 bytes ，故使用命令fdisk /dev/sda）</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# fdisk /dev/sda</span><br><span class="line">Welcome to fdisk (util-linux 2.23.2).</span><br><span class="line"></span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write command.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (m for help): m   ---------#帮助命令</span><br><span class="line">Command action</span><br><span class="line">   a   toggle a bootable flag</span><br><span class="line">   b   edit bsd disklabel</span><br><span class="line">   c   toggle the dos compatibility flag</span><br><span class="line">   d   delete a partition</span><br><span class="line">   g   create a new empty GPT partition table</span><br><span class="line">   G   create an IRIX (SGI) partition table</span><br><span class="line">   l   list known partition types</span><br><span class="line">   m   print this menu</span><br><span class="line">   n   add a new partition</span><br><span class="line">   o   create a new empty DOS partition table</span><br><span class="line">   p   print the partition table</span><br><span class="line">   q   quit without saving changes</span><br><span class="line">   s   create a new empty Sun disklabel</span><br><span class="line">   t   change a partition's system id</span><br><span class="line">   u   change display/entry units</span><br><span class="line">   v   verify the partition table</span><br><span class="line">   w   write table to disk and exit</span><br><span class="line">   x   extra functionality (experts only)</span><br><span class="line"></span><br><span class="line">Command (m for help): n  -----------#创建新分区</span><br><span class="line">Partition type:</span><br><span class="line">   p   primary (3 primary, 0 extended, 1 free)</span><br><span class="line">   e   extended</span><br><span class="line">Select (default e): p      -------#选择主分区</span><br><span class="line">Selected partition 4</span><br><span class="line">First sector (52428800-209715199, default 52428800):   ---#回车使用默认</span><br><span class="line">Using default value 52428800</span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G&#125; (52428800-209715199, default 209715199): ---#回车使用默认</span><br><span class="line">Using default value 209715199</span><br><span class="line">Partition 4 of type Linux and of size 75 GiB is set</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (m for help): t   --------------#修改分区类型</span><br><span class="line">Partition number (1-4, default 4):   ----------#回车使用默认值</span><br><span class="line">Hex code (type L to list all codes): 8e    -----#说明: 8e 是lvm磁盘类型</span><br><span class="line">Changed type of partition 'Linux' to 'Linux LVM'</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (m for help): p  ------#打印分区表</span><br><span class="line"></span><br><span class="line">Disk /dev/sda: 107.4 GB, 107374182400 bytes, 209715200 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x0004148c</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sda1   *        2048     1026047      512000   83  Linux</span><br><span class="line">/dev/sda2         1026048    41943039    20458496   8e  Linux LVM</span><br><span class="line">/dev/sda3        41943040    52428799     5242880   8e  Linux LVM</span><br><span class="line">/dev/sda4        52428800   209715199    78643200   8e  Linux LVM</span><br><span class="line"></span><br><span class="line">Command (m for help): w   -------#保存退出</span><br><span class="line">The partition table has been altered!</span><br><span class="line"></span><br><span class="line">Calling ioctl() to re-read partition table.</span><br><span class="line"></span><br><span class="line">WARNING: Re-reading the partition table failed with error 16: Device or resource busy.</span><br><span class="line">The kernel still uses the old table. The new table will be used at</span><br><span class="line">the next reboot or after you run partprobe(8) or kpartx(8)  ---#这里提示重启系统</span><br><span class="line">Syncing disks.</span><br></pre></td></tr></table></figure><p><img src="/img/centos/lvm/fdisk_01.png" alt="扩容" title="扩容"></p><p><img src="/img/centos/lvm/fdisk_02.png" alt="扩容" title="扩容"></p><h3 id="重启系统"><a href="#重启系统" class="headerlink" title="重启系统"></a>重启系统</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# reboot</span><br></pre></td></tr></table></figure><h3 id="查看磁盘情况"><a href="#查看磁盘情况" class="headerlink" title="查看磁盘情况"></a>查看磁盘情况</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 核对刚才所做的分区操作是否保存成功</span></span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# fdisk -l</span><br><span class="line"></span><br><span class="line">Disk /dev/sda: 107.4 GB, 107374182400 bytes, 209715200 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x0004148c</span><br><span class="line"></span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/sda1   *        2048     1026047      512000   83  Linux</span><br><span class="line">/dev/sda2         1026048    41943039    20458496   8e  Linux LVM</span><br><span class="line">/dev/sda3        41943040    52428799     5242880   8e  Linux LVM</span><br><span class="line">/dev/sda4        52428800   209715199    78643200   8e  Linux LVM   ----#这里多出一块,说明保存成功</span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/centos-root: 24.1 GB, 24121442304 bytes, 47112192 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/mapper/centos-swap: 2147 MB, 2147483648 bytes, 4194304 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line"></span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><h3 id="使用-pvcreate-dev-sda4-创建物理卷"><a href="#使用-pvcreate-dev-sda4-创建物理卷" class="headerlink" title="使用 pvcreate /dev/sda4 创建物理卷"></a>使用 <code>pvcreate /dev/sda4</code> 创建物理卷</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##  /dev/sda4  这里的4是上面刚才新增的分区</span></span></span><br><span class="line">[root@localhost ~]# pvcreate /dev/sda4</span><br><span class="line">  Physical volume "/dev/sda4" successfully created</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><p><img src="/img/centos/lvm/pvcreate.png" alt="创建物理卷" title="创建物理卷"></p><h3 id="使用pvdisplay-查看新建的物理卷大小"><a href="#使用pvdisplay-查看新建的物理卷大小" class="headerlink" title="使用pvdisplay 查看新建的物理卷大小"></a>使用<code>pvdisplay</code> 查看新建的物理卷大小</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# pvdisplay</span><br><span class="line">  --- Physical volume ---</span><br><span class="line">  PV Name               /dev/sda2</span><br><span class="line">  VG Name               centos</span><br><span class="line">  PV Size               19.51 GiB / not usable 3.00 MiB</span><br><span class="line">  Allocatable           yes (but full)</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              4994</span><br><span class="line">  Free PE               0</span><br><span class="line">  Allocated PE          4994</span><br><span class="line">  PV UUID               7q1DBZ-n5ZX-1OPX-IN9w-SdAp-qekM-BfpVbc</span><br><span class="line">   </span><br><span class="line">  --- Physical volume ---</span><br><span class="line">  PV Name               /dev/sda3</span><br><span class="line">  VG Name               centos</span><br><span class="line">  PV Size               5.00 GiB / not usable 4.00 MiB</span><br><span class="line">  Allocatable           yes </span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              1279</span><br><span class="line">  Free PE               10</span><br><span class="line">  Allocated PE          1269</span><br><span class="line">  PV UUID               eOLd2K-aXSx-cA1M-hwJc-zqdq-7U4Y-ZE8d2R</span><br><span class="line">   </span><br><span class="line">  "/dev/sda4" is a new physical volume of "75.00 GiB"  ----------#可以看到新增的75G</span><br><span class="line">  --- NEW Physical volume ---</span><br><span class="line">  PV Name               /dev/sda4</span><br><span class="line">  VG Name               </span><br><span class="line">  PV Size               75.00 GiB</span><br><span class="line">  Allocatable           NO</span><br><span class="line">  PE Size               0   </span><br><span class="line">  Total PE              0</span><br><span class="line">  Free PE               0                    --------#现在这里看到的是0,在 lvextend 的时候还要重新查看</span><br><span class="line">  Allocated PE          0</span><br><span class="line">  PV UUID               wyG3ZO-e1a0-3OHW-6afy-u90w-7Lc8-ddMnJL</span><br><span class="line">   </span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><p><img src="/img/centos/lvm/pvdisplay.png" alt="查看物理卷" title="查看物理卷"></p><h3 id="使用-vgdisplay-查看-vg-状态"><a href="#使用-vgdisplay-查看-vg-状态" class="headerlink" title="使用 vgdisplay 查看 vg 状态"></a>使用 <code>vgdisplay</code> 查看 <code>vg</code> 状态</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vgdisplay </span><br><span class="line">  --- Volume group ---</span><br><span class="line">  VG Name               centos    --------------#这个名字在下面会用到</span><br><span class="line">  System ID             </span><br><span class="line">  Format                lvm2</span><br><span class="line">  Metadata Areas        2</span><br><span class="line">  Metadata Sequence No  5</span><br><span class="line">  VG Access             read/write</span><br><span class="line">  VG Status             resizable</span><br><span class="line">  MAX LV                0</span><br><span class="line">  Cur LV                2</span><br><span class="line">  Open LV               2</span><br><span class="line">  Max PV                0</span><br><span class="line">  Cur PV                2</span><br><span class="line">  Act PV                2</span><br><span class="line">  VG Size               24.50 GiB</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              6273</span><br><span class="line">  Alloc PE / Size       6263 / 24.46 GiB</span><br><span class="line">  Free  PE / Size       10 / 40.00 MiB</span><br><span class="line">  VG UUID               q6Omkk-sEkn-Ex9Y-gfSY-0URm-4z2E-0u9Euj</span><br><span class="line">   </span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><p><img src="/img/centos/lvm/vgdisplay.png" alt="查看vg状态" title="查看vg状态"></p><h3 id="使用-vgextend-centos-dev-sda4-将添加新的物理卷加载到-centos-卷组"><a href="#使用-vgextend-centos-dev-sda4-将添加新的物理卷加载到-centos-卷组" class="headerlink" title="使用 vgextend centos /dev/sda4 将添加新的物理卷加载到 centos 卷组"></a>使用 <code>vgextend centos /dev/sda4</code> 将添加新的物理卷加载到 <code>centos</code> 卷组</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## centos 是我的服务器vg名称,可以通过vgdisplay查看vg状态得到名称</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## /dev/sda4 是我刚刚新增的物理卷</span></span></span><br><span class="line">[root@localhost ~]# vgextend centos /dev/sda4</span><br><span class="line">  Volume group "centos" successfully extended</span><br><span class="line">[root@localhost ~]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##---------- 注意这里可以由于系统空间不足出现报错 ------------</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##---------- 手动去删除些没有用的文件 ------------</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 报错内容</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## [root@localhost ~]# vgextend centos /dev/sda4</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##  Couldn't create temporary archive name.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##  Volume group "centos" metadata archive failed.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##  Internal error: Attempt to unlock unlocked VG #orphans.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## [root@localhost ~]# </span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##</span></span></span><br><span class="line"></span><br><span class="line">[root@localhost ~]# vgextend centos /dev/sda4</span><br><span class="line">  Couldn't create temporary archive name.</span><br><span class="line">  Volume group "centos" metadata archive failed.</span><br><span class="line">  Internal error: Attempt to unlock unlocked VG #orphans.</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><p><img src="/img/centos/lvm/vgextend.png" alt="添加到卷组" title="添加到卷组"></p><h3 id="使用-lvdisplay-查看-lv-状态"><a href="#使用-lvdisplay-查看-lv-状态" class="headerlink" title="使用 lvdisplay 查看 lv 状态"></a>使用 <code>lvdisplay</code> 查看 <code>lv</code> 状态</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# lvdisplay</span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/centos/swap</span><br><span class="line">  LV Name                swap</span><br><span class="line">  VG Name                centos</span><br><span class="line">  LV UUID                d39rhF-bGNs-fWPE-ItwX-FNQe-QJ4h-taAm94</span><br><span class="line">  LV Write Access        read/write</span><br><span class="line">  LV Creation host, time localhost, 2019-05-09 03:42:09 -0400</span><br><span class="line">  LV Status              available</span><br><span class="line"><span class="meta">  #</span><span class="bash"> open                 2</span></span><br><span class="line">  LV Size                2.00 GiB</span><br><span class="line">  Current LE             512</span><br><span class="line">  Segments               1</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently set to     8192</span><br><span class="line">  Block device           253:1</span><br><span class="line">   </span><br><span class="line">  --- Logical volume ---</span><br><span class="line">  LV Path                /dev/centos/root</span><br><span class="line">  LV Name                root</span><br><span class="line">  VG Name                centos</span><br><span class="line">  LV UUID                rvepaR-xSYs-hPOy-vPWA-Oiuh-A0Je-j29Gk1</span><br><span class="line">  LV Write Access        read/write</span><br><span class="line">  LV Creation host, time localhost, 2019-05-09 03:42:10 -0400</span><br><span class="line">  LV Status              available</span><br><span class="line"><span class="meta">  #</span><span class="bash"> open                 1</span></span><br><span class="line">  LV Size                22.46 GiB</span><br><span class="line">  Current LE             5751</span><br><span class="line">  Segments               2</span><br><span class="line">  Allocation             inherit</span><br><span class="line">  Read ahead sectors     auto</span><br><span class="line">  - currently set to     8192</span><br><span class="line">  Block device           253:0</span><br><span class="line">   </span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><h3 id="使用-lvextend-增加容量"><a href="#使用-lvextend-增加容量" class="headerlink" title="使用 lvextend 增加容量"></a>使用 <code>lvextend</code> 增加容量</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"> #</span><span class="bash"><span class="comment"># 使用 df -h 可以看到 /dev/mapper/centos-root 的名字</span></span></span><br><span class="line"><span class="meta"> #</span><span class="bash"><span class="comment"># 使用 pvdisplay 再次查看 free 的PE数量</span></span></span><br><span class="line"> [root@localhost data]# df -h</span><br><span class="line">Filesystem               Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/centos-root   23G   23G   52K 100% /     -------# /dev/mapper/centos-root 这个名字要用</span><br><span class="line">devtmpfs                  20G     0   20G   0% /dev</span><br><span class="line">tmpfs                     20G  4.0K   20G   1% /dev/shm</span><br><span class="line">tmpfs                     20G  8.5M   20G   1% /run</span><br><span class="line">tmpfs                     20G     0   20G   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1                497M  120M  378M  25% /boot</span><br><span class="line">[root@localhost data]# </span><br><span class="line">[root@localhost data]# pvdisplay</span><br><span class="line">  --- Physical volume ---</span><br><span class="line">  PV Name               /dev/sda2</span><br><span class="line">  VG Name               centos</span><br><span class="line">  PV Size               19.51 GiB / not usable 3.00 MiB</span><br><span class="line">  Allocatable           yes (but full)</span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              4994</span><br><span class="line">  Free PE               0</span><br><span class="line">  Allocated PE          4994</span><br><span class="line">  PV UUID               7q1DBZ-n5ZX-1OPX-IN9w-SdAp-qekM-BfpVbc</span><br><span class="line">   </span><br><span class="line">  --- Physical volume ---</span><br><span class="line">  PV Name               /dev/sda3</span><br><span class="line">  VG Name               centos</span><br><span class="line">  PV Size               5.00 GiB / not usable 4.00 MiB</span><br><span class="line">  Allocatable           yes </span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              1279</span><br><span class="line">  Free PE               10</span><br><span class="line">  Allocated PE          1269</span><br><span class="line">  PV UUID               eOLd2K-aXSx-cA1M-hwJc-zqdq-7U4Y-ZE8d2R</span><br><span class="line">   </span><br><span class="line">  --- Physical volume ---</span><br><span class="line">  PV Name               /dev/sda4</span><br><span class="line">  VG Name               centos</span><br><span class="line">  PV Size               75.00 GiB / not usable 4.00 MiB</span><br><span class="line">  Allocatable           yes </span><br><span class="line">  PE Size               4.00 MiB</span><br><span class="line">  Total PE              19199</span><br><span class="line">  Free PE               19199         --------#这个大小要用</span><br><span class="line">  Allocated PE          0</span><br><span class="line">  PV UUID               wyG3ZO-e1a0-3OHW-6afy-u90w-7Lc8-ddMnJL</span><br><span class="line">   </span><br><span class="line">[root@localhost data]# </span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##---------- 注意这里可以由于系统空间不足出现报错 ------------</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##---------- 手动去删除些没有用的文件 ------------</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 报错内容</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## [root@localhost ~]# lvextend -l +19199 /dev/mapper/centos-root </span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##  Couldn't create temporary archive name.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##  Volume group "centos" metadata archive failed.</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## [root@localhost ~]# </span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##</span></span></span><br><span class="line">[root@localhost ~]# lvextend -l +19199 /dev/mapper/centos-root </span><br><span class="line">Size of logical volume centos/root changed from 22.46 GiB (5751 extents) to 97.46 GiB (24950 extents).</span><br><span class="line">  Logical volume root successfully resized</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><p><img src="/img/centos/lvm/lvextend_01.png" alt="增加容量" title="增加容量"></p><p><img src="/img/centos/lvm/lvextend_02.png" alt="增加容量" title="增加容量"></p><h3 id="查看当前分区类型-在下一步会用到"><a href="#查看当前分区类型-在下一步会用到" class="headerlink" title="查看当前分区类型(在下一步会用到)"></a>查看当前分区类型(在下一步会用到)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 我的是 xfs 类型(centos7系统)</span></span></span><br><span class="line">[root@localhost ~]# df -T /dev/sda1</span><br><span class="line">Filesystem     Type 1K-blocks   Used Available Use% Mounted on</span><br><span class="line">/dev/sda1      xfs     508588 122080    386508  25% /boot</span><br><span class="line">[root@localhost ~]#</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##-----------或者使用</span></span></span><br><span class="line">[root@localhost ~]# cat /etc/fstab | grep centos-root</span><br><span class="line">/dev/mapper/centos-root /                       xfs     defaults        0 0</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><h3 id="使用-xfs-growfs-centos7-重新调整文件系统大小-根据上一步类型使用不同命令"><a href="#使用-xfs-growfs-centos7-重新调整文件系统大小-根据上一步类型使用不同命令" class="headerlink" title="使用 xfs_growfs (centos7)重新调整文件系统大小(根据上一步类型使用不同命令)"></a>使用 <code>xfs_growfs</code> (centos7)重新调整文件系统大小(根据上一步类型使用不同命令)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## centos7中用 xfs_growfs</span></span></span><br><span class="line">[root@localhost ~]# xfs_growfs /dev/mapper/centos-root</span><br><span class="line">meta-data=/dev/mapper/centos-root isize=256    agcount=6, agsize=1144832 blks</span><br><span class="line">         =                       sectsz=512   attr=2, projid32bit=1</span><br><span class="line">         =                       crc=0        finobt=0</span><br><span class="line">data     =                       bsize=4096   blocks=5889024, imaxpct=25</span><br><span class="line">         =                       sunit=0      swidth=0 blks</span><br><span class="line">naming   =version 2              bsize=4096   ascii-ci=0 ftype=0</span><br><span class="line">log      =internal               bsize=4096   blocks=2560, version=2</span><br><span class="line">         =                       sectsz=512   sunit=0 blks, lazy-count=1</span><br><span class="line">realtime =none                   extsz=4096   blocks=0, rtextents=0</span><br><span class="line">data blocks changed from 5889024 to 25548800</span><br><span class="line">[root@localhost ~]# </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## centos6中用 resize2fs</span></span></span><br><span class="line">[root@localhost ~]# resize2fs /dev/mapper/centos-root</span><br></pre></td></tr></table></figure><p><img src="/img/centos/lvm/xfs_growfs.png" alt="重新调整文件系统大小" title="重新调整文件系统大小"></p><h3 id="查看磁盘空间"><a href="#查看磁盘空间" class="headerlink" title="查看磁盘空间"></a>查看磁盘空间</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# df -h</span><br><span class="line">Filesystem               Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/mapper/centos-root   98G   23G   75G  24% /               ----#新增成功</span><br><span class="line">devtmpfs                  20G     0   20G   0% /dev</span><br><span class="line">tmpfs                     20G  4.0K   20G   1% /dev/shm</span><br><span class="line">tmpfs                     20G  8.5M   20G   1% /run</span><br><span class="line">tmpfs                     20G     0   20G   0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1                497M  120M  378M  25% /boot</span><br><span class="line">[root@localhost ~]#</span><br></pre></td></tr></table></figure><p><img src="/img/centos/lvm/success.png" alt="成功" title="成功"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-算法02</title>
      <link href="/2019/07/15/%E9%9D%A2%E8%AF%95/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95_03/"/>
      <url>/2019/07/15/%E9%9D%A2%E8%AF%95/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95_03/</url>
      <content type="html"><![CDATA[<h3 id="01-输出-9-9-乘法口诀"><a href="#01-输出-9-9-乘法口诀" class="headerlink" title="01). 输出 9*9 乘法口诀"></a>01). 输出 <code>9*9</code> 乘法口诀</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ($x = <span class="number">1</span>; $x &lt; <span class="number">10</span>; $x++) &#123;</span><br><span class="line">    <span class="keyword">for</span> ($y = <span class="number">1</span>; $y &lt;= $x; $y++) &#123;</span><br><span class="line">        <span class="keyword">echo</span> $y . <span class="string">"*"</span> . $x . <span class="string">"="</span> . $y * $x;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"&amp;nbsp&amp;nbsp&amp;nbsp"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="02-猴子吃桃"><a href="#02-猴子吃桃" class="headerlink" title="02) 猴子吃桃"></a>02) 猴子吃桃</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//题目：猴子吃桃问题：猴子第一天摘下若干个桃子，当即吃了一半，还不瘾，又多吃了一个    </span></span><br><span class="line"><span class="comment">//第二天早上又将剩下的桃子吃掉一半，又多吃了一个。</span></span><br><span class="line"><span class="comment">//以后每天早上都吃了前一天剩下 的一半零一个。到第10天早上想再吃时，见只剩下一个桃子了。求第一天共摘了多少。 </span></span><br><span class="line"></span><br><span class="line">$x = <span class="number">1</span>; <span class="comment">//最后一天的桃子个数</span></span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">2</span>; $i &lt;= <span class="number">10</span>; $i++) &#123; <span class="comment">//天数循环</span></span><br><span class="line">    $x = ($x + <span class="number">1</span>) * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"猴子第1天条摘了"</span> . $x . <span class="string">"个桃子"</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>laravel 添加一个V1 接口模块 -api</title>
      <link href="/2019/07/14/laravel/%E6%B7%BB%E5%8A%A0%E6%8E%A5%E5%8F%A3%E6%A8%A1%E5%9D%97API/"/>
      <url>/2019/07/14/laravel/%E6%B7%BB%E5%8A%A0%E6%8E%A5%E5%8F%A3%E6%A8%A1%E5%9D%97API/</url>
      <content type="html"><![CDATA[<h3 id="app-Providers-RouteServiceProvider-php-中添加"><a href="#app-Providers-RouteServiceProvider-php-中添加" class="headerlink" title="app/Providers/RouteServiceProvider.php  中添加"></a>app/Providers/RouteServiceProvider.php  中添加</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">map</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">$this</span>-&gt;mapApiRoutes();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">$this</span>-&gt;mapWebRoutes();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">$this</span>-&gt;mapTestRoutes(); <span class="comment">//新增接口模块</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//--------------------------------------</span></span><br><span class="line"><span class="keyword">protected</span> <span class="function"><span class="keyword">function</span> <span class="title">mapApiRoutes</span><span class="params">()</span>   //<span class="title">API</span> 接口模块</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Route::prefix(<span class="string">'api'</span>)   <span class="comment">//访问地址前缀</span></span><br><span class="line">        -&gt;middleware(<span class="string">'api'</span>)   <span class="comment">//中间件</span></span><br><span class="line">        -&gt;namespace(<span class="keyword">$this</span>-&gt;namespace.<span class="string">'\\Api'</span>)  <span class="comment">//接口模块目录,命名空间</span></span><br><span class="line">        -&gt;group(base_path(<span class="string">'routes/api.php'</span>));  <span class="comment">//接口路由</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">mapTestRoutes</span><span class="params">()</span>  //<span class="title">V1</span>接口模块</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Route::prefix(<span class="string">'test'</span>)</span><br><span class="line">        <span class="comment">//-&gt;middleware('fei')  //自定义中间件</span></span><br><span class="line">        -&gt;namespace(<span class="keyword">$this</span>-&gt;namespace.<span class="string">'\\V1'</span>)</span><br><span class="line">        -&gt;group(base_path(<span class="string">'routes/test.php'</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="routes-test-php-路由"><a href="#routes-test-php-路由" class="headerlink" title="routes/test.php   路由"></a>routes/test.php   路由</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">'foo'</span>, <span class="string">'FooController@index'</span>);</span><br></pre></td></tr></table></figure><h3 id="app-Http-Controllers-V1-FooController-php-模块"><a href="#app-Http-Controllers-V1-FooController-php-模块" class="headerlink" title="app/Http/Controllers/V1/FooController.php  模块"></a>app/Http/Controllers/V1/FooController.php  模块</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Controllers</span>\<span class="title">V1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Controllers</span>\<span class="title">Controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FooController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// 访问地址 http://demo.laravel.com/test/foo</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">index</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"FooController  foo"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="app-Http-Middleware-fei-php-自定义中间件-app-Http-Kernel-php-加载中间件"><a href="#app-Http-Middleware-fei-php-自定义中间件-app-Http-Kernel-php-加载中间件" class="headerlink" title="app/Http/Middleware/fei.php 自定义中间件   app/Http/Kernel.php  加载中间件"></a>app/Http/Middleware/fei.php 自定义中间件   app/Http/Kernel.php  加载中间件</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//---------- app/Http/Middleware/fei.php  --------</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Http</span>\<span class="title">Middleware</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Closure</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">fei</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span><span class="params">($request, Closure $next)</span></span></span><br><span class="line"><span class="function">    </span>&#123;   <span class="keyword">exit</span>(<span class="string">'使用自定义文件中间件'</span>);</span><br><span class="line">        <span class="keyword">return</span> $next($request);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//----------------  app/Http/Kernel.php -----</span></span><br><span class="line"><span class="keyword">protected</span> $middlewareGroups = [</span><br><span class="line">    <span class="string">'web'</span> =&gt; [</span><br><span class="line">        \App\Http\Middleware\EncryptCookies::class,</span><br><span class="line">        \Illuminate\Cookie\Middleware\AddQueuedCookiesToResponse::class,</span><br><span class="line">        \Illuminate\Session\Middleware\StartSession::class,</span><br><span class="line">        <span class="comment">// \Illuminate\Session\Middleware\AuthenticateSession::class,</span></span><br><span class="line">        \Illuminate\View\Middleware\ShareErrorsFromSession::class,</span><br><span class="line">        \App\Http\Middleware\VerifyCsrfToken::class,</span><br><span class="line">        \Illuminate\Routing\Middleware\SubstituteBindings::class,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'api'</span> =&gt; [</span><br><span class="line">        <span class="string">'throttle:60,1'</span>,</span><br><span class="line">        <span class="string">'bindings'</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'fei'</span>=&gt;[</span><br><span class="line">        fei::class</span><br><span class="line">    ]</span><br><span class="line">];</span><br></pre></td></tr></table></figure><p><img src="/img/laravel/v1_api.png" alt="v1 api" title="v1 api"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>linux ubuntu 磁盘扩容</title>
      <link href="/2019/07/01/centos/ubuntu_%E8%99%9A%E6%8B%9F%E6%9C%BA_%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/"/>
      <url>/2019/07/01/centos/ubuntu_%E8%99%9A%E6%8B%9F%E6%9C%BA_%E7%A3%81%E7%9B%98%E6%89%A9%E5%AE%B9/</url>
      <content type="html"><![CDATA[<h3 id="在虚拟机VMware上增加磁盘空间"><a href="#在虚拟机VMware上增加磁盘空间" class="headerlink" title="在虚拟机VMware上增加磁盘空间"></a>在虚拟机<code>VMware</code>上增加磁盘空间</h3><p>使用了一段时间虚拟机后发现磁盘不够用了,需要扩容。在客户端操作扩容出现<code>磁盘已成功扩展。您必须从客户机操作系统内部对磁盘重新进行分区和扩展文件系统。</code>  然后进ubuntu系统进行操作</p><p><img src="/img/centos/lvm_01.png" alt="扩容" title="扩容"></p><h3 id="查看现有的磁盘空间"><a href="#查看现有的磁盘空间" class="headerlink" title="查看现有的磁盘空间"></a>查看现有的磁盘空间</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">df</span> -h   <span class="comment">#查看当前磁盘空间,没有看到变化</span></span><br><span class="line">fdisk -l  <span class="comment">#查看硬盘信息</span></span><br></pre></td></tr></table></figure><h4 id="创建新分区"><a href="#创建新分区" class="headerlink" title="创建新分区"></a>创建新分区</h4><p>不同操作系统命名方式不一样, 我的是 /dev/sda  , 有的可能是  /dev/vda,具体使用看 df -h 出来的信息</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">root@ubuntu:/# fdisk /dev/sda</span><br><span class="line"></span><br><span class="line">Welcome <span class="keyword">to</span> fdisk (util-linux <span class="number">2.31</span>.<span class="number">1</span>).</span><br><span class="line">Changes will remain in memory <span class="keyword">only</span>, until you decide <span class="keyword">to</span> <span class="keyword">write</span> them.</span><br><span class="line">Be careful before using the <span class="keyword">write</span> <span class="keyword">command</span>.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Command (<span class="keyword">m</span> <span class="keyword">for</span> <span class="keyword">help</span>): <span class="keyword">m</span>      ------------------获取帮助</span><br><span class="line">Help:</span><br><span class="line"></span><br><span class="line">  DOS (MBR)</span><br><span class="line">   <span class="keyword">a</span>   toggle <span class="keyword">a</span> bootable flag</span><br><span class="line">   <span class="keyword">b</span>   <span class="keyword">edit</span> nested BSD disklabel</span><br><span class="line">   <span class="keyword">c</span>   toggle the dos compatibility flag</span><br><span class="line"></span><br><span class="line">  Generic</span><br><span class="line">   d   <span class="keyword">delete</span> <span class="keyword">a</span> partition</span><br><span class="line">   F   <span class="keyword">list</span> free unpartitioned space</span><br><span class="line">   <span class="keyword">l</span>   <span class="keyword">list</span> known partition types</span><br><span class="line">   n   <span class="built_in">add</span> <span class="keyword">a</span> <span class="keyword">new</span> partition</span><br><span class="line">   <span class="keyword">p</span>   <span class="keyword">print</span> the partition table</span><br><span class="line">   t   <span class="keyword">change</span> <span class="keyword">a</span> partition <span class="built_in">type</span></span><br><span class="line">   v   verify the partition table</span><br><span class="line">   i   <span class="keyword">print</span> information about <span class="keyword">a</span> partition</span><br><span class="line"></span><br><span class="line">  Misc</span><br><span class="line">   <span class="keyword">m</span>   <span class="keyword">print</span> this <span class="keyword">menu</span></span><br><span class="line">   <span class="keyword">u</span>   <span class="keyword">change</span> <span class="keyword">display</span>/entry units</span><br><span class="line">   <span class="keyword">x</span>   extra functionality (experts <span class="keyword">only</span>)</span><br><span class="line"></span><br><span class="line">  Script</span><br><span class="line">   I   load disk layout from sfdisk script <span class="keyword">file</span></span><br><span class="line">   O   dump disk layout <span class="keyword">to</span> sfdisk script <span class="keyword">file</span></span><br><span class="line"></span><br><span class="line">  Save &amp; Exit</span><br><span class="line">   <span class="keyword">w</span>   <span class="keyword">write</span> table <span class="keyword">to</span> disk <span class="built_in">and</span> <span class="keyword">exit</span></span><br><span class="line">   q   <span class="keyword">quit</span> without saving <span class="keyword">changes</span></span><br><span class="line"></span><br><span class="line">  Create <span class="keyword">a</span> <span class="keyword">new</span> label</span><br><span class="line">   g   create <span class="keyword">a</span> <span class="keyword">new</span> <span class="built_in">empty</span> GPT partition table</span><br><span class="line">   G   create <span class="keyword">a</span> <span class="keyword">new</span> <span class="built_in">empty</span> SGI (IRIX) partition table</span><br><span class="line">   <span class="keyword">o</span>   create <span class="keyword">a</span> <span class="keyword">new</span> <span class="built_in">empty</span> DOS partition table</span><br><span class="line">   s   create <span class="keyword">a</span> <span class="keyword">new</span> <span class="built_in">empty</span> Sun partition table</span><br><span class="line">Command (<span class="keyword">m</span> <span class="keyword">for</span> <span class="keyword">help</span>): n                  ----------创建新分区</span><br><span class="line">   Partition <span class="built_in">type</span></span><br><span class="line">   <span class="keyword">p</span>   primary (<span class="number">1</span> primary, <span class="number">0</span> extended, <span class="number">3</span> free)</span><br><span class="line">   <span class="keyword">e</span>   extended (container <span class="keyword">for</span> logical partitions)</span><br><span class="line">Select (default <span class="keyword">p</span>):  <span class="keyword">p</span>    --------------选择主分区</span><br><span class="line">Partition <span class="keyword">number</span> (<span class="number">2</span>-<span class="number">4</span>, default <span class="number">2</span>): <span class="number">2</span>     -------------分区号,默认是<span class="number">2</span>(系统不一样,默认值不一样)</span><br><span class="line">First sector (<span class="number">41940992</span>-<span class="number">52428799</span>, default <span class="number">41940992</span>):       --------直接回城选择默认</span><br><span class="line">Last sector, +sectors <span class="built_in">or</span> +size&#123;K,M,G,T,<span class="keyword">P</span>&#125; (<span class="number">41940992</span>-<span class="number">52428799</span>, default <span class="number">52428799</span>):  ----直接回城选择默认</span><br><span class="line"></span><br><span class="line">Created <span class="keyword">a</span> <span class="keyword">new</span> partition <span class="number">2</span> of <span class="built_in">type</span> <span class="string">'Linux'</span> <span class="built_in">and</span> of size <span class="number">5</span> GiB.</span><br><span class="line"></span><br><span class="line">Command (<span class="keyword">m</span> <span class="keyword">for</span> <span class="keyword">help</span>): t   -----------修改分区格式</span><br><span class="line">Partition <span class="keyword">number</span> (<span class="number">1</span>,<span class="number">2</span>, default <span class="number">2</span>): <span class="number">2</span>   ----------刚才选择的分区号(对应上面的<span class="number">2</span>)</span><br><span class="line">Hex code (<span class="built_in">type</span> L <span class="keyword">to</span> <span class="keyword">list</span> <span class="keyword">all</span> codes): <span class="number">8</span><span class="keyword">e</span>  --------<span class="number">8</span><span class="keyword">e</span>是lvm磁盘类型</span><br><span class="line"></span><br><span class="line">Changed <span class="built_in">type</span> of partition <span class="string">'Linux'</span> <span class="keyword">to</span> <span class="string">'Linux LVM'</span>.</span><br><span class="line"></span><br><span class="line">Command (<span class="keyword">m</span> <span class="keyword">for</span> <span class="keyword">help</span>): <span class="keyword">p</span>     ------打印分享信息(可以看到刚才选择的<span class="number">2</span>,多出/dev/sda2,也就是要增加的<span class="number">5</span>G空间)</span><br><span class="line">Disk /dev/sd<span class="variable">a:</span> <span class="number">25</span> GiB, <span class="number">26843545600</span> bytes, <span class="number">52428800</span> sectors</span><br><span class="line">Unit<span class="variable">s:</span> sectors of <span class="number">1</span> * <span class="number">512</span> = <span class="number">512</span> bytes</span><br><span class="line">Sector size (logical/physical): <span class="number">512</span> bytes / <span class="number">512</span> bytes</span><br><span class="line">I/O size (minimum/optimal): <span class="number">512</span> bytes / <span class="number">512</span> bytes</span><br><span class="line">Disklabel <span class="built_in">type</span>: dos</span><br><span class="line">Disk identifier: <span class="number">0</span>x4a53929f</span><br><span class="line"></span><br><span class="line">Device     Boot    Start      End  Sectors Size Id Type</span><br><span class="line">/dev/sda1  *        <span class="number">2048</span> <span class="number">41940991</span> <span class="number">41938944</span>  <span class="number">20</span>G <span class="number">83</span> Linux</span><br><span class="line">/dev/sda2       <span class="number">41940992</span> <span class="number">52428799</span> <span class="number">10487808</span>   <span class="number">5</span>G <span class="number">8</span><span class="keyword">e</span> Linux LVM</span><br><span class="line"></span><br><span class="line">Command (<span class="keyword">m</span> <span class="keyword">for</span> <span class="keyword">help</span>): <span class="keyword">w</span>        -----------------保存</span><br><span class="line">The partition table <span class="built_in">has</span> been altered.</span><br><span class="line">Syncing disks.</span><br><span class="line"></span><br><span class="line">root@ubuntu:/# reboot  -----------重启系统</span><br></pre></td></tr></table></figure><h4 id="创建物理卷"><a href="#创建物理卷" class="headerlink" title="创建物理卷"></a>创建物理卷</h4><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">df</span> -h   <span class="comment">#查看当前磁盘空间,没有看到变化</span></span><br><span class="line">fdisk -l  <span class="comment">#查看硬盘信息,-------------------这时候这里会多出一个 /dev/sda2,说明上面的操作成功</span></span><br></pre></td></tr></table></figure><p><img src="/img/centos/lvm_02.png" alt="扩容" title="扩容"></p><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">------------------这里出现问题?????????????------------</span><br><span class="line"></span><br><span class="line">root@ubuntu:/<span class="comment"># pvcreate /dev/sda2      --------------创建物理卷(pv组成vg，vg组成lv)</span></span><br><span class="line">  Physical <span class="keyword">volume</span><span class="bash"> <span class="string">"/dev/sda2"</span> successfully created.</span></span><br><span class="line"><span class="bash">root@ubuntu:/<span class="comment"># pvdisplay              --------查看物理卷和大小</span></span></span><br><span class="line"><span class="bash">  <span class="string">"/dev/sda2"</span> is a new physical volume of <span class="string">"5.00 GiB"</span></span></span><br><span class="line"><span class="bash">  --- NEW Physical volume ---</span></span><br><span class="line"><span class="bash">  PV Name               /dev/sda2</span></span><br><span class="line"><span class="bash">  VG Name                              -----------这里没有VG name(如果这里有值怎下面不需要穿件)</span></span><br><span class="line"><span class="bash">  PV Size               5.00 GiB</span></span><br><span class="line"><span class="bash">  Allocatable           NO</span></span><br><span class="line"><span class="bash">  PE Size               0   </span></span><br><span class="line"><span class="bash">  Total PE              0</span></span><br><span class="line"><span class="bash">  Free PE               0</span></span><br><span class="line"><span class="bash">  Allocated PE          0</span></span><br><span class="line"><span class="bash">  PV UUID               xVmELU-F8si-LN9g-t4Ur-TWvR-u2Hp-nemrbb</span></span><br><span class="line"><span class="bash">   </span></span><br><span class="line"><span class="bash">-------- 由于我上面VG name 为空,所以创建------   </span></span><br><span class="line"><span class="bash">root@ubuntu:/<span class="comment"># vgcreate data_fei /dev/sda2    -----------创建vg</span></span></span><br><span class="line"><span class="bash">root@ubuntu:/<span class="comment"># vgdisplay   ----------------查看vg状态,查看卷组信息</span></span></span><br><span class="line"><span class="bash">root@ubuntu:/<span class="comment"># pvdisplay    ------------(再次查看)查看物理卷和大小</span></span></span><br><span class="line"><span class="bash">  --- Physical volume ---</span></span><br><span class="line"><span class="bash">  PV Name               /dev/sda2</span></span><br><span class="line"><span class="bash">  VG Name               data_fei        ------------现在这里有VG name 的值</span></span><br><span class="line"><span class="bash">  PV Size               5.00 GiB / not usable 0   </span></span><br><span class="line"><span class="bash">  Allocatable           yes </span></span><br><span class="line"><span class="bash">  PE Size               4.00 MiB</span></span><br><span class="line"><span class="bash">  Total PE              1280            ----------这个值在下面 lvextend 会用到 ↓↓↓</span></span><br><span class="line"><span class="bash">  Free PE               1280</span></span><br><span class="line"><span class="bash">  Allocated PE          0</span></span><br><span class="line"><span class="bash">  PV UUID               xVmELU-F8si-LN9g-t4Ur-TWvR-u2Hp-nemrbb</span></span><br><span class="line"><span class="bash">   </span></span><br><span class="line"><span class="bash">root@ubuntu:/<span class="comment">#</span></span></span><br><span class="line"><span class="bash">-------------------------------------------------</span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash">root@ubuntu:/<span class="comment"># vgextend data_fei  /dev/sda2  --------把创建的PV加入到相应的CG</span></span></span><br><span class="line"><span class="bash">  Physical volume <span class="string">'/dev/sda2'</span> is already <span class="keyword">in</span> volume group <span class="string">'data_fei'</span></span></span><br><span class="line"><span class="bash">  Unable to add physical volume <span class="string">'/dev/sda2'</span> to volume group <span class="string">'data_fei'</span></span></span><br><span class="line"><span class="bash">  /dev/sda2: physical volume not initialized.</span></span><br><span class="line"><span class="bash">  </span></span><br><span class="line"><span class="bash">-------------------------------  </span></span><br><span class="line"><span class="bash">root@ubuntu:/<span class="comment"># lvcreate -L100 -n data_001 data_fei    -----我这里lvdisplay没有,所以创建一个</span></span></span><br><span class="line"><span class="bash">  Logical volume <span class="string">"data_001"</span> created.</span></span><br><span class="line"><span class="bash">root@ubuntu:/<span class="comment"># lvdisplay </span></span></span><br><span class="line"><span class="bash">  --- Logical volume ---</span></span><br><span class="line"><span class="bash">  LV Path                /dev/data_fei/data_001</span></span><br><span class="line"><span class="bash">  LV Name                data_001</span></span><br><span class="line"><span class="bash">  VG Name                data_fei</span></span><br><span class="line"><span class="bash">  LV UUID                dpmINm-4qE4-TX8G-wC72-Z4kO-XsVP-zhdKZs</span></span><br><span class="line"><span class="bash">  LV Write Access        <span class="built_in">read</span>/write</span></span><br><span class="line"><span class="bash">  LV Creation host, time ubuntu, 2019-07-01 06:29:51 -0700</span></span><br><span class="line"><span class="bash">  LV Status              available</span></span><br><span class="line"><span class="bash">  <span class="comment"># open                 0</span></span></span><br><span class="line"><span class="bash">  LV Size                100.00 MiB</span></span><br><span class="line"><span class="bash">  Current LE             25</span></span><br><span class="line"><span class="bash">  Segments               1</span></span><br><span class="line"><span class="bash">  Allocation             inherit</span></span><br><span class="line"><span class="bash">  Read ahead sectors     auto</span></span><br><span class="line"><span class="bash">  - currently <span class="built_in">set</span> to     256</span></span><br><span class="line"><span class="bash">  Block device</span></span><br><span class="line"><span class="bash">-------------------------</span></span><br><span class="line"><span class="bash">  </span></span><br><span class="line"><span class="bash">root@ubuntu:/<span class="comment"># lvresize  -l +1280 /dev/mapper/data_fei-data_001  ---1280为上面pvdisplay中的free PE数量↑↑↑</span></span></span><br><span class="line"><span class="bash">root@ubuntu:/<span class="comment"># lvdisplay resize2fs /dev/mapper/data_fei-data_001</span></span></span><br></pre></td></tr></table></figure><p> <a href="http://example.com/" title="这里是title" target="_blank" rel="noopener">我是a里面的内容</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-vnc server</title>
      <link href="/2019/06/28/other/vnc/"/>
      <url>/2019/06/28/other/vnc/</url>
      <content type="html"><![CDATA[<h3 id="centos7-gnome桌面-安装vnc"><a href="#centos7-gnome桌面-安装vnc" class="headerlink" title="centos7  gnome桌面,安装vnc"></a><code>centos7</code>  <code>gnome</code>桌面,安装vnc</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">###centos7 安装完没有修改配置文件</span></span></span><br><span class="line">01) 首先检查当前系统是桌面用的KED还是gnome或者其他</span><br><span class="line">ll /usr/bin/*session*</span><br><span class="line">ps -A | grep KED</span><br><span class="line">ps -A | grep gnome</span><br><span class="line">ps -A | egrep -i "gnome|kde|mate|cinnamon|lx|xfce|jwm"</span><br><span class="line"></span><br><span class="line">02)安装桌面(上面如果有桌面则这里不需要安装)</span><br><span class="line">yum grouplist  #查看系统中以组安装的包</span><br><span class="line">yum groupinstall -y "GNOME Desktop"</span><br><span class="line"></span><br><span class="line">03 安装vncserrver</span><br><span class="line">yum install tigervnc-server -y  #安装vncserver 服务端</span><br><span class="line">vncserver   #启动服务,接下来输入密码即可</span><br></pre></td></tr></table></figure><p><img src="/img/other/centos7.png" alt="vnc centos7" title="vnc centos7"></p><h4 id="centos7的vcn中xstartup-配置文件-原来的配置-不需要修改"><a href="#centos7的vcn中xstartup-配置文件-原来的配置-不需要修改" class="headerlink" title="centos7的vcn中xstartup`配置文件(原来的配置,不需要修改)"></a>centos7<code>的</code>vcn<code>中</code>xstartup`配置文件(原来的配置,不需要修改)</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line">unset SESSION_MANAGER</span><br><span class="line">unset DBUS_SESSION_BUS_ADDRESS</span><br><span class="line">/etc/X11/xinit/xinitrc</span><br><span class="line">vncserver -kill $DISPLAY</span><br></pre></td></tr></table></figure><p><img src="/img/other/centos7_xstartup.png" alt="vnc xstartup" title="vnc xstartup"></p><h3 id="ubuntu16-gnome安装-vnc-server"><a href="#ubuntu16-gnome安装-vnc-server" class="headerlink" title="ubuntu16 gnome安装 vnc server"></a><code>ubuntu16</code> <code>gnome</code>安装 vnc server</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">### 安装完成后需要修改配置文件,否则出现灰屏和一个大大的x号</span></span></span><br><span class="line">01) 首先检查当前系统是桌面用的KED还是gnome或者其他,我的是gnome,所以这里不在安装桌面(需要的自行安装)</span><br><span class="line">ll /usr/bin/*session*</span><br><span class="line">ps -A | grep KED</span><br><span class="line">ps -A | grep gnome</span><br><span class="line">ps -A | egrep -i "gnome|kde|mate|cinnamon|lx|xfce|jwm"</span><br><span class="line"><span class="meta">#</span><span class="bash">---------------安装----------------------</span></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install tightvncserver  #如果需要桌面自己安装合适的桌面</span><br><span class="line">vncserver</span><br><span class="line"><span class="meta">#</span><span class="bash">-----------------启动-------------------</span></span><br><span class="line">01) 如果你想启动root桌面,就用sudo vncserver,访问当前普通用户就用vncserver</span><br><span class="line">sudo vncserver    #root用户 设置密码,我这里用123456 测试</span><br><span class="line">vncserver        #当前普通用户</span><br><span class="line">vncpasswd        #修改密码</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">---------------------------------------------</span></span><br><span class="line">启动后会在 /root 目录下增加一个 .vnc 的目录</span><br><span class="line">访问前准备:修改 xstartup 文件</span><br><span class="line">02) 在 xstartup 中修改</span><br><span class="line"><span class="meta">#</span><span class="bash">/etc/X11/Xsession      ---------注释这一行,添加下面内容</span></span><br><span class="line">unset DBUS_SESSION_BUS_ADDRESS</span><br><span class="line">gnome-panel &amp;</span><br><span class="line">gnome-settings-daemon &amp;</span><br><span class="line">metacity &amp;</span><br><span class="line">nautilus &amp;</span><br><span class="line">gnome-terminal &amp;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">---------xstartup 文件中的所有内容如下---------</span></span><br><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line">xrdb $HOME/.Xresources</span><br><span class="line">xsetroot -solid grey</span><br><span class="line"><span class="meta">#</span><span class="bash">x-terminal-emulator -geometry 80x24+10+10 -ls -title <span class="string">"<span class="variable">$VNCDESKTOP</span> Desktop"</span> &amp;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">x-window-manager &amp;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Fix to make GNOME work</span></span><br><span class="line">export XKL_XMODMAP_DISABLE=1</span><br><span class="line"><span class="meta">#</span><span class="bash">/etc/X11/Xsession</span></span><br><span class="line">unset DBUS_SESSION_BUS_ADDRESS</span><br><span class="line">gnome-panel &amp;</span><br><span class="line">gnome-settings-daemon &amp;</span><br><span class="line">metacity &amp;</span><br><span class="line">nautilus &amp;</span><br><span class="line">gnome-terminal &amp;</span><br><span class="line"><span class="meta">#</span><span class="bash">---------------------------------------------</span></span><br><span class="line">vncserver :1   #启动1桌面,重启vncserver </span><br><span class="line"><span class="meta">#</span><span class="bash">---------------------------------------------</span></span><br><span class="line">访问端口:</span><br><span class="line">vnc 默认端口是5900;  启动的时候注意有个空格[ vncserver :1  ]</span><br><span class="line">如果你启动的是 vncserver :1 那么访问就是 http://127.0.0.1:5901</span><br><span class="line">如果你启动的是 vncserver :2 那么访问就是 http://127.0.0.1:5902</span><br><span class="line"></span><br><span class="line">ps -aux | grep vnc  可以看到里面有端口的说明 -rfbauth /root/.vnc/passwd -rfbport 5901</span><br></pre></td></tr></table></figure><p><img src="/img/other/ubuntu16.png" alt="vnc ubuntu16" title="vnc ubuntu16"></p><h4 id="ubuntu16-中-vnc的xstartup配置-修改后的"><a href="#ubuntu16-中-vnc的xstartup配置-修改后的" class="headerlink" title="ubuntu16 中 vnc的xstartup配置(修改后的)"></a><code>ubuntu16</code> 中 <code>vnc</code>的<code>xstartup</code>配置(修改后的)</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/sh</span></span><br><span class="line"></span><br><span class="line">xrdb $HOME/.Xresources</span><br><span class="line">xsetroot -solid grey</span><br><span class="line"><span class="meta">#</span><span class="bash">x-terminal-emulator -geometry 80x24+10+10 -ls -title <span class="string">"<span class="variable">$VNCDESKTOP</span> Desktop"</span> &amp;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">x-window-manager &amp;</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Fix to make GNOME work</span></span><br><span class="line">export XKL_XMODMAP_DISABLE=1</span><br><span class="line"><span class="meta">#</span><span class="bash">/etc/X11/Xsession</span></span><br><span class="line">unset DBUS_SESSION_BUS_ADDRESS</span><br><span class="line">gnome-panel &amp;</span><br><span class="line">gnome-settings-daemon &amp;</span><br><span class="line">metacity &amp;</span><br><span class="line">nautilus &amp;</span><br><span class="line">gnome-terminal &amp;</span><br></pre></td></tr></table></figure><p><img src="/img/other/ubuntu16_xstartup.png" alt="vnc xstartup" title="vnc xstartup"></p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vncserver :1   #启动1桌面</span><br><span class="line">vncserver :2   #启动2桌面</span><br><span class="line">vncserver -kill :1  #停止1桌面</span><br><span class="line">vncserver -kill :2  #停止2桌面</span><br></pre></td></tr></table></figure><p>下载视图工具:  <a href="https://www.realvnc.com/en/connect/download/viewer/" title="realvnc download" target="_blank" rel="noopener">realvnc download</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-apache 三种工作模式</title>
      <link href="/2019/06/27/apache/apache%E4%B8%89%E7%A7%8D%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F/"/>
      <url>/2019/06/27/apache/apache%E4%B8%89%E7%A7%8D%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<p>Apache2.0 支持插入式并行处理模块,成为多路处理模块( MPM)</p><p>下面以我使用的 <code>Apache/2.4.33</code> 为例子:  </p><h3 id="查看-apache-安装的那种模式"><a href="#查看-apache-安装的那种模式" class="headerlink" title="查看 apache 安装的那种模式"></a>查看 <code>apache</code> 安装的那种模式</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">./bin/apache -V </span><br><span class="line">./bin/httpd  -V</span><br><span class="line">./bin/apache -l</span><br><span class="line">./bin/httpd -l</span><br><span class="line"></span><br><span class="line">[root@localhost apache24]# ./bin/apachectl -V</span><br><span class="line">Server version: Apache/2.4.33 (Unix)</span><br><span class="line">Server built:   May  9 2019 09:09:30</span><br><span class="line">Server's Module Magic Number: 20120211:76</span><br><span class="line">Server loaded:  APR 1.6.3, APR-UTIL 1.6.1</span><br><span class="line">Compiled using: APR 1.6.3, APR-UTIL 1.6.1</span><br><span class="line">Architecture:   64-bit</span><br><span class="line">Server MPM:     event</span><br><span class="line"></span><br><span class="line">[root@localhost apache24]# ./bin/httpd -l</span><br><span class="line">Compiled in modules:</span><br><span class="line">  core.c</span><br><span class="line">  mod_so.c</span><br><span class="line">  http_core.c</span><br><span class="line">  event.c</span><br><span class="line">  </span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">##   如果看到event.c 就是 mpm event 模式; 如果是 perfork.c 就是 perfork mp模式</span></span></span><br></pre></td></tr></table></figure><h3 id="mpm-prefork"><a href="#mpm-prefork" class="headerlink" title="mpm_prefork"></a>mpm_prefork</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;IfModule mpm_prefork_module&gt;</span><br><span class="line">    StartServers             5</span><br><span class="line">    MinSpareServers          5</span><br><span class="line">    MaxSpareServers         10</span><br><span class="line">    MaxRequestWorkers      250</span><br><span class="line">    MaxConnectionsPerChild   0</span><br><span class="line">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure><h3 id="mpm-worker"><a href="#mpm-worker" class="headerlink" title="mpm_worker"></a>mpm_worker</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;IfModule mpm_worker_module&gt;</span><br><span class="line">    StartServers             3</span><br><span class="line">    MinSpareThreads         75</span><br><span class="line">    MaxSpareThreads        250</span><br><span class="line">    ThreadsPerChild         25</span><br><span class="line">    MaxRequestWorkers      400</span><br><span class="line">    MaxConnectionsPerChild   0</span><br><span class="line">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure><h3 id="mpm-event"><a href="#mpm-event" class="headerlink" title="mpm_event"></a>mpm_event</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;IfModule mpm_event_module&gt;</span><br><span class="line">    StartServers             3</span><br><span class="line">    MinSpareThreads         75</span><br><span class="line">    MaxSpareThreads        250</span><br><span class="line">    ThreadsPerChild         25</span><br><span class="line">    MaxRequestWorkers      400</span><br><span class="line">    MaxConnectionsPerChild   0</span><br><span class="line">&lt;/IfModule&gt;</span><br></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">修改里面的参数,需要在 <span class="keyword">conf</span>/httpd.<span class="keyword">conf</span> 中去掉 <span class="keyword">Include</span> <span class="keyword">conf</span>/extra/httpd-mpm.<span class="keyword">conf</span>  前面注释</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Apache </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Apache </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-ESX 基本使用</title>
      <link href="/2019/06/25/ESX/esxi/"/>
      <url>/2019/06/25/ESX/esxi/</url>
      <content type="html"><![CDATA[<p>简单说明:</p><p><code>esxi</code> 中安装了多个<code>vm</code>,其中的某一台死机并且<code>esxi</code>控制台开始不能使用,这个时候就可以使用<code>esxi</code>的命令操作,重启其中某一台死机的机器,不影响其他机器。利用<code>ssh</code>登录<code>esxi</code></p><h3 id="使用-esxcli命令操作"><a href="#使用-esxcli命令操作" class="headerlink" title="使用 esxcli命令操作"></a>使用 <code>esxcli</code>命令操作</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">esxcli vm process list   #获取`正在`运行vm的信息</span><br><span class="line">esxcli vm process kill <span class="attribute">--type</span>=hard <span class="attribute">--world-id</span>=1190332   ##关闭指定world-id虚拟机</span><br><span class="line">Data_fei_200</span><br><span class="line">   World ID: 1190332</span><br><span class="line">   Process ID: 0</span><br><span class="line">   VMX Cartel ID: 35124</span><br><span class="line">   UUID: 56 4d 0b 4f d5 61 33 03-5e 41 43 d8 43 78 fb d8</span><br><span class="line">   Display Name: Data_fei_200</span><br><span class="line">  <span class="built_in"> Config </span>File: /vmfs/volumes/57518d68-cbf78024-3a0a-14187743ea91/Data_fei_200/Data_fei_200.vmx</span><br></pre></td></tr></table></figure><h3 id="使用vim-cmd-操作"><a href="#使用vim-cmd-操作" class="headerlink" title="使用vim-cmd 操作"></a>使用<code>vim-cmd</code> 操作</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim-<span class="keyword">cmd</span><span class="bash"> vmsvc/getallvms         <span class="comment">#获取`所有`vm的信息,格式如下图</span></span></span><br><span class="line"><span class="bash">vim-cmd vmsvc/power.on 2        <span class="comment">#打开虚拟机 (这里的2是下面的 Vimd)</span></span></span><br><span class="line"><span class="bash">vim-cmd vmsvc/power.off 2       <span class="comment">#关闭虚拟机 (这里的2是下面的 Vimd)</span></span></span><br><span class="line"><span class="bash">vim-cmd vmsvc/power.reset 2     <span class="comment">#重启虚拟机 (这里的2是下面的 Vimd)</span></span></span><br><span class="line"><span class="bash">vim-cmd vmsvc/power.getstate 2  <span class="comment">#查看虚拟机状态</span></span></span><br></pre></td></tr></table></figure><table><thead><tr><th>Vimd</th><th>Name</th><th>File</th><th>Guest OS</th><th>Version</th></tr></thead><tbody><tr><td>1</td><td>Data_fei_200</td><td>Data_fei_200/Data_fei_200.vmx</td><td>centos64Guest</td><td>vmx-08</td></tr><tr><td>2</td><td>Data_fei_220</td><td>Data_fei_200/Data_fei_220.vmx</td><td>rhel7_64Guest</td><td>vmx-10</td></tr></tbody></table><h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">esxcli vm process list   <span class="comment">#获取正在运行vm的信息</span></span><br><span class="line">esxcli vm process kill --type=hard --world-id=你的world-id</span><br><span class="line"></span><br><span class="line"> vim-<span class="keyword">cmd</span><span class="bash"> vmsvc/getallvms         <span class="comment">#获取`所有`vm的信息,格式如下图</span></span></span><br><span class="line"><span class="bash"> vim-cmd vmsvc/power.on 2        <span class="comment">#打开虚拟机 (这里的2是下面的 Vimd)</span></span></span><br><span class="line"><span class="bash"> vim-cmd vmsvc/power.off 2       <span class="comment">#关闭虚拟机 (这里的2是下面的 Vimd)</span></span></span><br><span class="line"><span class="bash"> vim-cmd vmsvc/power.reset 2     <span class="comment">#重启虚拟机 (这里的2是下面的 Vimd)</span></span></span><br><span class="line"><span class="bash"> vim-cmd vmsvc/power.getstate 2  <span class="comment">#查看虚拟机状态</span></span></span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>linux-DDU  将进程挂起  -nohup</title>
      <link href="/2019/06/18/ubuntu/linux_DDU_nohup/"/>
      <url>/2019/06/18/ubuntu/linux_DDU_nohup/</url>
      <content type="html"><![CDATA[<p><code>nohup</code> 命令可以将程序以忽略挂起信号的方式运行起来，被运行的程序的输出信息将不会显示到终端</p><p>经常和 &amp; 连用, 通俗理解:  后台运行,关闭当前窗口后命令也可以继续运行</p><h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">nohup</span> <span class="string">command&gt;/dev/null</span> <span class="number">2</span><span class="string">&gt;&amp;1</span> <span class="string">&amp;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># nohup 忽略挂起信号</span></span><br><span class="line"><span class="comment"># &amp;  后台运行</span></span><br><span class="line"><span class="comment"># command&gt;/dev/null  这条命令输出重定向到空设备</span></span><br><span class="line"><span class="comment"># 2&gt;&amp;1  把标准输出错误重定向到标准输出, &amp;1对标准输出的引用</span></span><br><span class="line"><span class="comment"># /dev/null 表示空设备文件</span></span><br><span class="line"><span class="comment"># 0 表示stdin标准输入</span></span><br><span class="line"><span class="comment"># 1 表示stdout标准输出</span></span><br><span class="line"><span class="comment"># 2 表示stderr标准错误</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span><span class="meta">---</span> <span class="string">demo</span> <span class="meta">---</span></span><br><span class="line"><span class="string">nohup</span> <span class="string">php</span> <span class="string">fei.php</span> <span class="string">&gt; fei.log 2&gt;&amp;1 &amp;</span></span><br><span class="line"><span class="string">##关闭当前窗口改命令也可以继续在后台运行</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">nohup php fei.php &gt;&gt; fei.log 2&gt;&amp;1 &amp;  </span></span><br><span class="line"><span class="string">### 把日志追加到 fei.log 文件中</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_nohup/nohup.png" alt="nohup 2&gt;&amp;1 &amp;" title="nohup 2&gt;&amp;1 &amp;"></p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">使用nohup命令提交作业，如果使用nohup命令提交作业，那么在缺省情况下该作业的所有输出都被重定向到一个名为nohup.out的文件中，除非另外指定了输出文件：</span><br><span class="line"></span><br><span class="line">nohup command &gt; myout.file 2&gt;&amp;1 &amp;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> nohup 忽略挂起信号</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> &amp;  后台运行</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">command</span> &gt; myout.file  这条命令输出重定向到myout.file中</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2&gt;&amp;1  把标准输出错误重定向到标准输出</span></span><br><span class="line"></span><br><span class="line">---- demo ---</span><br><span class="line">./test.sh &gt; fei.log 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_nohup/2_1.png" alt="2&gt;&amp;1" title="2&gt;&amp;1"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>laravel -Command</title>
      <link href="/2019/06/17/laravel/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C_console/"/>
      <url>/2019/06/17/laravel/%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C_console/</url>
      <content type="html"><![CDATA[<h3 id="command-简单使用"><a href="#command-简单使用" class="headerlink" title="command  简单使用"></a><code>command</code>  简单使用</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">php artisan make:command foo  <span class="comment">//创建文件   </span></span><br><span class="line"><span class="keyword">protected</span> $signature = <span class="string">'foo'</span>; <span class="comment">//命令名字   </span></span><br><span class="line"><span class="keyword">protected</span> $description = <span class="string">'foo class Command description'</span>; <span class="comment">//描述</span></span><br><span class="line">php artisan foo    <span class="comment">//执行,可以调用到 public function handle() 方法</span></span><br><span class="line"></span><br><span class="line">php artisan <span class="keyword">list</span> <span class="comment">#这时候执行这个可以在Available commands 中看到 foo  foo class Command description</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//--------- demo -----    </span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Console</span>\<span class="title">Commands</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Console</span>\<span class="title">Command</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">foo</span> <span class="keyword">extends</span> <span class="title">Command</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $signature = <span class="string">'foo'</span>;</span><br><span class="line">    <span class="keyword">protected</span> $description = <span class="string">'foo class Command description'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">parent</span>::__construct();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//php artisan foo  执行这条命令</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"hello foo "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="在一个-commands-文件中执行对应的方法"><a href="#在一个-commands-文件中执行对应的方法" class="headerlink" title="在一个 commands  文件中执行对应的方法"></a>在一个 <code>commands</code>  文件中执行对应的方法</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> $signature = <span class="string">'command &#123;foo&#125;'</span>;   <span class="comment">//注意这里写法即可</span></span><br><span class="line">php artisan command bar  <span class="comment">//执行命令</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">//--------- demo -----  </span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">App</span>\<span class="title">Console</span>\<span class="title">Commands</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Console</span>\<span class="title">Command</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">foo</span> <span class="keyword">extends</span> <span class="title">Command</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// protected $signature = 'foo';</span></span><br><span class="line">    <span class="keyword">protected</span> $signature = <span class="string">'command &#123;foo&#125;'</span>;</span><br><span class="line">    <span class="keyword">protected</span> $description = <span class="string">'foo class Command description'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">parent</span>::__construct();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//php artisan foo</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">handle</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// echo "hello foo "; //sb 的laravel调用对应的方法,需要用判断写</span></span><br><span class="line">        $method = <span class="keyword">$this</span>-&gt;argument(<span class="string">'foo'</span>);</span><br><span class="line">        <span class="keyword">if</span> (method_exists(<span class="keyword">$this</span>, $method)) &#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;$method();</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"执行完成\n"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">"$&#123;method&#125; is not exists\n"</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//php artisan command bar</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">bar</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"bar"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/laravel/command_01.png" alt="command" title="command"></p><h3 id="confirm"><a href="#confirm" class="headerlink" title="confirm"></a><code>confirm</code></h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;confirm(<span class="string">"确认要执行吗?"</span>)) &#123;</span><br><span class="line"><span class="keyword">exit</span>(<span class="string">"开始执行"</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">exit</span>(<span class="string">'停止执行'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <a href="https://laravel.com/docs/5.8/artisan" title="官方 commands" target="_blank" rel="noopener">官方commands</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-mysql-shell 工具使用(windows篇)</title>
      <link href="/2019/06/12/mysql/mysql_shell/"/>
      <url>/2019/06/12/mysql/mysql_shell/</url>
      <content type="html"><![CDATA[<h3 id="mysql-shell"><a href="#mysql-shell" class="headerlink" title="mysql-shell"></a>mysql-shell</h3><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MySQL Shell是MySQL Server的高级客户端和代码编辑器。除了提供的SQL功能，类似于 mysql，MySQL Shell还提供了JavaScript和Python的脚本功能，并包含用于MySQL的API</span><br><span class="line"></span><br><span class="line">!!!! 以下暂时提供windows中demo,其他系统原理相同 !!!</span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/doc/mysql-shell/8.0/en/mysql-shell-features.html" title="mysql-shell" target="_blank" rel="noopener">mysql-shell 文档</a></p><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">\? &#123;command&#125; <span class="comment">#查看命令的用法,也可以用\help &#123;command&#125;</span></span><br><span class="line">\py <span class="comment">#python模式</span></span><br><span class="line">\js <span class="comment">#js模式</span></span><br><span class="line">\sql <span class="comment">#sql模式</span></span><br><span class="line">\<span class="keyword">exit</span> <span class="comment">#退出</span></span><br></pre></td></tr></table></figure><h3 id="连接数据库01-mysqlsh"><a href="#连接数据库01-mysqlsh" class="headerlink" title="连接数据库01 mysqlsh"></a>连接数据库01 <code>mysqlsh</code></h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#这种方式需要在mysql-shell的bin目录下面直接执行命令</span></span><br><span class="line">mysqlsh --uri 用户名@IP地址       <span class="comment">#使用默认端口</span></span><br><span class="line">mysqlsh root@localhost</span><br><span class="line">mysqlsh --uri root@localhost       <span class="comment">#使用默认端口</span></span><br><span class="line">mysqlsh --uri root@localhost:<span class="number">3306</span>  <span class="comment">#指定端口</span></span><br><span class="line"></span><br><span class="line"><span class="string">\sql</span>         <span class="comment">#切换SQL模式</span></span><br><span class="line">show databases   <span class="comment">#正常SQL语句</span></span><br><span class="line">或者</span><br><span class="line"><span class="string">\sql</span> show databases   <span class="comment">#查看数据库</span></span><br></pre></td></tr></table></figure><p><img src="/img/mysql/mysql_shell/mysqlsh.png" alt="mysqlsh 连接数据库" title="mysqlsh 连接数据库"></p><h3 id="连接数据库02-connect"><a href="#连接数据库02-connect" class="headerlink" title="连接数据库02 \connect"></a>连接数据库02 <code>\connect</code></h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##这种连接方式,需要点击mysqlsh.exe,在弹出的窗口中执行下面的命令</span></span><br><span class="line"><span class="string">\connect</span> root@localhost:<span class="number">3306</span>   <span class="comment">#连接数据库</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">\sql</span>         <span class="comment">#切换SQL模式</span></span><br><span class="line">show databases   <span class="comment">#正常SQL语句</span></span><br><span class="line">或者</span><br><span class="line"><span class="string">\sql</span> show databases   <span class="comment">#查看数据库</span></span><br></pre></td></tr></table></figure><p><img src="/img/mysql/mysql_shell/connect.png" alt="connect 连接数据库" title="connect 连接数据库"></p><h3 id="连接数据库03-shell-connect"><a href="#连接数据库03-shell-connect" class="headerlink" title="连接数据库03  shell.connect"></a>连接数据库03  <code>shell.connect</code></h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##这种连接方式,需要点击mysqlsh.exe,在弹出的窗口中执行下面的命令</span></span><br><span class="line"><span class="keyword">shell</span>.<span class="bash">connect(&#123;<span class="string">'user'</span>:<span class="string">'root'</span>,<span class="string">'host'</span>:<span class="string">'localhost'</span>,<span class="string">'port'</span>:3306&#125;  <span class="comment">#连接数据库</span></span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash">\sql         <span class="comment">#切换SQL模式</span></span></span><br><span class="line"><span class="bash">show databases   <span class="comment">#正常SQL语句</span></span></span><br><span class="line"><span class="bash">或者</span></span><br><span class="line"><span class="bash">\sql show databases   <span class="comment">#查看数据库</span></span></span><br></pre></td></tr></table></figure><p><img src="/img/mysql/mysql_shell/shell_connect.png" alt="shell.connect 连接数据库" title="shell.connect 连接数据库"></p><p> <a href="https://dev.mysql.com/doc/mysql-shell/8.0/en/mysql-shell-features.html" title="mysql-shell" target="_blank" rel="noopener">mysql-shell 文档</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-oracle 简单使用</title>
      <link href="/2019/06/04/oracle/oracle_%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"/>
      <url>/2019/06/04/oracle/oracle_%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>oracle 简单SQL的使用…………….</p><h3 id="sql"><a href="#sql" class="headerlink" title="sql"></a>sql</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#sql</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> USER_TAB_COMMENTS</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> USER_TAB_COMMENTS T <span class="keyword">WHERE</span> T.TABLE_NAME=<span class="string">'表名'</span> #查看表注释</span><br><span class="line"><span class="keyword">SELECT</span> table_name <span class="keyword">FROM</span> user_tables; //当前用户的表</span><br><span class="line"><span class="keyword">SELECT</span> table_name <span class="keyword">FROM</span> all_tables; //所有用户的表</span><br><span class="line"></span><br><span class="line">查看oracle 数据库版本</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> v$<span class="keyword">version</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> product_component_version;</span><br><span class="line"></span><br><span class="line">#获取表字段：</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user_tab_columns <span class="keyword">WHERE</span> Table_Name=<span class="string">'用户表'</span>; </span><br><span class="line"></span><br><span class="line">#获取表注释</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user_col_comments;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> user_col_comments <span class="keyword">WHERE</span> Table_Name=<span class="string">'用户表'</span>  #EMPI_ADDRESS</span><br><span class="line"></span><br><span class="line">#查询一行</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> <span class="keyword">ROWNUM</span>=<span class="number">1</span>  </span><br><span class="line"></span><br><span class="line">#查询<span class="number">2</span>行</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> 表名 <span class="keyword">order</span> <span class="keyword">by</span> CFG_ORGANIZATION_UNID) <span class="keyword">WHERE</span> <span class="keyword">ROWNUM</span> &lt; <span class="number">3</span>;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> <span class="keyword">ROWNUM</span>&lt;<span class="number">3</span>  #这里最好不要用</span><br><span class="line"></span><br><span class="line">#查询<span class="number">5</span>条数据</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> 表名.*,<span class="keyword">ROWNUM</span> <span class="keyword">as</span> <span class="keyword">num</span> <span class="keyword">FROM</span> 表名) <span class="keyword">WHERE</span> <span class="keyword">num</span> <span class="keyword">between</span> <span class="number">0</span> <span class="keyword">and</span> <span class="number">5</span>;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> <span class="keyword">ROWNUM</span> &lt;= <span class="number">5</span> <span class="keyword">minus</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> <span class="keyword">ROWNUM</span> &lt; <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">#WHERE 条件查询</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> 表名.id&lt;=<span class="number">200</span>  #<span class="keyword">id</span>小于<span class="number">200</span></span><br><span class="line"></span><br><span class="line">#查询最后一条条数据</span><br><span class="line"><span class="keyword">SELECT</span>  p.* <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> 表名 t <span class="keyword">order</span> <span class="keyword">by</span> t.id <span class="keyword">desc</span>) p <span class="keyword">WHERE</span> <span class="keyword">ROWNUM</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">#<span class="keyword">between</span> <span class="keyword">and</span></span><br><span class="line"><span class="keyword">SELECT</span> *  <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> 时间字段 <span class="keyword">BETWEEN</span> <span class="keyword">TO_DATE</span>(<span class="string">'2000-01-01 02:00:00'</span>, <span class="string">'yyyy-MM-dd HH24:MI:SS'</span>) <span class="keyword">AND</span> <span class="keyword">TO_DATE</span>(<span class="string">'2000-02-01 08:00:59'</span>, <span class="string">'yyyy-MM-dd HH24:MI:SS'</span>)</span><br><span class="line"></span><br><span class="line">#时间字段 TO_CHAR</span><br><span class="line"><span class="keyword">SELECT</span> UNID,<span class="keyword">NAME</span>,NAME_XML <span class="keyword">FROM</span> TABLE_NAME <span class="keyword">WHERE</span> UNID=<span class="number">10</span></span><br></pre></td></tr></table></figure><p><img src="/img/oracle/Navicat_oracle_01.png" alt="navicat oracle" title="navicat oracle"><br><img src="/img/oracle/Navicat_oracle_02.png" alt="navicat oracle" title="navicat oracle"></p><p><img src="/img/oracle/Navicat_oracle_system.png" alt="navicat oracle system" title="navicat oracle system"></p><h3 id="PHP-操作-oracle"><a href="#PHP-操作-oracle" class="headerlink" title="PHP 操作 oracle"></a><code>PHP</code> 操作 <code>oracle</code></h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">### PHP 使用 pdo  操作oracle数据库 报错</span><br><span class="line">## SELECT UNID,NAME,NAME_XML  WHERE UNID&gt;=10 AND UNID&lt;=15  ## 在10到15这5条数据中不为空数据</span><br><span class="line">php: symbol lookup error: ...php/lib/php/extensions/no-debug-non-zts-20170718/pdo_oci.so: undefined symbol: GC_ADDREF</span><br><span class="line"></span><br><span class="line">原因: oracle数据库中字段类型有 CLOB 和 SYS.XMLTYPE 这2中类型</span><br><span class="line">解决办法:</span><br><span class="line">我的字段 NAME 是 CLOB 类型; NAME_XML 是 SYS.XMLTYPE 类型</span><br><span class="line"><span class="keyword">SELECT</span> UNID,<span class="keyword">NAME</span>,NAME_XML <span class="keyword">FROM</span> TABLE_NAME <span class="keyword">WHERE</span> UNID&gt;=<span class="number">10</span> <span class="keyword">AND</span> UNID&lt;=<span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> UNID,TO_CHAR(a.NAME_XML.getclobval()) <span class="keyword">as</span> NAME_XML  <span class="keyword">FROM</span> TABLE_NAME <span class="keyword">WHERE</span> UNID&gt;=<span class="number">10</span> <span class="keyword">AND</span> UNID&lt;=<span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> UNID,TO_CHAR(a.NAME),TO_CHAR(a.NAME_XML.getclobval()) <span class="keyword">as</span> NAME_XML <span class="keyword">FROM</span> TABLE_NAME <span class="keyword">WHERE</span> UNID&gt;=<span class="number">10</span> <span class="keyword">AND</span> UNID&lt;=<span class="number">15</span></span><br></pre></td></tr></table></figure><p><img src="/img/oracle/clob_sql.png" alt="PHP pdo clob" title="PHP pdo clob"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>linux php -PDO_OCI 扩展</title>
      <link href="/2019/06/03/php/php%E8%BF%9E%E6%8E%A5oracle_pdoOci%E6%89%A9%E5%B1%95%E5%AE%89%E8%A3%85/"/>
      <url>/2019/06/03/php/php%E8%BF%9E%E6%8E%A5oracle_pdoOci%E6%89%A9%E5%B1%95%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<p>PHP连接到oracle数据库需要pdo_oci 扩展</p><h3 id="下载文件"><a href="#下载文件" class="headerlink" title="下载文件"></a>下载文件</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="comment">//www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html</span></span><br><span class="line">https:<span class="comment">//www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html</span></span><br><span class="line">下载下面<span class="number">2</span>个文件,上传到服务器:</span><br><span class="line">instantclient-basic-linux<span class="selector-class">.x64-12</span>.<span class="number">1.0</span>.<span class="number">2.0</span>.zip</span><br><span class="line">instantclient-sdk-linux<span class="selector-class">.x64-12</span>.<span class="number">1.0</span>.<span class="number">2.0</span></span><br><span class="line">下载 oracle 数据库的扩展 oci8</span><br><span class="line">https:<span class="comment">//pecl.php.net/package/oci8</span></span><br><span class="line">oci8-<span class="number">2.2</span>.<span class="number">0</span>.tgz</span><br><span class="line">下载  php-src ,主要使用 pdo_oci 目录</span><br><span class="line">https:<span class="comment">//github.com/php/php-src</span></span><br></pre></td></tr></table></figure><h3 id="安装-instantclient"><a href="#安装-instantclient" class="headerlink" title="安装 instantclient"></a>安装 <code>instantclient</code></h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">进入linux:</span><br><span class="line">unzip instantclient-basic-linux<span class="selector-class">.x64-12</span>.<span class="number">1.0</span>.<span class="number">2.0</span>.zip</span><br><span class="line">unzip instantclient-sdk-linux<span class="selector-class">.x64-12</span>.<span class="number">1.0</span>.<span class="number">2.0</span>.zip</span><br><span class="line"></span><br><span class="line">cd /data/server/oracle_php</span><br><span class="line">cp -avr instantclient-basic-linux<span class="selector-class">.x64-12</span>.<span class="number">1.0</span>.<span class="number">2.0</span><span class="selector-class">.zip</span> /data/server/oracle_php/</span><br><span class="line">cp -avr instantclient-sdk-linux<span class="selector-class">.x64-12</span>.<span class="number">1.0</span>.<span class="number">2.0</span><span class="selector-class">.zip</span> /data/server/oracle_php/</span><br><span class="line"></span><br><span class="line">#这里解压后会放再一个目录中</span><br><span class="line">unzip instantclient-basic-linux<span class="selector-class">.x64-12</span>.<span class="number">1.0</span>.<span class="number">2.0</span>.zip</span><br><span class="line">unzip instantclient-sdk-linux<span class="selector-class">.x64-12</span>.<span class="number">1.0</span>.<span class="number">2.0</span>.zip</span><br><span class="line">mv instantclient_12_1 instantclient  </span><br><span class="line">cd instantclient</span><br><span class="line"></span><br><span class="line">ln -s libnnz12<span class="selector-class">.so</span> libnnz.so</span><br><span class="line">ln -s libclntsh<span class="selector-class">.so</span>.<span class="number">12.1</span> libclntsh.so</span><br><span class="line">ln -s libocci<span class="selector-class">.so</span>.<span class="number">12.1</span> libocci.so</span><br></pre></td></tr></table></figure><h3 id="安装-oci8-扩展"><a href="#安装-oci8-扩展" class="headerlink" title="安装 oci8  扩展"></a>安装 <code>oci8</code>  扩展</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cd /data/server/oracle_php</span><br><span class="line">tar -zxvf oci8-<span class="number">2.2</span>.<span class="number">0</span>.tgz</span><br><span class="line">cd oci8-<span class="number">2.2</span>.<span class="number">0</span></span><br><span class="line">/data/server/php72/bin/phpize</span><br><span class="line"></span><br><span class="line">./configure \</span><br><span class="line">--<span class="keyword">with</span>-oci8=instantclient,<span class="regexp">/data/server</span><span class="regexp">/oracle_php/instantclient</span> \</span><br><span class="line">--<span class="keyword">with</span>-php-config=<span class="regexp">/data/server</span><span class="regexp">/php72/bin</span><span class="regexp">/php-config</span></span><br><span class="line"><span class="regexp">make</span></span><br><span class="line"><span class="regexp">make install</span></span><br><span class="line"><span class="regexp">## 最后安装成功</span></span><br><span class="line"><span class="regexp">[www@localhost oci8-2.2.0]$ make install</span></span><br><span class="line"><span class="regexp">Installing shared extensions:     /data</span><span class="regexp">/server/php</span>72/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>/<span class="title">extensions</span>/<span class="title">no</span>-<span class="title">debug</span>-<span class="title">non</span>-<span class="title">zts</span>-20170718/</span></span><br><span class="line">[www@localhost oci8-<span class="number">2.2</span>.<span class="number">0</span>]$</span><br></pre></td></tr></table></figure><h3 id="安装-pdo-oci-扩展"><a href="#安装-pdo-oci-扩展" class="headerlink" title="安装 pdo_oci 扩展"></a>安装 <code>pdo_oci</code> 扩展</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">https:</span>/<span class="regexp">/pecl.php.net/package</span><span class="regexp">/PDO_OCI</span></span><br><span class="line"><span class="regexp">这里的 PDO_OCI-1.0.tgz 已经不在维护,从github 上php/php</span>-src  中下载使用 pdo_oci 目录</span><br><span class="line">改从这里下载</span><br><span class="line"><span class="symbol">https:</span>/<span class="regexp">/github.com/php</span><span class="regexp">/php-src  </span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">使用 php-src 里面的 pdo_oci</span></span><br><span class="line"><span class="regexp">cd pdo_oci</span></span><br><span class="line"><span class="regexp">/data</span><span class="regexp">/server/php</span>72/bin/phpize</span><br><span class="line"></span><br><span class="line">./configure \</span><br><span class="line">--<span class="keyword">with</span>-pdo-oci=instantclient,<span class="regexp">/data/server</span><span class="regexp">/oracle_php/instantclient</span> \</span><br><span class="line">--<span class="keyword">with</span>-php-config=<span class="regexp">/data/server</span><span class="regexp">/php72/bin</span><span class="regexp">/php-config</span></span><br><span class="line"><span class="regexp">make</span></span><br><span class="line"><span class="regexp">make install</span></span><br><span class="line"><span class="regexp">## 最后安装成功</span></span><br><span class="line"><span class="regexp">[www@localhost pdo_oci]$ make install</span></span><br><span class="line"><span class="regexp">Installing shared extensions:     /data</span><span class="regexp">/server/php</span>72/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>/<span class="title">extensions</span>/<span class="title">no</span>-<span class="title">debug</span>-<span class="title">non</span>-<span class="title">zts</span>-20170718/</span></span><br><span class="line">[www@localhost pdo_oci]$ </span><br><span class="line"></span><br><span class="line">-----配置 php.ini ------</span><br><span class="line">php.ini配置中添加一句 extension=pdo_oci.so</span><br></pre></td></tr></table></figure><p><img src="/img/php/oracle_01.png" alt="php oracle" title="php oracle"></p><p><img src="/img/php/oracle_02.png" alt="php oracle" title="php oracle"></p><p> <a href="https://github.com/php/php-src" title="php-src" target="_blank" rel="noopener">php-src</a></p><p> <a href="https://pecl.php.net/" title="pecl" target="_blank" rel="noopener">pecl</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Yii2  -model层不为人知的秘密</title>
      <link href="/2019/06/02/Yii2/Yii2_%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/"/>
      <url>/2019/06/02/Yii2/Yii2_%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C/</url>
      <content type="html"><![CDATA[<h3 id="console"><a href="#console" class="headerlink" title="console"></a>console</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php yii web-fei-server/bind   <span class="comment">#WebFeiServerController/actionBind()</span></span><br></pre></td></tr></table></figure><p>[]: </p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>windows  phpstudy curl超时</title>
      <link href="/2019/05/28/php/win_phpStudy/"/>
      <url>/2019/05/28/php/win_phpStudy/</url>
      <content type="html"><![CDATA[<p>场景:  <code>windows7</code> <code>phpstudy2016</code> <code>php7.3</code> <code>nginx</code>, 使用<code>curl</code> <code>file_get_content</code>本地项目之间互相访问一直超时或者失败</p><h3 id="场景再现"><a href="#场景再现" class="headerlink" title="场景再现"></a>场景再现</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">demo.test.com:<span class="number">80</span></span><br><span class="line">文件 E:\selfweb\git_dev\test\index.php 内容如下:</span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$file = file_get_contents(<span class="string">"http://demo.test.com:80/index2.php"</span>);</span><br><span class="line">print_r($file);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;br&gt; php-cgi.exe -b demo.test.com:9001 -c php.ini"</span>;</span><br><span class="line"></span><br><span class="line">-------------</span><br><span class="line"> 目录 E:\selfweb\git_dev\test\index2.php 内容如下</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"我是 index2.php 从我这里拿数据"</span>;</span><br><span class="line"></span><br><span class="line">访问 http:<span class="comment">//demo.test.com:80/index2.php    #成功</span></span><br><span class="line">访问 http:<span class="comment">//demo.test.com:80/index.php     #失败</span></span><br></pre></td></tr></table></figure><p><img src="/img/php/fail.png" alt="失败" title="失败"></p><h3 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改nginx配置,添加81端口,添加9001端口</span></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;   <span class="comment">#这里</span></span><br><span class="line">    <span class="attribute">server_name</span>  demo.test.com <span class="number">192.168.1.151</span>;</span><br><span class="line">    <span class="attribute">charset</span> utf-<span class="number">8</span>;</span><br><span class="line">    <span class="attribute">root</span>  E:/selfweb/git_dev/test/;</span><br><span class="line">    <span class="attribute">index</span> index.php;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ .+\.php($|/)</span> &#123;</span><br><span class="line">        <span class="attribute">fastcgi_pass</span> <span class="number">127.0.0.1:9000</span>; <span class="comment">#这里</span></span><br><span class="line">        <span class="attribute">fastcgi_index</span> index.php;</span><br><span class="line">        <span class="attribute">include</span> fastcgi.conf;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">81</span>; <span class="comment">#这里</span></span><br><span class="line">    <span class="attribute">server_name</span>  demo.test.com;</span><br><span class="line">    <span class="attribute">charset</span> utf-<span class="number">8</span>;</span><br><span class="line">    <span class="attribute">root</span>  E:/selfweb/git_dev/test/;</span><br><span class="line">    <span class="attribute">index</span> index.php;</span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ .+\.php($|/)</span> &#123;</span><br><span class="line">        <span class="attribute">fastcgi_pass</span> <span class="number">127.0.0.1:9001</span>; <span class="comment">#这里</span></span><br><span class="line">        <span class="attribute">fastcgi_index</span> index.php;</span><br><span class="line">        <span class="attribute">include</span> fastcgi.conf;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#重启phpStudy,在当前php目录下的cmd中运行命令:</span></span><br><span class="line">php-cgi.exe -b demo.test.com:9001 -c php.ini</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改文件</span></span><br><span class="line">文件 E:\selfweb\git_dev\test\index.php 中端口内容如下:</span><br><span class="line">&lt;?php</span><br><span class="line">$file = file_get_contents("http://demo.test.com:81/index2.php");</span><br><span class="line">print_r($file);</span><br><span class="line"><span class="attribute">echo</span> <span class="string">"&lt;br&gt; php-cgi.exe -b demo.test.com:9001 -c php.ini"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">#再次访问</span></span><br><span class="line">访问 http://demo.test.com:80/index2.php    #成功</span><br><span class="line">访问 http://demo.test.com:80/index.php     #成功</span><br></pre></td></tr></table></figure><p><img src="/img/php/success.png" alt="成功" title="成功"></p><h3 id="编写bat-脚本"><a href="#编写bat-脚本" class="headerlink" title="编写bat 脚本"></a>编写bat 脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建 test_curl.bat 脚本,内容如下</span></span><br><span class="line"><span class="built_in">set</span> php_nts=D:\soft_position\phpStudy20161103\php\php-7.3.4-nts</span><br><span class="line">%php_nts%\php-cgi.exe -b demo.test.com:9001 -c %php_nts%\php.ini</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu -docker</title>
      <link href="/2019/05/26/docker/docker/"/>
      <url>/2019/05/26/docker/docker/</url>
      <content type="html"><![CDATA[<p><code>docker</code>使用建议,一个<code>docker</code> 容器中运行一种服务</p><h3 id="ubuntu-安装-docker"><a href="#ubuntu-安装-docker" class="headerlink" title="ubuntu  安装 docker"></a>ubuntu  安装 <code>docker</code></h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> <span class="keyword">update</span></span><br><span class="line"></span><br><span class="line">sudo apt-<span class="built_in">get</span> install \</span><br><span class="line">    apt-transport-https \</span><br><span class="line">    <span class="keyword">ca</span>-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    gnupg-agent \</span><br><span class="line">    software-properties-common</span><br><span class="line">    </span><br><span class="line">curl -fsSL http<span class="variable">s:</span>//download.docker.<span class="keyword">com</span>/linux/ubuntu/gpg | sudo apt-key <span class="built_in">add</span> -</span><br><span class="line"></span><br><span class="line">#这条命令修改文件位置:       /etc/apt/sources.<span class="keyword">list</span></span><br><span class="line">sudo <span class="built_in">add</span>-apt-repository \</span><br><span class="line">   <span class="comment">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line">   $(lsb_release -<span class="keyword">cs</span>) \</span><br><span class="line">   stable<span class="comment">"</span></span><br><span class="line">   </span><br><span class="line">sudo apt-<span class="built_in">get</span> <span class="keyword">update</span></span><br><span class="line"></span><br><span class="line">sudo apt-<span class="built_in">get</span> install docker-<span class="keyword">ce</span> docker-<span class="keyword">ce</span>-cli containerd.io</span><br><span class="line"></span><br><span class="line">#验证:  http<span class="variable">s:</span>//docs.docker.<span class="keyword">com</span>/<span class="built_in">get</span>-started/</span><br><span class="line">sudo docker run hello-world</span><br><span class="line">此命令下载测试映像并在容器中运行它。当容器运行时，它会打印一条信息性消息并退出</span><br></pre></td></tr></table></figure><p> <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" title="官网Ubuntu安装Docker CE" target="_blank" rel="noopener">官网Ubuntu安装Docker CE</a></p><p><img src="/img/docker/docker_helloWorld.png" alt="docker hello world" title="hello world"></p><h3 id="配置-docker加速"><a href="#配置-docker加速" class="headerlink" title="配置 docker加速"></a>配置 <code>docker</code>加速</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/etc/docker/</span> </span><br><span class="line">touch daemon.json  <span class="comment">#没有这个文件手动创建</span></span><br><span class="line">文件里面内容如下:</span><br><span class="line"><span class="params">-----------</span>使用docker官方镜像<span class="params">-----</span>以后下载镜像会慢<span class="params">-----</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"registry-mirrors"</span>: [</span><br><span class="line">        <span class="string">"https://registry.docker-cn.com"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"insecure-registries"</span>: []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="params">---------</span> 使用阿里云进行加速<span class="params">----</span>先到阿里云申请,这里我已经申请好了<span class="params">------</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">"registry-mirrors"</span>: [</span><br><span class="line">        <span class="string">"https://qlc9qgml.mirror.aliyuncs.com"</span>     </span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"insecure-registries"</span>: []</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="params">-----------------------------------</span></span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker   <span class="comment">#重启docker</span></span><br></pre></td></tr></table></figure><p> <a href="https://help.aliyun.com/document_detail/60750.html?spm=a2c4g.11186623.6.549.65384685bRPs0U" title="阿里云官方镜像加速文档" target="_blank" rel="noopener">阿里云官方镜像加速文档</a></p><h3 id="docker安装nginx01"><a href="#docker安装nginx01" class="headerlink" title="docker安装nginx01"></a><code>docker</code>安装<code>nginx</code>01</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">docker search nginx  <span class="comment">#查看nginx镜像</span></span><br><span class="line">docker pull nginx    <span class="comment">#拉取官方镜像,上面没有配置好docker加速器这里会下非常慢</span></span><br><span class="line">docker images nginx  <span class="comment">#查看镜像</span></span><br><span class="line">docker <span class="keyword">run</span><span class="bash"> --name container01 -p 8081:80 -d nginx   <span class="comment">#container01 这个名随便起</span></span></span><br><span class="line"><span class="bash"><span class="comment">#--name 容器名字(自己定义)</span></span></span><br><span class="line"><span class="bash"><span class="comment">#-p 端口映射</span></span></span><br><span class="line"><span class="bash"><span class="comment">#-d  后台运行</span></span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash">docker ps       <span class="comment">#列出所又正在运行的容器 containers </span></span></span><br><span class="line"><span class="bash"><span class="comment">#这里列出的容器id记下来,下面会用到</span></span></span><br><span class="line"><span class="bash"></span></span><br><span class="line"><span class="bash"><span class="comment">#访问测试,这里是端口8081</span></span></span><br><span class="line"><span class="bash">http://127.0.0.1:8081/</span></span><br></pre></td></tr></table></figure><p><img src="/img/docker/nginx_image.png" alt="nginx 镜像" title="nginx 镜像"></p><p><img src="/img/docker/nginx_ok.png" alt="nginx ok" title="nginx ok"></p><h3 id="docker安装nginx02-部署"><a href="#docker安装nginx02-部署" class="headerlink" title="docker安装nginx02 部署"></a><code>docker</code>安装<code>nginx</code>02 部署</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#宿主机中创建目录</span></span><br><span class="line">mkdir -p <span class="meta-keyword">/data/</span>server/docker_fei<span class="meta-keyword">/nginx/</span>www \</span><br><span class="line"><span class="meta-keyword">/data/</span>server/docker_fei<span class="meta-keyword">/nginx/</span>logs \</span><br><span class="line"><span class="meta-keyword">/data/</span>server/docker_fei<span class="meta-keyword">/nginx/</span>conf</span><br><span class="line"></span><br><span class="line"><span class="meta">#拷贝容器内 nginx 默认配置文件到本地目录,e765b2939521 容器id可以用 docker ps 查看</span></span><br><span class="line">docker cp e765b2939521:<span class="meta-keyword">/etc/</span>nginx/nginx.conf <span class="meta-keyword">/data/</span>server/docker_fei<span class="meta-keyword">/nginx/</span>conf</span><br><span class="line"></span><br><span class="line"><span class="meta">#部署, 把宿主机中的目录挂载(映射)到docker容器中,这里会!!!重新在创建一个容器!!!</span></span><br><span class="line">docker run -d -p <span class="number">8082</span>:<span class="number">80</span> \</span><br><span class="line">--name container04 \</span><br><span class="line">-v <span class="meta-keyword">/data/</span>server/docker_fei<span class="meta-keyword">/nginx/</span>www:<span class="meta-keyword">/usr/</span>share<span class="meta-keyword">/nginx/</span>html \</span><br><span class="line">-v <span class="meta-keyword">/data/</span>server/docker_fei<span class="meta-keyword">/nginx/</span>conf/nginx.conf:<span class="meta-keyword">/etc/</span>nginx/nginx.conf  \</span><br><span class="line">-v <span class="meta-keyword">/data/</span>server/docker_fei<span class="meta-keyword">/nginx/</span>logs:<span class="meta-keyword">/var/</span>log/nginx \</span><br><span class="line">nginx</span><br><span class="line"><span class="meta">#-p 8082:80： 将容器的 80 端口映射到主机的 8082 端口</span></span><br><span class="line"><span class="meta"># -v 将宿主机目录挂载(映射)到容器中</span></span><br><span class="line"></span><br><span class="line">cd <span class="meta-keyword">/data/</span>server/docker_fei<span class="meta-keyword">/nginx/</span>www</span><br><span class="line">touch index.html</span><br><span class="line">vim index.html <span class="meta">#内容如下</span></span><br><span class="line">hello world test <span class="meta-keyword">/data/</span>server/docker_fei<span class="meta-keyword">/nginx/</span>www </span><br><span class="line"></span><br><span class="line"><span class="meta">#访问测试,这里是端口8082</span></span><br><span class="line"><span class="symbol">http:</span><span class="comment">//127.0.0.1:8082/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">docker stop container04     <span class="meta">#关闭 container04 这个容器</span></span><br><span class="line">docker start container04    <span class="meta">#启动 container04 这个容器</span></span><br><span class="line">docker restart  container04  <span class="meta">#重启 container04 这个容器</span></span><br><span class="line"></span><br><span class="line"><span class="meta">##问题  宿主机中的目录挂载(映射)到docker容器中,</span></span><br></pre></td></tr></table></figure><p><img src="/img/docker/container_nginx.png" alt="nginx ok2" title="nginx ok2"></p><h3 id="修改挂载-映射-文件、端口"><a href="#修改挂载-映射-文件、端口" class="headerlink" title="修改挂载(映射)文件、端口??????"></a>修改挂载(映射)文件、端口??????</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">文件地址:</span><br><span class="line">/var/<span class="class"><span class="keyword">lib</span>/<span class="title">docker</span>/<span class="title">containers</span>/容器的<span class="title">hash</span>值</span></span><br><span class="line">在这个目录下修改文件 hostconfig.json </span><br><span class="line">Binds  挂载目录</span><br><span class="line">PortBindings  端口</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">修改完注意保持原来的格式,还是一行json</span><br></pre></td></tr></table></figure><h3 id="进入docker容器没有vim命令"><a href="#进入docker容器没有vim命令" class="headerlink" title="进入docker容器没有vim命令"></a>进入<code>docker</code>容器没有vim命令</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">docker exec -<span class="keyword">it</span> container01 /bin/bash  <span class="comment">#进入container01这个容器</span></span><br><span class="line">docker exec -<span class="keyword">it</span> e765b2939521 /bin/bash  <span class="comment">#进入e765b2939521这个容器</span></span><br><span class="line"></span><br><span class="line">在docker容器中安装vim 命令,先同步在安装</span><br><span class="line">apt-<span class="keyword">get</span> update  <span class="comment">#同步 /etc/apt/sources.list 和 /etc/apt/sources.list.d 中列出的源的索引</span></span><br><span class="line">apt-<span class="keyword">get</span> install vim  <span class="comment">#这个时候安装</span></span><br></pre></td></tr></table></figure><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="params">--version</span></span><br><span class="line">docker info</span><br><span class="line">docker image <span class="keyword">ls</span>  <span class="comment">#列出所有的镜像</span></span><br><span class="line">docker ps       <span class="comment">#查看已经运行容器</span></span><br><span class="line">docker ps -a    <span class="comment">#查看所有容器</span></span><br><span class="line">docker rm 容器名字<span class="params">(或者容器id)</span>   <span class="comment">#删除容器</span></span><br><span class="line"></span><br><span class="line">docker container <span class="params">--help</span>    <span class="comment">#容器帮助命令</span></span><br><span class="line">docker container <span class="keyword">ls</span>        <span class="comment">#查看在运行容器</span></span><br><span class="line">docker container <span class="keyword">ls</span> -a      <span class="comment">#查看所有容器</span></span><br><span class="line">docker container <span class="keyword">ls</span> -aq     <span class="comment">#查看所有容器id</span></span><br><span class="line">docker container <span class="keyword">ls</span> <span class="params">--all</span>   <span class="comment">#查看所有容器      </span></span><br><span class="line">docker stop container04     <span class="comment">#关闭 container04 这个容器</span></span><br><span class="line">docker start container04    <span class="comment">#启动 container04 这个容器</span></span><br><span class="line">docker restart  container04  <span class="comment">#重启 container04 这个容器</span></span><br><span class="line"></span><br><span class="line">docker exec -it container01 <span class="string">/bin/bash</span>  <span class="comment">#进入container01这个容器</span></span><br><span class="line">docker exec -it e765b2939521 <span class="string">/bin/bash</span>  <span class="comment">#进入e765b2939521这个容器</span></span><br><span class="line">docker attach e765b2939521    <span class="comment">#进入e765b2939521这个容器</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#docker inspect container_name | grep -A10 -n Mounts  #查看容器已经挂载的目录</span></span><br><span class="line">docker inspect container04 | grep  -A10 -n   Mounts</span><br><span class="line"></span><br><span class="line"><span class="comment">#docker create ubuntu:latest  #可以指定版本</span></span><br><span class="line">docker run <span class="params">--name</span> 容器名字</span><br><span class="line"></span><br><span class="line">移除所有容器和镜像<span class="params">(大扫除)</span></span><br><span class="line">docker kill $<span class="params">(docker ps -q)</span> ; docker rm $<span class="params">(docker ps -a -q)</span> ; docker rmi $<span class="params">(docker images -q -a)</span></span><br></pre></td></tr></table></figure><p> <a href="https://www.runoob.com/docker/docker-resources.html&quot;Docker 资源汇总&quot;" target="_blank" rel="noopener">Docker 资源汇总</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-find 文件查找</title>
      <link href="/2019/05/26/ubuntu/linux_DDU_find/"/>
      <url>/2019/05/26/ubuntu/linux_DDU_find/</url>
      <content type="html"><![CDATA[<p>…… find 命令用来指定目录文件下查找</p><h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find <span class="string">[选项]</span> <span class="string">[参数]</span></span><br></pre></td></tr></table></figure><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">find</span> /<span class="built_in">home</span> -name <span class="string">"*.txt"</span>   #在<span class="built_in">home</span>目录下查找以.txt结尾的文件名</span><br><span class="line"><span class="built_in">find</span> /<span class="built_in">home</span> -iname <span class="string">"*.txt"</span>  #忽略大小写</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>PHP -常用功能</title>
      <link href="/2019/05/22/php/PHP%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD/"/>
      <url>/2019/05/22/php/PHP%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD/</url>
      <content type="html"><![CDATA[<p>hello world …………..</p><h3 id="PHP常用功能"><a href="#PHP常用功能" class="headerlink" title="PHP常用功能"></a>PHP常用功能</h3><table><thead><tr><th><a href="https://phpunit.readthedocs.io/en/7.3/textui.html#textui-examples-testcaseclass-php" title="phpunit" target="_blank" rel="noopener">phpunit</a></th><th></th><th></th></tr></thead><tbody><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td>aaa</td><td>bbbb</td><td>dddd</td></tr></tbody></table><p>hello world</p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>php -函数</title>
      <link href="/2019/05/21/php/php%E5%87%BD%E6%95%B0/"/>
      <url>/2019/05/21/php/php%E5%87%BD%E6%95%B0/</url>
      <content type="html"><![CDATA[<h3 id="http-build-query"><a href="#http-build-query" class="headerlink" title="http_build_query"></a>http_build_query</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">生成 URL-encode 之后的请求字符串：数组<span class="keyword">array</span>(<span class="string">'foo'</span>, <span class="string">'bar'</span>, <span class="string">'baz'</span><span class="string">'); 转为  foo=bar&amp;baz=boom</span></span><br></pre></td></tr></table></figure><h3 id="程序执行函数"><a href="#程序执行函数" class="headerlink" title="程序执行函数"></a>程序执行函数</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">system(<span class="string">"php -v"</span>);</span><br><span class="line">passthru(<span class="string">"php -v"</span>);</span><br><span class="line">exec(<span class="string">"php -v"</span>);</span><br><span class="line">shell_exec(<span class="string">"php -v"</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>tcp ip</title>
      <link href="/2019/05/19/%E9%9D%A2%E8%AF%95/%E5%85%B6%E4%BB%96/tcp_ip_%E4%BB%8E%E8%BE%93%E5%85%A5%E5%88%B0%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82/"/>
      <url>/2019/05/19/%E9%9D%A2%E8%AF%95/%E5%85%B6%E4%BB%96/tcp_ip_%E4%BB%8E%E8%BE%93%E5%85%A5%E5%88%B0%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82/</url>
      <content type="html"><![CDATA[<p>发送消息</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">            hello world</span><br><span class="line">应用层       hello world</span><br><span class="line">  ↓</span><br><span class="line">传输层      tcp + hello world</span><br><span class="line">  ↓</span><br><span class="line">IP层       <span class="built_in"> IP </span>+ tcp  + hello world</span><br><span class="line">  ↓</span><br><span class="line">链路层    帧头 +<span class="built_in"> IP </span>+ tcp  + hello world + 帧尾</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>windows cmd 命令</title>
      <link href="/2019/05/17/win/win_cmd/"/>
      <url>/2019/05/17/win/win_cmd/</url>
      <content type="html"><![CDATA[<p>windows中常用命令</p><h3 id="帮助命令-help"><a href="#帮助命令-help" class="headerlink" title="帮助命令 help"></a>帮助命令 help</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">help  #查看所有命令</span><br><span class="line">help xcopy #查看xcopy所有参数</span><br></pre></td></tr></table></figure><h3 id="xcpoy-复制文件夹"><a href="#xcpoy-复制文件夹" class="headerlink" title="xcpoy 复制文件夹"></a>xcpoy 复制文件夹</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">参数:</span><br><span class="line">/s 复制目录和子目录，除了空的。</span><br><span class="line">/e 复制目录和子目录，包括空的。</span><br><span class="line">/c 即使有错误，也继续复制</span><br><span class="line">/y 禁止提示以确认改写一个</span><br><span class="line"></span><br><span class="line">xcopy E:\web\win_web\aaa  E:\web\win_web\bbb\bbb_01 /e/c/y   <span class="comment">#注意目录文件后面不要有\</span></span><br></pre></td></tr></table></figure><h3 id="tree-显示目录树"><a href="#tree-显示目录树" class="headerlink" title="tree 显示目录树"></a>tree 显示目录树</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">语法:</span><br><span class="line"> tree [drive:][path] [/F] [/A]</span><br><span class="line"> 参数:</span><br><span class="line">       drive 盘符</span><br><span class="line">       path 文件路径</span><br><span class="line">       /F 递归列出所有文件</span><br><span class="line">       /A 只查看文件夹, 忽略文件</span><br><span class="line"></span><br><span class="line">demo:</span><br><span class="line">tree tree_test</span><br><span class="line">tree tree_test /F</span><br><span class="line">tree tree_test /A</span><br></pre></td></tr></table></figure><p><img src="/img/win/cmd/tree.png" alt="tree"></p><h3 id="查看端口-关闭端口"><a href="#查看端口-关闭端口" class="headerlink" title="查看端口,关闭端口"></a>查看端口,关闭端口</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">netstat -aon|findstr 443</span><br><span class="line">tasklist|findstr xxxxxxx上面查出来PID</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看443端口</span></span><br><span class="line">Administrator@WIN-P6OAO8N8D5C MINGW64 ~/Desktop   </span><br><span class="line">$ netstat -aon|findstr 443</span><br><span class="line">  TCP    0.0.0.0:443            0.0.0.0:0              LISTENING       5056</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看5056这个进程名字</span></span><br><span class="line">Administrator@WIN-P6OAO8N8D5C MINGW64 ~/Desktop</span><br><span class="line">$ tasklist|findstr 5056</span><br><span class="line">vmware-hostd.exe              5056 Services                   0     52,416 K</span><br></pre></td></tr></table></figure><p><img src="/img/win/cmd/netstat_tasklist.png" alt="tree"></p><h3 id="telnet-查看服务器某个端口是否开启"><a href="#telnet-查看服务器某个端口是否开启" class="headerlink" title="telnet 查看服务器某个端口是否开启"></a>telnet 查看服务器某个端口是否开启</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet 127.0.0.1 80</span><br></pre></td></tr></table></figure><p><img src="/img/win/cmd/telent.png" alt="tree"></p><h3 id="打开当前目录"><a href="#打开当前目录" class="headerlink" title="打开当前目录"></a>打开当前目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">windows中</span></span><br><span class="line">start explorer .  #注意这里有个点 </span><br><span class="line">或者</span><br><span class="line">explorer .    #注意这里有个点</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>centos7  -mysql5.7.22 安装</title>
      <link href="/2019/05/09/centos/mysql57/"/>
      <url>/2019/05/09/centos/mysql57/</url>
      <content type="html"><![CDATA[<h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">yum -y <span class="keyword">install</span> libxml2 libxml2-devel curl-devel libjpeg-devel libpng-devel freetype-devel  libmcrypt-devel</span><br><span class="line">yum <span class="keyword">install</span> -y gcc gcc-c++ make automake  libaio-devel  cmake</span><br><span class="line">yum <span class="keyword">install</span> -y ncurses-devel</span><br><span class="line">yum <span class="keyword">install</span> openssl openssl-devel</span><br><span class="line"></span><br><span class="line">查看一下cmake 版本</span><br><span class="line">cmake <span class="comment">--version</span></span><br></pre></td></tr></table></figure><h3 id="下载-注意版本"><a href="#下载-注意版本" class="headerlink" title="下载 [ 注意版本]"></a>下载 [ 注意版本]</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">安装版本 <span class="number">5.7</span><span class="number">.22</span>；如果是虚拟机建议内容 <span class="number">4</span>G ;</span><br><span class="line"></span><br><span class="line">wget <span class="string">https:</span><span class="comment">//cdn.mysql.com//archives/mysql-5.7/mysql-boost-5.7.22.tar.gz</span></span><br><span class="line">【我这里是下载到 <span class="regexp">/usr/</span>local<span class="regexp">/download/</span> 然后解压到 当前目录, 准备安装到<span class="regexp">/usr/</span>local/mysql57 】</span><br><span class="line">tar zxvf  mysql-boost<span class="number">-5.7</span><span class="number">.22</span>.tar.gz </span><br><span class="line">mv mysql<span class="number">-5.7</span><span class="number">.21</span> mysql</span><br><span class="line">cd mysql</span><br></pre></td></tr></table></figure><p><img src="/img/centos/mysql/mysql_tar.png" alt="mysql 源码位置" title="mysql 源码位置"></p><h3 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cmake . -DBUILD_CONFIG=mysql_release \</span><br><span class="line">-<span class="ruby">DCPACK_MONOLITHIC_INSTALL=ON \</span></span><br><span class="line"><span class="ruby">-DCMAKE_INSTALL_PREFIX=<span class="regexp">/usr/local</span><span class="regexp">/mysql57 \</span></span></span><br><span class="line"><span class="ruby">-DDEFAULT_CHARSET=utf8 \</span></span><br><span class="line"><span class="ruby">-DDEFAULT_COLLATION=utf8_general_ci \</span></span><br><span class="line"><span class="ruby">-DMYSQL_UNIX_ADDR=<span class="regexp">/usr/local</span><span class="regexp">/mysql57/mysql</span>.sock \</span></span><br><span class="line"><span class="ruby">-DMYSQL_TCP_PORT=<span class="number">3306</span> \</span></span><br><span class="line"><span class="ruby">-DMYSQLX_UNIX_ADDR=<span class="regexp">/usr/local</span><span class="regexp">/mysql57/mysqlx</span>.sock \</span></span><br><span class="line"><span class="ruby">-DMYSQL_DATADIR=<span class="regexp">/usr/local</span><span class="regexp">/mysql57/data</span> \</span></span><br><span class="line"><span class="ruby">-DSYSCONFDIR=<span class="regexp">/usr/local</span><span class="regexp">/mysql57/etc</span> \</span></span><br><span class="line"><span class="ruby">-DWITH_BOOST=<span class="regexp">/usr/local</span><span class="regexp">/download/mysql</span>-<span class="number">5.7</span>.<span class="number">22</span>/boost/boost_1_59_<span class="number">0</span></span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">注意这一项：这个是你 boost 下载好的目录，我的这个版本的 MySQL 解压后对应的目录中有这个</span></span><br><span class="line"><span class="ruby">-DWITH_BOOST=<span class="regexp">/usr/local</span><span class="regexp">/download/mysql</span>-<span class="number">5.7</span>.<span class="number">22</span>/boost/boost_1_59_<span class="number">0</span></span></span><br><span class="line"><span class="ruby">注意看编译报错信息,每次出现缺少包,安装完缺少的包,重新解压新的mysql压缩包</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">make    <span class="comment">#需要很长时间</span></span></span><br><span class="line"><span class="ruby">make install</span></span><br></pre></td></tr></table></figure><p><img src="/img/centos/mysql/mysql_cmake.png" alt="mysql cmake" title="mysql cmake"></p><p><img src="/img/centos/mysql/make_success.png" alt="make_success" title="mysql success"></p><h3 id="初始化mysql"><a href="#初始化mysql" class="headerlink" title="初始化mysql"></a>初始化mysql</h3><h4 id="创建-MySQL-组跟用户"><a href="#创建-MySQL-组跟用户" class="headerlink" title="创建 MySQL 组跟用户"></a>创建 MySQL 组跟用户</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd mysql</span><br><span class="line">useradd -r -g mysql -s <span class="regexp">/bin/</span><span class="keyword">false</span> mysql</span><br></pre></td></tr></table></figure><h4 id="更改-mysql-目录权限"><a href="#更改-mysql-目录权限" class="headerlink" title="更改 mysql 目录权限"></a>更改 mysql 目录权限</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/mysql57</span><br><span class="line"></span><br><span class="line">touch mysql.sock</span><br><span class="line">chmod -R <span class="number">777</span> mysql.sock</span><br><span class="line"></span><br><span class="line">chown -R mysql .</span><br><span class="line">chgrp -R mysql .</span><br></pre></td></tr></table></figure><h4 id="初始化-mysql-，-生成-root-用户临时密码，"><a href="#初始化-mysql-，-生成-root-用户临时密码，" class="headerlink" title="初始化 mysql ， 生成 root 用户临时密码，"></a>初始化 mysql ， 生成 root 用户临时密码，</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">初始化要是操作出问题,可以删掉当前目录文件,然后到编译目录先 make <span class="keyword">install</span> 可以重新生成文件</span><br><span class="line">此时要删除 系统中生成的my.cnf 文件 [/etc/my.cnf   /etc/my.cnf.d  /etc/my.cnf.d/mysql-clients.cnf ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">bin</span>/mysqld <span class="comment">--initialize --user=mysql</span></span><br><span class="line"></span><br><span class="line">通过mysqld初始化<span class="keyword">data</span>目录时，如果使用<span class="comment">--initialize选项，则会为'root'@'localhost'用户创建一个随机密码。该密码会打印在控制台，如下所示行中末尾就是临时密码：</span></span><br><span class="line"></span><br><span class="line"><span class="number">2019</span><span class="number">-05</span><span class="number">-09</span>T11:<span class="number">41</span>:<span class="number">55.724145</span>Z <span class="number">1</span> [Note] A <span class="keyword">temporary</span> <span class="keyword">password</span> <span class="keyword">is</span> <span class="keyword">generated</span> <span class="keyword">for</span> root@localhost: yfa!II_T%<span class="number">7</span>dU</span><br><span class="line"></span><br><span class="line">*****************初始化一个空密码，使用initialize-insecure ****************</span><br><span class="line"><span class="keyword">bin</span>/mysqld <span class="comment">--initialize-insecure --user=mysql</span></span><br></pre></td></tr></table></figure><p><img src="/img/centos/mysql/mysql_init.png" alt="mysql init" title="mysql init"></p><h3 id="启动mysql"><a href="#启动mysql" class="headerlink" title="启动mysql"></a>启动mysql</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">!!!如果遇到启动报错记得杀死进程重新启动!!!</span><br><span class="line"><span class="keyword">ps</span> -aux | <span class="keyword">grep</span> mysql</span><br><span class="line">pkill -<span class="number">9</span> mysql</span><br><span class="line"><span class="keyword">ps</span> -aux | <span class="keyword">grep</span> mysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">support-<span class="keyword">files</span>/mysql.server start  #启动报错,没有报错则不用执行下面创建文件</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> /var/<span class="built_in">log</span>/mariadb</span><br><span class="line">touch /var/<span class="built_in">log</span>/mariadb/mariadb.<span class="built_in">log</span></span><br><span class="line">chown -R mysq<span class="variable">l:mysql</span> /var/<span class="built_in">log</span>/mariadb/</span><br><span class="line"></span><br><span class="line">再次启动:</span><br><span class="line">support-<span class="keyword">files</span>/mysql.server start   #启动成功</span><br></pre></td></tr></table></figure><p><img src="/img/centos/mysql/mysql_start.png" alt="mysql start" title="mysql start"></p><h3 id="登录mysql-修改密码"><a href="#登录mysql-修改密码" class="headerlink" title="登录mysql 修改密码"></a>登录mysql 修改密码</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">bin/mysql -u root -p</span><br><span class="line">alter <span class="keyword">user</span> <span class="string">'root'</span>@<span class="string">'localhost'</span> identified by <span class="string">'new_password'</span>;  <span class="comment">#修改密码</span></span><br><span class="line">修改完重启mysql 或者 刷新</span><br><span class="line">support-files/mysql.server stop   或者</span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line">----------------------</span><br><span class="line">show databases;</span><br><span class="line">use mysql;</span><br><span class="line">show tables;</span><br><span class="line">select * <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line">select Host,<span class="keyword">User</span> <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line">select Host,<span class="keyword">User</span>,authentication_string <span class="keyword">from</span> <span class="keyword">user</span>;</span><br><span class="line">*************************************************************</span><br><span class="line">我这里设置密码： <span class="number">123456</span> 做测试，实际中设置你认为安全的密码</span><br><span class="line">方法<span class="number">1</span>：alter <span class="keyword">user</span> <span class="string">'root'</span>@<span class="string">'localhost'</span> identified by <span class="string">'123456'</span>;</span><br><span class="line">方法<span class="number">2</span>：set password=password(<span class="string">'123456'</span>);</span><br><span class="line">方法<span class="number">3</span>：update <span class="keyword">user</span> set authentication_string=password(<span class="string">'123456'</span>) where <span class="keyword">user</span>=<span class="string">'root'</span>;</span><br><span class="line">( 不建议使用方法<span class="number">3</span>,SQL会记录到日志中 )</span><br><span class="line"></span><br><span class="line">这里如果不重新设置密码，系统会一直提示：</span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">ERROR <span class="number">1820</span> (HY000): You must reset your password using ALTER <span class="keyword">USER</span> statement before executing this statement.</span><br><span class="line"></span><br><span class="line">****其他****</span><br><span class="line">ALTER <span class="keyword">USER</span> <span class="string">'root'</span>@<span class="string">'localhost'</span> PASSWORD EXPIRE;  <span class="comment">#使密码过期</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>mysql -Documentation  手册</title>
      <link href="/2019/04/18/mysql/documentation/"/>
      <url>/2019/04/18/mysql/documentation/</url>
      <content type="html"><![CDATA[<h3 id="sql"><a href="#sql" class="headerlink" title="sql"></a>sql</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">SELECT PASSWORD(&apos;mypass&apos;);   #生成的密码值</span><br><span class="line"></span><br><span class="line">SHOW STATUS;  </span><br><span class="line">SHOW STATUS LIKE &apos;Table%&apos;;</span><br><span class="line"></span><br><span class="line">SHOW VARIABLES;  </span><br><span class="line">SHOW VARIABLES LIKE &apos;datadir&apos;;</span><br><span class="line">SHOW VARIABLES LIKE &apos;have_symlink&apos;;</span><br><span class="line">SHOW VARIABLES LIKE &apos;host_cache_size&apos;;</span><br><span class="line"></span><br><span class="line">SET GLOBAL host_cache_size=300;</span><br><span class="line"></span><br><span class="line">SELECT &apos;hello&apos;, &apos;&quot;hello&quot;&apos;, &apos;&quot;&quot;hello&quot;&quot;&apos;, &apos;hel&apos;&apos;lo&apos;, &apos;\&apos;hello&apos;;</span><br><span class="line">SELECT &quot;hello&quot;, &quot;&apos;hello&apos;&quot;, &quot;&apos;&apos;hello&apos;&apos;&quot;, &quot;hel&quot;&quot;lo&quot;, &quot;\&quot;hello&quot;;</span><br><span class="line"></span><br><span class="line">SET @t1=1, @t2=2, @t3:=4; #赋值</span><br><span class="line">SELECT @t1, @t2, @t3, @t4 := @t1+@t2+@t3;</span><br><span class="line"></span><br><span class="line">SET NAMES &apos;utf8&apos;;</span><br><span class="line">SHOW CHARACTER SET;</span><br><span class="line">USE test;</span><br><span class="line">SELECT @@character_set_database, @@collation_database;</span><br><span class="line"></span><br><span class="line">SELECT USER();</span><br></pre></td></tr></table></figure><h3 id="访问控制阶段1-2"><a href="#访问控制阶段1-2" class="headerlink" title="访问控制阶段1,2"></a>访问控制阶段1,2</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">!!! 用户名和密码为空危险 !!!</span><br><span class="line">!!!如果User列值为非空，则传入连接中的用户名必须完全匹配。如果 User值为空，则它匹配任何用户名</span><br><span class="line"></span><br><span class="line">!!!该authentication_string列可以为空白。这不是通配符，并不表示任何密码匹配。这意味着用户必须在不指定密码的情况下进行连接</span><br><span class="line"></span><br><span class="line">## 查看当前登录用户</span><br><span class="line">SELECT CURRENT_USER();</span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/doc/refman/5.7/en/connection-access.html" title="访问控制阶段1" target="_blank" rel="noopener">访问控制阶段1</a></p><h3 id="添加账号-分配权限和删除账号"><a href="#添加账号-分配权限和删除账号" class="headerlink" title="添加账号,分配权限和删除账号"></a>添加账号,分配权限和删除账号</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">创建用户授权</span><br><span class="line">GRANT ALL PRIVILEGES ON *.* TO &apos;fei&apos;@&apos;%&apos; IDENTIFIED BY &apos;123456&apos; WITH GRANT OPTION;   </span><br><span class="line">FLUSH   PRIVILEGES;</span><br><span class="line"></span><br><span class="line">撤销账户权限</span><br><span class="line">REVOKE ALL PRIVILEGES  ON  *.*  FROM &apos;fei&apos;@&apos;%&apos;;</span><br><span class="line">FLUSH   PRIVILEGES;</span><br><span class="line"></span><br><span class="line">删除账号</span><br><span class="line">DROP USER &apos;fei&apos;@&apos;%&apos;;</span><br><span class="line">FLUSH   PRIVILEGES;</span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/doc/refman/5.7/en/creating-accounts.html" title="6.2.7添加帐户，分配权限和删除帐户" target="_blank" rel="noopener">6.2.7添加帐户，分配权限和删除帐户</a></p><h3 id="数据库备份和恢复"><a href="#数据库备份和恢复" class="headerlink" title="数据库备份和恢复"></a>数据库备份和恢复</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">创建数据库指定数据库字符集utf8mb4  排序规则 utf8mb4_general_ci ; mysql8有些字符集在低版本mysql没有</span><br><span class="line"></span><br><span class="line">#使用mysqldump以SQL格式转储数据</span><br><span class="line">/data/server/mysql/bin/mysqldump -h127.0.0.1 -uvagrant -p  --databases fei fei02 &gt;/data/web/mysql_dump/dump.sql</span><br><span class="line"></span><br><span class="line">./mysqldump -h127.0.0.1 -uvagrant -p  --databases fei fei02 &gt;/data/web/mysql_dump/dump.sql</span><br><span class="line"></span><br><span class="line">#重新加载SQL格式备份</span><br><span class="line">./mysql -h127.0.0.1 -uvagrant -p  &lt; /data/web/mysql_dump/dump.sql</span><br><span class="line"></span><br><span class="line">/data/server/mysql/bin/mysql -h127.0.0.1 -uvagrant -p  &lt; /data/web/mysql_dump/dump.sql</span><br><span class="line"></span><br><span class="line">source /data/dump.sql       ###这里没有&lt;符号</span><br><span class="line">source /data/web/mysql_dump/dump.sql</span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/doc/refman/5.7/en/mysqldump-sql-format.html&quot;使用mysqldump以SQL格式转储数据&quot;" target="_blank" rel="noopener">使用mysqldump以SQL格式转储数据</a></p><p>数据库备份脚本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">MYSQLDBUSERNAME=用户名</span><br><span class="line">MYSQLDBPASSWORD='用户密码'</span><br><span class="line">MYSQBASEDIR=/var/lib/mysql</span><br><span class="line">MYSQL=/usr/bin/mysql</span><br><span class="line">MYSQLDUMP=/usr/bin/mysqldump</span><br><span class="line">BACKDIR=/var/lib/mysql/DB/backup/mysqldump</span><br><span class="line"><span class="meta">#</span><span class="bash">DATEFORMATTYPE1=$(date +%Y-%m-%d)</span></span><br><span class="line">DateFormatType1=$(date +%Y-%m-%d)</span><br><span class="line"><span class="meta">#</span><span class="bash">DATEFORMATTYPE2=$(date +%Y%m%d%H%M%S)</span></span><br><span class="line">DateFormatType2=$(date +%Y%m%d%H:%M:%S)</span><br><span class="line">[ -d $MYSQBASEDIR ] &amp;&amp; MYSQDATADIR=$MYSQBASEDIR || MYSQDATADIR=/var/lib/mysql</span><br><span class="line">[ -x $MYSQL ] || MYSQL=mysql</span><br><span class="line">[ -x $MYSQLDUMP ] || MYSQLDUMP=mysqldump</span><br><span class="line">[ -d $&#123;BACKDIR&#125; ] || mkdir -p $&#123;BACKDIR&#125;</span><br><span class="line">[ -d $&#123;BACKDIR&#125;/$&#123;DateFormatType1&#125; ] || mkdir $&#123;BACKDIR&#125;/$&#123;DateFormatType1&#125;</span><br><span class="line">DBLIST=`ls -p $MYSQDATADIR | grep / |tr -d /`</span><br><span class="line">for DBNAME in $DBLIST</span><br><span class="line">    do $&#123;MYSQLDUMP&#125; --user=$&#123;MYSQLDBUSERNAME&#125; --password=$&#123;MYSQLDBPASSWORD&#125; --routines --events --triggers --single-transaction --flush-logs --databases $&#123;DBNAME&#125; | gzip &gt; $&#123;BACKDIR&#125;/$&#123;DateFormatType1&#125;/$&#123;DBNAME&#125;-backup-$&#123;DateFormatType2&#125;.sql.gz</span><br><span class="line">    [ $? -eq 0 ] &amp;&amp; echo "$&#123;DBNAME&#125; has been backuped successful" || echo "$&#123;DBNAME&#125; has been backuped failed"</span><br><span class="line">    /bin/sleep 5</span><br><span class="line">done</span><br></pre></td></tr></table></figure><h3 id="mysql查看二进制日志文件"><a href="#mysql查看二进制日志文件" class="headerlink" title="mysql查看二进制日志文件"></a>mysql查看二进制日志文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#查看mysql二进制日志</span><br><span class="line">/data/server/mysql/bin/mysqlbinlog -d demodb binlog.000004</span><br></pre></td></tr></table></figure><h3 id="EXPLAIN"><a href="#EXPLAIN" class="headerlink" title="EXPLAIN"></a>EXPLAIN</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/doc/refman/5.7/en/explain-output.html&quot;EXPLAIN  输出格式&quot;" target="_blank" rel="noopener">EXPLAIN  输出格式</a></p><h3 id="优化锁定操作"><a href="#优化锁定操作" class="headerlink" title="优化锁定操作"></a>优化锁定操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SHOW STATUS LIKE &apos;Table%&apos;;   #查看表上锁争用</span><br><span class="line"></span><br><span class="line">MyISAM 表锁</span><br><span class="line">LOCK TABLES t1 WRITE, temp_t1 WRITE;</span><br><span class="line">UNLOCK TABLES;</span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/doc/refman/5.7/en/table-locking.html" title="表锁问题" target="_blank" rel="noopener">表锁定问题</a></p><h3 id="字符集"><a href="#字符集" class="headerlink" title="字符集"></a>字符集</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">USE test;</span><br><span class="line">SELECT @@character_set_database, @@collation_database;</span><br><span class="line"></span><br><span class="line">utf8mb4：Unicode字符集的UTF-8编码，每个字符使用一到四个字节。</span><br><span class="line">utf8mb3：Unicode字符集的UTF-8编码，每个字符使用一到三个字节。</span><br><span class="line">utf8：别名 utf8mb3。</span><br></pre></td></tr></table></figure><h3 id="数据类型-mysql5-7-8-新类型-json"><a href="#数据类型-mysql5-7-8-新类型-json" class="headerlink" title="数据类型  mysql5.7.8 新类型 json"></a>数据类型  mysql5.7.8 新类型 json</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE t1 (jdoc JSON);</span><br><span class="line">INSERT INTO t1 VALUES(&apos;&#123;&quot;key1&quot;: &quot;value1&quot;, &quot;key2&quot;: &quot;value2&quot;&#125;&apos;);</span><br><span class="line">SELECT JSON_OBJECT(&apos;key1&apos;, 1, &apos;key2&apos;, &apos;abc&apos;);</span><br></pre></td></tr></table></figure><h3 id="控制运算符-case-if"><a href="#控制运算符-case-if" class="headerlink" title="控制运算符 case if"></a>控制运算符 <code>case</code> <code>if</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT CASE 1 WHEN 1 THEN &apos;one&apos;</span><br><span class="line">    -&gt; WHEN 2 THEN &apos;two&apos; ELSE &apos;more&apos; END;</span><br><span class="line">    -&gt; &apos;one&apos;</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT CASE 2 WHEN 1 THEN &apos;one&apos;</span><br><span class="line">    -&gt; WHEN 2 THEN &apos;two&apos; ELSE &apos;more&apos; END;</span><br><span class="line">    -&gt; &apos;two&apos;</span><br><span class="line">    </span><br><span class="line">mysql&gt; SELECT CASE 3 WHEN 1 THEN &apos;one&apos;</span><br><span class="line">    -&gt; WHEN 2 THEN &apos;two&apos; ELSE &apos;more&apos; END;</span><br><span class="line">    -&gt; &apos;more&apos;    </span><br><span class="line">-----------------</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT CASE WHEN 1&gt;0 THEN &apos;true&apos; ELSE &apos;false&apos; END;</span><br><span class="line">    -&gt; &apos;true&apos;</span><br><span class="line">    </span><br><span class="line">--------------</span><br><span class="line">mysql&gt; SELECT IF(1&gt;2,2,3);</span><br><span class="line">    -&gt; 3</span><br></pre></td></tr></table></figure><h3 id="全文搜索功能"><a href="#全文搜索功能" class="headerlink" title="全文搜索功能"></a>全文搜索功能</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#自然语言全文搜索</span><br><span class="line">mysql&gt; SELECT * FROM articles</span><br><span class="line">        WHERE MATCH (title,body)</span><br><span class="line">        AGAINST (&apos;database&apos; IN NATURAL LANGUAGE MODE);</span><br><span class="line"></span><br><span class="line">#布尔全文搜索</span><br><span class="line">mysql&gt; SELECT * FROM articles WHERE MATCH (title,body)</span><br><span class="line">    AGAINST (&apos;+MySQL -YourSQL&apos; IN BOOLEAN MODE);</span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/doc/refman/5.7/en/fulltext-search.html" title="全文搜索功能" target="_blank" rel="noopener">全文搜索功能</a></p><h3 id="show-语法"><a href="#show-语法" class="headerlink" title="show 语法"></a>show 语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SHOW COLUMNS FROM city; #显示列</span><br><span class="line">SHOW CREATE DATABASE test; #显示创建库语法</span><br><span class="line">SHOW CREATE TABLE  student2; #显示创建表语法</span><br><span class="line">SHOW INDEX FROM  test; #显示索引</span><br></pre></td></tr></table></figure><h3 id="innoDB-表移动或者复制"><a href="#innoDB-表移动或者复制" class="headerlink" title="innoDB 表移动或者复制"></a>innoDB 表移动或者复制</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">方法一、 复制数据文件(冷备份)</span><br><span class="line">01) 在新的库中新建和原来一样的表 , 在data目录下找到创建的表,删除 .ibd 文件</span><br><span class="line">02) 执行: ALTER TABLE tbl_name DISCARD TABLESPACE;</span><br><span class="line">03) 复制 .ibd 文件,到新刚才删除的位置</span><br><span class="line">04) 执行 ALTER TABLE tbl_name IMPORT TABLESPACE;  告诉InnoDb使用新的.bd文件</span><br><span class="line">方法二、 导出和导入（热备份 mysqldump）</span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-migration.html" title="innoDB 表移动或者复制" target="_blank" rel="noopener">innoDB 表移动或者复制</a></p><h3 id="innodb-锁"><a href="#innodb-锁" class="headerlink" title="innodb 锁"></a>innodb 锁</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">共享锁(S锁) ShareLock</span><br><span class="line">排他锁(X锁) ExclusiveLock</span><br><span class="line"></span><br><span class="line">区别:</span><br><span class="line">如果事务T对数据A加上共享锁，则其他事务只能对A再加共享锁，不能加排它锁。只有事务T可以对A进行读取和修改，其他事务只能读取数据而不能修改数据。</span><br><span class="line">如果事务T对数据A加上排它锁，只有事务T可以对A进行读取和修改，其他任何事务都不能对A进行读取和修改</span><br><span class="line"></span><br><span class="line"> SHOW ENGINE INNODB STATUS</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> #解除锁</span><br><span class="line"> SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCKS; #查看当前锁定的事务</span><br><span class="line"> SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCK_WAITS; #查看当前等锁的事务</span><br><span class="line"> SELECT * FROM INFORMATION_SCHEMA.INNODB_TRX; #查看下在锁的事务 </span><br><span class="line"> kill 线程ID   #杀死进程id（就是上面命令的trx_mysql_thread_id列）</span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-deadlocks-handling.html" title="innodb处理死锁" target="_blank" rel="noopener">innodb处理死锁</a></p><h3 id="主从复制"><a href="#主从复制" class="headerlink" title="主从复制"></a>主从复制</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 在主服务器上，您必须启用二进制日志记录并配置唯一的服务器ID</span><br><span class="line"># 在要连接到主服务器的每个从服务器上，必须配置唯一的服务器ID</span><br><span class="line"># 在读取二进制日志以进行复制时，为主服务器创建一个单独的用户</span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/doc/refman/5.7/en/replication-howto.html" title="基于二进制日志复制" target="_blank" rel="noopener">基于二进制文件复制</a></p><h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">https://dev.mysql.com/doc/refman/5.7/en/stored-routines-syntax.html</span><br><span class="line">CREATE PROCEDURE </span><br><span class="line">CREATE FUNCTION</span><br><span class="line"></span><br><span class="line">CALL</span><br><span class="line"></span><br><span class="line">DROP PROCEDURE</span><br><span class="line">DROP FUNCTION</span><br><span class="line"></span><br><span class="line">ALTER PROCEDURE</span><br><span class="line">ALTER FUNCTION</span><br><span class="line"></span><br><span class="line">#一个库中不能出现2个相同的触发器</span><br><span class="line">#创建的触发器在数据库 INFORMATION_SCHEMA 的 TRIGGERS 表中可以看到</span><br><span class="line">#SELECT * FROM INFORMATION_SCHEMA.TRIGGERS</span><br><span class="line"></span><br><span class="line">mysql&gt; CREATE TABLE account (acct_num INT, amount DECIMAL(10,2));</span><br><span class="line"></span><br><span class="line">mysql&gt; CREATE TRIGGER ins_sum BEFORE INSERT ON account</span><br><span class="line">       FOR EACH ROW SET @sum = @sum + NEW.amount;</span><br><span class="line"></span><br><span class="line">mysql&gt; SET @sum = 0;</span><br><span class="line">mysql&gt; INSERT INTO account VALUES(137,14.98),(141,1937.50),(97,-100.00);</span><br><span class="line">mysql&gt; SELECT @sum AS &apos;Total amount inserted&apos;;</span><br><span class="line"></span><br><span class="line">#查看创建的触发器</span><br><span class="line">mysql&gt; SELECT * FROM INFORMATION_SCHEMA.TRIGGERS</span><br><span class="line">       WHERE TRIGGER_SCHEMA=&apos;test&apos; AND TRIGGER_NAME=&apos;ins_sum&apos;</span><br><span class="line">       </span><br><span class="line">#查看创建触发器语法       </span><br><span class="line">mysql&gt; SHOW CREATE TRIGGER test.ins_sum     </span><br><span class="line"></span><br><span class="line">#删除触发器</span><br><span class="line">mysql&gt; DROP TRIGGER test.ins_sum;</span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/doc/refman/5.7/en/trigger-syntax.html" title="触发语法和示例" target="_blank" rel="noopener">触发语法和示例</a></p><h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE t (qty INT, price INT);</span><br><span class="line">mysql&gt; INSERT INTO t VALUES(3, 50), (5, 60);</span><br><span class="line">mysql&gt; CREATE VIEW v AS SELECT qty, price, qty*price AS value FROM t;</span><br><span class="line">mysql&gt; SELECT * FROM v;</span><br><span class="line">mysql&gt; SELECT * FROM v WHERE qty = 5;</span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/doc/refman/5.7/en/view-syntax.html" title="视图" target="_blank" rel="noopener">视图</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-drools 笔记</title>
      <link href="/2019/04/10/drools/drools01/"/>
      <url>/2019/04/10/drools/drools01/</url>
      <content type="html"><![CDATA[<h3 id="逗号-comma"><a href="#逗号-comma" class="headerlink" title="逗号 comma"></a>逗号 comma</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">逗号字符用于分割约束,他具有隐含的 AND 连接语义</span><br><span class="line"><span class="comment">// Person is at least 50 and weighs at least 80 kg</span></span><br><span class="line">Person( age &gt; <span class="number">50</span>, weight &gt; <span class="number">80</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">// Person is at least 50, weighs at least 80 kg and is taller than 2 meter.</span></span><br><span class="line">Person( age &gt; <span class="number">50</span>, weight &gt; <span class="number">80</span>, height &gt; <span class="number">2</span> )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">!!!但是</span><br><span class="line">逗号不能嵌入到复合约束表达式中,例如括号</span><br><span class="line">Person( ( age &gt; <span class="number">50</span>, weight &gt; <span class="number">80</span> ) || height &gt; <span class="number">2</span> ) <span class="comment">// Do NOT do this: compile error</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Use this instead</span></span><br><span class="line">Person( ( age &gt; <span class="number">50</span> &amp;&amp; weight &gt; <span class="number">80</span> ) || height &gt; <span class="number">2</span> )</span><br></pre></td></tr></table></figure><p> <a href="https://docs.jboss.org/drools/release/7.20.0.Final/drools-docs/html_single/index.html#_comma_separated_and" title="Comma separated AND" target="_blank" rel="noopener">Comma separated AND</a></p><h3 id="嵌套对象的分组访问器"><a href="#嵌套对象的分组访问器" class="headerlink" title="嵌套对象的分组访问器"></a>嵌套对象的分组访问器</h3><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">一下<span class="number">2</span>个等效,  注意不要丢了!!!点!!!</span><br><span class="line">Person( name == <span class="string">"mark"</span>, address.city == <span class="string">"london"</span>, address.country == <span class="string">"uk"</span> )</span><br><span class="line">Person( name == <span class="string">"mark"</span>, address.( city == <span class="string">"london"</span>, country == <span class="string">"uk"</span>) )</span><br></pre></td></tr></table></figure><p><a href="https://docs.jboss.org/drools/release/7.20.0.Final/drools-docs/html_single/index.html#_grouped_accessors_for_nested_objects" target="_blank" rel="noopener">Grouped accessors for nested objects</a></p><h3 id="操作符优先级"><a href="#操作符优先级" class="headerlink" title="操作符优先级"></a>操作符优先级</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(nested) property access    .</span><br><span class="line">List/Map access            [ ]</span><br><span class="line">constraint binding   :</span><br><span class="line">multiplicative       * / % </span><br><span class="line">additive             + - </span><br><span class="line"><span class="built_in">shift</span>                &lt;&lt; &gt;&gt; &gt;&gt;&gt; </span><br><span class="line">relational           &lt; &gt; &lt;= &gt;= instanceof </span><br><span class="line">equality             == !=</span><br><span class="line">bit-wise non-short circuiting AND               &amp; </span><br><span class="line">bit-wise non-short circuiting exclusive OR^ </span><br><span class="line">bit-wise non-short circuiting inclusive OR| </span><br><span class="line">logical AND&amp;&amp; </span><br><span class="line">logical OR|| </span><br><span class="line">ternary? : </span><br><span class="line">Comma separated AND,</span><br></pre></td></tr></table></figure><p><a href="https://docs.jboss.org/drools/release/7.20.0.Final/drools-docs/html_single/index.html#_grouped_accessors_for_nested_objects" title="Operators priority 操作符优先级 。⌘" target="_blank" rel="noopener">Operators priority 操作符优先级 。⌘</a></p><p> <a href="http://support.streamx.co/intro/basic-drools-rule-language-syntax-cont" title="基本Drools规则语言语法" target="_blank" rel="noopener">基本Drools规则语言语法</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-Apache 压缩</title>
      <link href="/2019/04/02/apache/apache%E5%8E%8B%E7%BC%A9/"/>
      <url>/2019/04/02/apache/apache%E5%8E%8B%E7%BC%A9/</url>
      <content type="html"><![CDATA[<p>Apache  压缩</p><h3 id="压缩-开启模块"><a href="#压缩-开启模块" class="headerlink" title="压缩 开启模块"></a>压缩 开启模块</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LoadModule deflate_module modules/mod_deflate.so</span><br><span class="line">LoadModule headers_module modules/mod_headers.so</span><br><span class="line">LoadModule filter_module modules/mod_filter.so</span><br></pre></td></tr></table></figure><h3 id="压缩配置"><a href="#压缩配置" class="headerlink" title="压缩配置"></a>压缩配置</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;IfModule mod_deflate.c&gt;</span><br><span class="line">     <span class="comment">#告诉浏览器内容进行压缩</span></span><br><span class="line">     <span class="comment"># https://httpd.apache.org/docs/2.4/mod/mod_deflate.html#deflatecompressionlevel</span></span><br><span class="line">     SetOutputFilter DEFLATE</span><br><span class="line"></span><br><span class="line">     <span class="comment">#压缩级别1--9,默认为6</span></span><br><span class="line">     <span class="comment"># https://httpd.apache.org/docs/2.4/mod/mod_deflate.html#deflatecompressionlevel</span></span><br><span class="line">     DeflateCompressionLevel <span class="number">6</span></span><br><span class="line"></span><br><span class="line">     <span class="comment">#不对那些进行压缩</span></span><br><span class="line">     <span class="comment"># https://httpd.apache.org/docs/2.4/mod/mod_setenvif.html#setenvifnocase</span></span><br><span class="line">     SetEnvIfNoCase Request_URI .(?<span class="symbol">:gif|jpe?g|png</span>)<span class="variable">$ </span>no-gzip dont-vary</span><br><span class="line">     SetEnvIfNoCase Request_URI .(?<span class="symbol">:exe|t?gz|zip|bz2|sit|rar</span>)<span class="variable">$ </span>no-gzip dont-vary</span><br><span class="line">     SetEnvIfNoCase Request_URI .(?<span class="symbol">:pdf|mov|avi|mp3|mp4|rm</span>)<span class="variable">$ </span>no-gzip dont-vary</span><br><span class="line"></span><br><span class="line">     <span class="comment">#对那些压缩</span></span><br><span class="line">     <span class="comment"># https://httpd.apache.org/docs/2.4/mod/mod_filter.html#addoutputfilterbytype</span></span><br><span class="line">     AddOutputFilterByType DEFLATE text/*</span><br><span class="line">     AddOutputFilterByType DEFLATE application/ms* application/vnd* application/postscript application/javascript application/x-javascript</span><br><span class="line">     AddOutputFilterByType DEFLATE application/x-httpd-php application/x-httpd-fastphp</span><br><span class="line"></span><br><span class="line">     <span class="comment">#解决一下兼容问题</span></span><br><span class="line">     <span class="comment"># https://httpd.apache.org/docs/2.4/mod/mod_setenvif.html#browsermatch</span></span><br><span class="line">     BrowserMatch ^Mozilla/<span class="number">4</span> gzip-only-text/html</span><br><span class="line">     BrowserMatch ^Mozilla/<span class="number">4.0</span>[<span class="number">678</span>] no-gzip</span><br><span class="line">     BrowserMatch \bMSIE !no-gzip !gzip-only-text/html</span><br><span class="line">&lt;<span class="regexp">/IfModule&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Apache </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Apache </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>linux-vue vue-cli 使用</title>
      <link href="/2019/03/30/ubuntu/linux_ubuntu_vue/"/>
      <url>/2019/03/30/ubuntu/linux_ubuntu_vue/</url>
      <content type="html"><![CDATA[<p>!!! node vue 在linux中使用注意环境变量,用户权限</p><p>本文的主要以vue3.0以上版本</p><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> install -g @vue/cli-service-<span class="built_in">global</span>  <span class="comment">#全局安装</span></span><br><span class="line">vue create hello-world    <span class="comment">#创建项目(在linux中注意权限和环境变量)</span></span><br><span class="line"><span class="built_in">npm</span> run serve  <span class="comment">#运行 or</span></span><br><span class="line">yarn serve  <span class="comment">#也可以运行 or</span></span><br><span class="line">npx vue-cli-service serve <span class="comment">#也可以运行</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/vue/run.png" alt="运行vue" title="运行vue"></p><p> <a href="https://cli.vuejs.org/zh/guide/prototyping.html" title="Vue CLI 官网" target="_blank" rel="noopener">Vue CLI 官网</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>linux -node 编译安装, 需要配置环境变量</title>
      <link href="/2019/03/27/ubuntu/linux_ubuntu_node/"/>
      <url>/2019/03/27/ubuntu/linux_ubuntu_node/</url>
      <content type="html"><![CDATA[<p>node</p><h3 id="源码编译安装node"><a href="#源码编译安装node" class="headerlink" title="源码编译安装node"></a>源码编译安装node</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget https://nodejs.org/dist/v10.<span class="number">15.3</span>/<span class="keyword">node</span><span class="title">-v10</span>.<span class="number">15.3</span>.tar.gz</span><br><span class="line">tar -zxvf  <span class="keyword">node</span><span class="title">-v10</span>.<span class="number">15.3</span>.tar.gz</span><br><span class="line">cd <span class="keyword">node</span><span class="title">-v10</span>.<span class="number">15.3</span></span><br><span class="line">./configure --<span class="attr">prefix=</span>/data/server/<span class="keyword">node</span>      <span class="title">[有警告,先不用管]</span></span><br><span class="line"><span class="title">make</span>                             [编译时间比较长,编译<span class="number">1</span>个小时]</span><br><span class="line">make install</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/node/warning.png" alt="configure 忽略警告" title="configure 忽略警告"></p><p>安装完测试,并创建软连接</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/data/server/<span class="keyword">node</span><span class="title">/bin</span>/<span class="keyword">node</span> <span class="title">-v</span>   <span class="comment">#查看node版本</span></span><br><span class="line">/data/server/<span class="keyword">node</span><span class="title">/bin</span>/npm -v    <span class="comment">#查看npm版本</span></span><br><span class="line">这时候输出 npm -v 没有,原因npm需要通过<span class="keyword">node</span><span class="title">来执行,所以解决方法有2</span>种</span><br><span class="line"><span class="number">01</span>) 创建软连接</span><br><span class="line">ln -sv /data/server/<span class="keyword">node</span><span class="title">/bin</span>/<span class="keyword">node</span> <span class="title">/usr</span>/local/bin/<span class="keyword">node</span><span class="title"></span></span><br><span class="line"><span class="title">ln</span> -sv /data/server/<span class="keyword">node</span><span class="title">/bin</span>/npm /usr/local/bin/npm</span><br><span class="line"></span><br><span class="line"><span class="number">02</span>) 修改 vim /etc/profile 添加环境变量</span><br><span class="line"><span class="attr">PATH=</span>$PATH:/data/server/<span class="keyword">node</span><span class="title">/bin</span></span><br><span class="line">export PATH</span><br><span class="line">然后执行source /etc/profile 或者 ./profile 使其生效; 执行完后可以通过 echo $PATH  命令查看环境变量</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/node/npm_ln.png" alt="npm  创建软连接" title="npm  创建软连接"></p><h3 id="二进制安装node"><a href="#二进制安装node" class="headerlink" title="二进制安装node"></a>二进制安装node</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://nodejs.org/dist/v10.<span class="number">15.3</span>/<span class="keyword">node</span><span class="title">-v10</span>.<span class="number">15.3</span>-linux-x64.tar.xz</span><br><span class="line">tar -xvf <span class="keyword">node</span><span class="title">-v10</span>.<span class="number">15.3</span>-linux-x64.tar.xz -C /data/server</span><br><span class="line">解压后可以直接使用,需要配置环境变量,方法同上</span><br></pre></td></tr></table></figure><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">npm</span> config list   <span class="comment">#查看npm配置信息</span></span><br><span class="line"><span class="built_in">npm</span> config edit   <span class="comment">#编辑配置信息</span></span><br><span class="line"><span class="built_in">npm</span> config get cache  <span class="comment">#查看npm缓存目录</span></span><br><span class="line"><span class="built_in">npm</span> config set cacat  <span class="comment">#设置缓存目录位置</span></span><br><span class="line"><span class="built_in">npm</span> config get registry  <span class="comment">#获取配置使用的地址</span></span><br><span class="line"><span class="built_in">npm</span> config set registry https:<span class="regexp">//</span>registry.<span class="built_in">npm</span>.taobao.org  <span class="comment">#设为淘宝地址</span></span><br><span class="line"></span><br><span class="line">windows中显示配置文件位置: C:\Users\Administrator\.npmrc </span><br><span class="line">ubuntu图中在用户: <span class="regexp">/home/fei/</span>.npmrc</span><br><span class="line"></span><br><span class="line">原文件内容:</span><br><span class="line">registry=http:<span class="regexp">//</span>registry.cnpmjs.org/</span><br><span class="line">修改淘宝地址:</span><br><span class="line">registry=https:<span class="regexp">//</span>registry.<span class="built_in">npm</span>.taobao.org</span><br><span class="line"></span><br><span class="line">----------</span><br><span class="line">淘宝nmp网址:  https:<span class="regexp">//</span><span class="built_in">npm</span>.taobao.org/</span><br><span class="line"><span class="built_in">npm</span> install -g cnpm --registry=https:<span class="regexp">//</span>registry.<span class="built_in">npm</span>.taobao.org   <span class="comment">#安装配置cnpm</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu16 --svn03 编译安装后使用03</title>
      <link href="/2019/03/27/ubuntu/linux_ubuntu_svn_03/"/>
      <url>/2019/03/27/ubuntu/linux_ubuntu_svn_03/</url>
      <content type="html"><![CDATA[<p>svn 多台服务器之间自动发布更新</p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-tar  打包文件</title>
      <link href="/2019/03/01/ubuntu/linux_DDU_tar/"/>
      <url>/2019/03/01/ubuntu/linux_DDU_tar/</url>
      <content type="html"><![CDATA[<p>首先要弄清两个概念：打包和压缩。打包是指将一大堆文件或目录变成一个总的文件；压缩则是将一个大的文件通过一些压缩算法变成一个小文件</p><h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar <span class="string">[选项]</span> <span class="string">[参数]</span></span><br></pre></td></tr></table></figure><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">C &lt;目录&gt;：这个选项用在解压缩，若要在特定目录解压缩，可以使用这个选项。</span></span><br><span class="line"><span class="ruby">-x或--extract或--get：从备份文件中还原文件</span></span><br><span class="line"><span class="ruby">-t或--list：列出备份文件的内容；</span></span><br><span class="line"><span class="ruby">-z或--gzip或--ungzip：通过gzip指令处理备份文件；</span></span><br><span class="line"><span class="ruby">-f&lt;备份文件&gt;或--file=&lt;备份文件&gt;：指定备份文件；</span></span><br><span class="line"><span class="ruby">-v或--verbose：显示指令执行过程；</span></span><br><span class="line"><span class="ruby">-j：支持bzip2解压文件；</span></span><br></pre></td></tr></table></figure><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><h4 id="普通打包"><a href="#普通打包" class="headerlink" title="普通打包"></a>普通打包</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -cvf aaa_ccc<span class="selector-class">.tar</span> aaa_bbb   #仅打包不压缩</span><br><span class="line">tar -tvf aaa_ccc<span class="selector-class">.tar</span>   #查看包里面文件</span><br><span class="line">tar -xvf aaa_ccc<span class="selector-class">.tar</span> -C /home/fei/web/  #解压到 /home/fei/web/ 目录下</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_tar/tar_cvf.png" alt="tar cvf" title="tar cvf"></p><h4 id="以-gzip-压缩"><a href="#以-gzip-压缩" class="headerlink" title="以 gzip 压缩"></a>以 gzip 压缩</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">tar -zcvf aaa_bbb<span class="selector-class">.tar</span><span class="selector-class">.gz</span> aaa_bbb   #打包后，以 gzip 压缩 </span><br><span class="line">tar -ztvf aaa_bbb<span class="selector-class">.tar</span><span class="selector-class">.gz</span>     #查看包里面文件</span><br><span class="line">tar -zxvf aaa_bbb<span class="selector-class">.tar</span><span class="selector-class">.gz</span> -C /home/fei/web/  #解压到 /home/fei/web/ 目录下</span><br><span class="line">tar -xvf aaa_bbb<span class="selector-class">.tar</span><span class="selector-class">.gz</span> -C /home/fei/web/  #没有参数z</span><br><span class="line"></span><br><span class="line">由于使用 gzip 压缩aaa_bbb<span class="selector-class">.tar</span><span class="selector-class">.gz</span> 的文件,所以查看的时候aaa_bbb<span class="selector-class">.tar</span><span class="selector-class">.gz</span>包内文件时,加上 z 这个参数</span><br><span class="line">tip: 在这里其实没有 z 这个参数有可以查看</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_tar/tar_cvf.png" alt="tar zcvf" title="tar zcvf"></p><h4 id="以-bzip2-压缩"><a href="#以-bzip2-压缩" class="headerlink" title="以 bzip2  压缩"></a>以 bzip2  压缩</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">tar -jcvf aaa_bbb<span class="selector-class">.tar</span><span class="selector-class">.bz2</span> aaa_bbb      #打包后，以 bzip2 压缩 </span><br><span class="line">tar -jtvf aaa_bbb<span class="selector-class">.tar</span><span class="selector-class">.bz2</span>                 #查看包里面文件</span><br><span class="line">tar -jxvf aaa_bbb<span class="selector-class">.tar</span><span class="selector-class">.bz2</span> -C /home/fei/web/  #解压到 /home/fei/web/ 目录下</span><br><span class="line">tar -xvf aaa_bbb<span class="selector-class">.tar</span><span class="selector-class">.bz2</span> -C /home/fei/web/  #没有参数j</span><br><span class="line"></span><br><span class="line">tip: 在这里其实没有 j 这个参数有可以查看</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_tar/tar_cvf.png" alt="tar jcvf" title="tar jcvf"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-maven  centos7</title>
      <link href="/2019/02/27/ubuntu/linux_ubuntu_maven/"/>
      <url>/2019/02/27/ubuntu/linux_ubuntu_maven/</url>
      <content type="html"><![CDATA[<h2 id="maven-Binary方式安装使用"><a href="#maven-Binary方式安装使用" class="headerlink" title="maven   Binary方式安装使用"></a>maven   Binary方式安装使用</h2><p>安装maven之前区别系统中安装了 JDK,  </p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">下载 maven </span><br><span class="line">http:<span class="regexp">//</span><span class="number">39.137</span>.<span class="number">67.79</span><span class="regexp">/mirror.bit.edu.cn/</span>apache<span class="regexp">/maven/m</span>aven-<span class="number">3</span><span class="regexp">/3.6.0/</span>binaries<span class="regexp">/apache-maven-3.6.0-bin.tar.gz</span></span><br></pre></td></tr></table></figure><h3 id="解压"><a href="#解压" class="headerlink" title="解压"></a>解压</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf apache-maven-<span class="number">3.6</span>.<span class="number">0</span>-bin<span class="selector-class">.tar</span><span class="selector-class">.gz</span> -C /data/server/</span><br></pre></td></tr></table></figure><h3 id="修改环境变量"><a href="#修改环境变量" class="headerlink" title="修改环境变量"></a>修改环境变量</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#set maven</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">M2_HOME</span>=/data/server/apache-maven-3.6.0</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$PATH</span>:$M2_HOME/bin</span><br></pre></td></tr></table></figure><h3 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source /etc<span class="built_in">/profile </span>   #使环境变量生效</span><br><span class="line">mvn -v</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/maven/maven_success.png" alt="root passwd" title="maven 成功"></p><h2 id="maven-source-方式安装使用"><a href="#maven-source-方式安装使用" class="headerlink" title="maven   source 方式安装使用"></a>maven   source 方式安装使用</h2>]]></content>
      
      
    </entry>
    
    <entry>
      <title>linux -wc</title>
      <link href="/2019/02/11/ubuntu/linux_ubuntu_wc/"/>
      <url>/2019/02/11/ubuntu/linux_ubuntu_wc/</url>
      <content type="html"><![CDATA[<p>Linux wc命令用于计算字数</p><p>…..</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">wc</span> -l  统计文件行数</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_wc/wc.png" alt="wc" title="wc"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-Apache 配置</title>
      <link href="/2019/02/01/apache/apache%E9%85%8D%E7%BD%AE/"/>
      <url>/2019/02/01/apache/apache%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<p>Apache  配置.. httpd.conf </p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><figure class="highlight apacheconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;VirtualHost *:80&gt;</span>  </span><br><span class="line">    <span class="comment">#官方文档 http://httpd.apache.org/docs/2.4/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#ServerAdmin webmaster@dummy-host.www.phpStudy.net  </span></span><br><span class="line">    <span class="attribute"><span class="nomarkup">DocumentRoot</span></span> <span class="string">"E:/selfweb/git_dev/test/"</span>  </span><br><span class="line">    <span class="attribute"><span class="nomarkup">ServerName</span></span> fei.apache.test</span><br><span class="line">    <span class="attribute">ServerAlias</span> fei.apache.test  </span><br><span class="line">    <span class="comment">#ErrorLog "logs/dummy-host.www.phpStudy.net-error.log"  </span></span><br><span class="line">    <span class="comment">#CustomLog "logs/dummy-host.www.phpStudy.net-access.log" common    </span></span><br><span class="line"></span><br><span class="line"><span class="section">&lt;Directory /&gt;</span></span><br><span class="line">    <span class="comment">#没有index文件显示目录</span></span><br><span class="line"><span class="attribute"><span class="nomarkup">Options</span></span> +Indexes +FollowSymLinks +ExecCGI  </span><br><span class="line"></span><br><span class="line"><span class="comment">#没有index不显示目录,禁止访问</span></span><br><span class="line"><span class="comment">#Options  -Indexes +FollowSymLinks    </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#是否禁用.htaccess 文件配置        </span></span><br><span class="line"><span class="attribute">AllowOverride</span> <span class="literal">All</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">#默认index.php index.html</span></span><br><span class="line">        <span class="attribute">DirectoryIndex</span> index.html index.php </span><br><span class="line"></span><br><span class="line"><span class="attribute"><span class="nomarkup">Order</span></span> allow,deny</span><br><span class="line"><span class="attribute"><span class="nomarkup">Allow</span></span> from <span class="literal">all</span></span><br><span class="line"><span class="attribute">Require</span> <span class="literal">all</span> granted</span><br><span class="line"></span><br><span class="line"><span class="comment">#404 重定向</span></span><br><span class="line"><span class="comment">#ErrorDocument 404 /test/404.html</span></span><br><span class="line"></span><br><span class="line"><span class="section">&lt;/Directory&gt;</span></span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure><h3 id="配置ssl-支持https-01"><a href="#配置ssl-支持https-01" class="headerlink" title="配置ssl,支持https 01"></a>配置ssl,支持https 01</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">编辑Apache根目录下 conf/httpd<span class="selector-class">.conf</span> 找到 </span><br><span class="line">LoadModule ssl_module modules/mod_ssl.so</span><br><span class="line">LoadModule socache_shmcb_module modules/mod_socache_shmcb.so</span><br><span class="line">和 </span><br><span class="line">Include conf/extra/httpd-ssl.conf</span><br><span class="line">去掉这<span class="number">3</span>行前面的注释</span><br></pre></td></tr></table></figure><p><img src="/img/apache/ssl_01.png" alt="ssl 模块" title="ssl 模块"></p><h3 id="配置ssl-支持https-02-1"><a href="#配置ssl-支持https-02-1" class="headerlink" title="配置ssl,支持https 02-1"></a>配置ssl,支持https 02-1</h3><figure class="highlight apacheconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">修改 httpd-ssl.conf 文件, a_public.crt  a.key  a_chain.crt 换成你对应的证书名字</span><br><span class="line"><span class="attribute">vim</span> /data/server/apache/conf/extra/httpd-ssl.conf</span><br><span class="line">内容如下:</span><br><span class="line"></span><br><span class="line"><span class="section">&lt;VirtualHost _default_:443&gt;</span></span><br><span class="line">    <span class="attribute">SSLProtocol</span> <span class="literal">all</span> -SSLv2 -SSLv3</span><br><span class="line">    <span class="attribute">SSLCipherSuite</span> HIGH:!RC4:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!EXP:+MEDIUM</span><br><span class="line">    <span class="attribute">SSLHonorCipherOrder</span> <span class="literal">on</span></span><br><span class="line">    <span class="attribute">SSLCertificateFile</span>       /data/server/apache/conf/extra/cert/a_public.crt</span><br><span class="line">    <span class="attribute">SSLCertificateKeyFile</span>    /data/server/apache/conf/extra/cert/a.key</span><br><span class="line">    <span class="attribute">SSLCertificateChainFile</span>  /data/server/apache/conf/extra/cert/a_chain.crt</span><br><span class="line"></span><br><span class="line">    <span class="attribute"><span class="nomarkup">ServerName</span></span> 你的域名:443</span><br><span class="line">    <span class="attribute"><span class="nomarkup">DocumentRoot</span></span> <span class="string">"/data/web/web01/"</span></span><br><span class="line">    <span class="section">&lt;Directory /data/web/web01/&gt;</span></span><br><span class="line">        <span class="attribute"><span class="nomarkup">Options</span></span> FollowSymlinks</span><br><span class="line">        <span class="attribute">DirectoryIndex</span> index.php</span><br><span class="line">        <span class="attribute"><span class="nomarkup">Allow</span></span> from <span class="literal">all</span></span><br><span class="line">        <span class="attribute">AllowOverride</span> <span class="literal">All</span></span><br><span class="line">        <span class="attribute">Require</span> <span class="literal">all</span> granted</span><br><span class="line">    <span class="section">&lt;/Directory&gt;</span></span><br><span class="line">    <span class="attribute">SSLEngine</span> <span class="literal">on</span></span><br><span class="line">    <span class="section">&lt;FilesMatch "\.(cgi|shtml|phtml|php)$"&gt;</span></span><br><span class="line">        <span class="attribute">SSLOptions</span> +StdEnvVars</span><br><span class="line">    <span class="section">&lt;/FilesMatch&gt;</span></span><br><span class="line">    <span class="section">&lt;Directory "/data/server/apache/cgi-bin"&gt;</span></span><br><span class="line">        <span class="attribute">SSLOptions</span> +StdEnvVars</span><br><span class="line">    <span class="section">&lt;/Directory&gt;</span></span><br><span class="line">    <span class="attribute">CustomLog</span> <span class="string">"/data/server/apache/logs/ssl_request_log"</span> \</span><br><span class="line">              "%t %h %&#123;SSL_PROTOCOL&#125;x %&#123;SSL_CIPHER&#125;x \"%r\" %b"</span><br><span class="line"></span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">############   同时支持http 和 https 访问,需要修改vhost ####################</span></span><br><span class="line"><span class="attribute">vim</span> /data/server/apache/conf/self_vhosts/vhost.conf </span><br><span class="line"></span><br><span class="line"><span class="section">&lt;VirtualHost *:80&gt;</span></span><br><span class="line">        <span class="attribute"><span class="nomarkup">ServerName</span></span> 你的域名</span><br><span class="line">        <span class="attribute"><span class="nomarkup">DocumentRoot</span></span> <span class="string">"/data/web/web01/"</span></span><br><span class="line">    <span class="section">&lt;Directory /data/web/web01/&gt;</span></span><br><span class="line">        <span class="attribute"><span class="nomarkup">Options</span></span> FollowSymlinks</span><br><span class="line">        <span class="attribute">DirectoryIndex</span> index.php</span><br><span class="line">        <span class="attribute"><span class="nomarkup">Allow</span></span> from <span class="literal">all</span></span><br><span class="line">        <span class="attribute">AllowOverride</span> <span class="literal">All</span></span><br><span class="line">        <span class="attribute">Require</span> <span class="literal">all</span> granted</span><br><span class="line">    <span class="section">&lt;/Directory&gt;</span></span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/apache/ssl_02.png" alt="ssl 模块" title="ssl 模块"></p><h3 id="配置ssl-支持https-02-2"><a href="#配置ssl-支持https-02-2" class="headerlink" title="配置ssl,支持https 02-2"></a>配置ssl,支持https 02-2</h3><figure class="highlight apacheconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">编辑Apache根目录下 conf/httpd.conf 找到 </span><br><span class="line"><span class="attribute"><span class="nomarkup">LoadModule</span></span> ssl_module modules/mod_ssl.so</span><br><span class="line">和 </span><br><span class="line"><span class="attribute">Include</span> conf/extra/httpd-ssl.conf</span><br><span class="line">去掉这2行前面的注释</span><br><span class="line"></span><br><span class="line">这个操作完成后可以修改 vim /data/server/apache/conf/self_vhosts/vhost.conf  文件</span><br><span class="line"></span><br><span class="line"><span class="section">&lt;VirtualHost *:80&gt;</span></span><br><span class="line">        <span class="attribute"><span class="nomarkup">ServerName</span></span> 你的域名</span><br><span class="line">        <span class="attribute"><span class="nomarkup">DocumentRoot</span></span> <span class="string">"/data/web/web01/"</span></span><br><span class="line">    <span class="section">&lt;Directory /data/web/web01/&gt;</span></span><br><span class="line">        <span class="attribute"><span class="nomarkup">Options</span></span> FollowSymlinks</span><br><span class="line">        <span class="attribute">DirectoryIndex</span> index.php</span><br><span class="line">        <span class="attribute"><span class="nomarkup">Allow</span></span> from <span class="literal">all</span></span><br><span class="line">        <span class="attribute">AllowOverride</span> <span class="literal">All</span></span><br><span class="line">        <span class="attribute">Require</span> <span class="literal">all</span> granted</span><br><span class="line">    <span class="section">&lt;/Directory&gt;</span></span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">&lt;VirtualHost _default_:443&gt;</span></span><br><span class="line">    <span class="attribute">SSLProtocol</span> <span class="literal">all</span> -SSLv2 -SSLv3</span><br><span class="line">    <span class="attribute">SSLCipherSuite</span> HIGH:!RC4:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!EXP:+MEDIUM</span><br><span class="line">    <span class="attribute">SSLHonorCipherOrder</span> <span class="literal">on</span></span><br><span class="line">    <span class="attribute">SSLCertificateFile</span>       /data/server/apache/conf/extra/cert/a_public.crt</span><br><span class="line">    <span class="attribute">SSLCertificateKeyFile</span>    /data/server/apache/conf/extra/cert/a.key</span><br><span class="line">    <span class="attribute">SSLCertificateChainFile</span>  /data/server/apache/conf/extra/cert/a_chain.crt</span><br><span class="line"></span><br><span class="line">    <span class="attribute"><span class="nomarkup">ServerName</span></span> 你的域名:443</span><br><span class="line">    <span class="attribute"><span class="nomarkup">DocumentRoot</span></span> <span class="string">"/data/web/web01/"</span></span><br><span class="line">    <span class="section">&lt;Directory /data/web/web01/&gt;</span></span><br><span class="line">        <span class="attribute"><span class="nomarkup">Options</span></span> FollowSymlinks</span><br><span class="line">        <span class="attribute">DirectoryIndex</span> index.php</span><br><span class="line">        <span class="attribute"><span class="nomarkup">Allow</span></span> from <span class="literal">all</span></span><br><span class="line">        <span class="attribute">AllowOverride</span> <span class="literal">All</span></span><br><span class="line">        <span class="attribute">Require</span> <span class="literal">all</span> granted</span><br><span class="line">    <span class="section">&lt;/Directory&gt;</span></span><br><span class="line">    <span class="attribute">SSLEngine</span> <span class="literal">on</span></span><br><span class="line">    <span class="section">&lt;FilesMatch "\.(cgi|shtml|phtml|php)$"&gt;</span></span><br><span class="line">        <span class="attribute">SSLOptions</span> +StdEnvVars</span><br><span class="line">    <span class="section">&lt;/FilesMatch&gt;</span></span><br><span class="line">    <span class="section">&lt;Directory "/data/server/apache/cgi-bin"&gt;</span></span><br><span class="line">        <span class="attribute">SSLOptions</span> +StdEnvVars</span><br><span class="line">    <span class="section">&lt;/Directory&gt;</span></span><br><span class="line">    <span class="attribute">CustomLog</span> <span class="string">"/data/server/apache/logs/ssl_request_log"</span> \</span><br><span class="line">              "%t %h %&#123;SSL_PROTOCOL&#125;x %&#123;SSL_CIPHER&#125;x \"%r\" %b"</span><br><span class="line"></span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure><h3 id="apache-80-跳转到-443"><a href="#apache-80-跳转到-443" class="headerlink" title="apache 80 跳转到 443"></a>apache 80 跳转到 443</h3><figure class="highlight apacheconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;VirtualHost *:80&gt;</span></span><br><span class="line">    <span class="attribute"><span class="nomarkup">ServerName</span></span> your.domain.com</span><br><span class="line">    <span class="attribute"><span class="nomarkup">RewriteEngine</span></span> <span class="literal">on</span></span><br><span class="line">    <span class="attribute"><span class="nomarkup">RewriteCond</span></span> <span class="variable">%&#123;SERVER_PORT&#125;</span> !^443$</span><br><span class="line">    </span><br><span class="line">    <span class="comment">#所有 http:// 变为 https://  url的内容不会匹配</span></span><br><span class="line">    <span class="attribute"><span class="nomarkup">RewriteRule</span></span> ^/?(.*)$ https://<span class="variable">%&#123;SERVER_NAME&#125;</span>/<span class="number">$1</span><span class="meta"> [L,R]</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">#所有 http:// 变为 https://  保持url地址内容不变</span></span><br><span class="line">    <span class="attribute"><span class="nomarkup">RewriteRule</span></span> ^.*$ https://<span class="variable">%&#123;SERVER_NAME&#125;</span><span class="variable">%&#123;REQUEST_URI&#125;</span><span class="meta"> [L,R] </span></span><br><span class="line"><span class="meta">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Apache-正向代理"><a href="#Apache-正向代理" class="headerlink" title="Apache 正向代理"></a>Apache 正向代理</h3><figure class="highlight apacheconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">&lt;virtualHost *:80&gt;</span></span><br><span class="line">         <span class="attribute"><span class="nomarkup">ServerName</span></span> 127.0.0.1:80</span><br><span class="line">         <span class="attribute"><span class="nomarkup">DocumentRoot</span></span> /usr/local/apache2/htdocs/www</span><br><span class="line">         <span class="section">&lt;Directory /usr/local/apache2/htdocs/www&gt;</span></span><br><span class="line">                <span class="attribute"><span class="nomarkup">Options</span></span> FollowSymLinks</span><br><span class="line">                <span class="attribute">AllowOverride</span> <span class="literal">All</span></span><br><span class="line">                <span class="attribute"><span class="nomarkup">Order</span></span> allow,deny</span><br><span class="line">                <span class="attribute"><span class="nomarkup">Allow</span></span> from <span class="literal">all</span></span><br><span class="line">         <span class="section">&lt;/Directory&gt;</span></span><br><span class="line">         <span class="attribute">ProxyRequests</span> <span class="literal">Off</span></span><br><span class="line">         <span class="section">&lt;Proxy *&gt;</span></span><br><span class="line">                <span class="attribute"><span class="nomarkup">Order</span></span> deny,allow</span><br><span class="line">                <span class="attribute"><span class="nomarkup">Allow</span></span> from <span class="literal">all</span></span><br><span class="line">         <span class="section">&lt;/Proxy&gt;</span></span><br><span class="line">         <span class="comment"># 访问127.0.0.1/fei1/ 的时候 代理到 http://192.168.1.151/</span></span><br><span class="line">         <span class="comment"># 注意这里的 / 不能多也不能少,要对应上</span></span><br><span class="line">         <span class="attribute">ProxyPass</span> /fei1/ http://192.168.1.151/   </span><br><span class="line">         <span class="attribute">ProxyPassReverse</span> /fei1/ http://192.168.1.151/</span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/apache/ProxyPass.png" alt="正向代理" title="正向代理"></p>]]></content>
      
      <categories>
          
          <category> Apache </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Apache </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-Apache 安装</title>
      <link href="/2019/02/01/apache/apache%E5%AE%89%E8%A3%85/"/>
      <url>/2019/02/01/apache/apache%E5%AE%89%E8%A3%85/</url>
      <content type="html"><![CDATA[<h3 id="apache-安装"><a href="#apache-安装" class="headerlink" title="apache 安装"></a>apache 安装</h3><p>1)官方地址: <a href="http://httpd.apache.org/docs/2.4/install.html" target="_blank" rel="noopener">http://httpd.apache.org/docs/2.4/install.html</a><br>安装Apache 必须的源码包: [Apache, Apr,Apr-Util,Pcre],并且确认系统中已经安装了[gcc,gcc-c++,make,autoconf,automake],</p><h3 id="2-centos系统中可以"><a href="#2-centos系统中可以" class="headerlink" title="2)centos系统中可以:"></a>2)centos系统中可以:</h3><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y gcc gcc-c++ autoconf libjpeg libjpeg-devel libpng libpng-devel freetype freetype-devel libpng libpng-devel libxml2 libxml2-devel <span class="literal">zlib</span> <span class="literal">zlib</span>-devel glibc glibc-devel glib2 glib2-devel <span class="literal">bzip2</span> <span class="literal">bzip2</span>-devel ncurses curl openssl-devel gdbm-devel db4-devel libXpm-devel libX11-devel gd-devel gmp-devel readline-devel libxslt-devel expat-devel xmlrpc-c xmlrpc-c-devel</span><br></pre></td></tr></table></figure><h3 id="3-下载好源码"><a href="#3-下载好源码" class="headerlink" title="3),下载好源码"></a>3),下载好源码</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget  https:<span class="regexp">//mi</span>rrors.tuna.tsinghua.edu.cn<span class="regexp">/apache/</span><span class="regexp">/httpd/</span>httpd-<span class="number">2.4</span>.<span class="number">37</span>.tar.gz</span><br><span class="line">wget  https:<span class="regexp">//mi</span>rrors.cnnic.cn<span class="regexp">/apache/</span><span class="regexp">/apr/</span>apr-<span class="number">1.6</span>.<span class="number">5</span>.tar.gz</span><br><span class="line">wget  http:<span class="regexp">//mi</span>rror.bit.edu.cn<span class="regexp">/apache/</span><span class="regexp">/apr/</span>apr-util-<span class="number">1.6</span>.<span class="number">1</span>.tar.gz</span><br><span class="line">wget http:<span class="regexp">//</span>jaist.dl.sourceforge.net<span class="regexp">/project/</span>pcre<span class="regexp">/pcre/</span><span class="number">8.36</span><span class="regexp">/pcre-8.36.tar.gz</span></span><br></pre></td></tr></table></figure><h3 id="4-安装"><a href="#4-安装" class="headerlink" title="4).安装"></a>4).安装</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">centos中安装pcre:   yum <span class="keyword">install</span> -y pcre pcre-devel</span><br><span class="line">ubuntu中安装pcre:   apt-<span class="keyword">get</span> <span class="keyword">install</span> libpcre3 libpcre3-dev</span><br><span class="line">#安装过程中缺少依赖自行安装,我的pcre已经用apt安装好了</span><br><span class="line">#groupadd deployer useradd -g apache apache </span><br><span class="line">#tar -zxvf apr<span class="number">-1.6</span><span class="number">.5</span>.tar.gz -C /<span class="keyword">data</span>/<span class="keyword">server</span>/apache_component</span><br><span class="line">#tar -zxvf apr-util<span class="number">-1.6</span><span class="number">.1</span>.tar.gz -C /<span class="keyword">data</span>/<span class="keyword">server</span>/apache_component</span><br><span class="line">#tar -zxvf pcre<span class="number">-8.36</span>.tar.gz -C /<span class="keyword">data</span>/<span class="keyword">server</span>/apache_component</span><br><span class="line">#tar -zxvf httpd<span class="number">-2.4</span><span class="number">.37</span>.tar.gz -C /<span class="keyword">data</span>/<span class="keyword">server</span>/apache_component</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">tar -zxvf apr<span class="number">-1.6</span><span class="number">.5</span>.tar.gz</span><br><span class="line">cd apr<span class="number">-1.6</span><span class="number">.5</span></span><br><span class="line">./configure <span class="comment">--prefix=/data/server/apache_component/apr-1.6.5</span></span><br><span class="line">make</span><br><span class="line">make <span class="keyword">install</span></span><br><span class="line"></span><br><span class="line">tar -zxvf apr-util<span class="number">-1.6</span><span class="number">.1</span>.tar.gz</span><br><span class="line">cd apr-util<span class="number">-1.6</span><span class="number">.1</span></span><br><span class="line">./configure \</span><br><span class="line"><span class="comment">--prefix=/data/server/apache_component/apr-util-1.6.1  \</span></span><br><span class="line"><span class="comment">--with-apr=/data/server/apache_component/apr-1.6.5</span></span><br><span class="line">make</span><br><span class="line">make <span class="keyword">install</span></span><br><span class="line"></span><br><span class="line">##centos中少库 expat-devel</span><br><span class="line">##ubuntu中缺少 apt-<span class="keyword">get</span> <span class="keyword">install</span> libexpat-dev</span><br><span class="line"></span><br><span class="line">tar -zxvf httpd<span class="number">-2.4</span><span class="number">.37</span>.tar.gz</span><br><span class="line">cd httpd<span class="number">-2.4</span><span class="number">.37</span></span><br><span class="line">./configure \</span><br><span class="line"><span class="comment">--prefix=/data/server/apache \</span></span><br><span class="line"><span class="comment">--with-apr=/data/server/apache_component/apr-1.6.5 \</span></span><br><span class="line"><span class="comment">--with-apr-util=/data/server/apache_component/apr-util-1.6.1</span></span><br><span class="line">make </span><br><span class="line">make <span class="keyword">install</span></span><br><span class="line"></span><br><span class="line">##到这里已经安装完毕,下面配置Apache</span><br><span class="line"></span><br><span class="line">vim httpd.conf   #修改配置</span><br><span class="line">ServerName www.test.com:<span class="number">80</span></span><br><span class="line"></span><br><span class="line">##Apache常用命令</span><br><span class="line">/<span class="keyword">data</span>/<span class="keyword">server</span>/apache/<span class="keyword">bin</span>/apachectl -v   #查看 Apache 版本</span><br><span class="line">/<span class="keyword">data</span>/<span class="keyword">server</span>/apache/<span class="keyword">bin</span>/apachectl -V   #大写V 查看 Apache 版本,安装路径等其他信息</span><br><span class="line">/<span class="keyword">data</span>/<span class="keyword">server</span>/apache/<span class="keyword">bin</span>/apachectl -k <span class="keyword">start</span>  #参数k发送信号</span><br><span class="line">/<span class="keyword">data</span>/<span class="keyword">server</span>/apache/<span class="keyword">bin</span>/apachectl -k <span class="keyword">stop</span></span><br><span class="line">/<span class="keyword">data</span>/<span class="keyword">server</span>/apache/<span class="keyword">bin</span>/apachectl restart</span><br><span class="line">/<span class="keyword">data</span>/<span class="keyword">server</span>/apache/<span class="keyword">bin</span>/apachectl configtest #检查配置文件是否正确</span><br><span class="line">/<span class="keyword">data</span>/<span class="keyword">server</span>/apache/<span class="keyword">bin</span>/apachectl -t         #检查配置文件是否正确</span><br><span class="line">/<span class="keyword">data</span>/<span class="keyword">server</span>/apache/<span class="keyword">bin</span>/httpd -t             #检查配置文件是否正确</span><br><span class="line"></span><br><span class="line">/<span class="keyword">data</span>/<span class="keyword">server</span>/apache/<span class="keyword">bin</span>/apachectl -S   #大写S  显示已解析的vhost设置</span><br><span class="line">/<span class="keyword">data</span>/<span class="keyword">server</span>/apache/<span class="keyword">bin</span>/apachectl -<span class="keyword">help</span>  </span><br><span class="line">cat /<span class="keyword">data</span>/<span class="keyword">server</span>/apache/<span class="keyword">build</span>/config.nice  #查看apache编译参数</span><br><span class="line">ps -aux | grep httpd   # 查看 apache 状态</span><br><span class="line"></span><br><span class="line">windows 中命令</span><br><span class="line">./httpd.exe -t    #查看配置文件是否正确</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &lt;<span class="keyword">Directory</span> /<span class="keyword">data</span>/www&gt;</span><br><span class="line">     Deny <span class="keyword">from</span> all   #<span class="number">403</span> 拒绝访问</span><br><span class="line">     #ErrorDocument <span class="number">404</span> /<span class="keyword">test</span>/<span class="number">404.</span>html  #<span class="number">404</span> 重定向</span><br><span class="line">     #ErrorDocument <span class="number">404</span> <span class="string">"This is 404 page"</span></span><br><span class="line">  &lt;/<span class="keyword">Directory</span>&gt;</span><br></pre></td></tr></table></figure><h3 id="5-自定义配置文件"><a href="#5-自定义配置文件" class="headerlink" title="5)自定义配置文件"></a>5)自定义配置文件</h3><figure class="highlight apacheconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Include</span> conf/self_vhosts/*.conf</span><br></pre></td></tr></table></figure><p><img src="/img/apache/apache.png" alt="apache 配置文件" title="apache 配置文件"></p><h3 id="让普通用户可以启apache"><a href="#让普通用户可以启apache" class="headerlink" title="让普通用户可以启apache"></a>让普通用户可以启apache</h3><figure class="highlight apacheconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##用普通用户安装的时候</span></span><br><span class="line"><span class="attribute">cd</span> /data/server/apache/bin</span><br><span class="line"><span class="attribute">chown</span> root httpd   #chown root:www httpd</span><br><span class="line"><span class="attribute">chmod</span> u+s httpd</span><br></pre></td></tr></table></figure><h3 id="强制-Apache-返回一个404状态码"><a href="#强制-Apache-返回一个404状态码" class="headerlink" title="强制 Apache 返回一个404状态码"></a>强制 Apache 返回一个404状态码</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Redirect <span class="number">404</span> /          #访问根目录显示<span class="number">404</span></span><br><span class="line">Redirect <span class="number">500</span> /          #访问根目录显示<span class="number">500</span></span><br><span class="line">&lt;Directory /data/www&gt;</span><br><span class="line">    Deny from all   #<span class="number">403</span> 拒绝访问</span><br><span class="line">    #ErrorDocument <span class="number">404</span> /test/<span class="number">404.</span>html  #<span class="number">404</span> 重定向</span><br><span class="line">    #ErrorDocument <span class="number">404</span> <span class="string">"This is 404 page"</span>  #<span class="number">400</span> 显示错误字符串</span><br><span class="line">&lt;/Directory&gt;</span><br></pre></td></tr></table></figure><h3 id="Apache-解析php"><a href="#Apache-解析php" class="headerlink" title="Apache 解析php"></a>Apache 解析php</h3><figure class="highlight apacheconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#方法一: PHP编译的时候使用--with-apxs2</span></span><br><span class="line">'--with-apxs2=/usr/local/apache/bin/apxs' #让Apache支持PHP</span><br><span class="line"><span class="comment">#查看原来PHP的编译参数</span></span><br><span class="line">/data/server/php7/bin/php -i | grep  configure</span><br><span class="line"></span><br><span class="line"><span class="comment">#方法二,在Apache2.4以后支持FCGI方式</span></span><br><span class="line">在Apache的conf中添加自己的文件路径;  Include conf/self_vhosts/*.conf</span><br><span class="line"></span><br><span class="line"><span class="section">&lt;VirtualHost *:80&gt;</span></span><br><span class="line">  <span class="comment">#ServerAdmin webmaster@localhost</span></span><br><span class="line">  <span class="attribute"><span class="nomarkup">ServerName</span></span> www.afei.com</span><br><span class="line">  <span class="attribute"><span class="nomarkup">DocumentRoot</span></span> /data/www</span><br><span class="line">  </span><br><span class="line">  <span class="comment">#主要是这2个配置</span></span><br><span class="line">  <span class="attribute">ProxyRequests</span> <span class="literal">Off</span></span><br><span class="line">  <span class="attribute">ProxyPassMatch</span> ^/(.*\.php(/.*)?)$ fcgi://127.0.0.1:9000/data/www/<span class="number">$1</span></span><br><span class="line"></span><br><span class="line">  <span class="section">&lt;Directory /data/www&gt;</span></span><br><span class="line">     <span class="attribute"><span class="nomarkup">Options</span></span> FollowSymlinks</span><br><span class="line">     <span class="attribute">DirectoryIndex</span> index.php</span><br><span class="line">     <span class="attribute">AllowOverride</span> <span class="literal">All</span></span><br><span class="line">     <span class="attribute">Require</span> <span class="literal">all</span> granted</span><br><span class="line">  <span class="section">&lt;/Directory&gt;</span></span><br><span class="line"><span class="section">&lt;/VirtualHost&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##需要在 conf/httpd.conf 文件中打开4个扩展,把下面这几个的注释都打开</span></span><br><span class="line"><span class="comment">#LoadModule proxy_module modules/mod_proxy.so</span></span><br><span class="line"><span class="comment">#LoadModule proxy_http_module modules/mod_proxy_http.so  </span></span><br><span class="line"><span class="comment">#LoadModule proxy_fcgi_module modules/mod_proxy_fcgi.so</span></span><br><span class="line"><span class="comment">#LoadModule rewrite_module modules/mod_rewrite.so</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#方法三,解析PHP,需要Apache 2.4.9  以后</span></span><br><span class="line"><span class="section">&lt;FilesMatch \.php$&gt;</span></span><br><span class="line">     <span class="attribute"><span class="nomarkup">SetHandler</span></span> <span class="string">"proxy:fcgi://127.0.0.1:9000"</span></span><br><span class="line"><span class="section">&lt;/FilesMatch&gt;</span></span><br></pre></td></tr></table></figure><h3 id="使用ip访问-骚气操作01"><a href="#使用ip访问-骚气操作01" class="headerlink" title="使用ip访问,骚气操作01"></a>使用ip访问,骚气操作01</h3><figure class="highlight apacheconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#http://192.168.1.202/api/hello/world       #后端PHP访问方式</span></span><br><span class="line"><span class="comment">#http://192.168.1.202/test/dist/index.html  #前端访问方式</span></span><br><span class="line"><span class="comment">#/data/www/web/test/public    前端</span></span><br><span class="line"></span><br><span class="line"><span class="section">&lt;IfModule alias_module&gt;</span></span><br><span class="line">    <span class="comment">#解析php</span></span><br><span class="line">    <span class="attribute">ProxyRequests</span> <span class="literal">Off</span></span><br><span class="line">    <span class="attribute">ProxyPassMatch</span> ^/(.*\.php(/.*)?)$ fcgi://127.0.0.1:9000/data/www/test/public/<span class="number">$1</span></span><br><span class="line">    <span class="attribute">Alias</span> /test  <span class="string">"/data/www/test/public"</span>  #使用别名访问</span><br><span class="line"><span class="section">&lt;/IfModule&gt;</span></span><br><span class="line"><span class="section">&lt;Directory /data/www/test/public&gt;</span></span><br><span class="line">    <span class="attribute"><span class="nomarkup">Options</span></span> FollowSymlinks</span><br><span class="line">    <span class="attribute">DirectoryIndex</span> index.php</span><br><span class="line">    <span class="attribute"><span class="nomarkup">Allow</span></span> from <span class="literal">all</span></span><br><span class="line">    <span class="attribute">AllowOverride</span> <span class="literal">All</span></span><br><span class="line">    <span class="attribute">Require</span> <span class="literal">all</span> granted</span><br><span class="line"><span class="section">&lt;/Directory&gt;</span></span><br></pre></td></tr></table></figure><h3 id="使用ip访问-骚气操作01-1"><a href="#使用ip访问-骚气操作01-1" class="headerlink" title="使用ip访问,骚气操作01"></a>使用ip访问,骚气操作01</h3><figure class="highlight apacheconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">在 conf/httpd.conf 文件中添加</span><br><span class="line"><span class="comment">#解析PHP</span></span><br><span class="line"><span class="section">&lt;FilesMatch \.php$&gt;</span></span><br><span class="line">     <span class="attribute"><span class="nomarkup">SetHandler</span></span> <span class="string">"proxy:fcgi://127.0.0.1:9000"</span></span><br><span class="line"><span class="section">&lt;/FilesMatch&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#访问方法 ip/index.php</span></span><br><span class="line"><span class="section">&lt;Directory "/data/www/web/fsnh/api/trunk/public"&gt;</span></span><br><span class="line">    <span class="attribute"><span class="nomarkup">Options</span></span> Indexes FollowSymLinks MultiViews</span><br><span class="line">    <span class="attribute">AllowOverride</span> <span class="literal">all</span></span><br><span class="line">    <span class="attribute">Require</span> <span class="literal">all</span> granted</span><br><span class="line"><span class="section">&lt;/Directory&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#访问方法 ip/aaa/index.php</span></span><br><span class="line"><span class="attribute">Alias</span> /aaa <span class="string">"/data/www/cfsh/CFSH/public"</span></span><br><span class="line"><span class="section">&lt;Directory "/data/www/cfsh/CFSH/public"&gt;</span></span><br><span class="line">    <span class="attribute"><span class="nomarkup">Options</span></span> Indexes FollowSymLinks MultiViews</span><br><span class="line">    <span class="attribute">AllowOverride</span> <span class="literal">all</span></span><br><span class="line">    <span class="attribute">Require</span> <span class="literal">all</span> granted</span><br><span class="line"><span class="section">&lt;/Directory&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Apache </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Apache </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-高并发解决方案</title>
      <link href="/2019/01/27/%E9%9D%A2%E8%AF%95/%E9%AB%98%E5%B9%B6%E5%8F%91%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E9%AB%98%E5%B9%B6%E5%8F%91%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
      <url>/2019/01/27/%E9%9D%A2%E8%AF%95/%E9%AB%98%E5%B9%B6%E5%8F%91%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/%E9%AB%98%E5%B9%B6%E5%8F%91%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
      <content type="html"><![CDATA[<p>QPS达到800 方案: CDN加速、负载均衡</p><p>QPS达到1000 方案: 静态HTML 缓存</p><p>QPS达到2000 方案:做业务分离、分布式存储  (这个时候文件访问锁都成为灾难)</p><h3 id="方案处理"><a href="#方案处理" class="headerlink" title="方案处理"></a>方案处理</h3><ol><li>流量化: 防盗链处理</li><li>前端优化: 减少HTTP请求、添加一异步请求、启用浏览器缓存和文件压缩、CDN加速、简历独立图片服务器</li><li>服务端优化:页面静态化、并发处理</li><li>数据库优化: 数据库缓存、分库分表、分区操作、读写分离、负载均衡</li><li>Web服务器优化:负载均衡</li></ol><h4 id="流量化-—-防盗链实现方法"><a href="#流量化-—-防盗链实现方法" class="headerlink" title="流量化 — 防盗链实现方法:"></a>流量化 — 防盗链实现方法:</h4><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx利用<span class="keyword">Referer</span>头、nginx的nginx_http_accesskey_module 模块</span><br></pre></td></tr></table></figure><h4 id="前端优化-—-减少HTTP请求"><a href="#前端优化-—-减少HTTP请求" class="headerlink" title="前端优化 — 减少HTTP请求"></a>前端优化 — 减少HTTP请求</h4><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">HTTP连接产生的开销</span></span><br><span class="line"><span class="comment">域名解析</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">TCP连接</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">发送请求</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">等待</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">下载资源</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">解析时间</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">减少HTTP请求的方法</span></span><br><span class="line"><span class="comment">1)</span> <span class="comment">图片地图:</span> <span class="comment">(简单理解为一个图片上有多个链接)</span></span><br><span class="line"><span class="comment">2)</span> <span class="comment">CSS精灵:</span> <span class="comment">(简单理解为</span><span class="string">,</span><span class="comment">用css控制图片位置)</span></span><br><span class="line"><span class="comment">3)</span> <span class="comment">合并</span> <span class="comment">js</span> <span class="comment">和</span> <span class="comment">css</span> <span class="comment">脚本</span></span><br><span class="line"><span class="comment">4)</span> <span class="comment">图片使用</span> <span class="comment">Base64编码减少页面请求</span></span><br></pre></td></tr></table></figure><h4 id="线程进程"><a href="#线程进程" class="headerlink" title="线程进程"></a>线程进程</h4><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">单进程单线程: 一个人在一张桌子上吃饭</span></span><br><span class="line"><span class="section">单进程多线程: 多个人在同一张桌子上一起吃饭</span></span><br><span class="line"><span class="section">多进程单线程: 多个人在每个人自己的桌子上吃饭</span></span><br></pre></td></tr></table></figure><p>#### </p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-nginx</title>
      <link href="/2019/01/27/nginx/nginx_01/"/>
      <url>/2019/01/27/nginx/nginx_01/</url>
      <content type="html"><![CDATA[<p>nginx 相关使用文章介绍</p><p>——–飞-  nginx——–</p><h3 id="防盗链"><a href="#防盗链" class="headerlink" title="防盗链"></a>防盗链</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> <span class="regexp">~ .*\.(gif|jpg|jpeg|png|bmp|swf)$</span> &#123;</span><br><span class="line">    <span class="comment"># none   允许没有http_refer的请求资源</span></span><br><span class="line">    <span class="comment"># blocked  允许不是 http://开头的,不带协议的请求访问资源</span></span><br><span class="line">    <span class="comment"># *.test22.com  只允许指定域名访问</span></span><br><span class="line">    <span class="attribute">valid_referers</span> <span class="literal">none</span> <span class="literal">blocked</span> <span class="regexp">*.test</span>22.com;</span><br><span class="line">    <span class="attribute">if</span> (<span class="variable">$invalid_referer</span>) &#123;</span><br><span class="line">        <span class="comment">#return 403;</span></span><br><span class="line">        <span class="comment">#return 500;</span></span><br><span class="line">        <span class="attribute">rewrite</span><span class="regexp"> ^/</span>  https://www.baidu.com/img/bd_logo1.png;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attribute">expires</span> <span class="number">30d</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="强制-Apache-返回一个404状态码"><a href="#强制-Apache-返回一个404状态码" class="headerlink" title="强制 Apache 返回一个404状态码"></a>强制 Apache 返回一个404状态码</h3><figure class="highlight apacheconf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Redirect</span> 404 /          #访问根目录显示404</span><br><span class="line"><span class="attribute">Redirect</span> 500 /          #访问根目录显示500</span><br></pre></td></tr></table></figure><h3 id="访问不存在的页面重定向到首页"><a href="#访问不存在的页面重定向到首页" class="headerlink" title="访问不存在的页面重定向到首页"></a>访问不存在的页面重定向到首页</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">if</span> (!-e <span class="variable">$request_filename</span>) &#123;</span><br><span class="line">    <span class="attribute">rewrite</span><span class="regexp"> ^/(.*)</span> /index.html <span class="literal">redirect</span>;</span><br><span class="line">    break;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="伪静态"><a href="#伪静态" class="headerlink" title="伪静态"></a>伪静态</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> / &#123;</span><br><span class="line">    <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.php<span class="variable">$is_args</span><span class="variable">$args</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">location</span> /backend &#123;</span><br><span class="line">    <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /backend/index.php<span class="variable">$is_args</span><span class="variable">$args</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="attribute">location</span> /api &#123;</span><br><span class="line">    <span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /api/index.php<span class="variable">$is_args</span><span class="variable">$args</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu16 --svn02 编译安装后使用</title>
      <link href="/2019/01/26/ubuntu/linux_ubuntu_svn_02/"/>
      <url>/2019/01/26/ubuntu/linux_ubuntu_svn_02/</url>
      <content type="html"><![CDATA[<p>编译安装后使用</p><h3 id="创建svn-版本库"><a href="#创建svn-版本库" class="headerlink" title="创建svn 版本库"></a>创建svn 版本库</h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">mkdir</span>  /<span class="class"><span class="keyword">data</span>/www/svn_repository</span></span><br><span class="line"><span class="title">svnadmin</span> create /<span class="class"><span class="keyword">data</span>/www/svn_repository/repository01   #创建一个新的版本仓库</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/svn_create.png" alt="创建版本仓库" title="创建版本仓库"></p><h3 id="设置访问权限"><a href="#设置访问权限" class="headerlink" title="设置访问权限"></a>设置访问权限</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">vim</span> <span class="keyword">conf</span>/svnserve.<span class="keyword">conf</span>   #设置读写,启用密码文件路径  </span><br><span class="line"></span><br><span class="line">这三个的注释去掉!!!!  注意这三行前面不要有空格,否则后面会一直找不到仓库,报错</span><br><span class="line">anon-access = <span class="keyword">read</span></span><br><span class="line">auth-access = <span class="keyword">write</span></span><br><span class="line">password-db = passwd</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/svnserve.png" alt="访问权限" title="访问权限"></p><h3 id="添加用户"><a href="#添加用户" class="headerlink" title="添加用户"></a>添加用户</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim conf/passwd </span><br><span class="line">账户密码内容为: <span class="attribute">fei_svn</span>=123456</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/passwd.png" alt="添加用户" title="添加用户"></p><h3 id="添加访问用户"><a href="#添加访问用户" class="headerlink" title="添加访问用户"></a>添加访问用户</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim conf/authz</span><br><span class="line"></span><br><span class="line"><span class="section">内容如下:</span></span><br><span class="line">admin_groups=fei_svn   <span class="comment">#用户fei_svn属于admin_groups权限组</span></span><br><span class="line">@admin_groups=rw       <span class="comment">#admin_groups权限组有读和写</span></span><br><span class="line">*=r                    <span class="comment">#其他用户具只能读</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/authz.png" alt="添加访问用户" title="添加访问用户"></p><h3 id="添加子目录访问权限"><a href="#添加子目录访问权限" class="headerlink" title="添加子目录访问权限"></a>添加子目录访问权限</h3><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vim conf/authz  <span class="comment">#修改完不需要重启svn,</span></span><br><span class="line"></span><br><span class="line"><span class="section">内容如下:</span></span><br><span class="line">admin_groups=fei_svn   <span class="comment">#用户fei_svn属于admin_groups权限组</span></span><br><span class="line">dev_groups=dafei       <span class="comment">#用户dafei属于dev_groups权限组</span></span><br><span class="line"></span><br><span class="line">[/]</span><br><span class="line">@admin_groups = rw</span><br><span class="line"></span><br><span class="line">[/da]</span><br><span class="line">@dev_groups=rw       <span class="comment">#da 这个子目录需要用最高权限账号在根目录新建,保存后才可以用非管理账号checkout</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/sub_dir.png" alt="子目录权限" title="子目录权限"></p><h3 id="启动svn"><a href="#启动svn" class="headerlink" title="启动svn"></a>启动svn</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">svnserve -d -r <span class="meta-keyword">/data/</span>server<span class="meta-keyword">/svn/</span>       <span class="meta">#-d 后台启动;  -r 指定根目录启动 !!!注意这里的路径</span></span><br><span class="line">ps -aux | grep svnserve      <span class="meta">#查看svnserve是否启动</span></span><br><span class="line">killall svnserve       <span class="meta">#停止服务</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#-d 后台启动;  -r 指定根目录启动 !!!注意这里的路径</span></span><br><span class="line"><span class="meta-keyword">/data/</span>server<span class="meta-keyword">/svn/</span>bin/svnserve -d -r <span class="meta-keyword">/data/</span>www/svn_repository/repository01</span><br><span class="line">ps -aux | grep svnserve      <span class="meta">#查看svnserve是否启动</span></span><br><span class="line">killall svnserve       <span class="meta">#停止服务</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/svnserve_start.png" alt="访问权限" title="启动svn"></p><h3 id="windows-中访问svn版本库"><a href="#windows-中访问svn版本库" class="headerlink" title="windows 中访问svn版本库"></a>windows 中访问svn版本库</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#vim</span> conf/svnserve<span class="selector-class">.conf</span>   这个配置文件修改的时候有空格这时候这里会一直练不上</span><br><span class="line">#报错信息: unable to connect to <span class="selector-tag">a</span> repository url line <span class="number">19</span>:Option expected</span><br><span class="line"></span><br><span class="line">svn:<span class="comment">//192.168.1.104/  #访问版本控制</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/success.png" alt="访问svn版本控制" title="访问svn版本控制"></p><h3 id="实现svn-代码仓库与web线上代码同步01"><a href="#实现svn-代码仓库与web线上代码同步01" class="headerlink" title="实现svn 代码仓库与web线上代码同步01"></a>实现svn 代码仓库与web线上代码同步01</h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">### svn 仓库和代码在同一台服务器</span></span><br><span class="line"><span class="title">svn</span> 服务器中代码目录   /<span class="class"><span class="keyword">data</span>/www/svn_repos</span></span><br><span class="line"><span class="title">window</span>中代码目录     <span class="type">E</span>:\selfweb\git_dev\zzz</span><br><span class="line"></span><br><span class="line">首先在svn服务器上checkout检出一份,检出到/<span class="class"><span class="keyword">data</span>/www/svn_repos 目录</span></span><br><span class="line">/<span class="class"><span class="keyword">data</span>/server/svn/bin/svn checkout  svn://192.168.42.128/  /<span class="keyword">data</span>/www/svn_repos</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/synch_01.png" alt="自动同步01" title="自动同步01"></p><h3 id="实现svn-代码仓库与web线上代码同步02"><a href="#实现svn-代码仓库与web线上代码同步02" class="headerlink" title="实现svn 代码仓库与web线上代码同步02"></a>实现svn 代码仓库与web线上代码同步02</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">### svn 仓库和代码在同一台服务器</span></span><br><span class="line"></span><br><span class="line">建立同步脚本</span><br><span class="line">cd  <span class="meta-keyword">/data/</span>www/svn_repository<span class="meta-keyword">/repository01/</span>hooks</span><br><span class="line">cp post-commit.tmpl post-commit</span><br><span class="line">chmod <span class="number">755</span> post-commit</span><br><span class="line">vim post-commit</span><br><span class="line">添加如下代码:(SVN_PATH svn安装目录; WEB_PATH项目目录;  svn账号密码)</span><br><span class="line">export LANG=en_US.UTF<span class="number">-8</span></span><br><span class="line">SVN_PATH=<span class="meta-keyword">/data/</span>server<span class="meta-keyword">/svn/</span>bin/svn         </span><br><span class="line">WEB_PATH=<span class="meta-keyword">/data/</span>www/svn_repos            </span><br><span class="line">$SVN_PATH update $WEB_PATH --username fei_svn --password <span class="number">123456</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">重启svn 服务</span><br><span class="line">killall svnserve       <span class="meta">#停止服务</span></span><br><span class="line">ps -aux | grep svnserve      <span class="meta">#查看svnserve是否启动</span></span><br><span class="line"><span class="meta-keyword">/data/</span>server<span class="meta-keyword">/svn/</span>bin/svnserve -d -r <span class="meta-keyword">/data/</span>www/svn_repository/repository01</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/synch_02.png" alt="自动同步02" title="自动同步01"></p><p><img src="/img/ubuntu/svn/synch_03.png" alt="自动同步ok" title="自动同步ok"></p><h3 id="使用过svn后-账户保存位置"><a href="#使用过svn后-账户保存位置" class="headerlink" title="使用过svn后,账户保存位置"></a>使用过svn后,账户保存位置</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">linux中</span><br><span class="line"><span class="regexp">/root/</span>.subversion<span class="regexp">/auth    [ cd ~/</span>.subversion/auth] </span><br><span class="line"></span><br><span class="line">windows中</span><br><span class="line">C:<span class="string">\Documents</span> <span class="keyword">and</span> Settings<span class="string">\Administrator\Application</span> Data<span class="string">\Subversion\auth</span></span><br><span class="line"></span><br><span class="line">账户信息保存在 svn.simple 文件下</span><br></pre></td></tr></table></figure><h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/data/server/svn/bin/svn <span class="keyword">help</span>            //<span class="comment">--svn帮助</span></span><br><span class="line">/<span class="keyword">data</span>/<span class="keyword">server</span>/svn/<span class="keyword">bin</span>/svn <span class="comment">--version       #查看版本信息</span></span><br><span class="line">/<span class="keyword">data</span>/<span class="keyword">server</span>/svn/<span class="keyword">bin</span>/svnserve <span class="comment">--version       //--svn版本信息</span></span><br><span class="line"></span><br><span class="line">/<span class="keyword">data</span>/<span class="keyword">server</span>/svn/<span class="keyword">bin</span>/svn checkout  svn://<span class="number">192.168</span><span class="number">.42</span><span class="number">.128</span>/<span class="keyword">test</span></span><br><span class="line">./svn checkout svn://<span class="number">192.168</span><span class="number">.1</span><span class="number">.11</span>/repo/<span class="keyword">test</span>  /<span class="keyword">data</span>/www/<span class="keyword">test</span>   #指定检出目录位置</span><br><span class="line"></span><br><span class="line">svn <span class="keyword">add</span> index.php               #添加</span><br><span class="line">svn <span class="keyword">commit</span> -m <span class="string">"这里是信息"</span> index.php   #提交</span><br><span class="line">svn <span class="keyword">update</span>    #更新</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu16 --svn01 源码编译安装</title>
      <link href="/2019/01/26/ubuntu/linux_ubuntu_svn_01/"/>
      <url>/2019/01/26/ubuntu/linux_ubuntu_svn_01/</url>
      <content type="html"><![CDATA[<p>ubuntu16 系统通过源码编译安装 subversion-1.11.1   &amp;&amp; apt-get 安装</p><h3 id="安装apr"><a href="#安装apr" class="headerlink" title="安装apr"></a>安装apr</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget http<span class="variable">s:</span>//mirrors.cnnic.<span class="keyword">cn</span>/apache//apr/apr-<span class="number">1.6</span>.<span class="number">5</span>.tar.gz</span><br><span class="line">tar -zxvf apr-<span class="number">1.6</span>.<span class="number">5</span>.tar.gz</span><br><span class="line"><span class="keyword">cd</span> apr-<span class="number">1.6</span>.<span class="number">5</span></span><br><span class="line">./configure --prefix=/data/server/apache_component/apr-<span class="number">1.6</span>.<span class="number">5</span></span><br><span class="line"><span class="keyword">make</span></span><br><span class="line"><span class="keyword">make</span> install</span><br></pre></td></tr></table></figure><h3 id="安装apr-util"><a href="#安装apr-util" class="headerlink" title="安装apr-util"></a>安装apr-util</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wget http://mirror.bit.edu.cn/apache//apr/apr-util-1.6.1.tar.gz</span><br><span class="line">tar -zxvf apr-util-1.6.1.tar.gz</span><br><span class="line">cd apr-util-1.6.1</span><br><span class="line">./configure \</span><br><span class="line">-<span class="ruby">-prefix=<span class="regexp">/data/server</span><span class="regexp">/apache_component/apr</span>-util-<span class="number">1.6</span>.<span class="number">1</span>  \</span></span><br><span class="line"><span class="ruby">--with-apr=<span class="regexp">/data/server</span><span class="regexp">/apache_component/apr</span>-<span class="number">1.6</span>.<span class="number">5</span></span></span><br><span class="line"><span class="ruby">make</span></span><br><span class="line"><span class="ruby">make install</span></span><br></pre></td></tr></table></figure><h3 id="安装-scons"><a href="#安装-scons" class="headerlink" title="安装 scons"></a>安装 scons</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget http<span class="variable">s:</span>//svwh.<span class="keyword">dl</span>.sourceforge.net/project/scons/scons/<span class="number">3.0</span>.<span class="number">1</span>/scons-<span class="number">3.0</span>.<span class="number">1</span>.tar.gz</span><br><span class="line">[安装这个之前确保已经安装<span class="keyword">python</span>环境  <span class="keyword">python</span> --<span class="keyword">version</span> ]</span><br><span class="line">tar -zxvf scons-<span class="number">3.0</span>.<span class="number">1</span>.tar.gz</span><br><span class="line"><span class="keyword">cd</span> scons-<span class="number">3.0</span>.<span class="number">1</span></span><br><span class="line"><span class="keyword">python</span> setup.<span class="keyword">py</span> install --prefix=/data/server/apache_component/scons</span><br><span class="line"></span><br><span class="line">[  ubuntu中可以使用 apt install scons   ]</span><br></pre></td></tr></table></figure><h3 id="安装self"><a href="#安装self" class="headerlink" title="安装self"></a>安装self</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### 注意 scons 使用的是 apt 安装还是 python 方式安装,这里会影响self安装</span></span><br><span class="line"></span><br><span class="line">wget <span class="symbol">https:</span>/<span class="regexp">/www.apache.org/dist</span><span class="regexp">/serf/serf</span>-<span class="number">1.3</span>.<span class="number">9</span>.tar.bz2</span><br><span class="line">tar -jxvf serf-<span class="number">1.3</span>.<span class="number">9</span>.tar.bz2</span><br><span class="line">cd serf-<span class="number">1.3</span>.<span class="number">9</span></span><br><span class="line"></span><br><span class="line">/data/server/apache_component/scons/bin/scons \</span><br><span class="line">PREFIX=<span class="regexp">/data/server</span><span class="regexp">/apache_component/self</span> \</span><br><span class="line">APR=<span class="regexp">/data/server</span><span class="regexp">/apache_component/apr</span>-<span class="number">1.6</span>.<span class="number">5</span>/bin/apr-<span class="number">1</span>-config \</span><br><span class="line">APU=<span class="regexp">/data/server</span><span class="regexp">/apache_component/apr</span>-util-<span class="number">1.6</span>.<span class="number">1</span></span><br><span class="line"></span><br><span class="line">/data/server/apache_component/scons/bin/scons install</span><br><span class="line">cp /data/server/apache_component/<span class="keyword">self</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">libserf</span>-1.<span class="title">so</span>* /<span class="title">usr</span>/<span class="title">local</span>/<span class="title">lib</span>/</span></span><br><span class="line"></span><br><span class="line">/<span class="regexp">/--------------------如果 scons 使用了 apt install scons 安装 ,这里self安装也要变</span></span><br><span class="line"><span class="regexp">scons \</span></span><br><span class="line"><span class="regexp">PREFIX=/data</span><span class="regexp">/server/other</span>_component/<span class="keyword">self</span> \</span><br><span class="line">APR=<span class="regexp">/data/server</span><span class="regexp">/other_component/apr</span>-<span class="number">1.6</span>.<span class="number">5</span>/bin/apr-<span class="number">1</span>-config \</span><br><span class="line">APU=<span class="regexp">/data/server</span><span class="regexp">/other_component/apr</span>-util-<span class="number">1.6</span>.<span class="number">1</span></span><br><span class="line"></span><br><span class="line">scons install</span><br><span class="line">cp /data/server/other_component/<span class="keyword">self</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">libserf</span>-1.<span class="title">so</span>* /<span class="title">usr</span>/<span class="title">local</span>/<span class="title">lib</span>/</span></span><br></pre></td></tr></table></figure><h3 id="SQLite-不需要安装-下载下来即可使用"><a href="#SQLite-不需要安装-下载下来即可使用" class="headerlink" title="SQLite 不需要安装,下载下来即可使用"></a>SQLite 不需要安装,下载下来即可使用</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">wget <span class="keyword">https</span>://www.sqlite.org/<span class="number">2015</span>/sqlite-amalgamation<span class="number">-3081101.</span>zip</span><br><span class="line">wget <span class="keyword">https</span>://www.sqlite.org/<span class="number">2015</span>/sqlite-amalgamation<span class="number">-3081101.</span>zip</span><br><span class="line">unzip sqlite-amalgamation<span class="number">-3081101.</span>zip</span><br><span class="line"></span><br><span class="line">解压sqlite-amalgamation包，将解压文件拷贝到subversion解压后的源码根目录中去</span><br><span class="line">cp -avr sqlite-amalgamation<span class="number">-3081101</span> subversion<span class="number">-1.11</span><span class="number">.1</span></span><br><span class="line"></span><br><span class="line">拷贝过去后重命名为sqlite-amalgamation,否则一直会报错 [最后使用的名字为sqlite-amalgamation]</span><br><span class="line">mv sqlite-amalgamation<span class="number">-3081101</span>/ sqlite-amalgamation</span><br><span class="line"></span><br><span class="line"><span class="comment">###扩展,官方解释</span></span><br><span class="line"><span class="keyword">https</span>://www.sqlite.org/amalgamation.html</span><br><span class="line"><span class="keyword">https</span>://github.com/mirek/sqlite-amalgamation</span><br><span class="line"> Just copy <span class="keyword">the</span> amalgamation <span class="keyword">into</span> your source <span class="built_in">directory</span> <span class="keyword">and</span> compile <span class="keyword">it</span> along <span class="keyword">with</span> <span class="keyword">the</span> other C code <span class="built_in">files</span> <span class="keyword">in</span> your project.</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/svn_configure/sqlite.png" alt="sqlite 不需要安装" title="sqlite"></p><h3 id="安装-subversion"><a href="#安装-subversion" class="headerlink" title="安装 subversion"></a>安装 subversion</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">wget http://mirrors.shu.edu.cn/apache/subversion/subversion-1.11.1.tar.gz</span><br><span class="line">wget http://mirrors.shu.edu.cn/apache/subversion/subversion-1.11.1.tar.gz</span><br><span class="line">tar -zxvf subversion-1.11.1.tar.gz</span><br><span class="line">cd subversion-1.11.1</span><br><span class="line"></span><br><span class="line">./configure \</span><br><span class="line">-<span class="ruby">-prefix=<span class="regexp">/data/server</span><span class="regexp">/svn \</span></span></span><br><span class="line"><span class="ruby">--with-apr=<span class="regexp">/data/server</span><span class="regexp">/apache_component/apr</span>-<span class="number">1.6</span>.<span class="number">5</span> \</span></span><br><span class="line"><span class="ruby">--with-apr-util=<span class="regexp">/data/server</span><span class="regexp">/apache_component/apr</span>-util-<span class="number">1.6</span>.<span class="number">1</span> \</span></span><br><span class="line"><span class="ruby">--with-serf=<span class="regexp">/data/server</span><span class="regexp">/apache_component/self</span> \</span></span><br><span class="line"><span class="ruby">--with-lz4=internal  \</span></span><br><span class="line"><span class="ruby">--with-utf8proc=internal  </span></span><br><span class="line"><span class="ruby">[</span></span><br><span class="line"><span class="ruby">按照报错提示添加 相应的信息</span></span><br><span class="line"><span class="ruby">--with-lz4=internal</span></span><br><span class="line"><span class="ruby">--with-utf8proc=internal </span></span><br><span class="line"><span class="ruby">]</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">[!!! 警告,这里不能使用--with-sqlite ,一定要将sqlite-amalgamation拷贝到subversion-<span class="number">1.11</span>.<span class="number">1</span>根目录,并且使用的名字为 sqlite-amalgamation  !!!]</span></span><br><span class="line"><span class="ruby">--with-sqlite=<span class="regexp">/home/fei</span><span class="regexp">/server/sqlite</span>-amalgamation-<span class="number">3081101</span></span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">make</span></span><br><span class="line"><span class="ruby">make install</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/svn_configure/configure.png" alt="编译" title="编译"></p><p><img src="/img/ubuntu/svn/svn_configure/configure_error01.png" alt="缺少 with-lz4=internal" title="缺少 with-lz4=internal"></p><p><img src="/img/ubuntu/svn/svn_configure/configure_error02.png" alt="缺少with-utf8proc=internal " title="缺少with-utf8proc=internal"></p><p><img src="/img/ubuntu/svn/svn_configure/install_over.png" alt="安装结束" title="安装结束"></p><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta-keyword">/data/</span>server<span class="meta-keyword">/svn/</span>bin/svn --version  <span class="meta">#查看版本信息</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/svn_configure/version.png" alt="version" title="version"></p><h3 id="安装完后使用svn一直报错"><a href="#安装完后使用svn一直报错" class="headerlink" title="安装完后使用svn一直报错"></a>安装完后使用svn一直报错</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">编译安装完后使用svn命令一直报错</span><br><span class="line"> ./svn --<span class="keyword">version</span></span><br><span class="line">./svn: error <span class="keyword">while</span> loading shared librarie<span class="variable">s:</span> libserf-<span class="number">1</span>.<span class="keyword">so</span>.<span class="number">1</span>: cannot <span class="keyword">open</span> shared object <span class="keyword">file</span>: No such <span class="keyword">file</span> <span class="built_in">or</span> directory</span><br><span class="line"></span><br><span class="line">解决<span class="number">01</span>办法先使 apt install subversion  安装subversion ,</span><br><span class="line">然后 卸载 sudo apt-<span class="built_in">get</span> <span class="built_in">remove</span> --purge subversion</span><br><span class="line">再次使用 编译安装好的   /data/server/svn/bin/svn --<span class="keyword">version</span>  #查看版本信息 没有报错</span><br><span class="line"></span><br><span class="line">解决<span class="number">02</span>[未亲自测试]</span><br><span class="line"><span class="keyword">cd</span> /etc/ld.<span class="keyword">so</span>.<span class="keyword">conf</span>.d/</span><br><span class="line"><span class="keyword">vim</span> libexpat.<span class="keyword">conf</span>  [或者 <span class="keyword">vi</span> user-libs.<span class="keyword">conf</span>]</span><br><span class="line">添加 /usr/local/lib   或者 添加 /data/server/other_component/self/lib</span><br><span class="line">执行 ldconfig 使配置生效,  </span><br><span class="line">ldconfig -v  查看</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/svn_configure/star_error.png" alt="启动报错" title="启动报错"></p><h3 id="检出一个项目测试"><a href="#检出一个项目测试" class="headerlink" title="检出一个项目测试"></a>检出一个项目测试</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">svn checkout <span class="symbol">svn:</span>/<span class="regexp">/192.168.1.11/repo</span><span class="regexp">/nh_rbac/aaa</span>_test</span><br><span class="line">接下来数据账号密码</span><br><span class="line">svn checkout <span class="symbol">svn:</span>/<span class="regexp">/192.168.1.11/repo</span><span class="regexp">/test/aaa</span>_test  /data/fei    <span class="comment">#检出到指定目录</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/svn_configure/checkout.png" alt="checkout 测试" title="checkout 测试"></p><h3 id="ubuntu16-中检出项目"><a href="#ubuntu16-中检出项目" class="headerlink" title="ubuntu16 中检出项目"></a>ubuntu16 中检出项目</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">svn checkout <span class="string">svn:</span><span class="comment">//192.168.1.104/repository/test</span></span><br><span class="line"></span><br><span class="line">使用一次后账号密码保存位置: <span class="regexp">/home/</span>fei<span class="regexp">/.subversion/</span></span><br><span class="line">清除密码: <span class="regexp">/home/</span>fei<span class="regexp">/.subversion/</span>auth/svn.simple  删除这个svn.simple 文件夹即可.</span><br><span class="line">下次会自从生成这个文件</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/svn_info.png" alt="svn 信息" title="svn 信息"></p><h2 id="ubuntu16-系统通过-apt-get-安装svn"><a href="#ubuntu16-系统通过-apt-get-安装svn" class="headerlink" title="ubuntu16 系统通过 apt-get 安装svn"></a>ubuntu16 系统通过 apt-get 安装svn</h2><h3 id="检查是否安装-svn-并安装"><a href="#检查是否安装-svn-并安装" class="headerlink" title="检查是否安装 svn,并安装"></a>检查是否安装 svn,并安装</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">svn </span><br><span class="line">svn <span class="keyword">help</span>            //<span class="comment">--svn帮助</span></span><br><span class="line">svn <span class="comment">--version       //--svn版本</span></span><br><span class="line">svnserve <span class="comment">--version  //--svn server版本</span></span><br><span class="line"></span><br><span class="line">卸载命令(–<span class="keyword">purge</span> 选项表示彻底删除改软件和相关文件)</span><br><span class="line">sudo apt-<span class="keyword">get</span> remove <span class="comment">--purge subversion</span></span><br><span class="line"></span><br><span class="line">开始安装</span><br><span class="line">apt <span class="keyword">install</span> subversion</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/svn/svn_info.png" alt="svn 信息" title="svn 信息"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Yii2  -model层不为人知的秘密</title>
      <link href="/2019/01/26/Yii2/Yii2_model/"/>
      <url>/2019/01/26/Yii2/Yii2_model/</url>
      <content type="html"><![CDATA[<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><p>在 PHP 中，类的成员变量也被称为<em>属性</em>。它们是类定义的一部分， 用来表现一个实例的状态（也就是区分类的不同实例）。 在具体实践中，常常会想用一个稍微特殊些的方法实现属性的读写</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//demo, 场景举例:有一个 int 型时间戳,需要显示为格式化的时间,每次格式化太麻烦</span></span><br><span class="line"><span class="comment">//在 model 层中</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span> <span class="keyword">extends</span> \<span class="title">yii</span>\<span class="title">db</span>\<span class="title">ActiveRecord</span></span></span><br><span class="line">    public function getTimeText()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> date(<span class="string">'Y/m/d'</span>, <span class="keyword">$this</span>-&gt;time);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">setTimeText</span><span class="params">($value)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;time = strtotime($value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//在 controller 层中</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BookController</span> <span class="keyword">extends</span> <span class="title">Controller</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">actionView</span><span class="params">($id)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $model = Book::findOne($id);  </span><br><span class="line">        print_r($model-&gt;TimeText); <span class="comment">//格式化的时间</span></span><br><span class="line">         print_r($model-&gt;time);  <span class="comment">//原来的 int 时间</span></span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>linux -useradd</title>
      <link href="/2019/01/20/ubuntu/linux_ubuntu_useradd/"/>
      <url>/2019/01/20/ubuntu/linux_ubuntu_useradd/</url>
      <content type="html"><![CDATA[<p>查看所有用户和用户组,添加删除用户</p><p>…………………………….</p><h3 id="查看所有用户"><a href="#查看所有用户" class="headerlink" title="查看所有用户"></a>查看所有用户</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/etc<span class="built_in">/group </span>  文件包含所有组</span><br><span class="line">/etc/shadow 和 /etc/passwd    系统存在的所有用户名</span><br><span class="line"></span><br><span class="line">tail -3 /etc/group</span><br><span class="line">tail -3 /etc/shadow</span><br><span class="line">tail -3 /etc/passwd</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_useradd/user.png" alt="查看所有用户" title="查看所有用户"></p><h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">useradd -m -s <span class="regexp">/bin/</span>bash fei_04  <span class="comment">###可以远程登录,也可以执行shell命令  常用</span></span><br><span class="line"></span><br><span class="line">useradd fei_02    <span class="comment">#创建用户</span></span><br><span class="line">passwd fei_02     <span class="comment">#设定密码</span></span><br><span class="line">tail -<span class="number">4</span> <span class="regexp">/etc/g</span>roup  <span class="comment">#查看用户</span></span><br><span class="line">这样创建的用户登录后不能使用 ll,touch 等其他命令</span><br><span class="line"></span><br><span class="line">useradd -m fei_03  <span class="comment">#创建一个有家目录,远程登录后不能执行命令</span></span><br><span class="line">useradd -m -s <span class="regexp">/bin/</span>bash fei_04  <span class="comment">##可以远程登录,也可以执行shell命令</span></span><br><span class="line">useradd -s <span class="regexp">/sbin/</span>nologin fei_05  <span class="comment">#创建一个没有家目录,且不能登录的用户</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_useradd/m.png" alt="m 选项" title="m 选项"></p><p><img src="/img/ubuntu/linux_command/linux_useradd/s.png" alt="s 选项" title="s 选项"></p><p><img src="/img/ubuntu/linux_command/linux_useradd/no_login.png" alt="不能登录" title="不能登录"></p><h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">userdel fei_03   <span class="comment">#如果用户还在登录状态,会出现无法删除,此时要先强制用户退</span></span><br><span class="line">w    <span class="comment">#查看当前登录用户</span></span><br><span class="line">pkill -<span class="built_in">kill</span> -t pts/20  <span class="comment"># 强制退出用户</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_useradd/userdel.png" alt="删除用户" title="删除用户"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-mysql -sql other02</title>
      <link href="/2019/01/12/mysql/sql_other02/"/>
      <url>/2019/01/12/mysql/sql_other02/</url>
      <content type="html"><![CDATA[<h3 id="MySQL-的复制原理及负载均衡"><a href="#MySQL-的复制原理及负载均衡" class="headerlink" title="MySQL 的复制原理及负载均衡"></a>MySQL 的复制原理及负载均衡</h3><h4 id="MySQL主从复制工作原理"><a href="#MySQL主从复制工作原理" class="headerlink" title="MySQL主从复制工作原理:"></a>MySQL主从复制工作原理:</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在主库上把数据更改记录到二进制日志</span><br><span class="line">从库将主库的日志复制到自己的中继日志</span><br><span class="line">从库读取中继日志中的事件,将其重放到从库数据库中</span><br></pre></td></tr></table></figure><h4 id="MySQL主从复制解决的问题"><a href="#MySQL主从复制解决的问题" class="headerlink" title="MySQL主从复制解决的问题:"></a>MySQL主从复制解决的问题:</h4><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">数据分布: 随意停止或开始复制,并在不同地理位置分布数据库备份</span></span><br><span class="line"><span class="section">负载均衡:降低单个服务器的压力</span></span><br><span class="line"><span class="section">高可用和故障切换: 帮助应用程序避免单点失败</span></span><br><span class="line"><span class="section">升级测试:可使用更高版本的MySQL作为从库</span></span><br></pre></td></tr></table></figure><h3 id="SQL查询处理的安全方案"><a href="#SQL查询处理的安全方案" class="headerlink" title="SQL查询处理的安全方案"></a>SQL查询处理的安全方案</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>) 使用预处理语句放置SQL注入</span><br><span class="line"><span class="number">2</span>)写入数据库的数据要进行特殊字符的转义</span><br><span class="line"><span class="number">3</span>)查询错误信息不要反悔给用户,将错误记录到日志</span><br><span class="line"></span><br><span class="line">PHP端尽量使用PDO对数据库进行相关操作,PDO拥有对预处理语句很好的支持,MySQLi也有,但是可扩展性不如PDO,效率高于PDO</span><br></pre></td></tr></table></figure><h3 id="MySQL的其他安全设置"><a href="#MySQL的其他安全设置" class="headerlink" title="MySQL的其他安全设置"></a>MySQL的其他安全设置</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>)定期做备份</span><br><span class="line"><span class="number">2</span>)不给用户root权限,合理分配权限</span><br><span class="line"><span class="number">3</span>)关闭远程访问数据库权限</span><br><span class="line"><span class="number">4</span>)修改root口令,不用默认口令,使用较复杂的口令</span><br><span class="line"><span class="number">5</span>)删除多余的用户</span><br><span class="line"><span class="number">6</span>)改变root用户名称</span><br><span class="line"><span class="number">7</span>)限制一般用户浏览其他库</span><br><span class="line"><span class="number">8</span>)限制用户对数据库的访问权限</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-kill -pkill -killall 终结进程</title>
      <link href="/2019/01/06/ubuntu/linux_ubuntu_kill/"/>
      <url>/2019/01/06/ubuntu/linux_ubuntu_kill/</url>
      <content type="html"><![CDATA[<p>-kill -pkill -killall 终结进程</p><h3 id="kill-发送指定信号到相应进程"><a href="#kill-发送指定信号到相应进程" class="headerlink" title="kill 发送指定信号到相应进程"></a>kill 发送指定信号到相应进程</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ps</span> -aux | <span class="keyword">grep</span> <span class="keyword">vim</span></span><br><span class="line">kill <span class="number">3453</span></span><br><span class="line"></span><br><span class="line">#demo</span><br><span class="line">root@ubuntu:/# <span class="keyword">ps</span> -aux | <span class="keyword">grep</span> <span class="keyword">vim</span></span><br><span class="line">fei        <span class="number">3452</span>  <span class="number">0.0</span>  <span class="number">0.9</span>  <span class="number">62048</span>  <span class="number">9344</span> <span class="keyword">pts</span>/<span class="number">19</span>   S+   <span class="number">20</span>:<span class="number">11</span>   <span class="number">0</span>:<span class="number">00</span> <span class="keyword">vim</span> hello.php</span><br><span class="line">fei        <span class="number">3453</span>  <span class="number">0.0</span>  <span class="number">0.8</span>  <span class="number">60916</span>  <span class="number">8252</span> <span class="keyword">pts</span>/<span class="number">18</span>   S+   <span class="number">20</span>:<span class="number">11</span>   <span class="number">0</span>:<span class="number">00</span> <span class="keyword">vim</span> aaa.txt</span><br><span class="line">root       <span class="number">3468</span>  <span class="number">0.0</span>  <span class="number">0.1</span>  <span class="number">21292</span>  <span class="number">1028</span> <span class="keyword">pts</span>/<span class="number">1</span>    S+   <span class="number">20</span>:<span class="number">14</span>   <span class="number">0</span>:<span class="number">00</span> <span class="keyword">grep</span> --color=auto <span class="keyword">vim</span></span><br><span class="line">root@ubuntu:/# kill <span class="number">3453</span></span><br><span class="line">root@ubuntu:/# <span class="keyword">ps</span> -aux | <span class="keyword">grep</span> <span class="keyword">vim</span></span><br><span class="line">fei        <span class="number">3452</span>  <span class="number">0.0</span>  <span class="number">0.9</span>  <span class="number">62048</span>  <span class="number">9344</span> <span class="keyword">pts</span>/<span class="number">19</span>   S+   <span class="number">20</span>:<span class="number">11</span>   <span class="number">0</span>:<span class="number">00</span> <span class="keyword">vim</span> hello.php</span><br><span class="line">root       <span class="number">3472</span>  <span class="number">0.0</span>  <span class="number">0.0</span>  <span class="number">21292</span>   <span class="number">880</span> <span class="keyword">pts</span>/<span class="number">1</span>    S+   <span class="number">20</span>:<span class="number">15</span>   <span class="number">0</span>:<span class="number">00</span> <span class="keyword">grep</span> --color=auto <span class="keyword">vim</span></span><br><span class="line">root@ubuntu:/#</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_kill/kill.png" alt="kiil" title="kill"></p><h3 id="pkill-按照进程名称杀死进程"><a href="#pkill-按照进程名称杀死进程" class="headerlink" title="pkill 按照进程名称杀死进程"></a>pkill 按照进程名称杀死进程</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ps</span> -aux | <span class="keyword">grep</span> <span class="keyword">vim</span></span><br><span class="line">pkill <span class="keyword">vim</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#demo</span><br><span class="line">root@ubuntu:/# <span class="keyword">ps</span> -aux | <span class="keyword">grep</span> <span class="keyword">vim</span></span><br><span class="line">fei        <span class="number">3497</span>  <span class="number">1.6</span>  <span class="number">0.9</span>  <span class="number">62048</span>  <span class="number">9328</span> <span class="keyword">pts</span>/<span class="number">19</span>   S+   <span class="number">20</span>:<span class="number">20</span>   <span class="number">0</span>:<span class="number">00</span> <span class="keyword">vim</span> hello.php</span><br><span class="line">fei        <span class="number">3499</span>  <span class="number">1.0</span>  <span class="number">0.8</span>  <span class="number">60916</span>  <span class="number">8368</span> <span class="keyword">pts</span>/<span class="number">18</span>   S+   <span class="number">20</span>:<span class="number">20</span>   <span class="number">0</span>:<span class="number">00</span> <span class="keyword">vim</span> aaa.txt</span><br><span class="line">root       <span class="number">3501</span>  <span class="number">0.0</span>  <span class="number">0.1</span>  <span class="number">21292</span>  <span class="number">1012</span> <span class="keyword">pts</span>/<span class="number">1</span>    S+   <span class="number">20</span>:<span class="number">20</span>   <span class="number">0</span>:<span class="number">00</span> <span class="keyword">grep</span> --color=auto <span class="keyword">vim</span></span><br><span class="line">root@ubuntu:/# pkill <span class="keyword">vim</span></span><br><span class="line">root@ubuntu:/# <span class="keyword">ps</span> -aux | <span class="keyword">grep</span> <span class="keyword">vim</span></span><br><span class="line">root       <span class="number">3504</span>  <span class="number">0.0</span>  <span class="number">0.0</span>  <span class="number">21292</span>   <span class="number">912</span> <span class="keyword">pts</span>/<span class="number">1</span>    S+   <span class="number">20</span>:<span class="number">20</span>   <span class="number">0</span>:<span class="number">00</span> <span class="keyword">grep</span> --color=auto <span class="keyword">vim</span></span><br><span class="line">root@ubuntu:/# </span><br><span class="line"></span><br><span class="line">### 特殊demo, 踢某个用户下线(who <span class="keyword">w</span> 查看登录用户)</span><br><span class="line">pkill -kill -t <span class="keyword">pts</span>/<span class="number">17</span></span><br><span class="line">pkill -<span class="number">9</span> -t <span class="keyword">pts</span>/<span class="number">17</span></span><br><span class="line">fuser -<span class="keyword">k</span> /dev/<span class="keyword">pts</span>/<span class="number">17</span></span><br><span class="line"><span class="keyword">echo</span> “你被管理员踢出了” &gt; /dev/<span class="keyword">pts</span>/<span class="number">17</span> &amp;&amp; fuser -<span class="keyword">k</span> /dev/<span class="keyword">pts</span>/<span class="number">17</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_kill/pkill.png" alt="pkiil" title="pkill"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu -path 环境变量篇 -composer 测试</title>
      <link href="/2018/12/29/ubuntu/ubuntu_path%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F_composer/"/>
      <url>/2018/12/29/ubuntu/ubuntu_path%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F_composer/</url>
      <content type="html"><![CDATA[<p>源码编译完的包,很多时候在任何目录时访问不到的,这时候需要添加环境变量,或者通过链接的形式,链接到系统默认的PATH目录下的一个,这篇文章就是介绍一下这2中添加环境变量的方式; !!!修改系统环境变量后,要退出当前用户重新登录后才可以看到效果;  <font style="color:red"> 本章介绍修改文件配置环境变量, 软链接配置环境变量参考node篇 <font></font></font></p><p>demo背景,采用composer测试,前提编译安装完php</p><h3 id="安装composer"><a href="#安装composer" class="headerlink" title="安装composer"></a>安装composer</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sS https:<span class="regexp">//g</span>etcomposer.org<span class="regexp">/installer | /</span>data<span class="regexp">/server/</span>php7<span class="regexp">/bin/</span>php</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/path/composer_install.png" alt="composer 安装" title="composer 安装"></p><h3 id="配置环境变量方法-01"><a href="#配置环境变量方法-01" class="headerlink" title="配置环境变量方法 01"></a>配置环境变量方法 01</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#第一种方式,放到系统默认PATH环境变量目录下</span></span><br><span class="line">cp <span class="string">/test/composer.phar</span> <span class="string">/usr/local/bin/composer</span>  或者</span><br><span class="line">mv <span class="string">/test/composer.phar</span> <span class="string">/usr/local/bin/composer</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###扩展,使用 echo $PATH 可以看到当前的环境变量内容,系统默认的环境变量包括:</span></span><br><span class="line">root@ubuntu:<span class="string">/test</span><span class="comment"># echo $PATH</span></span><br><span class="line"><span class="string">/usr/local/sbin</span>:<span class="string">/usr/local/bin</span>:<span class="string">/usr/sbin</span>:<span class="string">/usr/bin</span>:<span class="string">/sbin</span>:<span class="string">/bin</span>:<span class="string">/usr/games</span>:<span class="string">/usr/local/games</span></span><br><span class="line">root@ubuntu:<span class="string">/test</span><span class="comment"># </span></span><br><span class="line"></span><br><span class="line"><span class="comment">##查看环境变量 </span></span><br><span class="line">01)  <span class="keyword">echo</span> $PATH</span><br><span class="line">02)  evn</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/path/path_01.png" alt="composer 环境变量" title="composer 环境变量"></p><p><img src="/img/ubuntu/path/path_01_1.png" alt="composer 环境变量" title="composer 环境变量"></p><h3 id="配置环境变量方法-02-使用-PHP-来测试-系统-centos7"><a href="#配置环境变量方法-02-使用-PHP-来测试-系统-centos7" class="headerlink" title="配置环境变量方法 02 , 使用 PHP 来测试,系统 centos7"></a>配置环境变量方法 02 , 使用 PHP 来测试,系统 centos7</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PHP编译安装后的目录:  /data/server/php/bin</span><br><span class="line">vim  /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#centos中配置PHP环境变量:</span></span><br><span class="line">修改 /etc<span class="built_in">/profile </span>配置环境变量</span><br><span class="line"><span class="attribute">PATH</span>=<span class="variable">$PATH</span>:/data/server/php/bin</span><br><span class="line"><span class="builtin-name">export</span> PATH</span><br><span class="line">然后执行source /etc<span class="built_in">/profile </span>或者 .<span class="built_in">/profile </span>使其生效; 执行完后可以通过 echo <span class="variable">$PATH</span>  命令查看环境变量</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/path/path_02.png" alt="php 环境变量2" title="php 环境变量2"></p><h3 id="添加多个环境变量"><a href="#添加多个环境变量" class="headerlink" title="添加多个环境变量"></a>添加多个环境变量</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">以node 和 PHP 为例</span><br><span class="line">修改 /etc<span class="built_in">/profile </span>配置环境变量</span><br><span class="line"><span class="attribute">PATH</span>=<span class="variable">$PATH</span>:/data/server/node-v10.15.3-linux-x64/bin:/data/server/php7/bin</span><br><span class="line"><span class="builtin-name">export</span> PATH</span><br><span class="line">然后执行source /etc<span class="built_in">/profile </span>或者 .<span class="built_in">/profile </span>使其生效; 执行完后可以通过 echo <span class="variable">$PATH</span>  命令查看环境变量</span><br><span class="line"></span><br><span class="line">执行 </span><br><span class="line">node -v</span><br><span class="line">npm -v</span><br><span class="line">php -v</span><br><span class="line">node 和 PHP 都生效</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/path/path_more.png" alt="多个环境变量" title="多个环境变量"></p><h3 id="其他–环境变量顺序"><a href="#其他–环境变量顺序" class="headerlink" title="其他–环境变量顺序"></a>其他–环境变量顺序</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">正常情况下修改</span><br><span class="line">/etc/profile</span><br><span class="line">在图形界面中需要再修改</span><br><span class="line">~/.bashrc      #针对当前用户</span><br></pre></td></tr></table></figure><h3 id="composer-命令"><a href="#composer-命令" class="headerlink" title="composer 命令"></a>composer 命令</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">composer config -gl    #查看composer全局设置</span><br><span class="line">composer config --list -g  #查看composer全局设置</span><br><span class="line">composer require monolog/monolog   #安装monolog</span><br><span class="line">composer require monolog/monolog:<span class="string">"1.24.0"</span>   #安装monolog指定版本</span><br><span class="line">composer require <span class="string">"monolog/monolog:1.24.0"</span>   #安装monolog指定版本</span><br><span class="line">composer install </span><br><span class="line">composer update</span><br><span class="line">composer dump-autoload   #添加自定义后文件执行</span><br><span class="line"></span><br><span class="line">设置镜像地址:</span><br><span class="line"><span class="number">1</span>) 全局配置</span><br><span class="line">composer config -g repo<span class="selector-class">.packagist</span> composer https:<span class="comment">//repo.packagist.org</span></span><br><span class="line"><span class="number">2</span>) 当前项目使用  [ 去掉参数-g ]</span><br><span class="line"> composer config repo<span class="selector-class">.packagist</span> composer https:<span class="comment">//repo.packagist.org</span></span><br><span class="line"></span><br><span class="line">repo<span class="selector-class">.packagist</span><span class="selector-class">.org</span>  ip地址: <span class="number">139.99</span>.<span class="number">121.122</span>   新加坡</span><br><span class="line">packagist<span class="selector-class">.org</span>       ip地址: <span class="number">139.99</span>.<span class="number">121.122</span>   新加坡</span><br><span class="line"></span><br><span class="line">其他镜像地址</span><br><span class="line">composer-proxy<span class="selector-class">.jp</span>  </span><br><span class="line">packagist.jp</span><br><span class="line">https:<span class="comment">//packagist.laravel-china.org  [laravel 中国镜像]</span></span><br><span class="line">https:<span class="comment">//mirrors.aliyun.com/composer  [阿里云 composer 镜像]</span></span><br><span class="line"></span><br><span class="line">https:<span class="comment">//opsx.alibaba.com/mirror   [这里可以看到阿里云的所有镜像]</span></span><br></pre></td></tr></table></figure><p><a href="https://docs.phpcomposer.com/00-intro.html#Installation-*nix" target="_blank" rel="noopener">composer官方安装文档</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-算法02</title>
      <link href="/2018/12/23/%E9%9D%A2%E8%AF%95/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95_02/"/>
      <url>/2018/12/23/%E9%9D%A2%E8%AF%95/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95_02/</url>
      <content type="html"><![CDATA[<h3 id="01-输出-1-到-100-之间的素数-质数"><a href="#01-输出-1-到-100-之间的素数-质数" class="headerlink" title="01). 输出 1 到 100 之间的素数(质数)"></a>01). 输出 1 到 100 之间的素数(质数)</h3><p> 用一个数分别去除2到这个数之间的所有数,如果被整除就是素数</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2 3 5 7 11 13 17 19 23 29 31 37 41 43 47 53 59 61 67 71 73 79 83 89 97 </span></span><br><span class="line"><span class="comment">//分析: 用一个数分别去除2到这个数之间的所有数,如果被整除就是素数</span></span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">1</span>; $i &lt;= <span class="number">100</span>; $i++) &#123;</span><br><span class="line">    $k = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//判断开始和结束的值是否也是素数</span></span><br><span class="line">    <span class="keyword">for</span> ($j = <span class="number">1</span>; $j &lt;= $i; $j++) &#123;</span><br><span class="line">        <span class="keyword">if</span> ($i % $j == <span class="number">0</span>) &#123;</span><br><span class="line">            $k++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ($k == <span class="number">2</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> $i;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"&amp;nbsp;&amp;nbsp;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="02-打印出所有的-“水仙花数-“"><a href="#02-打印出所有的-“水仙花数-“" class="headerlink" title="02).   打印出所有的 “水仙花数 “"></a>02).   打印出所有的 “水仙花数 “</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 打印出所有的 "水仙花数 "， 三位的水仙花数共有4个：153，370，371，407</span></span><br><span class="line"><span class="comment">// 所谓 "水仙花数 "是指一个三位数，其各位数字立方和等于该数本身。</span></span><br><span class="line"><span class="comment">// 例如：153是一个 "水仙花数 "，因为 1^3 + 5^3+ 3^3 = 153</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">100</span>; $i &lt; <span class="number">1000</span>; $i++) &#123;</span><br><span class="line">    $hunderds = floor($i / <span class="number">100</span>);</span><br><span class="line">    $tens = floor($i / <span class="number">10</span>) % <span class="number">10</span>;</span><br><span class="line">    $ones = floor($i % <span class="number">10</span>);</span><br><span class="line">    $temp = pow($hunderds, <span class="number">3</span>) + pow($tens, <span class="number">3</span>) + pow($ones, <span class="number">3</span>);</span><br><span class="line">    <span class="keyword">if</span> ($temp == $i) &#123;</span><br><span class="line">        <span class="keyword">echo</span> $i;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"&amp;nbsp;"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="03-正整数分解质因数"><a href="#03-正整数分解质因数" class="headerlink" title="03).  正整数分解质因数"></a>03).  正整数分解质因数</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将一个正整数分解质因数。例如：输入90,打印出90=2*3*3*5。</span></span><br><span class="line"><span class="comment">// 分析:</span></span><br><span class="line"><span class="comment">// 对n进行分解质因数，应先找到一个最小的质数k，然后按下述步骤完成：</span></span><br><span class="line"><span class="comment">// (1)如果这个质数恰等于n，则说明分解质因数的过程已经结束，打印出即可。</span></span><br><span class="line"><span class="comment">// (2)如果n&lt;&gt;k，但n能被k整除，则应打印出k的值，并用n除以k的商,作为新的正整数n,重复执行第一步。</span></span><br><span class="line"><span class="comment">// (3)如果n不能被k整除，则用k+1作为k的值,重复执行第一步</span></span><br><span class="line"></span><br><span class="line">$n = <span class="number">90</span>;</span><br><span class="line"><span class="keyword">echo</span> $n . <span class="string">'='</span>;</span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">2</span>; $i &lt; $n + <span class="number">1</span>; $i ++)&#123;</span><br><span class="line">    <span class="keyword">while</span> ($n % $i == <span class="number">0</span> &amp;&amp; $n != $i) &#123;</span><br><span class="line">        $n /= $i;</span><br><span class="line">        <span class="keyword">echo</span> $i . <span class="string">"*"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ($n == $i) &#123;</span><br><span class="line">        <span class="keyword">echo</span> $i;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="04-三目条件嵌套"><a href="#04-三目条件嵌套" class="headerlink" title="04). 三目条件嵌套"></a>04). 三目条件嵌套</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 利用条件运算符的嵌套来完成此题：</span></span><br><span class="line"><span class="comment">// 学习成绩&gt; =90分的同学用A表示，</span></span><br><span class="line"><span class="comment">// 60-89分之间的用B表示，</span></span><br><span class="line"><span class="comment">// 60分以下的用C表示。</span></span><br><span class="line"></span><br><span class="line">$score = <span class="number">89</span>;</span><br><span class="line"></span><br><span class="line">$grade = $score &gt;= <span class="number">90</span> ? <span class="string">'A'</span> : ($score &gt;= <span class="number">60</span> &amp;&amp; $score &lt;= <span class="number">89</span> ? <span class="string">'B'</span> : <span class="string">"C"</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $grade;</span><br></pre></td></tr></table></figure><h3 id="05-输入两个正整数m和n，求其最大公约数和最小公倍数"><a href="#05-输入两个正整数m和n，求其最大公约数和最小公倍数" class="headerlink" title="05). 输入两个正整数m和n，求其最大公约数和最小公倍数"></a>05). 输入两个正整数m和n，求其最大公约数和最小公倍数</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 题目：输入两个正整数m和n，求其最大公约数和最小公倍数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 在循环中，只要除数不等于0，用较大数除以较小的数，</span></span><br><span class="line"><span class="comment">// 将小的一个数作为下一轮循环的大数，取得的余数作为下一轮循环的较小的数，</span></span><br><span class="line"><span class="comment">// 如此循环直到较小的数的值为0，</span></span><br><span class="line"><span class="comment">// 返回较大的数，此数即为最大公约数，最小公倍数为两数之积除以最大公约数。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这种方法叫做: 辗除法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">f</span><span class="params">($x, $y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ($x &lt; $y) &#123;</span><br><span class="line">        $temp = $x;</span><br><span class="line">        $x = $y;</span><br><span class="line">        $y = $temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> ($y!=<span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ($x==$y)&#123;</span><br><span class="line">            <span class="keyword">return</span> $x;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            $k = $x % $y;</span><br><span class="line">            $x = $y;</span><br><span class="line">            $y = $k;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $x;</span><br><span class="line">&#125;</span><br><span class="line">$a = <span class="number">21</span>;  $b = <span class="number">24</span>;</span><br><span class="line">$m =  f($a, $b); <span class="comment">//最大公约数</span></span><br><span class="line">$n = $a * $b / $m; <span class="comment">//最小公倍数</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'最大公约数为: '</span> . $m.<span class="string">"&amp;nbsp;&amp;nbsp;"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'最小公倍数为: '</span> . $n.<span class="string">"&amp;nbsp;&amp;nbsp;"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//------------------------------------------------------------</span></span><br><span class="line"><span class="comment">// 方法2, 使用php自带的函数,获取最小公约数</span></span><br><span class="line">$gcd = gmp_gcd(<span class="string">"21"</span>, <span class="string">"24"</span>);</span><br><span class="line"><span class="keyword">echo</span> gmp_strval($gcd) . <span class="string">"\n"</span>;</span><br></pre></td></tr></table></figure><h3 id="06-求s-a-aa-aaa-aaaa-aa…a的值"><a href="#06-求s-a-aa-aaa-aaaa-aa…a的值" class="headerlink" title="06)  求s=a+aa+aaa+aaaa+aa…a的值"></a>06)  求s=a+aa+aaa+aaaa+aa…a的值</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 题目：求s=a+aa+aaa+aaaa+aa...a的值，其中a是一个数字。</span></span><br><span class="line"><span class="comment">// 例如2+22+222+2222+22222(此时共有5个数相加)，几个数相加有键盘控制</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//$num 数字  $count 几个数相加</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span><span class="params">($num, $count)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $temp = <span class="number">0</span>;</span><br><span class="line">    $sum = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $count; $i++) &#123;</span><br><span class="line">        $temp = $temp + $num; <span class="comment">//获取需要相加的数字</span></span><br><span class="line">        $sum = $sum + $temp;  <span class="comment">//数字相加</span></span><br><span class="line">        $num = $num * <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// echo fun(2, 2); //2+22=24</span></span><br><span class="line"><span class="comment">// echo fun(2, 3); //2+22+222=246</span></span><br><span class="line"><span class="comment">// echo fun(2, 4); //2+22+222+2222=2468</span></span><br><span class="line"><span class="keyword">echo</span> fun(<span class="number">2</span>, <span class="number">5</span>); <span class="comment">//2+22+222+2222+22222=24690</span></span><br></pre></td></tr></table></figure><h3 id="07-完数"><a href="#07-完数" class="headerlink" title="07)  完数"></a>07)  完数</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 题目：一个数如果恰好等于它的因子之和，这个数就称为 "完数 "。</span></span><br><span class="line"><span class="comment">// 例如6=1＋2＋3.编程     找出1000以内的所有完数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"1到1000的完数有:    "</span>;</span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">1</span>; $i &lt; <span class="number">1000</span>; $i++) &#123;</span><br><span class="line">        $t = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> ($j = <span class="number">1</span>; $j &lt;= $i / <span class="number">2</span>; $j++) &#123;<span class="comment">//$i/2 减少循环次数   for ($j = 1; $j &lt; $i ; $j++) &#123;</span></span><br><span class="line">            <span class="keyword">if</span> ($i % $j == <span class="number">0</span>) &#123;</span><br><span class="line">                $t = $t + $j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ($t == $i) &#123;</span><br><span class="line">            <span class="keyword">echo</span>($i .<span class="string">"   "</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fun(); <span class="comment">//1到1000的完数有: 6  28  496</span></span><br></pre></td></tr></table></figure><h3 id="08-四个数字组成三位数"><a href="#08-四个数字组成三位数" class="headerlink" title="08) 四个数字组成三位数"></a>08) 四个数字组成三位数</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 题目：有1、2、3、4四个数字，</span></span><br><span class="line"><span class="comment">// 能组成多少个互不相同且无重复数字的三位数 都是多少</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $x = <span class="number">0</span>;</span><br><span class="line">    $y = <span class="number">0</span>;</span><br><span class="line">    $z = <span class="number">0</span>;</span><br><span class="line">    $arr = [];    </span><br><span class="line">    $_count = <span class="number">0</span>;  <span class="comment">//统计个数</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> ($x = <span class="number">1</span>; $x &lt; <span class="number">5</span>; $x++) &#123;</span><br><span class="line">        <span class="keyword">for</span> ($y = <span class="number">1</span>; $y &lt; <span class="number">5</span>; $y++) &#123;</span><br><span class="line">            <span class="keyword">for</span> ($z = <span class="number">1</span>; $z &lt; <span class="number">5</span>; $z++) &#123;</span><br><span class="line">                <span class="keyword">if</span> ($x != $y &amp;&amp; $y != $z &amp;&amp; $x != $z) &#123;</span><br><span class="line">                    $_count++;</span><br><span class="line">                    <span class="comment">// echo $x * 100 + $y * 10 + $z.'&lt;br/&gt;';</span></span><br><span class="line">                    array_push($arr, $x * <span class="number">100</span> + $y * <span class="number">10</span> + $z);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    array_push($arr, [<span class="string">'count'</span> =&gt; $_count]);</span><br><span class="line">    <span class="keyword">return</span> $arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print_r(fun());</span><br></pre></td></tr></table></figure><h3 id="09-某年某月某日-第几天"><a href="#09-某年某月某日-第几天" class="headerlink" title="09) 某年某月某日,第几天"></a>09) 某年某月某日,第几天</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输入某年某月某日，判断这一天是这一年的第几天</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span><span class="params">($year,$month,$day)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> ($month) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">1</span>:$sum=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">2</span>:$sum=<span class="number">31</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>:$sum=<span class="number">59</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">4</span>:$sum=<span class="number">90</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">5</span>:$sum=<span class="number">120</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>:$sum=<span class="number">151</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">7</span>:$sum=<span class="number">181</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">8</span>:$sum=<span class="number">212</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">9</span>:$sum=<span class="number">243</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">10</span>:$sum=<span class="number">273</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">11</span>:$sum=<span class="number">304</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">12</span>:$sum=<span class="number">334</span>;<span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:printf(<span class="string">"data error"</span>);<span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    $sum = $sum + $day;</span><br><span class="line">    <span class="keyword">if</span> ($year % <span class="number">400</span> == <span class="number">0</span> || ($year % <span class="number">4</span> == <span class="number">0</span> &amp;&amp; $year % <span class="number">100</span> != <span class="number">0</span>)) &#123; <span class="comment">//判断是不是闰年</span></span><br><span class="line">        $leap = <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        $leap = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ($leap == <span class="number">1</span> &amp;&amp; $month &gt; <span class="number">2</span>) &#123; <span class="comment">//如果是闰年切月份大于2,总天数应该加一天</span></span><br><span class="line">        $sum++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print_r(fun(<span class="number">2019</span>, <span class="number">03</span>, <span class="number">1</span>));</span><br></pre></td></tr></table></figure><h3 id="10-三元运算符及比较3个数的大小-输出最大的数"><a href="#10-三元运算符及比较3个数的大小-输出最大的数" class="headerlink" title="10) 三元运算符及比较3个数的大小,输出最大的数"></a>10) 三元运算符及比较3个数的大小,输出最大的数</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 三元运算符及比较3个数的大小,输出最大的数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span><span class="params">($a,$b,$c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $d= $a &gt; $b ? ($a &gt; $c ? $a : $c) : ($b &gt; $c ? $b : $c);</span><br><span class="line">    <span class="keyword">return</span> $d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> fun(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//-----------------------------------</span></span><br><span class="line"><span class="comment">// 比较3个数的大小, 并从小到大输出</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun</span><span class="params">($i, $j, $k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> ($i &gt; $j) &#123;</span><br><span class="line">        $x = $i;</span><br><span class="line">        $i = $j;</span><br><span class="line">        $j = $x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ($i &gt; $k) &#123;</span><br><span class="line">        $x = $i;</span><br><span class="line">        $i = $k;</span><br><span class="line">        $k = $x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ($j &gt; $k) &#123;</span><br><span class="line">        $x = $j;</span><br><span class="line">        $j = $k;</span><br><span class="line">        $k = $x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $i . <span class="string">" "</span> . $j . <span class="string">" "</span> . $k;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> fun(<span class="number">10</span>, <span class="number">0</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>--login 登录系统后常用命令</title>
      <link href="/2018/12/09/ubuntu/linux_ubuntu_login/"/>
      <url>/2018/12/09/ubuntu/linux_ubuntu_login/</url>
      <content type="html"><![CDATA[<p>介绍：</p><p>登录新系统后常用命令</p><h3 id="uname-打印系统相关信息"><a href="#uname-打印系统相关信息" class="headerlink" title="uname 打印系统相关信息"></a>uname 打印系统相关信息</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">uname </span><br><span class="line">uname -<span class="keyword">a</span>   <span class="comment">#显示全部信息</span></span><br><span class="line">uname -m   <span class="comment">#系统类型</span></span><br><span class="line">uname -n</span><br><span class="line">uname -r</span><br><span class="line">uname -s</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_login/uname.png" alt="uname" title="uname"></p><h3 id="top"><a href="#top" class="headerlink" title="top"></a>top</h3><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">top </span><br><span class="line">然后按 <span class="built_in">shift</span> + p ,按照进程处理器占用率排序</span><br><span class="line">然后按 <span class="built_in">Shift</span> + m, 按照进程内存占用率排序</span><br><span class="line">然后按 <span class="built_in">Shift</span> + e, 切换单位K,M,G直接切换</span><br></pre></td></tr></table></figure><h3 id="ps-当前系统的进程状态"><a href="#ps-当前系统的进程状态" class="headerlink" title="ps 当前系统的进程状态"></a>ps 当前系统的进程状态</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#选项很多,列举2个demo</span></span><br><span class="line">ps -aux | grep php</span><br><span class="line">ps -aux | nginx</span><br><span class="line">ps -aux |  more</span><br><span class="line">ps -aux | head -3</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# ps aux |head -1; ps aux | grep httpd</span><br><span class="line">USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# ps -aux | grep httpd</span><br></pre></td></tr></table></figure><h3 id="free-查看内存"><a href="#free-查看内存" class="headerlink" title="free  查看内存"></a>free  查看内存</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">free</span> -h   <span class="comment">#以K，M，G为单位，提高信息的可读性</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_login/free_h.png" alt="free 参数h" title="free 参数h"></p><h3 id="pmap-报告进程的内存映射关系"><a href="#pmap-报告进程的内存映射关系" class="headerlink" title="pmap 报告进程的内存映射关系"></a>pmap 报告进程的内存映射关系</h3><figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pidof  <span class="meta">#查找指定名称的进程id号demo:  pidof nginx</span></span><br><span class="line">pmap  <span class="meta">#查看进程的内存印象信息demo: pmap -d 6953</span></span><br><span class="line">pmap 最后一行的值</span><br><span class="line">mapped 表示该进程映射的虚拟地址空间大小，也就是该进程预先分配的虚拟内存大小，即ps出的vsz</span><br><span class="line">writeable/<span class="keyword">private</span>  表示进程所占用的私有地址空间大小，也就是该进程实际使用的内存大小      </span><br><span class="line"><span class="keyword">shared</span> 表示进程和其他进程共享的内存大小</span><br></pre></td></tr></table></figure><h3 id="vmstat-显示虚拟内存状态"><a href="#vmstat-显示虚拟内存状态" class="headerlink" title="vmstat 显示虚拟内存状态"></a>vmstat 显示虚拟内存状态</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">vmstat</span><br><span class="line"></span><br><span class="line">字段说明:</span><br><span class="line">Memory（内存）</span><br><span class="line"></span><br><span class="line"><span class="symbol">swpd:</span> 使用虚拟内存大小，如果swpd的值不为<span class="number">0</span>，但是SI，SO的值长期为<span class="number">0</span>，这种情况不会影响系统性能。</span><br><span class="line"><span class="symbol">free:</span> 空闲物理内存大小。</span><br><span class="line"><span class="symbol">buff:</span> 用作缓冲的内存大小。</span><br><span class="line"><span class="symbol">cache:</span> 用作缓存的内存大小，如果cache的值大的时候，说明cache处的文件数多，如果频繁访问到的文件都能被cache处，那么磁盘的读IO bi会非常小。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta-keyword">/proc/</span>sys<span class="meta-keyword">/vm/</span>drop_caches </span><br><span class="line">这个文件的值是<span class="number">0</span>-<span class="number">-3</span>之间的数字,代表不同改的含义</span><br><span class="line"><span class="number">0</span>：不释放（系统默认值）</span><br><span class="line"><span class="number">1</span>：释放页缓存</span><br><span class="line"><span class="number">2</span>：释放dentries和inodes</span><br><span class="line"><span class="number">3</span>：释放所有缓存</span><br><span class="line"></span><br><span class="line">-------- 释放缓存 --------</span><br><span class="line">sync                           <span class="meta">#!!!将所有未写的系统缓冲区写到磁盘中!!!</span></span><br><span class="line">echo <span class="number">1</span> &gt; <span class="meta-keyword">/proc/</span>sys<span class="meta-keyword">/vm/</span>drop_caches   <span class="meta">#仅清除pagecache(页面)缓存</span></span><br><span class="line">echo <span class="number">2</span> &gt; <span class="meta-keyword">/proc/</span>sys<span class="meta-keyword">/vm/</span>drop_caches   <span class="meta">#清除dentries(目录缓存)和inode</span></span><br><span class="line">echo <span class="number">3</span> &gt; <span class="meta-keyword">/proc/</span>sys<span class="meta-keyword">/vm/</span>drop_caches   <span class="meta">#清除pagecache(页面缓存)，dentries(目录缓存)和inode</span></span><br><span class="line"></span><br><span class="line">或者(这和上面是一样的效果)</span><br><span class="line">sync </span><br><span class="line">sysctl -w vm.drop_caches=<span class="number">1</span></span><br><span class="line">sysctl -w vm.drop_caches=<span class="number">2</span></span><br><span class="line">sysctl -w vm.drop_caches=<span class="number">3</span></span><br><span class="line"></span><br><span class="line">系统重启后 <span class="meta-keyword">/proc/</span>sys<span class="meta-keyword">/vm/</span>drop_caches 里面的值会自己改为<span class="number">0</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_login/vmstat.png" alt="vmstat 虚拟内存状态" title="vmstat"></p><h3 id="df-显示磁盘分区上的可使用的磁盘空间"><a href="#df-显示磁盘分区上的可使用的磁盘空间" class="headerlink" title="df  显示磁盘分区上的可使用的磁盘空间"></a>df  显示磁盘分区上的可使用的磁盘空间</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">df</span> -h   <span class="comment">#以K，M，G为单位，提高信息的可读性</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_login/df_h.png" alt="df 参数h" title="df 参数h"></p><p>du :  与df不同的是,du命令是对文件和目录磁盘使用的空间查看</p><h3 id="du-对文件和目录磁盘使用的空间查看"><a href="#du-对文件和目录磁盘使用的空间查看" class="headerlink" title="du  对文件和目录磁盘使用的空间查看"></a>du  对文件和目录磁盘使用的空间查看</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">du</span> -h   <span class="comment">#以K，M，G为单位，提高信息的可读性</span></span><br><span class="line">du -s   <span class="comment">#显示目录中文件总和</span></span><br><span class="line">du -sh</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_login/du_h.png" alt="du 参数h" title="du 参数h"></p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">du -h <span class="attribute">--max-depth</span>=0</span><br><span class="line">du -h <span class="attribute">--max-depth</span>=1</span><br><span class="line">du -h <span class="attribute">--max-depth</span>=2</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_login/max_depth.png" alt="参数max-depth" title="参数max-depth"></p><h3 id="uptime-查看系统运行时间、用户数、负载"><a href="#uptime-查看系统运行时间、用户数、负载" class="headerlink" title="uptime 查看系统运行时间、用户数、负载"></a>uptime 查看系统运行时间、用户数、负载</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">uptime</span><br><span class="line"></span><br><span class="line">root<span class="variable">@ubuntu</span><span class="symbol">:/home/fei/www</span><span class="comment"># uptime</span></span><br><span class="line"> <span class="number">18</span><span class="symbol">:</span><span class="number">24</span><span class="symbol">:</span><span class="number">03</span> up  <span class="number">1</span><span class="symbol">:</span><span class="number">52</span>,  <span class="number">1</span> user,  load <span class="symbol">average:</span> <span class="number">0</span>.<span class="number">39</span>, <span class="number">0</span>.<span class="number">69</span>, <span class="number">0</span>.<span class="number">37</span></span><br><span class="line">root<span class="variable">@ubuntu</span><span class="symbol">:/home/fei/www</span><span class="comment">#</span></span><br></pre></td></tr></table></figure><h3 id="netstat-系统中网络状态信息-端口-lsof-i-22"><a href="#netstat-系统中网络状态信息-端口-lsof-i-22" class="headerlink" title="netstat  系统中网络状态信息(端口)   [lsof -i:22 ]"></a>netstat  系统中网络状态信息(端口)   [lsof -i:22 ]</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">netstat -lntp <span class="meta"># 查看所有监听端口  </span></span><br><span class="line">netstat -antp <span class="meta"># 查看所有已经建立的连接, 查看端口是否被应用</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#查看占用端口22的进程</span></span><br><span class="line">netstat -lntp <span class="string">| grep 22</span></span><br><span class="line">lsof -i:<span class="number">22</span></span><br></pre></td></tr></table></figure><h3 id="crontab-计划任务"><a href="#crontab-计划任务" class="headerlink" title="crontab 计划任务"></a>crontab 计划任务</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">crontab</span> -l <span class="comment"># 查看当前用户的计划任务服务</span></span><br></pre></td></tr></table></figure><h3 id="w-显示已经登陆系统的用户列表，并显示用户正在执行的指令"><a href="#w-显示已经登陆系统的用户列表，并显示用户正在执行的指令" class="headerlink" title="w  显示已经登陆系统的用户列表，并显示用户正在执行的指令"></a>w  显示已经登陆系统的用户列表，并显示用户正在执行的指令</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">w</span><br><span class="line"></span><br><span class="line">root@ubuntu:/# w      #当前登录用户 fei, fei_02</span><br><span class="line"> 19:46:31 up  1:19,  2 users,  load average: 0.18, 0.10, 0.03</span><br><span class="line">USER     TTY      <span class="keyword">FROM</span>             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">fei      tty7     :0               18:27    1:19m  7.79s  0.58s /sbin/upstart -</span><br><span class="line">fei_02   pts/18   192.168.47.1     19:46   12.00s  0.00s  0.00s -sh</span><br></pre></td></tr></table></figure><h3 id="who-显示目前登录系统的用户信息"><a href="#who-显示目前登录系统的用户信息" class="headerlink" title="who 显示目前登录系统的用户信息"></a>who 显示目前登录系统的用户信息</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@ubuntu</span><span class="symbol">:/home/fei</span><span class="comment"># who</span></span><br><span class="line">fei      tty7         <span class="number">2019</span>-<span class="number">01</span>-<span class="number">05</span> <span class="number">18</span><span class="symbol">:</span><span class="number">27</span> (<span class="symbol">:</span><span class="number">0</span>)</span><br><span class="line">fei_02   pts/<span class="number">17</span>       <span class="number">2019</span>-<span class="number">01</span>-<span class="number">05</span> <span class="number">22</span><span class="symbol">:</span><span class="number">05</span> (<span class="number">192.168</span>.<span class="number">47.1</span>)</span><br><span class="line">root<span class="variable">@ubuntu</span><span class="symbol">:/home/fei</span><span class="comment">#</span></span><br></pre></td></tr></table></figure><h3 id="write-终端给登录用户发消息"><a href="#write-终端给登录用户发消息" class="headerlink" title="write 终端给登录用户发消息"></a>write 终端给登录用户发消息</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">write</span> fei_02 <span class="keyword">pts</span>/<span class="number">17</span></span><br><span class="line">ctrl+<span class="keyword">c</span> 或者 ctrl + d 结束</span><br><span class="line"></span><br><span class="line">或者:</span><br><span class="line"><span class="keyword">echo</span> “你被管理员踢出了” &gt; /dev/<span class="keyword">pts</span>/<span class="number">17</span></span><br><span class="line">fuser -<span class="keyword">k</span> /dev/<span class="keyword">pts</span>/<span class="number">17</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_login/w_who_write.png" alt="w who write" title="w who write"></p><h3 id="fuser-踢用户下线"><a href="#fuser-踢用户下线" class="headerlink" title="fuser 踢用户下线"></a>fuser 踢用户下线</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fuser -k <span class="string">/dev/pts/17</span>  <span class="comment">#使用 w 或者 who 可查看在线用户</span></span><br><span class="line"><span class="keyword">echo</span> “你被管理员踢出了” &gt; <span class="string">/dev/pts/17</span> &amp;&amp; fuser -k <span class="string">/dev/pts/17</span>  <span class="comment">#发送消息并踢下线</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_login/fuser.png" alt="fuser" title="fuser"></p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">ubuntu</span> 命令窗口背景颜色  <span class="comment">#300a24</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>vagrant_03 --VirtualBox --硬盘扩容</title>
      <link href="/2018/11/30/centos/vagrant_03_VirtualBox_%E7%A1%AC%E7%9B%98%E6%89%A9%E5%AE%B9/"/>
      <url>/2018/11/30/centos/vagrant_03_VirtualBox_%E7%A1%AC%E7%9B%98%E6%89%A9%E5%AE%B9/</url>
      <content type="html"><![CDATA[<p>vagrant  初始的 box 硬盘空间只有 10G,安装 mysql8 就不够用 :(  ,下面介绍给主硬盘空间扩容, 操作平台 windows7, box[ubuntu18]</p><h3 id="添加环境变量"><a href="#添加环境变量" class="headerlink" title="添加环境变量"></a>添加环境变量</h3><p>为了接下来方便操作在 windows 中添加 virtualbox 的环境变量 [ 因为下面会多次用到 vboxmanage 命令 ]</p><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">!!! 备份要扩容的文件, 或者全部备份</span><br><span class="line">!!  vbox , vbox-prev 配置文件要备份</span><br></pre></td></tr></table></figure><p><img src="/img/centos/vagrant_VirtualBox/backups.png" alt="备份源文件"></p><h3 id="记录要扩容的硬盘的原始信息"><a href="#记录要扩容的硬盘的原始信息" class="headerlink" title="记录要扩容的硬盘的原始信息"></a>记录要扩容的硬盘的原始信息</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vboxmanage showhdinfo ubuntu-bionic-18.04-cloudimg.vmdk</span><br><span class="line"></span><br><span class="line">--------------------------------------------------------</span><br><span class="line">$ vboxmanage showhdinfo ubuntu-bionic-18.04-cloudimg.vmdk</span><br><span class="line">UUID:           5d02ba81-6f7e-4a8e-8e1b-eadbb30d11d4</span><br><span class="line">Parent UUID:    base</span><br><span class="line">.....</span><br></pre></td></tr></table></figure><p><img src="/img/centos/vagrant_VirtualBox/showinfo.png" alt="原始信息"></p><h3 id="开始扩容"><a href="#开始扩容" class="headerlink" title="开始扩容"></a>开始扩容</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#克隆成 vdi 文件</span><br><span class="line">vboxmanage clonehd <span class="string">"ubuntu-bionic-18.04-cloudimg.vmdk"</span> <span class="string">"new-ubuntu-bionic-18.04-cloudimg.vdi"</span> --format vdi</span><br><span class="line"></span><br><span class="line">#扩容为 <span class="number">30</span>G</span><br><span class="line">vboxmanage modifyhd <span class="string">"new-ubuntu-bionic-18.04-cloudimg.vdi"</span> --<span class="attribute">resize</span> <span class="number">30720</span></span><br><span class="line"></span><br><span class="line">#转化为原来的 vmdk 格式</span><br><span class="line">VBoxManage clonehd <span class="string">"new-ubuntu-bionic-18.04-cloudimg.vdi"</span> <span class="string">"new-ubuntu-bionic-18.04-cloudimg.vmdk"</span> --format vmdk</span><br><span class="line"></span><br><span class="line">#查看新 vmdk 信息,记录uuid</span><br><span class="line"> vboxmanage showhdinfo new-ubuntu-bionic-<span class="number">18.04</span>-cloudimg.vmdk</span><br><span class="line"></span><br><span class="line">$ vboxmanage showhdinfo new-ubuntu-bionic-<span class="number">18.04</span>-cloudimg.vmdk</span><br><span class="line">UUID:           f6b42381-fde2-<span class="number">43</span>c2-bcab-<span class="number">3</span>e37731caa9a</span><br><span class="line">Parent UUID:    base</span><br><span class="line"></span><br><span class="line">--------------------------------------------------</span><br><span class="line"></span><br><span class="line">#[ <span class="selector-tag">del</span>,ren  命令只能在 cmd 或 powershell 中执行]</span><br><span class="line">#删除需要扩容的 vmdk </span><br><span class="line"><span class="selector-tag">del</span>  ubuntu-bionic-<span class="number">18.04</span>-cloudimg.vmdk</span><br><span class="line"></span><br><span class="line">#将扩容后的 vmdk 重命名为原来的文件名</span><br><span class="line">ren new-ubuntu-bionic-<span class="number">18.04</span>-cloudimg<span class="selector-class">.vmdk</span>  ubuntu-bionic-<span class="number">18.04</span>-cloudimg.vmdk</span><br><span class="line"></span><br><span class="line">--------------------------------------------------</span><br><span class="line">D:\soft_position\VirtualBox_linux\ubuntu18_default_1543569229538_92064&gt; <span class="selector-tag">del</span>  ubuntu-bionic-<span class="number">18.04</span>-cloudimg.vmdk</span><br><span class="line">D:\soft_position\VirtualBox_linux\ubuntu18_default_1543569229538_92064&gt; ren new-ubuntu-bionic-<span class="number">18.04</span>-cloudimg<span class="selector-class">.vmdk</span>  ubuntu-bionic-<span class="number">18.04</span>-cloudimg.vmdk</span><br></pre></td></tr></table></figure><p><img src="/img/centos/vagrant_VirtualBox/vmdk_vdi.png" alt="扩容_01"></p><p><img src="/img/centos/vagrant_VirtualBox/vmdk_vdi_02.png" alt="扩容_02"></p><h3 id="修改-配置文件-uuid"><a href="#修改-配置文件-uuid" class="headerlink" title="修改 配置文件 uuid"></a>修改 配置文件 uuid</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 手动修改,图形界面修改都可以</span><br><span class="line">ubuntu18_default_1543569229538_92064.vbox</span><br><span class="line">ubuntu18_default_1543569229538_92064.vbox-prev</span><br><span class="line">这<span class="number">2</span>个文件中旧的 uuid  <span class="number">5</span>d02ba81<span class="number">-6</span>f7e<span class="number">-4</span>a8e<span class="number">-8e1</span>b-eadbb30d11d4</span><br><span class="line">全部替换为新的  uuid  f6b42381-fde2<span class="number">-43</span>c2-bcab<span class="number">-3e37731</span>caa9a</span><br></pre></td></tr></table></figure><p><img src="/img/centos/vagrant_VirtualBox/uuid.png" alt="uuid 修改"></p><h3 id="扩容成功"><a href="#扩容成功" class="headerlink" title="扩容成功"></a>扩容成功</h3><p><img src="/img/centos/vagrant_VirtualBox/success.png" alt="扩容成功"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-mysql -sql other</title>
      <link href="/2018/11/26/mysql/sql_other/"/>
      <url>/2018/11/26/mysql/sql_other/</url>
      <content type="html"><![CDATA[<h3 id="mysql-简单整理"><a href="#mysql-简单整理" class="headerlink" title="mysql 简单整理"></a>mysql 简单整理</h3><p> group by  ;  group_concat </p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">SELECT <span class="symbol">*</span> FROM student_01 GROUP BY `name`;</span><br><span class="line"></span><br><span class="line">SELECT <span class="symbol">*</span>,GROUP_CONCAT(name) FROM student_01 GROUP BY `name`;</span><br><span class="line"></span><br><span class="line">+----+------+---------+-------+</span><br><span class="line">|<span class="string"> id </span>|<span class="string"> name </span>|<span class="string"> kecheng </span>|<span class="string"> score </span>|</span><br><span class="line">+----+------+---------+-------+</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> 张三  </span>|<span class="string"> 语文    </span>|<span class="string"> 81    </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> 李四  </span>|<span class="string"> 语文    </span>|<span class="string"> 76    </span>|</span><br><span class="line">|<span class="string">  5 </span>|<span class="string"> 王五  </span>|<span class="string"> 语文    </span>|<span class="string"> 81    </span>|</span><br><span class="line">+----+------+---------+-------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">+----+------+---------+-------+--------------------+</span><br><span class="line">|<span class="string"> id </span>|<span class="string"> name </span>|<span class="string"> kecheng </span>|<span class="string"> score </span>|<span class="string"> GROUP_CONCAT(name) </span>|</span><br><span class="line">+----+------+---------+-------+--------------------+</span><br><span class="line">|<span class="string">  1 </span>|<span class="string"> 张三  </span>|<span class="string"> 语文    </span>|<span class="string"> 81    </span>|<span class="string"> 张三,张三           </span>|</span><br><span class="line">|<span class="string">  3 </span>|<span class="string"> 李四  </span>|<span class="string"> 语文    </span>|<span class="string"> 76    </span>|<span class="string"> 李四,李四           </span>|</span><br><span class="line">|<span class="string">  5 </span>|<span class="string"> 王五  </span>|<span class="string"> 语文    </span>|<span class="string"> 81    </span>|<span class="string"> 王五,王五,王五      </span>|</span><br><span class="line">+----+------+---------+-------+--------------------+</span><br></pre></td></tr></table></figure><h3 id="int-3-int-5-区别-是否需要零填充"><a href="#int-3-int-5-区别-是否需要零填充" class="headerlink" title="int (3)   int (5) 区别,是否需要零填充"></a>int (3)   int (5) 区别,是否需要零填充</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#没有使用零填充 init(3)  </span></span><br><span class="line">CREATE TABLE `test` (</span><br><span class="line">  `id` int(3) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `name` varchar(255) COLLATE utf8mb4_unicode_ci<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) <span class="attribute">ENGINE</span>=MyISAM<span class="built_in"> DEFAULT </span><span class="attribute">CHARSET</span>=utf8mb4 <span class="attribute">COLLATE</span>=utf8mb4_unicode_ci;</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> test;</span><br><span class="line">+----+------+</span><br><span class="line">| id | name |</span><br><span class="line">+----+------+</span><br><span class="line">|  1 | 许褚  |</span><br><span class="line">|  2 | 郭嘉  |</span><br><span class="line">|  3 | 贾诩  |</span><br><span class="line">+----+------+</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用零填充 init(3)  zerofill </span></span><br><span class="line">CREATE TABLE `test` (</span><br><span class="line">  `id` int(3) unsigned zerofill <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `name` varchar(255) COLLATE utf8mb4_unicode_ci<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) <span class="attribute">ENGINE</span>=MyISAM<span class="built_in"> DEFAULT </span><span class="attribute">CHARSET</span>=utf8mb4 <span class="attribute">COLLATE</span>=utf8mb4_unicode_ci;</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> test;</span><br><span class="line">+-----+------+</span><br><span class="line">| id  | name |</span><br><span class="line">+-----+------+</span><br><span class="line">| 001 | 许褚  |</span><br><span class="line">| 002 | 郭嘉  |</span><br><span class="line">| 003 | 贾诩  |</span><br><span class="line">+-----+------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="builtin-name">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">#使用零填充 init(5)  zerofill </span></span><br><span class="line">CREATE TABLE `test` (</span><br><span class="line">  `id` int(5) unsigned zerofill <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `name` varchar(255) COLLATE utf8mb4_unicode_ci<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) <span class="attribute">ENGINE</span>=MyISAM <span class="attribute">AUTO_INCREMENT</span>=4<span class="built_in"> DEFAULT </span><span class="attribute">CHARSET</span>=utf8mb4 <span class="attribute">COLLATE</span>=utf8mb4_unicode_ci;</span><br><span class="line"></span><br><span class="line">mysql&gt; select * <span class="keyword">from</span> test;</span><br><span class="line">+-------+------+</span><br><span class="line">| id    | name |</span><br><span class="line">+-------+------+</span><br><span class="line">| 00001 | 许褚  |</span><br><span class="line">| 00002 | 郭嘉  |</span><br><span class="line">| 00003 | 贾诩  |</span><br><span class="line">+-------+------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="builtin-name">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/mysql/other/int.png" alt="int zerofill" title="init zerofill"></p><h3 id="mysql-存储引擎"><a href="#mysql-存储引擎" class="headerlink" title="mysql 存储引擎"></a>mysql 存储引擎</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">InnoDB表引擎</span></span><br><span class="line">通过一些机制和工具支持真真的热备份</span><br><span class="line">支持奔溃后的安全恢复</span><br><span class="line">支持行级锁</span><br><span class="line">支持外键</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">MyISAM表引擎</span></span><br><span class="line">5.1版本之前,MyISAM是默认的存储引擎</span><br><span class="line">拥有全文索引、压缩、 空间函数</span><br><span class="line">不支持事务和行级锁,不支持奔溃后的安全恢复</span><br><span class="line">表存储在两个文件,MYD和MYI</span><br></pre></td></tr></table></figure><h3 id="mysql-锁"><a href="#mysql-锁" class="headerlink" title="mysql 锁"></a>mysql 锁</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">当多个查询同一时刻进行数据修改时,就会产生并发控制的问题, 共享锁(读锁) 、排他锁(写锁)</span><br><span class="line"></span><br><span class="line"><span class="comment">#共享锁(读锁)</span></span><br><span class="line">共享的,不堵塞,多个用户可以同时读取一个资源,互不干扰</span><br><span class="line"><span class="comment">#排他锁(写锁)</span></span><br><span class="line">排他的,一个写锁会阻塞一塔的写锁和读锁,这样可以值允许一个人写进行写入,防止其他用户读取正在写入的资源</span><br><span class="line"></span><br><span class="line"><span class="comment">#demo共享锁(读锁)</span></span><br><span class="line">select * <span class="keyword">from</span> test; </span><br><span class="line">lock table test <span class="built_in">read</span>; <span class="comment">#共享锁</span></span><br><span class="line">unlock TABLES;  <span class="comment">#解锁</span></span><br><span class="line">update test <span class="keyword">set</span> <span class="built_in">name</span>=<span class="string">"贾诩_update"</span> <span class="keyword">where</span> <span class="built_in">id</span>=<span class="number">03</span>; </span><br><span class="line"></span><br><span class="line"><span class="comment">#排他锁  执行完lock加锁后,update 结束后及时执行解锁操作</span></span><br><span class="line">lock tables test <span class="built_in">write</span>;</span><br><span class="line">update test <span class="keyword">set</span> <span class="built_in">name</span>=<span class="string">"贾诩_update"</span> <span class="keyword">where</span> <span class="built_in">id</span>=<span class="number">03</span>;</span><br><span class="line">unlock TABLES;</span><br><span class="line">在排他锁执行期间.在当前窗口其他SQL是不能执行的,</span><br><span class="line"></span><br><span class="line"><span class="comment">#通过进程id, kill 掉锁</span></span><br><span class="line">show processlist;  <span class="comment">#查看锁状态</span></span><br><span class="line">kill <span class="built_in">id</span>  <span class="comment">#杀掉等待sql</span></span><br><span class="line">show OPEN TABLES <span class="keyword">where</span> In_use &gt; <span class="number">0</span>; <span class="comment">#查看是否有在锁表</span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">粒度锁</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">表锁</span></span><br><span class="line">系统性能开销最小,会锁定整张表,MyISAM 使用表锁</span><br><span class="line"><span class="meta">#</span><span class="bash">行锁</span></span><br><span class="line">最大程度地支持并发处理,但是也带来了最大的的锁开销,InnoDb 实现行级锁</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">Mysql 存储过程</span></span><br><span class="line">使用场景,通过处理把封装在容易使用的单元中,简化复杂的操作,保证数据的一致性</span><br></pre></td></tr></table></figure><h3 id="mysql-索引"><a href="#mysql-索引" class="headerlink" title="mysql 索引"></a>mysql 索引</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#索引类型: 普通索引(index  另一个名字normal)、唯一索引(unique)、全文索引(fulltext)、空间索引(SPATIAL)</span><br><span class="line">ALTER TABLE `test`.`test` </span><br><span class="line">ADD INDEX `id_score_score2`(`id`, `score`, `score2`);</span><br><span class="line"></span><br><span class="line">ALTER TABLE `test`.`test` </span><br><span class="line">ADD UNIQUE INDEX `id_score_score2`(`id`, `score`, `score2`);</span><br><span class="line"></span><br><span class="line">ALTER TABLE `test`.`test` </span><br><span class="line">ADD FULLTEXT INDEX `id_score_score2`(`id`, `score`, `score2`);</span><br><span class="line"></span><br><span class="line">ALTER TABLE `test`.`test` </span><br><span class="line">ADD SPATIAL INDEX `id_score_score2`(`id`, `score`, `score2`);</span><br><span class="line"></span><br><span class="line">SHOW INDEX FROM test #查看表索引</span><br></pre></td></tr></table></figure><h3 id="mysql-连接查询"><a href="#mysql-连接查询" class="headerlink" title="mysql 连接查询"></a>mysql 连接查询</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#自己关联自己查询</span><br><span class="line">select * from test a1 inner join  test a2 on a1.score=a2.score2</span><br></pre></td></tr></table></figure><h3 id="数据库优化"><a href="#数据库优化" class="headerlink" title="数据库优化"></a>数据库优化</h3><p>查找分析查询速度慢的原因 ↓</p><ol><li>↑优化查询过程中的数据访问 <strong>↓↓</strong></li><li>↑优化长难查询语句 <strong>↓↓</strong></li><li>↑优化特定类型的查询语句 <strong>↓↓</strong></li></ol><h4 id="↑↑查找分析查询速度慢的原因"><a href="#↑↑查找分析查询速度慢的原因" class="headerlink" title="↑↑查找分析查询速度慢的原因"></a><strong>↑↑</strong>查找分析查询速度慢的原因</h4><ol><li><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">分析SQL查询慢的方法</span><br><span class="line">   记录慢查询日志</span><br><span class="line">   分析查询日志,不要直接打开慢日志进行分析,</span><br><span class="line">   这样比较浪费时间和经理,可以使用pt-<span class="keyword">query</span>-digest工具进行分析</span><br></pre></td></tr></table></figure></li><li><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用show profile</span><br><span class="line"><span class="builtin-name">set</span> <span class="attribute">profiling</span>=1;开启,服务器上执行的所有语句会检测消耗的时间,存到临时表中</span><br><span class="line">show profiles</span><br><span class="line">show<span class="built_in"> profile </span><span class="keyword">for</span> query 临时表ID</span><br></pre></td></tr></table></figure></li><li><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用<span class="keyword">show</span> <span class="keyword">status</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">status</span> 会返回一些计数器,<span class="keyword">show</span> <span class="keyword">global</span> <span class="keyword">status</span>查看服务器级别的所有计数</span><br><span class="line">有时候根据这些计数,可以猜测出那些操作代价较高或者消耗时间多</span><br></pre></td></tr></table></figure></li><li><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用<span class="keyword">show</span> <span class="keyword">processlist</span></span><br><span class="line">观察是否有大量线程处于不正常的状态护着特征</span><br></pre></td></tr></table></figure></li><li><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用<span class="keyword">explain</span></span><br><span class="line">分析单条<span class="keyword">SQL</span>语句</span><br></pre></td></tr></table></figure></li><li><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby"> 访问数据太多导致查询性能下降</span></span><br><span class="line"><span class="ruby">- 确定应用程序是否存在检索大量超过需要的数据,可能是太多行或列</span></span><br><span class="line"><span class="ruby">- 确认MySQL服务器是否存在分析大量不必要的数据行</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="↑↑-优化查询过程中的数据访问"><a href="#↑↑-优化查询过程中的数据访问" class="headerlink" title="↑↑ 优化查询过程中的数据访问"></a><strong>↑↑</strong> 优化查询过程中的数据访问</h4><ol><li><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">避免使用如下SQL语句</span><br><span class="line">-<span class="ruby">  查询不需要的记录,使用limit解决</span></span><br><span class="line"><span class="ruby">多表关联返回全部列,指定A.id,A.name,B.age</span></span><br><span class="line"><span class="ruby">-  总是取出全部列,select * 会让优化器无法完成索引覆盖扫描的优化</span></span><br><span class="line"><span class="ruby">     -  重复查询相同的数据,可以缓存数据,下次直接读取缓存</span></span><br></pre></td></tr></table></figure></li><li><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">是否在扫描额外的记录</span><br><span class="line"> -<span class="ruby"> 使用explain来进行分析,如果发现查询需要扫描大量的数据大只返回少数的行,</span></span><br><span class="line"><span class="ruby">    可以通过以下技巧去优化<span class="symbol">:</span></span></span><br><span class="line"><span class="ruby"> --  使用索引覆盖扫描,吧所有用的列都放在索引中,</span></span><br><span class="line"><span class="ruby">      这样存储引擎不需要返回表获取对应行就可返回结果</span></span><br><span class="line"><span class="ruby"> --  改变数据库和表结构,修改数据表范式</span></span><br><span class="line"><span class="ruby"> --  重写SQL语句,让优化器可以以更优的方式进行执行查询</span></span><br></pre></td></tr></table></figure></li></ol><h4 id="↑↑-优化长难语句查询语句"><a href="#↑↑-优化长难语句查询语句" class="headerlink" title="↑↑ 优化长难语句查询语句"></a><strong>↑↑</strong> 优化长难语句查询语句</h4><ol><li><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">切分查询 </span><br><span class="line">   将一个大的查询分为多个小的相同的查询:</span><br><span class="line">   一次行删除<span class="number">1000</span>万的数据要比一次删除一次<span class="number">1</span>万更加损耗服务器开销,</span><br><span class="line">   <span class="string">[可先先删除一万暂停一会儿在删除一万]</span></span><br><span class="line"></span><br><span class="line">其他:一个复杂查询还是多个简单查询???</span><br><span class="line">     MySQL内部每秒能扫描内存中上百万行数据,相比之下,相应数据给客户端就压慢很多</span><br><span class="line">使用尽可能少的查询是好的,但是有时将一个大的查询分解为多个小的查血是很有必要的</span><br></pre></td></tr></table></figure></li><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">分辨关联查询</span><br><span class="line">可以将一条关联语句分解成多条SQL来执行,好处:</span><br><span class="line">让缓存的效率更高</span><br><span class="line">执行单个查询可以减少锁的竞争</span><br><span class="line">在应用层做关联可以更加容易对数据进行拆分,</span><br><span class="line">查询效率会有大幅提升</span><br><span class="line">较少冗余记录查询</span><br></pre></td></tr></table></figure></li></ol><h4 id="↑↑-优化特定类型的查询"><a href="#↑↑-优化特定类型的查询" class="headerlink" title="↑↑ 优化特定类型的查询"></a><strong>↑↑</strong> 优化特定类型的查询</h4><ol><li><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">优化 count() 查询</span><br><span class="line">    count<span class="comment">(*)中的*会忽略所有的列,直接统计所有列数,因此不要使用count(别名)</span></span><br><span class="line"><span class="comment">    MyISAM中,没有任何where条件非常快</span></span><br><span class="line"><span class="comment">    可以使用explain查询近似值,用近似值代替count(*)</span>,</span><br><span class="line">    增加汇总表</span><br><span class="line">    使用缓存</span><br></pre></td></tr></table></figure></li><li><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">优化关联查询</span><br><span class="line">    确定on或者using子句的列上有索引</span><br><span class="line">    确保<span class="keyword">group</span> <span class="title">by</span> 和 <span class="keyword">order</span> <span class="title">by</span> 中只有一个表中的列,这样MySQL才有可能使用索引</span><br></pre></td></tr></table></figure></li><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">优化子查询</span><br><span class="line">    尽可能使用关联查询代替</span><br></pre></td></tr></table></figure></li><li><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">优化<span class="keyword">group</span> <span class="title">by</span> 和 distinct </span><br><span class="line">这两种查询可使用索引来优化,是最有效的优化方法</span><br><span class="line">关联查询中,使用表示列进行分组的效率会更高</span><br><span class="line">如果不需要<span class="keyword">order</span> <span class="title">by</span> ,进行<span class="keyword">group</span> <span class="title">by</span> 时使用<span class="keyword">order</span> <span class="title">by</span> NUll,MySQL不会进行文件排序</span><br></pre></td></tr></table></figure></li><li><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">优化limit分页</span><br><span class="line">    01) limit 便宜量大的时候,查询效率较低,可以记录上次查询的最大id</span><br><span class="line">        下次查询的时候直接根据该id来查询 </span><br><span class="line">    02)  limit 数据量问题</span><br><span class="line">    <span class="keyword">select</span> <span class="symbol">`id`</span>, <span class="symbol">`name`</span> <span class="keyword">from</span> <span class="symbol">`user`</span> <span class="keyword">where</span> <span class="symbol">`status`</span> = <span class="number">1</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="symbol">`id`</span> <span class="keyword">desc</span> <span class="keyword">limit</span> <span class="number">10</span></span><br><span class="line">    上面这条SQL如果表中的数据量大的时候,status 为 <span class="number">1</span>的数据不够<span class="number">10</span>表,这条SQL会全表扫描</span><br><span class="line">    修改后SQL为:(添加范围)</span><br><span class="line">    <span class="keyword">select</span> <span class="symbol">`id`</span>, <span class="symbol">`name`</span> <span class="keyword">from</span> <span class="symbol">`user`</span> <span class="keyword">where</span> id&gt;<span class="number">788008</span> <span class="keyword">AND</span> <span class="symbol">`status`</span> = <span class="number">1</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="symbol">`id`</span> <span class="keyword">desc</span> <span class="keyword">limit</span> <span class="number">10</span></span><br></pre></td></tr></table></figure></li><li><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">优化<span class="class"><span class="keyword">union</span>查询</span></span><br><span class="line"><span class="class"><span class="keyword">union</span> <span class="title">all</span> 的效率高于<span class="title">union</span></span></span><br></pre></td></tr></table></figure></li><li><p>综上, 数据库优化: 先找原因定位低效SQL语句,然后根据SQL语句坑你低效的原因做排查,先从索引着手,如果索引没有问题,考虑以上几个方面,数据库访问的问题,长难度语句的问题还是一些特定类型优化的问题</p></li></ol>]]></content>
      
      
    </entry>
    
    <entry>
      <title>--redis key 设计技巧</title>
      <link href="/2018/11/17/centos/redis_key_%E8%AE%BE%E8%AE%A1%E6%8A%80%E5%B7%A7/"/>
      <url>/2018/11/17/centos/redis_key_%E8%AE%BE%E8%AE%A1%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<h3 id="redis-key-设计技巧"><a href="#redis-key-设计技巧" class="headerlink" title="redis  key 设计技巧"></a>redis  key 设计技巧</h3><p>第一段 表名转化为key的前缀,如 book:  tag:<br>第二段 放置用于分区 key 的字段—对于的 mysql 中的主键的列名,如 id userid<br>第三段 放置主键的值,如1 2 3 4 a b c<br>第四段,写要储存的列名</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">第一段 表名转化为key的前缀,如 book:  tag:</span><br><span class="line">第二段 放置用于分区 key 的字段---对于的 mysql 中的主键的列名,如 id userid </span><br><span class="line">第三段 放置主键的值,如1 2 3 4 a b c</span><br><span class="line">第四段,写要储存的列名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">用户表 user , 转换为 key-value 存储   </span><br><span class="line"><span class="code">+----+</span>----------<span class="code">+----------+</span>-----------+</span><br><span class="line">| id | username | password | email     |</span><br><span class="line"><span class="code">+----+</span>----------<span class="code">+----------+</span>-----------+</span><br><span class="line">|  1 | 张三     | 123456   | 1@qwq.com |</span><br><span class="line">|  2 | 李四     | 123456   | 2@qq.com  |</span><br><span class="line"><span class="code">+----+</span>----------<span class="code">+----------+</span>-----------+</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; set user:id:1:username zhangsan</span><br><span class="line">127.0.0.1:6379&gt; set user:id:1:password 123456</span><br><span class="line">127.0.0.1:6379&gt; set user:id:1:email 1@qwq.com</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; set user:id:2:username lisi</span><br><span class="line">127.0.0.1:6379&gt; set user:id:2:password 123456</span><br><span class="line">127.0.0.1:6379&gt; set user:id:2:email 2@qq.com</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; keys user*</span><br><span class="line">127.0.0.1:6379&gt; keys user:id*</span><br></pre></td></tr></table></figure><p><img src="/img/centos/redis/reids_01.png" alt="redis" title="redis"></p><h3 id="mysql-弊端"><a href="#mysql-弊端" class="headerlink" title="mysql 弊端"></a>mysql 弊端</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#book 表 tags 表</span><br><span class="line">DROP TABLE IF EXISTS `book`;</span><br><span class="line">CREATE TABLE `book` (</span><br><span class="line">  `bookid` int(10) unsigned NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `title` char(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`bookid`)</span><br><span class="line">) ENGINE=MyISAM AUTO_INCREMENT=9 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS `tags`;</span><br><span class="line">CREATE TABLE `tags` (</span><br><span class="line">  `tid` int(10) unsigned NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `bookid` int(11) DEFAULT NULL,</span><br><span class="line">  `content` char(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`tid`)</span><br><span class="line">) ENGINE=MyISAM AUTO_INCREMENT=21 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;</span><br><span class="line"></span><br><span class="line">#------------------- 测试数据 ---------------</span><br><span class="line">INSERT INTO `book` VALUES (&apos;5&apos;, &apos;PHP圣经&apos;);</span><br><span class="line">INSERT INTO `book` VALUES (&apos;6&apos;, &apos;ruby实战&apos;);</span><br><span class="line">INSERT INTO `book` VALUES (&apos;7&apos;, &apos;mysql 运维&apos;);</span><br><span class="line">INSERT INTO `book` VALUES (&apos;8&apos;, &apos;ruby服务端编程&apos;);</span><br><span class="line"></span><br><span class="line">INSERT INTO `tags` VALUES (&apos;10&apos;, &apos;5&apos;, &apos;PHP&apos;);</span><br><span class="line">INSERT INTO `tags` VALUES (&apos;11&apos;, &apos;5&apos;, &apos;WEB&apos;);</span><br><span class="line">INSERT INTO `tags` VALUES (&apos;13&apos;, &apos;6&apos;, &apos;ruby&apos;);</span><br><span class="line">INSERT INTO `tags` VALUES (&apos;14&apos;, &apos;7&apos;, &apos;database&apos;);</span><br><span class="line">INSERT INTO `tags` VALUES (&apos;15&apos;, &apos;8&apos;, &apos;ruby&apos;);</span><br><span class="line">INSERT INTO `tags` VALUES (&apos;16&apos;, &apos;8&apos;, &apos;server&apos;);</span><br><span class="line">INSERT INTO `tags` VALUES (&apos;12&apos;, &apos;6&apos;, &apos;WEB&apos;);</span><br><span class="line"></span><br><span class="line"># 查询:即有 web 标签又有 PPH  标签,要用连接查询</span><br><span class="line"> select t1.bookid from tags as t1 inner join tags as t2  </span><br><span class="line"> on t1.bookid=t2.bookid where t1.content=&apos;PHP&apos; and t2.content=&apos;WEB&apos;;   </span><br><span class="line"></span><br><span class="line"># 如果在查有其他标签 web php  ruby ,关联的又要多了</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-crontab 定时任务</title>
      <link href="/2018/11/12/centos/crontab_%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/"/>
      <url>/2018/11/12/centos/crontab_%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</url>
      <content type="html"><![CDATA[<h3 id="crontab"><a href="#crontab" class="headerlink" title="crontab"></a>crontab</h3><p>crontab 文件说明,每个用户都会生成一个自己的 crontab 文件,位于 /var/spool/cron 目录下<br>查看 crontab 详情 cat  /etc/crontab</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost cron]# cat /etc/crontab</span><br><span class="line">SHELL=/bin/bash</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line">MAILTO=root</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> For details see man 4 crontabs</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> Example of job definition:</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> .---------------- minute (0 - 59)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  .------------- hour (0 - 23)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  |  .---------- day of month (1 - 31)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> |  |  |  |  |</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> *  *  *  *  * user-name  <span class="built_in">command</span> to be executed</span></span><br><span class="line"></span><br><span class="line">[root@localhost cron]# ls /var/spool/cron</span><br><span class="line">root           #root 用户</span><br><span class="line">fei            #飞用户</span><br></pre></td></tr></table></figure><h3 id="crontab-命令"><a href="#crontab-命令" class="headerlink" title="crontab 命令"></a>crontab 命令</h3><figure class="highlight tex"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install cron</span><br><span class="line"></span><br><span class="line">/sbin/service crond start    //启动服务</span><br><span class="line">/sbin/service crond stop     //关闭服务</span><br><span class="line">/sbin/service crond restart  //重启服务</span><br><span class="line">/sbin/service crond reload   //重新载入配置</span><br><span class="line">/sbin/service crond status   //查看服务状态 </span><br><span class="line"></span><br><span class="line">systemctl start crond.service</span><br><span class="line">systemctl stop crond.service</span><br><span class="line">systemctl restart crond.service</span><br><span class="line">systemctl reload crond.service</span><br><span class="line">systemctl status crond.service</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//-----------------------------------------------</span><br><span class="line">crontab -u //设定某个用户的cron服务，一般root用户在执行这个命令的时候需要此参数</span><br><span class="line">crontab -l //列出某个用户cron服务的详细内容</span><br><span class="line">crontab -r //删除没个用户的cron服务</span><br><span class="line">crontab -e //编辑某个用户的cron服务</span><br></pre></td></tr></table></figure><h3 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#每隔一分钟执行一次</span></span><br><span class="line">*<span class="string">/1</span> * * * *  php <span class="string">/crontab_test/index.php</span></span><br><span class="line"><span class="comment">#每小时的第一分,执行</span></span><br><span class="line">1 * * * *  php <span class="string">/crontab_test/index.php</span></span><br><span class="line"><span class="params">----------------------------------------------</span></span><br><span class="line"><span class="comment">#每隔2小时执行一次; 从整点开始计数</span></span><br><span class="line">0 *<span class="string">/2</span> * * *  sh <span class="string">/fei/test.sh</span></span><br><span class="line"><span class="comment">#每天的第2小时执行一次</span></span><br><span class="line">0 2 * * *  sh <span class="string">/fei/test.sh</span></span><br><span class="line"><span class="params">------------------------</span> !!!注意这种错误写法 <span class="params">------</span></span><br><span class="line"><span class="comment">#每隔一分钟执行一次</span></span><br><span class="line">* *<span class="string">/1</span> * * *  sh <span class="string">/fei/test.sh</span></span><br></pre></td></tr></table></figure><h3 id="demo-test-sh"><a href="#demo-test-sh" class="headerlink" title="demo test.sh"></a>demo test.sh</h3><figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">d<span class="number">1</span>=`date +<span class="symbol">%Y-</span><span class="symbol">%m-</span><span class="symbol">%d-</span><span class="symbol">%H</span>:<span class="symbol">%M</span>:<span class="symbol">%S</span>`</span><br><span class="line">echo <span class="string">" $d1.    [ 0 */2 * * *  sh /fei/test.sh ] "</span> &gt;&gt; /fei/<span class="keyword">ccc</span>.txt</span><br><span class="line"></span><br><span class="line">d<span class="number">1</span>=`date +<span class="symbol">%Y-</span><span class="symbol">%m-</span><span class="symbol">%d-</span><span class="symbol">%H</span>:<span class="symbol">%M</span>:<span class="symbol">%S</span>`</span><br><span class="line">echo <span class="string">" $d1.    [ 0 2 * * *  sh /fei/test.sh ] "</span> &gt;&gt; /fei/<span class="keyword">ccc</span>.txt</span><br><span class="line"></span><br><span class="line">d<span class="number">1</span>=`date +<span class="symbol">%Y-</span><span class="symbol">%m-</span><span class="symbol">%d-</span><span class="symbol">%H</span>:<span class="symbol">%M</span>:<span class="symbol">%S</span>`</span><br><span class="line">echo <span class="string">" $d1.    [ * */1 * * *  sh /fei/test.sh ] "</span> &gt;&gt; /fei/<span class="keyword">ccc</span>.txt</span><br></pre></td></tr></table></figure><p><img src="/img/centos/crontab/crontab_01.png" alt="定时任务" title="定时任务"></p><p><img src="/img/centos/crontab/crontab_02.png" alt="定时任务" title="定时任务"></p><p><img src="/img/centos/crontab/crontab_03.png" alt="定时任务" title="定时任务"></p><p><img src="/img/centos/crontab/crontab_04.png" alt="定时任务" title="定时任务"></p><p><img src="/img/centos/crontab/crontab_05.png" alt="定时任务" title="定时任务"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-桥接模式</title>
      <link href="/2018/11/09/%E9%9D%A2%E8%AF%95/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index_06_%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/"/>
      <url>/2018/11/09/%E9%9D%A2%E8%AF%95/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index_06_%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<p>将抽象部分与实现部分分离，使它们都可以独立的变化。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 桥接模式 bridge</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 论坛给用户发消息,可以是站内短息,email,手机</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">info</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">protected</span> $send = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($send)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;send = $send;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">abstract</span> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">msg</span><span class="params">($content)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span><span class="params">($to, $content)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $content = <span class="keyword">$this</span>-&gt;msg($content);</span><br><span class="line">        <span class="keyword">$this</span>-&gt;send-&gt;send($to, $content);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">zn</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span><span class="params">($to, $content)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">' 站内给 '</span>, $to, <span class="string">' 内容是: '</span>, $content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">email</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span><span class="params">($to, $content)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">' email给 '</span>, $to, <span class="string">' 内容是: '</span>, $content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">sms</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">send</span><span class="params">($to, $content)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">' sms给 '</span>, $to, <span class="string">' 内容是: '</span>, $content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//+++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">commonInfo</span> <span class="keyword">extends</span> <span class="title">info</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">msg</span><span class="params">($content)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement msg() method.</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">' 普通 '</span> . $content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">warnInfo</span> <span class="keyword">extends</span> <span class="title">info</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">msg</span><span class="params">($content)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement msg() method.</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">' 紧急 '</span> . $content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">dangerInfo</span> <span class="keyword">extends</span> <span class="title">info</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">msg</span><span class="params">($content)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement msg() method.</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">' 特急 '</span> . $content;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用站内发普通消息</span></span><br><span class="line">$commonInfo = <span class="keyword">new</span> commonInfo(<span class="keyword">new</span> zn());</span><br><span class="line">$commonInfo-&gt;send(<span class="string">'小飞飞'</span>, <span class="string">'hello world'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;br&gt;'</span>;</span><br><span class="line"><span class="comment">// 用手机发特急信息</span></span><br><span class="line">$dangerInfo = <span class="keyword">new</span> commonInfo(<span class="keyword">new</span> sms());</span><br><span class="line">$dangerInfo-&gt;send(<span class="string">'飞'</span>, <span class="string">'这是手机信息'</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-观察者模式</title>
      <link href="/2018/11/09/%E9%9D%A2%E8%AF%95/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index_04_%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/"/>
      <url>/2018/11/09/%E9%9D%A2%E8%AF%95/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index_04_%E8%A7%82%E5%AF%9F%E8%80%85%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<p>当对象间存在一对多关系时，则使用观察者模式（Observer Pattern）。比如，当一个对象被修改时，则会自动通知它的依赖对象。观察者模式属于行为型模式。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ------------PHP 实现观察者模式</span></span><br><span class="line"><span class="comment">// php5中提供观察者 observer 与被观察者 subject 的接口</span></span><br><span class="line"><span class="comment">// @link http://php.net/manual/zh/class.splsubject.php</span></span><br><span class="line"><span class="comment">// @link http://php.net/manual/zh/class.splobjectstorage.php</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">user</span> <span class="keyword">implements</span> <span class="title">SplSubject</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//  attach()  detach()  notify()  PHP自带</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">attach</span><span class="params">(SplObserver $observer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement attach() method.</span></span><br><span class="line">        <span class="keyword">$this</span>-&gt;observers-&gt;attach($observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">detach</span><span class="params">(SplObserver $observer)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement detach() method.</span></span><br><span class="line">        <span class="keyword">$this</span>-&gt;observers-&gt;detach($observer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">notify</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement notify() method.</span></span><br><span class="line">        <span class="keyword">$this</span>-&gt;observers-&gt;rewind();</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">$this</span>-&gt;observers-&gt;valid()) &#123;</span><br><span class="line">            $observer = <span class="keyword">$this</span>-&gt;observers-&gt;current();</span><br><span class="line">            $observer-&gt;update(<span class="keyword">$this</span>); <span class="comment">// 参数</span></span><br><span class="line">            <span class="keyword">$this</span>-&gt;observers-&gt;next();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//--------------------------------------------</span></span><br><span class="line">    <span class="keyword">public</span> $lognum;</span><br><span class="line">    <span class="keyword">public</span> $hobby;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> $observers = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">($hobby)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;lognum = rand(<span class="number">1</span>, <span class="number">10</span>);</span><br><span class="line">        <span class="keyword">$this</span>-&gt;hobby = $hobby;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;observers = <span class="keyword">new</span> SplObjectStorage();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">login</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// 操作 session...</span></span><br><span class="line">        <span class="keyword">$this</span>-&gt;notify();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">security</span> <span class="keyword">implements</span> <span class="title">SplObserver</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span><span class="params">(SplSubject $subject)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement update() method.</span></span><br><span class="line">        <span class="keyword">if</span> ($subject-&gt;lognum &lt; <span class="number">3</span>) &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">'这是第 '</span> . $subject-&gt;lognum . <span class="string">' 次安全登录 '</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">'这是第'</span> . $subject-&gt;lognum . <span class="string">' 次安全登录,异常 '</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ad</span> <span class="keyword">implements</span> <span class="title">SplObserver</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">update</span><span class="params">(SplSubject $subject)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement update() method.</span></span><br><span class="line">        <span class="keyword">if</span> ($subject-&gt;hobby == <span class="string">'sports'</span>)&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">' 台球英锦赛门票预订 '</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">' 好好学习,天天向上 '</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实施观察</span></span><br><span class="line">$user = <span class="keyword">new</span> user(<span class="string">'sports'</span>);</span><br><span class="line">$user-&gt;attach(<span class="keyword">new</span> security());</span><br><span class="line">$user-&gt;attach(<span class="keyword">new</span> ad());</span><br><span class="line"></span><br><span class="line">$user-&gt;login();</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-适配器模式</title>
      <link href="/2018/11/09/%E9%9D%A2%E8%AF%95/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index_05_%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
      <url>/2018/11/09/%E9%9D%A2%E8%AF%95/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index_05_%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<p>将一个类的接口转换成客户希望的另外一个接口。适配器模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 适配器模式   -------- 其实平时一直在使用,没有起个名字, 呵呵呵</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 服务器端的代码</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">weather</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $today = [<span class="string">'temperature'</span> =&gt; <span class="number">25</span>, <span class="string">'wind'</span> =&gt; <span class="number">7</span>, <span class="string">'sun'</span> =&gt; <span class="string">'sunny'</span>];</span><br><span class="line">        <span class="keyword">return</span> serialize($today);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ========= 客户端调用 ==========</span></span><br><span class="line">$weather = unserialize(weather::show());</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'温度: '</span>, $weather[<span class="string">'temperature'</span>], <span class="string">'&lt;br&gt;'</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'风力: '</span>, $weather[<span class="string">'wind'</span>], <span class="string">'&lt;br&gt;'</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'阳光: '</span>, $weather[<span class="string">'sun'</span>], <span class="string">'&lt;br&gt;'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 来了一批手机上的 java 客户端,不认识 PHP 的串行化后的字符串,怎么办?</span></span><br><span class="line"><span class="comment">//  把服务器端的代码改了?? ---旧的客户端又会受影响???</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 增加一个适配器</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AdapterWeather</span> <span class="keyword">extends</span> <span class="title">weather</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">show</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $today = <span class="keyword">parent</span>::show();</span><br><span class="line">        $today = unserialize($today);</span><br><span class="line">        $today = json_encode($today);</span><br><span class="line">        <span class="keyword">return</span> $today;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// =====  客户端调用 ======</span></span><br><span class="line">$todayWeather = AdapterWeather::show();</span><br><span class="line">$todayWeather = json_decode($todayWeather, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">'温度: '</span>, $weather[<span class="string">'temperature'</span>], <span class="string">'&lt;br&gt;'</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'风力: '</span>, $weather[<span class="string">'wind'</span>], <span class="string">'&lt;br&gt;'</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'阳光: '</span>, $weather[<span class="string">'sun'</span>], <span class="string">'&lt;br&gt;'</span>;</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-工厂方法</title>
      <link href="/2018/11/09/%E9%9D%A2%E8%AF%95/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index_02_%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95/"/>
      <url>/2018/11/09/%E9%9D%A2%E8%AF%95/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index_02_%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95/</url>
      <content type="html"><![CDATA[<h3 id="工厂方法"><a href="#工厂方法" class="headerlink" title="工厂方法"></a>工厂方法</h3><p>定义一个创建对象的接口，让其子类自己决定实例化哪一个工厂类，工厂模式使其创建过程延迟到子类进行。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 工厂方法</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">db</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">conn</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 解决简单工厂中在扩展 其他数据库问题,</span></span><br><span class="line"><span class="comment">// 比如新增 oracle 数据库 (开闭原则:对于修改是封闭,对于扩展是开放)</span></span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Factory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createDB</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//服务端开发(不知道将会被谁调用)</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">dbmysql</span> <span class="keyword">implements</span> <span class="title">db</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">conn</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement conn() method.</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">" 连接上Mysql "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">dbsqlite</span> <span class="keyword">implements</span> <span class="title">db</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">conn</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement conn() method.</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">" 连接上了sqlite "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">mysqlFactory</span> <span class="keyword">implements</span> <span class="title">Factory</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createDB</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement createDB() method.</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> dbmysql();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">sqliteFactory</span> <span class="keyword">implements</span> <span class="title">Factory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createDB</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement createDB() method.</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> dbsqlite();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// =====  客户端开始 ====</span></span><br><span class="line">$mysql_factory = <span class="keyword">new</span> mysqlFactory();</span><br><span class="line">$mysql_create = $mysql_factory-&gt;createDB();</span><br><span class="line">$mysql_create-&gt;conn();</span><br><span class="line"></span><br><span class="line">$sqlite_factory = <span class="keyword">new</span> sqliteFactory();</span><br><span class="line">$sqlite_create = $sqlite_factory-&gt;createDB();</span><br><span class="line">$sqlite_create-&gt;conn();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//  新增 oracle 数据库</span></span><br><span class="line"><span class="comment">//  现在要在服务器端添加 oracle 类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">dboracle</span> <span class="keyword">implements</span> <span class="title">db</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">conn</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement conn() method.</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">"连接上 oracle 数据库"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">oracleFactory</span> <span class="keyword">implements</span> <span class="title">Factory</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">createDB</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement createDB() method.</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> dboracle();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$oracle_factory = <span class="keyword">new</span> oracleFactory();</span><br><span class="line">$oracle_create = $oracle_factory-&gt;createDB();</span><br><span class="line">$oracle_create-&gt;conn();</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-多态</title>
      <link href="/2018/11/09/%E9%9D%A2%E8%AF%95/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index_01%E5%A4%9A%E6%80%81/"/>
      <url>/2018/11/09/%E9%9D%A2%E8%AF%95/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index_01%E5%A4%9A%E6%80%81/</url>
      <content type="html"><![CDATA[<h3 id="多态满足三个条件"><a href="#多态满足三个条件" class="headerlink" title="多态满足三个条件:"></a>多态满足三个条件:</h3><ol><li><p>子类继承父类</p></li><li><p>子类重写父类</p></li><li><p>父类引用指向子类</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 多态  动物(猫,狗)  猫吃鱼,牛吃草</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">abstract</span> <span class="function"><span class="keyword">function</span> <span class="title">eat</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span> <span class="keyword">extends</span> <span class="title">Animal</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">eat</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement eat() method.</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">' 猫吃鱼 '</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">eat</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// <span class="doctag">TODO:</span> Implement eat() method.</span></span><br><span class="line">        <span class="keyword">echo</span> <span class="string">' 牛吃草 '</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Client</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">// java 中 foo(Animal $animal) ,声明 cat 和 dog 的父类 animal ,只能传递 animal 的子类</span></span><br><span class="line">    <span class="comment">// public function foo(Animal $animal)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">($animal)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $animal-&gt;eat();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$catClient = <span class="keyword">new</span> Client();</span><br><span class="line">$catClient-&gt;foo(<span class="keyword">new</span> Cat());</span><br><span class="line"></span><br><span class="line">$dogClietn = <span class="keyword">new</span> Client();</span><br><span class="line">$dogClietn-&gt;foo(<span class="keyword">new</span> Dog());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//  如果在 class Client 中这样写 public function foo(Animal $animal)</span></span><br><span class="line"><span class="comment">// 下面的就会报错</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pig</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">eat</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">" 猪飞到上天 "</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$pigClient = <span class="keyword">new</span> Client();</span><br><span class="line">$pigClient-&gt;foo(<span class="keyword">new</span> Pig());</span><br></pre></td></tr></table></figure></li></ol><p>设计模式参考地址: </p><p><a href="http://www.runoob.com/design-pattern/design-pattern-tutorial.html" target="_blank" rel="noopener">设计模式01</a></p><p><a href="https://www.w3cschool.cn/shejimoshi/design-pattern-tutorial.html" target="_blank" rel="noopener">设计模式02</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-单例模式</title>
      <link href="/2018/11/09/%E9%9D%A2%E8%AF%95/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index_03_%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/"/>
      <url>/2018/11/09/%E9%9D%A2%E8%AF%95/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/index_03_%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h3 id="单例模式-三私一公"><a href="#单例模式-三私一公" class="headerlink" title="单例模式( 三私一公 )"></a>单例模式( 三私一公 )</h3><ol><li>私有的构造方法( 防止类被多次实例化 )</li><li>私有的克隆方法( 防止类被多次克隆 )</li><li>私有的静态属性( 保存类的实例 )</li><li>公有的静态方法( 访问这个类 )</li></ol><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单例模式 singleton</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">singleton</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> $ins = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">function</span> <span class="title">getIns</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">self</span>::$ins == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">self</span>::$ins = <span class="keyword">new</span> <span class="keyword">self</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>::$ins;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 封锁多次 new</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 封锁克隆 clone</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">function</span> <span class="title">__clone</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$s1 = singleton::getIns();</span><br><span class="line">$s2 = singleton::getIns();</span><br><span class="line"><span class="keyword">if</span> ($s1 === $s2) &#123;  <span class="comment">//是一个对象</span></span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"是一个对象"</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"不是一个对象"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-centos 中开机自启</title>
      <link href="/2018/11/09/centos/%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF/"/>
      <url>/2018/11/09/centos/%E5%BC%80%E6%9C%BA%E8%87%AA%E5%90%AF/</url>
      <content type="html"><![CDATA[<h3 id="systemctl-设置开机启动"><a href="#systemctl-设置开机启动" class="headerlink" title="systemctl 设置开机启动"></a>systemctl 设置开机启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install nginx     <span class="comment"># 安装nginx 做开机启动测试</span></span><br><span class="line">systemctl <span class="built_in">enable</span> nginx.service   <span class="comment"># 设为开机启动</span></span><br><span class="line">systemctl <span class="built_in">disable</span> nginx.service  <span class="comment"># 停止开机启动</span></span><br></pre></td></tr></table></figure><h3 id="修改-rc-local-设置为开机启动"><a href="#修改-rc-local-设置为开机启动" class="headerlink" title="修改 rc.local 设置为开机启动"></a>修改 rc.local 设置为开机启动</h3><figure class="highlight golo"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">### /etc/rc.local 和 /etc/rc.d/rc.local 修改那个都行,我这里修改 /etc/rc.d/rc.local</span></span><br><span class="line">[root<span class="meta">@localhost</span> vagrant]<span class="comment"># locate rc.local</span></span><br><span class="line">/etc/rc.<span class="keyword">local</span></span><br><span class="line">/etc/rc.d/rc.<span class="keyword">local</span></span><br><span class="line">[root<span class="meta">@localhost</span> vagrant]<span class="comment">#</span></span><br><span class="line"></span><br><span class="line">在  /etc/rc.d 目录下,修改 rc.<span class="keyword">local</span> ,添加执行命令,比如  mkdir /fei_03   </span><br><span class="line">创建一个名字叫 fei_03 的目录; 然后 chmod +x /etc/rc.d/rc.<span class="keyword">local</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##### ---- 温馨提示,请注意 rc.local 文件里面有个提示如下, </span></span><br><span class="line"><span class="comment"># Please note that you must run 'chmod +x /etc/rc.d/rc.local' to ensure</span></span><br><span class="line"><span class="comment"># that this script will be executed during boot.</span></span><br></pre></td></tr></table></figure><p><img src="/img/centos/other/start_up.png" alt="开机启动" title="开机启动"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-算法01</title>
      <link href="/2018/10/31/%E9%9D%A2%E8%AF%95/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95/"/>
      <url>/2018/10/31/%E9%9D%A2%E8%AF%95/%E7%AE%97%E6%B3%95/%E7%AE%97%E6%B3%95/</url>
      <content type="html"><![CDATA[<h3 id="01-羊生羊"><a href="#01-羊生羊" class="headerlink" title="01).  羊生羊"></a>01).  羊生羊</h3><p>一种羊, 第一年生一只小羊, 第四年生生一只小羊, 第五年死 20年后有多少只羊</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$arr = [<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>];</span><br><span class="line"><span class="keyword">for</span> ($i = <span class="number">1</span>; $i &lt;= <span class="number">20</span>; $i++) &#123;</span><br><span class="line">    $tmp = $arr[<span class="number">1</span>] + $arr[<span class="number">3</span>];</span><br><span class="line">    array_unshift($arr, $tmp);</span><br><span class="line">    array_pop($arr);</span><br><span class="line">&#125;</span><br><span class="line">print_r($arr);</span><br><span class="line"><span class="keyword">echo</span> array_sum($arr);</span><br></pre></td></tr></table></figure><h3 id="02-猴子选大王"><a href="#02-猴子选大王" class="headerlink" title="02). 猴子选大王"></a>02). 猴子选大王</h3><p>一群猴子排成一圈，按1,2,…,n依次编号。然后从第1只开始数，数到第m只,把它踢出圈，从它后面再开始数，再数到第m只，在把它踢出去…，如此不停的进行下去，直到最后只剩下一只猴子为止，那只猴子就叫做大王。要求编程模拟此过程，输入m、n, 输出最后那个大王的编号。用程序模拟该过程</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">monkey</span><span class="params">($n ,$m)</span></span>&#123;</span><br><span class="line">    $arr = range(<span class="number">1</span>,$n);     <span class="comment">//构造数组  array(1,2,3,4,5,6,7,8);</span></span><br><span class="line">    $i = <span class="number">0</span>;                 <span class="comment">//设置数组指针</span></span><br><span class="line">    <span class="keyword">while</span>(count($arr)&gt;<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="comment">//遍历数组，判断当前猴子是否为出局序号，如果是则出局，否则放到数组最后</span></span><br><span class="line">        <span class="keyword">if</span>(($i+<span class="number">1</span>) % $m ==<span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">unset</span>($arr[$i]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//array_push() 函数向第一个参数的数组尾部添加一个或多个元素（入栈），然后返回新数组的长度。</span></span><br><span class="line">            array_push($arr ,$arr[$i]); <span class="comment">//本轮非出局猴子放数组尾部</span></span><br><span class="line">            <span class="keyword">unset</span>($arr[$i]);   <span class="comment">//删除</span></span><br><span class="line">        &#125;</span><br><span class="line">        $i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">print_r(monkey(<span class="number">10</span>,<span class="number">4</span>));</span><br></pre></td></tr></table></figure><h3 id="03-10-进制-8进制-16进制-2-进制"><a href="#03-10-进制-8进制-16进制-2-进制" class="headerlink" title="03).  10 进制; 8进制; 16进制 ; 2 进制"></a>03).  10 进制; 8进制; 16进制 ; 2 进制</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 生活中常用10进制</span></span><br><span class="line"><span class="comment"> * 计算机中常用2进制,8进制,16进制</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 10 进制</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">123</span>;  <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;   <span class="comment">//从右到左3个位,分别是以1顶1,以1顶10,以1顶100</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">100</span> * <span class="number">1</span> + <span class="number">10</span> * <span class="number">2</span> + <span class="number">1</span> * <span class="number">3</span>; <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 8 进制</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">0123</span>; <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>; <span class="comment">//从做到右3个位,分别是以1顶1,以1顶8,以1顶64</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">64</span> * <span class="number">1</span> + <span class="number">8</span> * <span class="number">2</span> + <span class="number">3</span>;  <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="number">027</span>;  <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="number">8</span> * <span class="number">2</span> + <span class="number">7</span>;  <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//16进制   0、1、2、3、4、5、6、7、8、9、A、B、C、D、E、F</span></span><br><span class="line"><span class="comment">// A、B、C、D、E、F 不去分大小写</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">0x123</span>; <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;  <span class="comment">//从左到右3个位,分别是1顶1,以1顶16,以1顶256</span></span><br><span class="line"><span class="keyword">echo</span> <span class="number">256</span> * <span class="number">1</span> + <span class="number">16</span> * <span class="number">2</span> + <span class="number">3</span>; <span class="keyword">echo</span> <span class="string">"&lt;br&gt;"</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2 进制, PHP 目前不支持直接表示</span></span><br><span class="line"><span class="comment">// 从右到左,分别以1顶1,顶2,顶4,顶8...........</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  10 进制    2 进制</span></span><br><span class="line"><span class="comment"> *    5       0000 0101</span></span><br><span class="line"><span class="comment"> *   255      1111 1111, 128+64+32+16+8+4+2+1</span></span><br><span class="line"><span class="comment"> *   -1       1111 1111</span></span><br><span class="line"><span class="comment"> * 像上面8个1,到底理解成255,还是理解成-1</span></span><br><span class="line"><span class="comment"> * 这个取决于程序</span></span><br><span class="line"><span class="comment"> * 比如在 mysql 中 ,int 则理解为 -1 ,unsigned  int理解为255</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 为什么 程序员总是分不清万圣节和圣诞节? 因为 Oct 31=Dec 25</span></span><br></pre></td></tr></table></figure><h4 id="04-8瓶水-其中1瓶有毒-那小白鼠做试验-药效发挥需要2小时"><a href="#04-8瓶水-其中1瓶有毒-那小白鼠做试验-药效发挥需要2小时" class="headerlink" title="04). 8瓶水,其中1瓶有毒,那小白鼠做试验,药效发挥需要2小时"></a>04). 8瓶水,其中1瓶有毒,那小白鼠做试验,药效发挥需要2小时</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 8瓶水,其中1瓶有毒,拿小白鼠做试验,药效发挥需要2小时,最少需要几只老鼠,只能试一次</span></span><br><span class="line"><span class="comment">// 分析:</span></span><br><span class="line"><span class="comment">//       2 个小时后,小白鼠,只有2种状态: 死/活</span></span><br><span class="line"><span class="comment">//       2只小白鼠,有4中组合状态;</span></span><br><span class="line"><span class="comment">//       n只小白鼠有2^n 次方组合状态</span></span><br><span class="line"><span class="comment">//       一共有8瓶药水,最多需要8中状态,就可以区分</span></span><br><span class="line"><span class="comment">//       3只老鼠,组合8种状态</span></span><br><span class="line"><span class="comment">//       因此理论上与3只老鼠就可以</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 思路:</span></span><br><span class="line"><span class="comment">//      把8瓶药水分成两堆,让一只老鼠在其中一堆里面喝水,如果死了,毒药就在这堆里面,</span></span><br><span class="line"><span class="comment">//      反之,毒药就在另外一堆里面, 然后</span></span><br><span class="line"><span class="comment">//      把有毒药的那一堆分成2堆,让第2只老鼠在其中一堆里喝,如果喝死毒药就在这堆里面,</span></span><br><span class="line"><span class="comment">//      反之,毒药就在另外一堆里面, 然后</span></span><br><span class="line"><span class="comment">//      把有毒要的那一堆再分成2堆,让第三只老鼠喝就能知道毒药在几号里</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 解答:</span></span><br><span class="line"><span class="comment">//     1代表活着,0代表死</span></span><br><span class="line"><span class="comment">//     毒药:      1 2 3 4 5 6 7 8</span></span><br><span class="line"><span class="comment">//     白鼠1:     0 0 0 0 1 1 1 1</span></span><br><span class="line"><span class="comment">//     白鼠2:     0 0 1 1 0 0 1 1</span></span><br><span class="line"><span class="comment">//     白鼠3:     0 1 0 1 0 1 0 1</span></span><br><span class="line"><span class="comment">//    </span></span><br><span class="line"><span class="comment">//     白鼠一死, 毒药在 1 2 3 4</span></span><br><span class="line"><span class="comment">//     白鼠二死, 毒药在 3 4</span></span><br><span class="line"><span class="comment">//     白鼠三死, 毒药在 4</span></span><br></pre></td></tr></table></figure><h3 id="05-递归"><a href="#05-递归" class="headerlink" title="05). 递归"></a>05). 递归</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span><span class="params">($n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ($n == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $n + sum($n<span class="number">-1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> sum(<span class="number">100</span>);</span><br></pre></td></tr></table></figure><h4 id="06-PHP实现斐波那契数列"><a href="#06-PHP实现斐波那契数列" class="headerlink" title="06). PHP实现斐波那契数列"></a>06). PHP实现斐波那契数列</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">5</span> <span class="number">8</span> <span class="number">13</span> <span class="number">21</span> <span class="number">34</span> <span class="number">55</span> .........</span><br><span class="line"></span><br><span class="line"><span class="comment">//用递归实现 输出某一位的数字</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fbnq</span><span class="params">($n)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>($n &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>($n == <span class="number">1</span> || $n == <span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> fbnq($n - <span class="number">1</span>) + fbnq($n - <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> fbnq(<span class="number">10</span>);  <span class="comment">//输出第十个数是 55</span></span><br><span class="line"><span class="comment">//经典案例</span></span><br><span class="line"><span class="comment">//有一对兔子，从出生后第3个月起每个月都生一对兔子，小兔子长到第三个月后每个月又生一对兔子，假如兔子都不死，问每个月的兔子总数为多少 (注意:这里是总数,还是对, 斐波那契数列结果是对)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 第30位数字的值</span></span><br><span class="line">$arr = [<span class="number">1</span>,<span class="number">1</span>];</span><br><span class="line"><span class="keyword">for</span> ($i=<span class="number">2</span>; $i &lt; <span class="number">30</span>; $i++) &#123; </span><br><span class="line">$arr[$i]=$arr[$i<span class="number">-1</span>]+$arr[$i<span class="number">-2</span>];</span><br><span class="line">&#125;</span><br><span class="line">var_dump($arr);</span><br></pre></td></tr></table></figure><h3 id="07-静态变量"><a href="#07-静态变量" class="headerlink" title="07). 静态变量"></a>07). 静态变量</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  静态变量</span></span><br><span class="line"><span class="comment"> *  static 变量有一个特点,在第一次调用声明之后存在,切不随函数结束而结束</span></span><br><span class="line"><span class="comment"> *  当函数再次调用时,可以直接利用上次的结果</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span> $a = <span class="number">5</span>;</span><br><span class="line">    <span class="comment">// $a = 5;</span></span><br><span class="line">    $a += <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> $a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> t();</span><br><span class="line"><span class="keyword">echo</span> t();</span><br><span class="line"><span class="keyword">echo</span> t();</span><br></pre></td></tr></table></figure><h3 id="08-递归练习-计算所有单元的和"><a href="#08-递归练习-计算所有单元的和" class="headerlink" title="08). 递归练习,计算所有单元的和"></a>08). 递归练习,计算所有单元的和</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 递归函数,计算所有单元的和</span></span><br><span class="line">$arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, [<span class="number">4</span>, [<span class="number">5</span>, <span class="number">6</span>]]];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span><span class="params">($arr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">static</span>  $sum = <span class="number">0</span>;  <span class="comment">// static 当函数再次调用时,可以直接利用上次的结果</span></span><br><span class="line">    <span class="keyword">foreach</span> ($arr <span class="keyword">as</span> $value) &#123;</span><br><span class="line">        <span class="keyword">if</span> (is_array($value)) &#123;</span><br><span class="line">            sum($value);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $sum += $value;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $sum;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> sum($arr);</span><br></pre></td></tr></table></figure><h3 id="09-递归练习-一个多维数组-如果单元值为数字-则把其值修改为原来2倍"><a href="#09-递归练习-一个多维数组-如果单元值为数字-则把其值修改为原来2倍" class="headerlink" title="09). 递归练习  一个多维数组,如果单元值为数字,则把其值修改为原来2倍"></a>09). 递归练习  一个多维数组,如果单元值为数字,则把其值修改为原来2倍</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 一个多维数组,如果单元值为数字,则把其值修改为原来2倍</span></span><br><span class="line"><span class="comment">// 方法1</span></span><br><span class="line">$arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="string">'b'</span>, [<span class="number">3</span>, <span class="string">'c'</span>, [<span class="number">5</span>, <span class="number">6</span>]]];</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">double</span><span class="params">($arr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">foreach</span> ($arr <span class="keyword">as</span> $key=&gt;$value) &#123;</span><br><span class="line">        <span class="keyword">if</span> (is_array($value)) &#123;</span><br><span class="line">            $arr[$key] = double($arr[$key]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (is_numeric($value)) &#123;</span><br><span class="line">                $arr[$key] *= <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;pre&gt;"</span>;</span><br><span class="line">print_r( double($arr));</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////-----------------------</span></span><br><span class="line"><span class="comment">// 方法2 ,使用系统函数 array_walk_recursive</span></span><br><span class="line"><span class="comment">// @see http://php.net/manual/zh/function.array-walk-recursive.php</span></span><br><span class="line">$crr = [<span class="number">1</span>, <span class="number">2</span>, <span class="string">'b'</span>, [<span class="number">3</span>, <span class="string">'c'</span>, [<span class="number">5</span>, <span class="number">6</span>]]];;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">double_2</span><span class="params">(&amp;$crr,$key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (is_numeric($crr)) &#123;</span><br><span class="line">        $crr*=<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">array_walk_recursive($crr, <span class="string">'double_2'</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;pre&gt;"</span>;</span><br><span class="line">print_r($crr);</span><br></pre></td></tr></table></figure><h3 id="10-递归创建目录"><a href="#10-递归创建目录" class="headerlink" title="10). 递归创建目录"></a>10). 递归创建目录</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$filepath = <span class="string">"./test/upload/2018/test.txt"</span>;</span><br><span class="line"></span><br><span class="line">mk_dir($filepath);</span><br><span class="line"><span class="comment">//  循环创建目录</span></span><br><span class="line"><span class="comment">//  注意,$filepath 最后的文件,名字也会被当成目录创建</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mk_dir</span><span class="params">($dir, $mode = <span class="number">0755</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (is_dir($dir) || @mkdir($dir,$mode)) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    <span class="keyword">if</span> (!mk_dir(dirname($dir),$mode)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">return</span> @mkdir($dir,$mode);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/////////////-----------------------</span></span><br><span class="line"><span class="comment">// 方法2 ,使用系统函数 mkdir  第三个参数</span></span><br><span class="line"><span class="comment">// @see http://www.php.net/mkdir</span></span><br><span class="line"><span class="comment">//  注意,$filepath 最后的文件,名字也会被当成目录创建</span></span><br><span class="line">$filepath = <span class="string">"./test/upload/2018/test.txt"</span>;</span><br><span class="line">mkdir($filepath, <span class="number">0755</span>, <span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>--JavaScript -3种事件绑定</title>
      <link href="/2018/10/27/JavaScript/JavaScript_15_%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A/"/>
      <url>/2018/10/27/JavaScript/JavaScript_15_%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A/</url>
      <content type="html"><![CDATA[<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 第一种绑定:行为结构不分离,效率也低    </span></span><br><span class="line"><span class="comment"> * &lt;a onclick="xxx()"&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  第二种绑定:只能绑定1个事件</span></span><br><span class="line"><span class="comment"> *  xxxDomObject.onclick = function()&#123;&#125;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  第三种绑定: addEventLister</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个页面的 js 由多人团队开发;</span></span><br><span class="line"><span class="comment">// A,B 都在写 onload 事件</span></span><br><span class="line"><span class="comment">// 则 后面的事件,吧前面的onload 属性值都给覆盖了</span></span><br><span class="line"><span class="comment">// 这里只会输出 world</span></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">"hello"</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    alert(<span class="string">'world'</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-- JavaScript -面向对象之静态方法</title>
      <link href="/2018/10/27/JavaScript/JavaScript_13_%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B9%8B%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95/"/>
      <url>/2018/10/27/JavaScript/JavaScript_13_%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E4%B9%8B%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95/</url>
      <content type="html"><![CDATA[<p>JS 面向对象中的静态方法<br>1: 构造函数通过 new 来制造对象<br>2: 函数本身也是对象</p><p>比如一台豆浆机,转动 (new 调用)时,能返回一杯豆浆(制造出的对象)<br>但反观豆浆机本身,也是台机器,也是个对象<br>豆浆机身上也有属性—如开关,进水口等</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  JS 面向对象中的静态方法</span></span><br><span class="line"><span class="comment"> *  1: 构造函数通过 new 来制造对象</span></span><br><span class="line"><span class="comment"> *  2: 函数本身也是对象</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  比如一台豆浆机,转动 (new 调用)时,能返回一杯豆浆(制造出的对象)</span></span><br><span class="line"><span class="comment"> *  但反观豆浆机本身,也是台机器,也是个对象</span></span><br><span class="line"><span class="comment"> *  豆浆机身上也有属性---如开关,进水口等</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// var Hashiqi = function () &#123;</span></span><br><span class="line"><span class="comment">//     this.bark=function () &#123;</span></span><br><span class="line"><span class="comment">//         console.log('www');</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">//上面这个 等效 下面这个</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Hashiqi</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bark= <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'www'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Hashiqi.ajax = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ajax'</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// var h = new Hashiqi(); //h方法有没有ajax方法?? 答:没有,豆浆机上的开关会跑到豆浆里面吗?</span></span><br><span class="line"><span class="comment">// console.log(h);</span></span><br><span class="line"><span class="built_in">console</span>.log(Hashiqi.ajax);</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  即:</span></span><br><span class="line"><span class="comment"> *  1: ajax() 方法是属于"函数"本省的,和返回的对象没有关系</span></span><br><span class="line"><span class="comment"> *  2: bark要调用,必须 new Hashiqi()得到对象,切由返回对象才能调用,</span></span><br><span class="line"><span class="comment"> *  3: ajax()方法要调用,不需要 new 对象,直接用 Hashiqi 来调用.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">// h.bark();</span></span><br><span class="line">Hashiqi.ajax();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 我们之前有没有接触过静态方法?</span></span><br><span class="line"><span class="comment"> * 答: 有</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 1: Math.random(); 静态方法</span></span><br><span class="line"><span class="comment"> * 2:$.ajax();  静态方法</span></span><br><span class="line"><span class="comment"> * 3:写 jQuery 插件,2种办法</span></span><br><span class="line"><span class="comment"> *      3.1: 通过闭包,把方法写到 jQuery 上的原型上( 稍复杂)</span></span><br><span class="line"><span class="comment"> *      3.3; 直接增加 $ 对象的静态方法</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"https://code.jquery.com/jquery-1.9.1.js"</span>&gt;</span><span class="undefined"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="comment">//---------------- demo ------------</span></span></span><br><span class="line"><span class="actionscript">    <span class="comment">//通过静态方法给 jQuery 增加唱歌插件</span></span></span><br><span class="line"><span class="javascript">    $.sing = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="actionscript">        alert(<span class="string">'人生最大的悲剧莫过于失去自由 人生最大的痛苦莫过于失去亲人和朋友'</span>);</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="javascript">    $.sing();</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-JavaScript  -闭包</title>
      <link href="/2018/10/24/JavaScript/JavaScript_06_%E9%97%AD%E5%8C%85/"/>
      <url>/2018/10/24/JavaScript/JavaScript_06_%E9%97%AD%E5%8C%85/</url>
      <content type="html"><![CDATA[<h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>一句话概括 :函数的作用域取决于声明时,而不取决于调用时!!!<br>函数的作用取决于声明时,而非调用时,<br>函数内部声明变量的时候,一定要用 <code>var</code> 命令.如果不用的话,就是声明了一个全局变量</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> age = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">t2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(age)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> t2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tmp = t1();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  1: 在大部分的语言中, t1 被调用执行,则申请内存</span></span><br><span class="line"><span class="comment"> *  并把其局部变量, push 入栈!!!</span></span><br><span class="line"><span class="comment"> *  t1 函数 执行完毕,内部的局部变量,随着函数的退出而销毁</span></span><br><span class="line"><span class="comment"> *  因此, age = 20 的局部变量,依靠已经消失了</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  但是在 js 中 , age = 20 这个变量,却被 t2 捕捉,</span></span><br><span class="line"><span class="comment"> *  即使 t1 执行完毕,通过 t2 依然能访问该变量</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  这种情况---返回的函数,并非孤立的函数,甚至吧其周围的变量环境.</span></span><br><span class="line"><span class="comment"> *  形成了一封闭的"环境包",并同返回,所以叫"闭包"</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  ----  一句话概括---  函数的作用域取决于声明时,而不取决于调用时!!</span></span><br><span class="line"><span class="comment"> * @type &#123;number&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> age = <span class="number">99</span>;</span><br><span class="line">tmp();<span class="comment">// 输出 20</span></span><br></pre></td></tr></table></figure><h3 id="函数的作用取决于声明时-而非调用时"><a href="#函数的作用取决于声明时-而非调用时" class="headerlink" title="函数的作用取决于声明时,而非调用时"></a>函数的作用取决于声明时,而非调用时</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">closure</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sister = <span class="string">'大桃花'</span>;</span><br><span class="line">    <span class="keyword">var</span> me = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(sister);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> me;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">place</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> sister = <span class="string">'大福晋'</span>;</span><br><span class="line">    <span class="keyword">var</span> girl = closure();</span><br><span class="line">    girl();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">place();  <span class="comment">// 输出 大桃花</span></span><br></pre></td></tr></table></figure><h3 id="闭包计数器01"><a href="#闭包计数器01" class="headerlink" title="闭包计数器01"></a>闭包计数器01</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 多个人开发 js 程序,需要一个全局的计数器</span></span><br><span class="line"><span class="comment">// 多个人的函数共同用一个计数器,计数器一直增长</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 解决办法:</span></span><br><span class="line"><span class="comment"> *  1: 设立一个全局变量</span></span><br><span class="line"><span class="comment"> *  window.cat = 0;</span></span><br><span class="line"><span class="comment"> *  调用 ++window.cnt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  这个办法可行,但是污染了全局变量,</span></span><br><span class="line"><span class="comment"> *  其次引入了多人的 js 程序,别人的程序里,也有一个 window.cnt = 'hello';</span></span><br><span class="line"><span class="comment"> *  该计数器就损坏了,(所以要尽量避免用全局变量)</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h3 id="闭包计数器02-—-闭包维护一个别人污染不到的变量-做计数器"><a href="#闭包计数器02-—-闭包维护一个别人污染不到的变量-做计数器" class="headerlink" title="闭包计数器02  — 闭包维护一个别人污染不到的变量,做计数器"></a>闭包计数器02  — 闭包维护一个别人污染不到的变量,做计数器</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 闭包维护一个别人污染不到的变量,做计数器</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cnt = <span class="number">0</span>; <span class="comment">// 当 ccounter 执行完毕后,除了返回的 cnter 函数,谁也别想碰到 cnt 变量了</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> cnter = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++cnt;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> cnter;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> inc = counter();</span><br><span class="line"><span class="built_in">console</span>.log(inc());</span><br><span class="line"><span class="built_in">console</span>.log(inc());</span><br><span class="line"><span class="built_in">console</span>.log(inc());</span><br><span class="line"></span><br><span class="line"><span class="comment">//-----------简化版-----------</span></span><br><span class="line"><span class="keyword">var</span> cnt = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> ++cnt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(cnt());</span><br><span class="line"><span class="built_in">console</span>.log(cnt());</span><br><span class="line"><span class="built_in">console</span>.log(cnt());</span><br></pre></td></tr></table></figure><h3 id="闭包计数器03-—在工作中-一般如何避免全局污染或冲突"><a href="#闭包计数器03-—在工作中-一般如何避免全局污染或冲突" class="headerlink" title="闭包计数器03  —在工作中,一般如何避免全局污染或冲突"></a>闭包计数器03  —在工作中,一般如何避免全局污染或冲突</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">*  疑问: cnt 不依然是全局变量吗?</span></span><br><span class="line"><span class="comment">*  第3版---在工作中,一般如何避免全局污染或冲突</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">*  1: 统一放在一个全局对象上,如 jQuery-&gt;$</span></span><br><span class="line"><span class="comment">*  2:每个人用自己的命名空间</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// jQuery 的计数插件形式</span></span><br><span class="line">$ = &#123;&#125;;</span><br><span class="line">$.cnt = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++cnt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="built_in">console</span>.log($.cnt());</span><br><span class="line"><span class="built_in">console</span>.log($.cnt());</span><br><span class="line"><span class="built_in">console</span>.log($.cnt());</span><br></pre></td></tr></table></figure><h3 id="闭包计数器04-–-把自己的变量-函数-都放在一个对象里"><a href="#闭包计数器04-–-把自己的变量-函数-都放在一个对象里" class="headerlink" title="闭包计数器04   – 把自己的变量,函数,都放在一个对象里"></a>闭包计数器04   – 把自己的变量,函数,都放在一个对象里</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第4版 个人命名空间,在团队开发中也很常见</span></span><br><span class="line"><span class="comment">// 其实就是把自己的变量,函数,都放在一个对象里</span></span><br><span class="line"><span class="keyword">var</span> Y18 = &#123;&#125;;</span><br><span class="line">Y18.cnt = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> cnt = <span class="number">0</span></span><br><span class="line"><span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ++cnt;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="built_in">console</span>.log(Y18.cnt());</span><br><span class="line"><span class="built_in">console</span>.log(Y18.cnt());</span><br><span class="line"><span class="built_in">console</span>.log(Y18.cnt());</span><br></pre></td></tr></table></figure><h3 id="demo-练习"><a href="#demo-练习" class="headerlink" title="demo 练习"></a>demo 练习</h3><p>要求:点击 li ,分别弹出 0,1,2,3</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>男<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>女<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>老<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>少<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="comment">//要求:点击 li ,分别弹出 0,1,2,3</span></span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, lis = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'li'</span>), len = lis.length; i &lt; len; i++) &#123;</span></span><br><span class="line"><span class="actionscript">        lis[i].onclick = (<span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">var</span> p=i;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> alert(p);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;)();</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-JavaScript -this</title>
      <link href="/2018/10/22/JavaScript/JavaScript_04_this/"/>
      <url>/2018/10/22/JavaScript/JavaScript_04_this/</url>
      <content type="html"><![CDATA[<p>js 的 this 到底是谁???  js 中函数的4中条用方式</p><h3 id="1-作为普通函数来调用"><a href="#1-作为普通函数来调用" class="headerlink" title="1). 作为普通函数来调用"></a>1). 作为普通函数来调用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  console.log(window.xxx);</span></span><br><span class="line"><span class="comment"> *  1: 作为普通函数来调用时,</span></span><br><span class="line"><span class="comment"> *  this 的值指向--&gt;window</span></span><br><span class="line"><span class="comment"> *  准确的说,this 为 null ,但被解释成 window</span></span><br><span class="line"><span class="comment"> *  在 ECMAScript 表准中, 如果 this 为 null ,则解释成 undefined</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.xxx); <span class="comment">//undefined</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.xxx = <span class="number">333</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">t();</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.xxx);<span class="comment">// 输出 333</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.test_window);</span><br><span class="line">&#125;</span><br><span class="line">test(); <span class="comment">//输出  undefined</span></span><br></pre></td></tr></table></figure><h3 id="作为对象的方法来调用"><a href="#作为对象的方法来调用" class="headerlink" title="作为对象的方法来调用"></a>作为对象的方法来调用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 2: 作为对象的方法来调用</span></span><br><span class="line"><span class="comment"> * this 指向方法的调用这,即该对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    xx: <span class="number">99</span>, <span class="attr">yy</span>: <span class="number">88</span>, <span class="attr">t</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.xx);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">obj.t();  <span class="comment">// 输出 99</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dog = &#123;<span class="attr">xx</span>: <span class="string">'wangwang'</span>&#125;;</span><br><span class="line">dog.t = obj.t;</span><br><span class="line">dog.t(); <span class="comment">// 输出 wangwang</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 作为方法调用时,</span></span><br><span class="line"><span class="comment"> * this 指向其调用那一刻的调用者,即母体对象</span></span><br><span class="line"><span class="comment"> * 不管被调用函数,声明时属于方法,还是函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">show = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'show'</span> + <span class="keyword">this</span>.xx);</span><br><span class="line">&#125;</span><br><span class="line">dog.t = show;</span><br><span class="line">dog.t(); <span class="comment">// show wangwang</span></span><br></pre></td></tr></table></figure><h3 id="函数作为构造函数调用时"><a href="#函数作为构造函数调用时" class="headerlink" title="函数作为构造函数调用时"></a>函数作为构造函数调用时</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 3: 函数作为构造函数调用时</span></span><br><span class="line"><span class="comment"> *  js 中没有类的概念,创建对象是用构造函数来完成,或者直接用json格式&#123;&#125;来写对象</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  new Dog 发生了一下几个步骤</span></span><br><span class="line"><span class="comment"> *  a: x系统创建空对象 &#123;&#125; ,(空对象 constructor 属性指向 Dog 函数,先别管)</span></span><br><span class="line"><span class="comment"> *  b: 把函数的 this --&gt; 指向--&gt;该空对象</span></span><br><span class="line"><span class="comment"> *  c: 执行该函数</span></span><br><span class="line"><span class="comment"> *  d: 返回该对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dog</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.bark = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'this is '</span> + <span class="keyword">this</span>.name);  <span class="comment">//输出 this is huzi</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dog = <span class="keyword">new</span> Dog(<span class="string">'huzi'</span>, <span class="number">2</span>);</span><br><span class="line">dog.bark();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 下面这个返回什么???</span></span><br><span class="line"><span class="comment">// 分析: 输出 Pig对象:  Pig &#123;age: 99&#125;; 因为函数作为构造函数运行时,return 的值是忽略的,还是返回对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Pig</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = <span class="number">99</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'abc'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pig = <span class="keyword">new</span> Pig();</span><br><span class="line"><span class="built_in">console</span>.log(pig);</span><br></pre></td></tr></table></figure><h3 id="函数通过-call-apply-调用"><a href="#函数通过-call-apply-调用" class="headerlink" title="函数通过 call , apply 调用"></a>函数通过 call , apply 调用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  4. 函数通过 call , apply 调用</span></span><br><span class="line"><span class="comment"> *     语法格式: 函数.call(对象,参数,参数,参数,参数........参数N.)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t</span>(<span class="params">num</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'我的真实年龄是'</span> + <span class="keyword">this</span>.age);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'但是我一般告诉别人我'</span> + (<span class="keyword">this</span>.age + num));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="keyword">var</span> humanObject = &#123;<span class="attr">name</span>: <span class="string">'lisi'</span>, <span class="attr">age</span>: <span class="number">28</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 我的真实年龄是28</span></span><br><span class="line"><span class="comment">// 但是我一般告诉别人我18</span></span><br><span class="line">humanObject.t = t;</span><br><span class="line">humanObject.t(<span class="number">-10</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 接下来,我们不把 t 赋值为 human 的属性,也能把 this 指向 human</span></span><br><span class="line"><span class="comment">// 运行结果:</span></span><br><span class="line"><span class="comment">//      我的真实年龄是30</span></span><br><span class="line"><span class="comment">//      但是我一般告诉别人我35</span></span><br><span class="line"><span class="comment">// 分析:</span></span><br><span class="line"><span class="comment">// fn.call(对象obj,参数1,参数2,....参数N)</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="comment">// 运行如下:</span></span><br><span class="line"><span class="comment">// a):  fn 函数中的 this---&gt;指向-----&gt;obj</span></span><br><span class="line"><span class="comment">// b):  运行 fn(参数1,参数2.....参数N);</span></span><br><span class="line"><span class="keyword">var</span> wangwuObject = &#123;<span class="attr">name</span>: <span class="string">'wangwu'</span>, <span class="attr">age</span>: <span class="number">30</span>&#125;;</span><br><span class="line">t.call(wangwuObject, <span class="number">5</span>);</span><br><span class="line"><span class="comment">// t.apply(wangwuObject,[5]);</span></span><br></pre></td></tr></table></figure><h3 id="demo-练习"><a href="#demo-练习" class="headerlink" title="demo 练习"></a>demo 练习</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">name = <span class="string">'this is window'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">    name: <span class="string">'php'</span>, <span class="attr">t</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">var</span> dog = &#123;<span class="attr">name</span>: <span class="string">'huzi'</span>&#125;;</span><br><span class="line">obj.t();  <span class="comment">// 输出 php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> tmp = obj.t;</span><br><span class="line">tmp(); <span class="comment">//相当于window.tmp()  输出: this is window</span></span><br><span class="line"></span><br><span class="line">dog.t = obj.t;</span><br><span class="line">dog.t(); <span class="comment">//输出 huzi</span></span><br><span class="line"></span><br><span class="line">(dog.t = obj.t)(); <span class="comment">//输出 this is window</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="keyword">this</span>.name)&#125;)(); <span class="comment">//输出 this is window</span></span><br><span class="line"><span class="comment">// 分析</span></span><br><span class="line"><span class="comment">// (dog.t = obj.t) 是一个表达式,返回值值"值",即 t 函数</span></span><br><span class="line"><span class="comment">// 强调是值,说明不是通过应用来调用的,而是立即使用函数本身</span></span><br><span class="line"><span class="comment">// 效果等同于 (function()&#123;console.log(this.name)&#125;)</span></span><br><span class="line"><span class="comment">// null 又被解释成 window</span></span><br></pre></td></tr></table></figure><h3 id="其他-window-全局变量污染"><a href="#其他-window-全局变量污染" class="headerlink" title="其他 window 全局变量污染"></a>其他 window 全局变量污染</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  有一些经验的,但对 js 理解的不深的同学说:</span></span><br><span class="line"><span class="comment"> *  有 this 操作的,(如 this.age=xx ) 的函数不能直接用,而是要new 来调用?????</span></span><br><span class="line"><span class="comment"> *  答: 因为直接用, this 会指向 window ,将会污染去全局变量</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-JavaScript arguments</title>
      <link href="/2018/10/21/JavaScript/JavaScript_03_arguments/"/>
      <url>/2018/10/21/JavaScript/JavaScript_03_arguments/</url>
      <content type="html"><![CDATA[<p>argumets 是什么? </p><p>答: 是一个对象,是一个长得很像数组的对象  </p><p>arguments 内容是什么???  </p><p>答: arguments是函数运行时的实体参数列表</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 函数运行期内,关键的三个对象</span></span><br><span class="line"><span class="comment">*  AO -----&gt; 本函数 AO 上没有某属性,则继续去外层函数的</span></span><br><span class="line"><span class="comment">*  arguments -----&gt; 每个函数都有自己的 callee ,但 不 向外层接着找 arguments 的相关属性,即 不形成链</span></span><br><span class="line"><span class="comment">*  this</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h3 id="demo-01-arguments-是什么"><a href="#demo-01-arguments-是什么" class="headerlink" title="demo_01   arguments 是什么?"></a>demo_01   arguments 是什么?</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">d, e, f</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 在此函数中无法用 d,e,f 形参来取的 'haha',因为没有相对应的形参</span></span><br><span class="line">    <span class="comment">// 但我们可以用 arguments 来获取任意多个的实参</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">typeof</span>  <span class="built_in">arguments</span>); <span class="comment">// 输出 object</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>);  <span class="comment">// 对象</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">0</span>]); <span class="comment">// hello --&gt;长得像数组</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">1</span>]);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>[<span class="number">3</span>]);</span><br><span class="line">&#125;)(<span class="string">'hello'</span>, <span class="string">'world'</span>, <span class="string">'!'</span>, <span class="string">'haha'</span>);</span><br></pre></td></tr></table></figure><h3 id="arguments-实际内容"><a href="#arguments-实际内容" class="headerlink" title="arguments 实际内容"></a>arguments 实际内容</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">d, e, f</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(d); <span class="comment">// 输出 hello</span></span><br><span class="line">    <span class="built_in">arguments</span>[<span class="number">0</span>] = <span class="string">'China'</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(d); <span class="comment">// 输出 China ; 形参与对应的 arguments 单元,其实是互相映射的,互相影响</span></span><br><span class="line">&#125;)(<span class="string">'hello'</span>, <span class="string">'world'</span>, <span class="string">'!'</span>, <span class="string">'haha'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//---------------------------------------</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">d, e, f</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.length); <span class="comment">// 输出长度 4 ; 实参个数</span></span><br><span class="line">&#125;)(<span class="string">'hello'</span>, <span class="string">'world'</span>, <span class="string">'!'</span>, <span class="string">'haha'</span>);</span><br></pre></td></tr></table></figure><h3 id="递归-arguments-callee"><a href="#递归-arguments-callee" class="headerlink" title="递归 arguments.callee"></a>递归 arguments.callee</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">d, e, f</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">arguments</span>.callee); <span class="comment">// 输出  function(d, e, f) &#123; console.log(arguments.callee); &#125;</span></span><br><span class="line">&#125;)(<span class="string">'hello'</span>, <span class="string">'world'</span>, <span class="string">'!'</span>, <span class="string">'haha'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//-----------------------------</span></span><br><span class="line"><span class="comment">// 递归 , 求和,输出 5050</span></span><br><span class="line"><span class="built_in">console</span>.log(</span><br><span class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> n + <span class="built_in">arguments</span>.callee(n - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)(<span class="number">100</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-JavaScript  词法分析期  执行期</title>
      <link href="/2018/10/21/JavaScript/JavaScript_02_%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90/"/>
      <url>/2018/10/21/JavaScript/JavaScript_02_%E8%AF%8D%E6%B3%95%E5%88%86%E6%9E%90/</url>
      <content type="html"><![CDATA[<h3 id="词法分析期-执行期"><a href="#词法分析期-执行期" class="headerlink" title="词法分析期  执行期"></a>词法分析期  执行期</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 第一步: 先分析参数</span></span><br><span class="line"><span class="comment"> * 第二部: 在分析变量声明</span></span><br><span class="line"><span class="comment"> * 第三个: 分析函数声明</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 一个函数就能使用的局部变量,就从上面的3步分析而来</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 具体步骤:</span></span><br><span class="line"><span class="comment"> * 0: 函数运行前的一瞬间,生成 Active Object(活动对象),下称为 AO</span></span><br><span class="line"><span class="comment"> * 1:把声明的参数,形成 AO 的属性,值全是 undefined</span></span><br><span class="line"><span class="comment"> * 2:分析变量声明声明声明!!! 如 var age</span></span><br><span class="line"><span class="comment"> *      如果 AO 上还没有 age 属性,则添加 AO 属性,值是 undefined</span></span><br><span class="line"><span class="comment"> *      如果 AO 上已经有 age 属性,则不做任何影响</span></span><br><span class="line"><span class="comment"> * 3: 分析函数声明,如 function foo()&#123;&#125;</span></span><br><span class="line"><span class="comment"> *      则把函数赋给 AO.foo 属性</span></span><br><span class="line"><span class="comment"> *      注: 如果此前 foo 属性已经存在,则被无情覆盖了</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><h3 id="demo-1"><a href="#demo-1" class="headerlink" title="demo_1"></a>demo_1</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分析过程</span></span><br><span class="line"><span class="comment">// AO &#123;age:unfettered&#125;</span></span><br><span class="line"><span class="comment">// 运行过程:</span></span><br><span class="line"><span class="comment">// t(5)--&gt;AO.age=5; alert(AO.age);  //5</span></span><br><span class="line"><span class="comment">// t()---&gt;AO.age 没得到复制,还是 undefined</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">    alert(age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">t(<span class="number">5</span>); <span class="comment">// 输出 5</span></span><br><span class="line">t(); <span class="comment">//输出undefined</span></span><br></pre></td></tr></table></figure><h3 id="demo-02"><a href="#demo-02" class="headerlink" title="demo_02"></a>demo_02</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  分析过程:</span></span><br><span class="line"><span class="comment"> *  0: 形成 AO=&#123;&#125;</span></span><br><span class="line"><span class="comment"> *  1: 分析形参 AO = &#123;age:undefined&#125;</span></span><br><span class="line"><span class="comment"> *     接受形参 AO= &#123;age:5&#125;</span></span><br><span class="line"><span class="comment"> *  2: 分析 var age ,发现 AO 已经有 age属性,不做任何影响</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  执行过程:</span></span><br><span class="line"><span class="comment"> *   console.log(age);  //66</span></span><br><span class="line"><span class="comment"> *   AO.age = 66;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t2</span>(<span class="params">age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> age= <span class="number">66</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(age); <span class="comment">//输出66</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">t2(<span class="number">5</span>);</span><br></pre></td></tr></table></figure><h3 id="demo-03"><a href="#demo-03" class="headerlink" title="demo_03"></a>demo_03</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  词法分析过程:</span></span><br><span class="line"><span class="comment"> *      0: AO = &#123;&#125;</span></span><br><span class="line"><span class="comment"> *      1: 分析参数 AO = &#123;greet:undefined&#125;</span></span><br><span class="line"><span class="comment"> *      2: 分析 greet 变量声明, AO 已经有greet 属性,因此不做任何影响</span></span><br><span class="line"><span class="comment"> *      3: 分析 greet 函数声明, AO.greet = function()&#123;&#125;, 被覆盖成函数</span></span><br><span class="line"><span class="comment"> *  执行过程</span></span><br><span class="line"><span class="comment"> *      console.log(greet);</span></span><br><span class="line"><span class="comment"> *      greet = 'hello';</span></span><br><span class="line"><span class="comment"> *      console.log(greet);</span></span><br><span class="line"><span class="comment"> *      console.log(greet);</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(greet);<span class="comment">// 输出greet() &#123;&#125;</span></span><br><span class="line">    <span class="keyword">var</span> greet = <span class="string">'hello'</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(greet);<span class="comment">// 输出 hello</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(greet);<span class="comment">// 输出 hello</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">t3(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure><h3 id="demo-04"><a href="#demo-04" class="headerlink" title="demo_04"></a>demo_04</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  词法分析过程:</span></span><br><span class="line"><span class="comment"> *      0: AO = &#123;&#125;</span></span><br><span class="line"><span class="comment"> *      1: 分析参数 AO = &#123;greet:undefined&#125;</span></span><br><span class="line"><span class="comment"> *      2: 分析 greet 变量声明, AO 已经有greet 属性,因此不做任何影响</span></span><br><span class="line"><span class="comment"> *      3: 分析 greet 函数声明, AO.greet = function()&#123;&#125;, 被覆盖成函数</span></span><br><span class="line"><span class="comment"> *  执行过程</span></span><br><span class="line"><span class="comment"> *      console.log(greet);</span></span><br><span class="line"><span class="comment"> *      console.log(greet);</span></span><br><span class="line"><span class="comment"> *      console.log(greet);</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t3</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(greet);<span class="comment">// 输出 greet() &#123;&#125;</span></span><br><span class="line">    <span class="keyword">var</span> greet;</span><br><span class="line">    <span class="built_in">console</span>.log(greet);<span class="comment">// 输出 greet() &#123;&#125;</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">greet</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">console</span>.log(greet);<span class="comment">// 输出 greet() &#123;&#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">t3(<span class="literal">null</span>);</span><br></pre></td></tr></table></figure><h3 id="demo-05"><a href="#demo-05" class="headerlink" title="demo_05"></a>demo_05</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 分析</span></span><br><span class="line"><span class="comment"> * 0: AO = &#123;&#125;</span></span><br><span class="line"><span class="comment"> * 1: 分析参数 AO =&#123;b:undefined&#125;</span></span><br><span class="line"><span class="comment"> *    接受参数 AO = &#123;b:2&#125;</span></span><br><span class="line"><span class="comment"> * 2: 分析 var 声明,此函数没有 var</span></span><br><span class="line"><span class="comment"> * 3: 分析函数声明, AO = &#123;b:function()&#123;console.log(b);&#125;&#125;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 执行期:</span></span><br><span class="line"><span class="comment"> * console.log(b)  //function</span></span><br><span class="line"><span class="comment"> * b();  //由作用域寻找到 a 函数中的 b , 即 function , console.log() 出来</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(b); <span class="comment">// 输出 b() &#123; console.log(b); &#125;   ****注意这里的注释也会被输出***</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(b); <span class="comment">// 输出 b() &#123; console.log(b); &#125;  ****注意这里的注释也会被输出***</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    b();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a(<span class="number">2</span>);</span><br></pre></td></tr></table></figure><h3 id="demo-06"><a href="#demo-06" class="headerlink" title="demo_06"></a>demo_06</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 词法分析</span></span><br><span class="line"><span class="comment"> *      0: AO = &#123;&#125;</span></span><br><span class="line"><span class="comment"> *      1: 分析参数 AO = &#123;b:undefined&#125; --&gt; &#123;b:2&#125;</span></span><br><span class="line"><span class="comment"> *      2: 分析 var 声明,没有</span></span><br><span class="line"><span class="comment"> *      3: 分析函数声明???  [没有!!!]!!!***</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *      (注: b = function()&#123;&#125; ,是一个赋值过程,在执行期才有用)</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 执行过程</span></span><br><span class="line"><span class="comment"> *  console.log(b);</span></span><br><span class="line"><span class="comment"> *  b = function()&#123; console.log(b);  &#125;</span></span><br><span class="line"><span class="comment"> *  console.log(b);</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">b</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(b);  <span class="comment">//输出 2</span></span><br><span class="line">    b = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(b); <span class="comment">// b() &#123; console.log(b); &#125;  ****注意这里的注释也会被输出***</span></span><br><span class="line">    &#125;;</span><br><span class="line">    b();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">a(<span class="number">2</span>);</span><br></pre></td></tr></table></figure><h3 id="demo-07-函数声明-函数赋值"><a href="#demo-07-函数声明-函数赋值" class="headerlink" title="demo_07  函数声明  函数赋值"></a>demo_07  函数声明  函数赋值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这两种方式 效果不同</span></span><br><span class="line"><span class="comment">// t1 是函数声明,虽然全局内也得到一个 t1 变量,值是 function</span></span><br><span class="line"><span class="comment">// 而 t2 只是一个复制过程----值是谁? 值是右侧的表达式的返回结果,即函数</span></span><br><span class="line"><span class="comment">// 就是说 function ()&#123;&#125; 在js 看来,就和 2*4  8/4 一样,是一个表达式,返回一个结果</span></span><br><span class="line"><span class="comment">// 因此 , t1 t2 两种方式在词法分析是,有这本质的区别</span></span><br><span class="line"><span class="comment">// 前者 在词法分析阶段,就发挥作用</span></span><br><span class="line"><span class="comment">// 而后者,在运行阶段,才发挥作用</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">t2 =<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="jQuery-最外层代码分析"><a href="#jQuery-最外层代码分析" class="headerlink" title="jQuery 最外层代码分析"></a>jQuery 最外层代码分析</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//----------------- jQuery 最外层代码分析---------------</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">window, undefined</span>) </span>&#123; &#125;) <span class="comment">//内层表达式.返回值是函数,包括在小括号李,当成表达式来执行</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params">window, undefined</span>) </span>&#123; &#125;(<span class="built_in">window</span>)) <span class="comment">//立即调用</span></span><br><span class="line"><span class="comment">// 而内层函数又没有起名字,成为匿名函数</span></span><br><span class="line"><span class="comment">// 这种手法,匿名函数,立即执行,不污染全局, 称为 立即执行匿名函数表达式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//------------------  思路: 为什么传 window , 而又不会传 undefined ???--------------</span></span><br><span class="line"><span class="comment">//------------------  传window 是为了速度 --------------</span></span><br><span class="line"><span class="comment">// function () &#123;</span></span><br><span class="line"><span class="comment">//     function () &#123;</span></span><br><span class="line"><span class="comment">//         function () &#123;</span></span><br><span class="line"><span class="comment">//             function () &#123;</span></span><br><span class="line"><span class="comment">//                 document.getElementById........  //这个 document 将会向作用域层层上找,直到最外层</span></span><br><span class="line"><span class="comment">//             &#125;</span></span><br><span class="line"><span class="comment">//         &#125;</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// jQuery 就是为了加快内部查找局部变量的速度,而直接把 window 以参数形式传进来</span></span><br><span class="line"><span class="comment">// 这样 window 就在jQuery 内部 AO 上</span></span><br><span class="line"><span class="comment">// 不传 undefined 是为了安全</span></span><br><span class="line"><span class="comment">// 因为在 IE ,低版本中, undefined 竟然可以重新赋值, 如 undefined = 6;</span></span><br><span class="line"><span class="comment">// 声明 undefined 局部变量( 名字是undefined而已),</span></span><br><span class="line"><span class="comment">// 同时,又不传参,值自然是 undefined 防止了对外界 undefined 的污染</span></span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-JavaScript 作用域   词法分析</title>
      <link href="/2018/10/21/JavaScript/JavaScript_01_%E4%BD%9C%E7%94%A8%E5%9F%9F/"/>
      <url>/2018/10/21/JavaScript/JavaScript_01_%E4%BD%9C%E7%94%A8%E5%9F%9F/</url>
      <content type="html"><![CDATA[<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>​          以 window.xxx 引用全局变量寻找不到,作为某个属性不存在,返回 undefined<br>​          直接以 xxx 引用某变量,寻找不到,则是报错 xxx is not defined 错误       </p><h3 id="作用域-入门"><a href="#作用域-入门" class="headerlink" title="作用域 入门"></a>作用域 入门</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test;</span><br><span class="line"><span class="built_in">console</span>.log(test); <span class="comment">// 输出 undefined</span></span><br><span class="line"><span class="built_in">console</span>.log(test2); <span class="comment">//报错 test2 is not defined</span></span><br></pre></td></tr></table></figure><h3 id="词法分析入门"><a href="#词法分析入门" class="headerlink" title="词法分析入门"></a>词法分析入门</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 词法分析 入门</span></span><br><span class="line"><span class="comment">* js 代码自上而下执行!!!</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 但是---------</span></span><br><span class="line"><span class="comment">* js 代码在整体运行分:</span></span><br><span class="line"><span class="comment">* 词法分析期</span></span><br><span class="line"><span class="comment">* 运行期</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* 自上而下执行,先有个一个"词法分析过程"!!!</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 分析 词法分析期 var test_1;  赋值期 tes_1='fei';</span></span><br><span class="line"><span class="keyword">var</span> test_1 = <span class="string">'fei'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(test_1); <span class="comment">//输出 fei</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.test_1); <span class="comment">//输出 fei</span></span><br></pre></td></tr></table></figure><h3 id="作用域-demo"><a href="#作用域-demo" class="headerlink" title="作用域  demo"></a>作用域  demo</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 作用域</span></span><br><span class="line"><span class="comment"> * 在js中,函数嵌套是非常普遍的</span></span><br><span class="line"><span class="comment"> * 在函数嵌套中,</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 对变量是如何寻找的?</span></span><br><span class="line"><span class="comment"> * 答:首先在函数内寻找</span></span><br><span class="line"><span class="comment"> * 寻找不到,则往外层寻找</span></span><br><span class="line"><span class="comment"> * 直到....全局(window)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> c = <span class="number">5</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> d = <span class="number">6</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">t2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> e = <span class="number">7</span>;</span><br><span class="line">        alert(c + d + e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    t2();</span><br><span class="line">&#125;</span><br><span class="line">t1(); <span class="comment">//输出 18</span></span><br><span class="line"><span class="comment">//----------------------------</span></span><br><span class="line"><span class="keyword">var</span> c = <span class="number">5</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> d = <span class="number">6</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">t2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> e = <span class="number">7</span>;</span><br><span class="line">        <span class="keyword">var</span> d=<span class="number">3</span>;</span><br><span class="line">        alert(c + d + e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    t2();</span><br><span class="line">&#125;</span><br><span class="line">t1(); <span class="comment">//输出 15</span></span><br></pre></td></tr></table></figure><h3 id="声明变量-var-的作用"><a href="#声明变量-var-的作用" class="headerlink" title="声明变量 var 的作用"></a>声明变量 var 的作用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 声明变量 var 的作用</span></span><br><span class="line"><span class="comment"> * var 是在函数运行的上下文中,声明一个变量</span></span><br><span class="line"><span class="comment"> * 如果不加 var , 则是一个赋值操作</span></span><br><span class="line"><span class="comment"> * 但不要狭隘的理解为----声明了一个全局变量</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">alert(<span class="built_in">window</span>.d);<span class="comment">//输出 undefined</span></span><br><span class="line">alert(<span class="built_in">window</span>.e);<span class="comment">//输出 undefined</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    d = <span class="number">5</span>;<span class="comment">//赋值操作</span></span><br><span class="line">    <span class="keyword">var</span> e = <span class="number">6</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">t();</span><br><span class="line"><span class="comment">// 5   d没有加 var 仅仅是一个赋值操作,</span></span><br><span class="line"><span class="comment">// 寻找t域内的函数,没有找到继续寻找...直到..&gt;window,最后 window.d = 5</span></span><br><span class="line">alert(<span class="built_in">window</span>.d); <span class="comment">// 输出 5</span></span><br><span class="line">alert(<span class="built_in">window</span>.e); <span class="comment">//输出 undefined</span></span><br><span class="line"><span class="comment">//----------------------------------</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span>  d;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">t2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        d = <span class="number">5</span>;</span><br><span class="line">        e = <span class="number">6</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    t2();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">t1();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(e);  <span class="comment">// 输出 6</span></span><br><span class="line"><span class="built_in">console</span>.log(d);  <span class="comment">//报错 is not defined</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.e); <span class="comment">//输出 6</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">window</span>.d); <span class="comment">//输出 undefined</span></span><br></pre></td></tr></table></figure><h3 id="作用域-demo-2"><a href="#作用域-demo-2" class="headerlink" title="作用域 demo 2"></a>作用域 demo 2</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> str1 = <span class="string">'global'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 分析</span></span><br><span class="line">    <span class="comment">// 这里 str1 这一行执行,在 t1 内寻找 str1--没有找到,又在 window 上寻找 str1--有,打印global</span></span><br><span class="line">    <span class="comment">// 这里 str2 这一行执行,在 t1 内寻找 str2--没有找到,又在 window 上寻找str2--没有,报错 str2 is not defined</span></span><br><span class="line">    <span class="built_in">console</span>.log(str1); <span class="comment">// 输出 global</span></span><br><span class="line">    <span class="built_in">console</span>.log(str2); <span class="comment">// 报错 is not defined</span></span><br><span class="line">    <span class="comment">// console.log(window.str1);// 输出 global</span></span><br><span class="line">    <span class="comment">// console.log(window.str2);// 输出 undefined</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 分析</span></span><br><span class="line">    <span class="comment">// 如果执行到这里,才会把全局的 str2变量赋上值</span></span><br><span class="line">    str2 = <span class="string">'local'</span>;</span><br><span class="line">    <span class="comment">// console.log(str1); // 输出 global</span></span><br><span class="line">    <span class="comment">// console.log(str2); // 报错 local</span></span><br><span class="line">    <span class="comment">// console.log(window.str1);// 输出 global</span></span><br><span class="line">    <span class="comment">// console.log(window.str2);// 输出 local</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">t1();</span><br></pre></td></tr></table></figure><h3 id="词法分析期-运行期"><a href="#词法分析期-运行期" class="headerlink" title="词法分析期   运行期"></a>词法分析期   运行期</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 1步:先分析 t1 函数</span></span><br><span class="line"><span class="comment"> * t()&#123;</span></span><br><span class="line"><span class="comment"> *     var str2;  // 分析 t1 内有str2 局部变量,注意此时函数没有执行,因此str2 的值是 undefined</span></span><br><span class="line"><span class="comment"> * &#125;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 2步:执行 t1 函数</span></span><br><span class="line"><span class="comment"> *       console.log(str1); //global</span></span><br><span class="line"><span class="comment"> *       console.log(str2); //undefined</span></span><br><span class="line"><span class="comment"> *       str2 = 'local'; //此时,str 的值为 local</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> str1 = <span class="string">'global'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">t1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(str1); <span class="comment">// 输出 global</span></span><br><span class="line">    <span class="built_in">console</span>.log(str2); <span class="comment">// 报错 undefined</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">window</span>.str1);<span class="comment">// 输出 global</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">window</span>.str2);<span class="comment">// 输出 undefined</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> str2 = <span class="string">'local'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">t1();</span><br></pre></td></tr></table></figure><h3 id="扩展-const、let、var之间的区别-………"><a href="#扩展-const、let、var之间的区别-………" class="headerlink" title="扩展 const、let、var之间的区别 ………."></a>扩展 const、let、var之间的区别 ……….</h3>]]></content>
      
      <categories>
          
          <category> JavaScript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaScript </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>-php -vagrant[centos] -xdebug</title>
      <link href="/2018/10/20/centos/php_vagrant_xdebug/"/>
      <url>/2018/10/20/centos/php_vagrant_xdebug/</url>
      <content type="html"><![CDATA[<p>!!!! 温馨提醒 PHP版本一点要和xdebug版本对应<br>!!!! 温馨提醒 PHP版本一点要和xdebug版本对应<br>!!!! 温馨提醒 PHP版本一点要和xdebug版本对应</p><h3 id="查看安装的xdebug-01"><a href="#查看安装的xdebug-01" class="headerlink" title="查看安装的xdebug  01"></a>查看安装的xdebug  01</h3><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost php.d]# yum list | grep xdebug</span><br><span class="line"></span><br><span class="line">Repodata is over <span class="number">2</span> weeks old. Install yum-cron? <span class="keyword">Or</span> run: yum makecache fast</span><br><span class="line">php-composer-xdebug-handler.noarch         <span class="number">1.3</span><span class="meta">.0</span>-<span class="number">1.</span>el7                epel      </span><br><span class="line">php-pecl-xdebug.x86_64                     <span class="number">2.6</span><span class="meta">.1</span>-<span class="number">1.</span>el7.remi<span class="meta">.7</span><span class="meta">.2</span>       remi-php72</span><br><span class="line">php54-php-pecl-xdebug.x86_64               <span class="number">2.4</span><span class="meta">.1</span>-<span class="number">1.</span>el7.remi           remi-safe </span><br><span class="line">php55-php-pecl-xdebug.x86_64               <span class="number">2.5</span><span class="meta">.5</span>-<span class="number">1.</span>el7.remi           remi-safe </span><br><span class="line">php56-php-pecl-xdebug.x86_64               <span class="number">2.5</span><span class="meta">.5</span>-<span class="number">1.</span>el7.remi           remi-safe </span><br><span class="line">php70-php-pecl-xdebug.x86_64               <span class="number">2.6</span><span class="meta">.1</span>-<span class="number">1.</span>el7.remi           remi-safe </span><br><span class="line">php71-php-pecl-xdebug.x86_64               <span class="number">2.6</span><span class="meta">.1</span>-<span class="number">1.</span>el7.remi           remi-safe </span><br><span class="line">php72-php-pecl-xdebug.x86_64               <span class="number">2.6</span><span class="meta">.1</span>-<span class="number">1.</span>el7.remi           remi-safe </span><br><span class="line">php73-php-pecl-xdebug.x86_64               <span class="number">2.7</span><span class="meta">.0</span>~beta1-<span class="number">1.</span>el7.remi     remi-safe </span><br><span class="line"></span><br><span class="line">[root@localhost php.d]# yum install php-pecl-xdebug</span><br></pre></td></tr></table></figure><p><img src="/img/centos/vagrant_xdebug/01.png" alt="查看xdebug"></p><h3 id="查看安装的xdebug-02"><a href="#查看安装的xdebug-02" class="headerlink" title="查看安装的xdebug  02"></a>查看安装的xdebug  02</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost php.d]<span class="comment"># ll /etc/php.d/  | grep xdebug</span></span><br><span class="line">-rw-r--r--  <span class="number">1</span> root root <span class="number">37784</span> Aug  <span class="number">4</span> <span class="number">05</span>:<span class="number">54</span> <span class="number">15</span>-xdebug.ini</span><br><span class="line">[root@localhost php.d]<span class="comment"># vim 15-xdebug.ini</span></span><br><span class="line">    <span class="attr">zend_extension=xdebug.so</span></span><br><span class="line">    xdebug.<span class="attr">idekey</span> = <span class="string">"PHPSTORM"</span></span><br><span class="line">    xdebug.<span class="attr">default_enable</span> = <span class="number">1</span></span><br><span class="line">    xdebug.<span class="attr">remote_connect_back</span> = <span class="number">1</span></span><br><span class="line">    xdebug.<span class="attr">remote_port</span> = <span class="number">9001</span></span><br><span class="line">    xdebug.<span class="attr">remote_enable</span> = <span class="number">1</span></span><br><span class="line">    xdebug.<span class="attr">remote_autostart</span> = <span class="number">1</span></span><br><span class="line">    xdebug.<span class="attr">remote_handler="dbgp"</span></span><br></pre></td></tr></table></figure><p><img src="/img/centos/vagrant_xdebug/02.png" alt="查看xdebug"></p><h3 id="查看安装的xdebug-03"><a href="#查看安装的xdebug-03" class="headerlink" title="查看安装的xdebug 03"></a>查看安装的xdebug 03</h3><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost php.d]<span class="comment"># php -v</span></span><br><span class="line">PHP <span class="number">7.2</span>.<span class="number">9</span> (cli) (built: Aug <span class="number">15</span> <span class="number">2018</span> <span class="number">09</span>:<span class="number">19</span>:<span class="number">33</span>) ( NTS )</span><br><span class="line">Copyright (c) <span class="number">1997</span>-<span class="number">2018</span> The PHP Group</span><br><span class="line">Zend Engine v3.<span class="number">2.0</span>, Copyright (c) <span class="number">1998</span>-<span class="number">2018</span> Zend Technologies</span><br><span class="line">    <span class="keyword">with</span> Xdebug v2.<span class="number">6.1</span>, Copyright (c) <span class="number">2002</span>-<span class="number">2018</span>, by Derick Rethans</span><br><span class="line">    </span><br><span class="line"><span class="comment">###这里的配置不要写错了,remote_connect_back这项很重要</span></span><br><span class="line">[root@localhost php.d]<span class="comment">#  vim 15-xdebug.ini </span></span><br><span class="line">        <span class="attr">zend_extension=xdebug.so</span></span><br><span class="line">        xdebug.<span class="attr">idekey</span> = <span class="string">"PHPSTORM"</span></span><br><span class="line">        xdebug.<span class="attr">default_enable</span> = <span class="number">1</span></span><br><span class="line">        xdebug.<span class="attr">remote_connect_back</span> = <span class="number">1</span></span><br><span class="line">        xdebug.<span class="attr">remote_port</span> = <span class="number">9001</span></span><br><span class="line">        xdebug.<span class="attr">remote_enable</span> = <span class="number">1</span></span><br><span class="line">        xdebug.<span class="attr">remote_autostart</span> = <span class="number">1</span></span><br><span class="line">        xdebug.<span class="attr">remote_handler="dbgp"</span></span><br><span class="line">        </span><br><span class="line">        或者</span><br><span class="line">        <span class="attr">zend_extension=xdebug.so</span></span><br><span class="line">        xdebug.<span class="attr">idekey="PHPSTORM"</span></span><br><span class="line">        xdebug.<span class="attr">remote_connect_back</span> = <span class="number">1</span>   //这项不要丢了</span><br><span class="line">        xdebug.<span class="attr">remote_handler</span> = <span class="string">"dbgp"</span></span><br><span class="line">        xdebug.<span class="attr">remote_mode</span> = <span class="string">"req"</span></span><br><span class="line">        xdebug.<span class="attr">remote_host=127.0.0.1</span></span><br><span class="line">        xdebug.<span class="attr">remote_enable=on</span></span><br><span class="line">        xdebug.<span class="attr">remote_port</span> = <span class="number">9001</span></span><br><span class="line">        xdebug.<span class="attr">remote_autostart</span> = no</span><br><span class="line"></span><br><span class="line">---------------虚拟机配置完毕------------------</span><br></pre></td></tr></table></figure><p><img src="/img/centos/vagrant_xdebug/03.png" alt="查看xdebug"></p><h3 id="windows中配置"><a href="#windows中配置" class="headerlink" title="windows中配置"></a>windows中配置</h3><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">04 </span> Tools--&gt;Vagrant </span><br><span class="line"><span class="symbol">05 </span> Languages &amp; Frameworks --&gt;PHP--&gt; Debug </span><br><span class="line"><span class="symbol">06 </span> Languages &amp; Frameworks --&gt;PHP--&gt; Debug --&gt; DBGp Proxy</span><br><span class="line"><span class="symbol">07 </span> Languages &amp; Frameworks --&gt;PHP--&gt; Servers</span><br><span class="line"></span><br><span class="line"><span class="symbol">08 </span><span class="keyword">Run</span> --&gt; <span class="keyword">Edit</span> Configurations  添加PHP Web Page</span><br><span class="line"><span class="number">09</span>接下来接可以断点调试了</span><br></pre></td></tr></table></figure><p><img src="/img/centos/vagrant_xdebug/04.png" alt="windows 配置"></p><p><img src="/img/centos/vagrant_xdebug/05.png" alt="windows 配置"></p><p><img src="/img/centos/vagrant_xdebug/06.png" alt="windows 配置"></p><p><img src="/img/centos/vagrant_xdebug/07.png" alt="windows 配置"></p><p><img src="/img/centos/vagrant_xdebug/08.png" alt="windows 配置"></p><p><img src="/img/centos/vagrant_xdebug/09.png" alt="windows 配置"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-Yii2 验证器  -不为人知的秘密</title>
      <link href="/2018/10/20/Yii2/Yii2_validators/"/>
      <url>/2018/10/20/Yii2/Yii2_validators/</url>
      <content type="html"><![CDATA[<h3 id="required-必须值验证属性"><a href="#required-必须值验证属性" class="headerlink" title="required : 必须值验证属性"></a>required : 必须值验证属性</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="string">'字段名'</span>],required,<span class="string">'requiredValue'</span>=&gt;<span class="string">'必填值'</span>,<span class="string">'message'</span>=&gt;<span class="string">'提示信息'</span>];</span><br><span class="line"><span class="comment">#说明:CRequiredValidator 的别名, 确保了特性不为空.</span></span><br></pre></td></tr></table></figure><h3 id="指定场景"><a href="#指定场景" class="headerlink" title="指定场景"></a>指定场景</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="string">'title'</span>, <span class="string">'content'</span>], <span class="string">'required'</span>, <span class="string">'on'</span> =&gt; [<span class="string">'create'</span>, <span class="string">'update'</span>]],</span><br></pre></td></tr></table></figure><h3 id="email-邮箱验证"><a href="#email-邮箱验证" class="headerlink" title="email : 邮箱验证"></a>email : 邮箱验证</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'email'</span>, <span class="string">'email'</span>];</span><br><span class="line"><span class="comment">#说明:CEmailValidator的别名,确保了特性的值是一个有效的电邮地址.</span></span><br></pre></td></tr></table></figure><h3 id="match-正则验证"><a href="#match-正则验证" class="headerlink" title="match : 正则验证"></a>match : 正则验证</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="string">'字段名'</span>],match,<span class="string">'pattern'</span>=&gt;<span class="string">'正则表达式'</span>,<span class="string">'message'</span>=&gt;<span class="string">'提示信息'</span>];    </span><br><span class="line">[[<span class="string">'字段名'</span>],<span class="string">'match'</span>,<span class="string">'pattern'</span>=&gt;<span class="string">'/^[1-9]d*|0$/'</span>,<span class="string">'message'</span>=&gt;<span class="string">'必须为正整数'</span>];</span><br><span class="line">[[<span class="string">'字段名'</span>],match,<span class="string">'not'</span>=&gt;ture,<span class="string">'pattern'</span>=&gt;<span class="string">'正则表达式'</span>,<span class="string">'message'</span>=&gt;<span class="string">'提示信息'</span>];</span><br><span class="line"><span class="comment">/*正则取反*/</span> <span class="comment">#说明:CRegularExpressionValidator 的别名, 确保了特性匹配一个正则表达式.</span></span><br></pre></td></tr></table></figure><h3 id="safe-安全"><a href="#safe-安全" class="headerlink" title="safe : 安全"></a>safe : 安全</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'description'</span>, <span class="string">'safe'</span>];</span><br></pre></td></tr></table></figure><h3 id="compare-比较"><a href="#compare-比较" class="headerlink" title="compare : 比较"></a>compare : 比较</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'age'</span>, <span class="string">'compare'</span>, <span class="string">'compareValue'</span> =&gt; <span class="number">30</span>, <span class="string">'operator'</span> =&gt; <span class="string">'&gt;='</span>];</span><br><span class="line"><span class="comment">#说明:compareValue(比较常量值) - operator(比较操作符)  </span></span><br><span class="line"><span class="comment">#说明:CCompareValidator 的别名,确保了特性的值等于另一个特性或常量.</span></span><br></pre></td></tr></table></figure><h3 id="default-默认值"><a href="#default-默认值" class="headerlink" title="default : 默认值"></a>default : 默认值</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'age'</span>, <span class="string">'default'</span>, <span class="string">'value'</span> =&gt; <span class="keyword">null</span>];</span><br><span class="line"><span class="comment">#说明:CDefaultValueValidator 的别名, 为特性指派了一个默认值.</span></span><br></pre></td></tr></table></figure><h3 id="file-文件"><a href="#file-文件" class="headerlink" title="file : 文件"></a>file : 文件</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'primaryImage'</span>, <span class="string">'file'</span>, <span class="string">'extensions'</span> =&gt; [<span class="string">'png'</span>, <span class="string">'jpg'</span>, <span class="string">'gif'</span>], <span class="string">'maxSize'</span> =&gt; <span class="number">1024</span>*<span class="number">1024</span>*<span class="number">1024</span>]; </span><br><span class="line"><span class="comment">#说明:CFileValidator 的别名, 确保了特性包含了一个上传文件的名称.</span></span><br></pre></td></tr></table></figure><h3 id="filter-滤镜"><a href="#filter-滤镜" class="headerlink" title="filter : 滤镜"></a>filter : 滤镜</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="string">'username'</span>, <span class="string">'email'</span>], <span class="string">'filter'</span>, <span class="string">'filter'</span> =&gt; <span class="string">'trim'</span>, <span class="string">'skipOnArray'</span> =&gt; <span class="keyword">true</span>]; </span><br><span class="line"><span class="comment">#说明:CFilterValidator 的别名, 使用一个filter转换属性.</span></span><br></pre></td></tr></table></figure><h3 id="in-范围"><a href="#in-范围" class="headerlink" title="in : 范围"></a>in : 范围</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'level'</span>, <span class="string">'in'</span>, <span class="string">'range'</span> =&gt; [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]]; </span><br><span class="line"><span class="comment">#说明:CRangeValidator 的别名,确保了特性出现在一个预订的值列表里.</span></span><br></pre></td></tr></table></figure><h3 id="unique-唯一性"><a href="#unique-唯一性" class="headerlink" title="unique : 唯一性"></a>unique : 唯一性</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'username'</span>, <span class="string">'unique'</span>] </span><br><span class="line"><span class="comment">#说明:CUniqueValidator 的别名,确保了特性在数据表字段中是唯一的.</span></span><br></pre></td></tr></table></figure><h3 id="integer-整数"><a href="#integer-整数" class="headerlink" title="integer : 整数"></a>integer : 整数</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'age'</span>, <span class="string">'integer'</span>];</span><br></pre></td></tr></table></figure><h3 id="number-数字"><a href="#number-数字" class="headerlink" title="number : 数字"></a>number : 数字</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'salary'</span>, <span class="string">'number'</span>];</span><br></pre></td></tr></table></figure><h3 id="double-双精度浮点型"><a href="#double-双精度浮点型" class="headerlink" title="double : 双精度浮点型"></a>double : 双精度浮点型</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'salary'</span>, <span class="string">'double'</span>];</span><br></pre></td></tr></table></figure><h3 id="date-日期"><a href="#date-日期" class="headerlink" title="date : 日期"></a>date : 日期</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="string">'from'</span>, <span class="string">'to'</span>], <span class="string">'date'</span>];</span><br></pre></td></tr></table></figure><h3 id="string-字符串"><a href="#string-字符串" class="headerlink" title="string : 字符串"></a>string : 字符串</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'username'</span>, <span class="string">'string'</span>, <span class="string">'length'</span> =&gt; [<span class="number">4</span>, <span class="number">24</span>]];</span><br></pre></td></tr></table></figure><h3 id="boolean-是否为一个布尔值"><a href="#boolean-是否为一个布尔值" class="headerlink" title="boolean : 是否为一个布尔值"></a>boolean : 是否为一个布尔值</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'字段名'</span>, <span class="string">'boolean'</span>, <span class="string">'trueValue'</span> =&gt; <span class="keyword">true</span>, <span class="string">'falseValue'</span> =&gt; <span class="keyword">false</span>, <span class="string">'strict'</span> =&gt; <span class="keyword">true</span>]; </span><br><span class="line"><span class="comment">#说明:CBooleanValidator 的别名</span></span><br></pre></td></tr></table></figure><h3 id="when条件："><a href="#when条件：" class="headerlink" title="when条件："></a>when条件：</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">'name2'</span>, <span class="string">'required'</span>, <span class="string">'when'</span> =&gt; <span class="function"><span class="keyword">function</span> <span class="params">($model)</span> </span>&#123;    <span class="keyword">return</span> <span class="keyword">empty</span>($model-&gt;name1);&#125;],<span class="comment">#说明:</span></span><br></pre></td></tr></table></figure><h3 id="行内验证器–"><a href="#行内验证器–" class="headerlink" title="行内验证器–"></a>行内验证器–</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">// password is validated by foo()</span></span><br><span class="line"> [<span class="string">'password'</span>, <span class="string">'foo'</span>]</span><br><span class="line"> </span><br><span class="line"> <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">foo</span><span class="params">()</span></span>&#123;</span><br><span class="line"> <span class="keyword">$this</span>-&gt;addError(<span class="string">'password'</span>, <span class="string">'调用这个方法了.'</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">----------------</span><br><span class="line">[<span class="string">'password'</span>, <span class="string">'validatePassword'</span>],</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">validatePassword</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $user = User::findByUsername(<span class="keyword">$this</span>-&gt;username);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!$user || !$user-&gt;validatePassword(<span class="keyword">$this</span>-&gt;password)) &#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;addError(<span class="string">'password'</span>, <span class="string">'Incorrect username or password.'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> <a href="https://www.yiiframework.com/doc/guide/2.0/en/input-validation" title="核心验证旗 en" target="_blank" rel="noopener">核心验证器 en</a></p><p> <a href="https://www.yiiframework.com/doc/guide/2.0/zh-cn/tutorial-core-validators" title="核心验证旗 zh-cn" target="_blank" rel="noopener">核心验证器 zh-cn</a></p><p> <a href="https://www.yiiframework.com/doc/guide/2.0/zh-cn/input-validation" title="输入验证" target="_blank" rel="noopener">输入验证</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-sql -DDL</title>
      <link href="/2018/10/14/mysql/sql_DDL/"/>
      <url>/2018/10/14/mysql/sql_DDL/</url>
      <content type="html"><![CDATA[<h3 id="列操作"><a href="#列操作" class="headerlink" title="列操作"></a>列操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">desc 表名;  ...................................... #查看表结构</span><br><span class="line">alter table 表名 add 列名称 属性;    .............. # 添加列</span><br><span class="line">alter table 表名 add 列名称 属性 after 列名;  ...   # 指定在某列后面添加</span><br><span class="line">alter table 表名 drop 列名;      ..............    #删除列名</span><br><span class="line">alter table 表名 change 旧列名 新列名 新属性  .....  #修改列名</span><br><span class="line">alter table a modify change_username varchar(20) ; # 修改列属性</span><br><span class="line"></span><br><span class="line">alter table a add new_username char(10);         # 添加列</span><br><span class="line">alter table a add new_username2 char(10) after id; # 添加列,指定在某列后面添加</span><br><span class="line">alter table a drop new_username2;    #删除列名</span><br><span class="line">alter table a change new_username change_username char(5);  # 修改列名</span><br><span class="line">alter table a modify change_username varchar(20);   #修改列属性</span><br></pre></td></tr></table></figure><h3 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">show tables;  #查看所有表</span><br><span class="line">desc 表名;    #查看表结构</span><br><span class="line">show create table 表名;  # 查看创建表sql</span><br><span class="line">show tables;  #查看表信息</span><br><span class="line">show table status where name =&apos;表名&apos;;  # 查看某一张表信息</span><br><span class="line">rename table 旧表名 to 新表名 #修改表名字</span><br><span class="line">delete from user_t; #清空表内容</span><br><span class="line">truncate user_t;    #清空表内容 id 从最初开始</span><br><span class="line"></span><br><span class="line">#视图</span><br><span class="line">show create view 视图名 #查看建视图过程</span><br><span class="line">drop view 视图名 #删除视图</span><br><span class="line">create view v1 as select * from student2    #创建视图 as后面跟普通sql</span><br><span class="line">create view v2 as select id,name,score from student2  #创建视图 as后面跟普通sql</span><br></pre></td></tr></table></figure><h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#普通索引(index  另一个名字normal)、</span><br><span class="line">#唯一索引(unique)、</span><br><span class="line">#全文索引(fulltext)、</span><br><span class="line">#空间索引(SPATIAL)</span><br><span class="line"></span><br><span class="line">unique key email(email(10))  #使用索引长度</span><br><span class="line">alter table 表名 add  index 索引名(字段名) #添加普通索引</span><br><span class="line">alter table 表名 drop index 索引名    #删除索引</span><br><span class="line">show index from 表名    #查看索引</span><br><span class="line"></span><br><span class="line">create table a1(</span><br><span class="line">    name char(5),</span><br><span class="line">    email char(15),</span><br><span class="line">    key name(name),</span><br><span class="line">    unique key email(email)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#多列索引</span><br><span class="line">create table a3(</span><br><span class="line">    name char(5),</span><br><span class="line">    email char(15),</span><br><span class="line">    key name(name),</span><br><span class="line">    unique key name_email(name,email)</span><br><span class="line">);</span><br><span class="line">explain select * from a3 WHERE name=&quot;张&quot;; # 分析sql</span><br><span class="line">alter table a1 add unique(name);  # 添加唯一索引</span><br><span class="line">alter table a1 add index index_name(email) #添加普通索引</span><br><span class="line">alter table a1 drop index index_name    #删除索引</span><br><span class="line">show index from a1 \G    #查看索引</span><br></pre></td></tr></table></figure><h3 id="库操作-此操作比较危险-请谨慎操作"><a href="#库操作-此操作比较危险-请谨慎操作" class="headerlink" title="!!!库操作  [此操作比较危险,请谨慎操作]"></a>!!!库操作  [此操作比较危险,请谨慎操作]</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">create database 数据库; #创建库</span><br><span class="line">create database 数据库 default character set 字符集 collate 排序规则; #创建库指定字符集</span><br><span class="line"></span><br><span class="line">create database yourdb; #创建库</span><br><span class="line">create database yourdb3 default character set utf8mb4 collate utf8mb4_unicode_ci; #创建库指定字符集</span><br><span class="line"></span><br><span class="line">!!! 数据库的的名字不要直接修改,容易丢数据!!!</span><br></pre></td></tr></table></figure><h3 id="不常用-有实际用处sql"><a href="#不常用-有实际用处sql" class="headerlink" title="不常用,有实际用处sql"></a>不常用,有实际用处sql</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SELECT </span><br><span class="line">    name,</span><br><span class="line">    NULL AS hello, ---空值作为一列</span><br><span class="line">    &quot;foo&quot; AS bar   ---字符串作为一列</span><br><span class="line">FROM  student2</span><br></pre></td></tr></table></figure><p><img src="/img/mysql/mysql_other_01.png" alt="添加列" title="添加列"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Yii2 ArrayHelp类</title>
      <link href="/2018/10/13/Yii2/Yii2_ArrayHelp/"/>
      <url>/2018/10/13/Yii2/Yii2_ArrayHelp/</url>
      <content type="html"><![CDATA[<h3 id="ArrayHelper-toArray"><a href="#ArrayHelper-toArray" class="headerlink" title="ArrayHelper::toArray"></a>ArrayHelper::toArray</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$post = User::find()-&gt;limit(<span class="number">2</span>)-&gt;all();</span><br><span class="line"><span class="comment">//$post = User::find()-&gt;limit(2)-&gt;asArray()-&gt;all();</span></span><br><span class="line"><span class="comment">// echo "&lt;pre&gt;"; print_r($post);exit();  //输出所有字段 id,username,email......</span></span><br><span class="line">$data = ArrayHelper::toArray($post,[</span><br><span class="line">    <span class="string">'common\models\User'</span>=&gt;[</span><br><span class="line">        <span class="string">'id'</span>,</span><br><span class="line">        <span class="string">'username'</span></span><br><span class="line">    ]</span><br><span class="line">]);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;pre&gt;"</span>; print_r($data); <span class="comment">//输出 id username</span></span><br></pre></td></tr></table></figure><p><img src="/img/Yii2/ArrayHelp/toArray.png" alt="ArrayHelper::toArray" title="ArrayHelper::toArray"></p><h3 id="ArrayHelper-merge"><a href="#ArrayHelper-merge" class="headerlink" title="ArrayHelper::merge"></a>ArrayHelper::merge</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">$array1 = [</span><br><span class="line">    <span class="string">'name'</span> =&gt; <span class="string">'Yii'</span>,</span><br><span class="line">    <span class="string">'version'</span> =&gt; <span class="string">'1.1'</span>,</span><br><span class="line">    <span class="string">'ids'</span> =&gt; [</span><br><span class="line">        <span class="number">1</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'validDomains'</span> =&gt; [</span><br><span class="line">        <span class="string">'example.com'</span>,</span><br><span class="line">        <span class="string">'www.example.com'</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'emails'</span> =&gt; [</span><br><span class="line">        <span class="string">'admin'</span> =&gt; <span class="string">'admin@example.com'</span>,</span><br><span class="line">        <span class="string">'dev'</span> =&gt; <span class="string">'dev@example.com'</span>,</span><br><span class="line">    ],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">$array2 = [</span><br><span class="line">    <span class="string">'version'</span> =&gt; <span class="string">'2.0'</span>,</span><br><span class="line">    <span class="string">'ids'</span> =&gt; [</span><br><span class="line">        <span class="number">2</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// Object that represents the replacement of</span></span><br><span class="line">    <span class="comment">// array value while performing [[ArrayHelper::merge()]].</span></span><br><span class="line">    <span class="string">'validDomains'</span> =&gt; <span class="keyword">new</span> \yii\helpers\ReplaceArrayValue([</span><br><span class="line">        <span class="string">'yiiframework.com'</span>,</span><br><span class="line">        <span class="string">'www.yiiframework.com'</span>,</span><br><span class="line">    ]),</span><br><span class="line">    <span class="comment">// Object that represents the removal of</span></span><br><span class="line">    <span class="comment">// array value while performing [[ArrayHelper::merge()]].</span></span><br><span class="line">    <span class="string">'emails'</span> =&gt; [</span><br><span class="line">        <span class="string">'dev'</span> =&gt; <span class="keyword">new</span> \yii\helpers\UnsetArrayValue(),</span><br><span class="line">    ],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">$result = ArrayHelper::merge($array1, $array2);</span><br><span class="line"></span><br><span class="line">输出:</span><br><span class="line">[</span><br><span class="line">    <span class="string">'name'</span> =&gt; <span class="string">'Yii'</span>,</span><br><span class="line">    <span class="string">'version'</span> =&gt; <span class="string">'2.0'</span>,</span><br><span class="line">    <span class="string">'ids'</span> =&gt; [   <span class="comment">//这里合并</span></span><br><span class="line">        <span class="number">1</span>,</span><br><span class="line">        <span class="number">2</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'validDomains'</span> =&gt; [ <span class="comment">//这里替换</span></span><br><span class="line">        <span class="string">'yiiframework.com'</span>,</span><br><span class="line">        <span class="string">'www.yiiframework.com'</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'emails'</span> =&gt; [ <span class="comment">//这里删除</span></span><br><span class="line">        <span class="string">'admin'</span> =&gt; <span class="string">'admin@example.com'</span>,</span><br><span class="line">    ],</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="ArrayHelper-getValue"><a href="#ArrayHelper-getValue" class="headerlink" title="ArrayHelper::getValue"></a>ArrayHelper::getValue</h3><p>用原生PHP从一个对象、数组、或者包含这两者的一个复杂数据结构中获取数据是非常繁琐的。 你首先得使用 <code>isset</code> 检查 key 是否存在, 然后如果存在你就获取它，如果不存在， 则提供一个默认返回值;;;;;;<br>Yii 提供了一个非常方便的方法来做这件事：ArrayHelper::getValue</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> $name;</span><br><span class="line">    <span class="keyword">public</span> $name_002=<span class="string">"我是name_002"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$array = [</span><br><span class="line">    <span class="string">'foo'</span> =&gt; [</span><br><span class="line">        <span class="string">'bar'</span> =&gt; <span class="keyword">new</span> User(),</span><br><span class="line">        <span class="string">'bar_002'</span> =&gt; <span class="keyword">new</span> User(),</span><br><span class="line">    ]</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">$value = <span class="keyword">isset</span>($array[<span class="string">'foo'</span>][<span class="string">'bar'</span>]-&gt;name) ? $array[<span class="string">'foo'</span>][<span class="string">'bar'</span>]-&gt;name : <span class="keyword">null</span>;</span><br><span class="line">$value002 = <span class="keyword">isset</span>($array[<span class="string">'foo'</span>][<span class="string">'bar'</span>]-&gt;name_002) ? $array[<span class="string">'foo'</span>][<span class="string">'bar'</span>]-&gt;name_002 : <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">var_dump($value);  <span class="comment">//输出 null</span></span><br><span class="line">var_dump($value002); <span class="comment">//输出 我是name_002</span></span><br><span class="line"></span><br><span class="line">var_dump(ArrayHelper::getValue($array,<span class="string">'foo.bar.name'</span>)); <span class="comment">//输出 null</span></span><br><span class="line">var_dump(ArrayHelper::getValue($array,<span class="string">'foo.bar.name_002'</span>)); <span class="comment">//输出 我是name_002</span></span><br><span class="line"></span><br><span class="line">var_dump(ArrayHelper::getValue($array, <span class="function"><span class="keyword">function</span> <span class="params">($array,$defaultValue)</span> </span>&#123;  <span class="comment">//输出 我是name_002</span></span><br><span class="line">    <span class="keyword">return</span> $array[<span class="string">'foo'</span>][<span class="string">'bar'</span>]-&gt;name_002;</span><br><span class="line">&#125;));</span><br><span class="line">var_dump(ArrayHelper::getValue($array, <span class="string">'foo.bar.name_002'</span>));  <span class="comment">//输出 我是name_002</span></span><br><span class="line">var_dump(ArrayHelper::getValue($array, [<span class="string">'foo'</span>,<span class="string">'bar'</span>,<span class="string">'name_002'</span>]));  <span class="comment">//输出 我是name_002</span></span><br></pre></td></tr></table></figure><p><img src="/img/Yii2/ArrayHelp/getValue.png" alt="ArrayHelper::getValue" title="ArrayHelper::getValue"></p><h3 id="ArrayHelper-setValue"><a href="#ArrayHelper-setValue" class="headerlink" title="ArrayHelper::setValue"></a>ArrayHelper::setValue</h3><p>覆盖初始值,如果数组中不存在则被创建</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$array = [</span><br><span class="line">    <span class="string">'key'</span> =&gt; [</span><br><span class="line">        <span class="string">'in'</span> =&gt; [<span class="string">'k'</span> =&gt; <span class="string">'value'</span>]</span><br><span class="line">    ]</span><br><span class="line">];</span><br><span class="line">ArrayHelper::setValue($array, <span class="string">'key.in'</span>, [<span class="string">'arr'</span> =&gt; <span class="string">'val'</span>]);</span><br><span class="line"><span class="comment">// 在 `$array` 中写入值的路径可以被指定为一个数组</span></span><br><span class="line">ArrayHelper::setValue($array, [<span class="string">'key'</span>, <span class="string">'in'</span>], [<span class="string">'arr'</span> =&gt; <span class="string">'val'</span>]);</span><br></pre></td></tr></table></figure><h4 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    <span class="string">'key'</span> =&gt; [</span><br><span class="line">        <span class="string">'in'</span> =&gt; [<span class="string">'arr'</span> =&gt; <span class="string">'val'</span>]</span><br><span class="line">    ]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="如果路径中包含一个不存在的键-他将被创建"><a href="#如果路径中包含一个不存在的键-他将被创建" class="headerlink" title="如果路径中包含一个不存在的键,他将被创建"></a>如果路径中包含一个不存在的键,他将被创建</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果 `$array['key']['in']['arr0']` 不为空，则该值将被添加到数组中</span></span><br><span class="line">ArrayHelper::setValue($array, <span class="string">'key.in.arr0.arr1'</span>, <span class="string">'val'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果你想完全覆盖值 `$array['key']['in']['arr0']`</span></span><br><span class="line">ArrayHelper::setValue($array, <span class="string">'key.in.arr0'</span>, [<span class="string">'arr1'</span> =&gt; <span class="string">'val'</span>]);</span><br></pre></td></tr></table></figure><h4 id="输出-1"><a href="#输出-1" class="headerlink" title="输出"></a>输出</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    <span class="string">'key'</span> =&gt; [</span><br><span class="line">        <span class="string">'in'</span> =&gt; [</span><br><span class="line">            <span class="string">'k'</span> =&gt; <span class="string">'value'</span>,</span><br><span class="line">            <span class="string">'arr0'</span> =&gt; [<span class="string">'arr1'</span> =&gt; <span class="string">'val'</span>]</span><br><span class="line">        ]</span><br><span class="line">    ]</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="ArrayHelper-remove"><a href="#ArrayHelper-remove" class="headerlink" title="ArrayHelper::remove"></a>ArrayHelper::remove</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$array = [<span class="string">'type'</span> =&gt; <span class="string">'A'</span>, <span class="string">'options'</span> =&gt; [<span class="number">1</span>, <span class="number">2</span>]];</span><br><span class="line">$type = ArrayHelper::remove($array, <span class="string">'type'</span>);</span><br><span class="line"></span><br><span class="line">print_r($type);   <span class="comment">//输出 A </span></span><br><span class="line">print_r($array);  <span class="comment">//输出 ['options' =&gt; [1, 2]]</span></span><br><span class="line"><span class="comment">//<span class="doctag">note:</span> 与 getValue 方法不同,remove 仅支持简单的键名称,否则返回原来数组</span></span><br><span class="line"><span class="comment">//demo: </span></span><br><span class="line">$array = [</span><br><span class="line">    <span class="string">'key'</span> =&gt; [</span><br><span class="line">        <span class="string">'in'</span> =&gt; [<span class="string">'k'</span> =&gt; <span class="string">'value'</span>]</span><br><span class="line">    ]</span><br><span class="line">];</span><br><span class="line">ArrayHelper::remove($array, <span class="string">'key.in'</span>);</span><br><span class="line">print_r($array);  <span class="comment">//返回原来数组</span></span><br></pre></td></tr></table></figure><h3 id="ArrayHelper-removeValue"><a href="#ArrayHelper-removeValue" class="headerlink" title="ArrayHelper::removeValue"></a>ArrayHelper::removeValue</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$array = [</span><br><span class="line">    <span class="string">'Bob'</span> =&gt; <span class="string">'Dylan'</span>,</span><br><span class="line">    <span class="string">'Michael'</span> =&gt; <span class="string">'Jackson'</span>,</span><br><span class="line">    <span class="string">'Mick'</span> =&gt; <span class="string">'Jagger'</span>,</span><br><span class="line">    <span class="string">'Janet'</span> =&gt; <span class="string">'Jackson'</span></span><br><span class="line">];</span><br><span class="line">ArrayHelper::removeValue($array, <span class="string">'Jackson'</span>);</span><br><span class="line">print_r($array);  <span class="comment">//返回  ['Bob' =&gt; 'Dylan', 'Mick' =&gt; 'Jagger']</span></span><br></pre></td></tr></table></figure><h3 id="ArrayHelper-index"><a href="#ArrayHelper-index" class="headerlink" title="ArrayHelper::index"></a>ArrayHelper::index</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$array = [</span><br><span class="line">    [<span class="string">'id'</span> =&gt; <span class="string">'123'</span>, <span class="string">'data'</span> =&gt; <span class="string">'abc'</span>, <span class="string">'device'</span> =&gt; <span class="string">'laptop'</span>],</span><br><span class="line">    [<span class="string">'id'</span> =&gt; <span class="string">'345'</span>, <span class="string">'data'</span> =&gt; <span class="string">'def'</span>, <span class="string">'device'</span> =&gt; <span class="string">'tablet'</span>],</span><br><span class="line">    [<span class="string">'id'</span> =&gt; <span class="string">'345'</span>, <span class="string">'data'</span> =&gt; <span class="string">'hgi'</span>, <span class="string">'device'</span> =&gt; <span class="string">'smartphone'</span>],</span><br><span class="line">];</span><br><span class="line">$result = ArrayHelper::index($array, <span class="string">'id'</span>);</span><br><span class="line">$result2 = ArrayHelper::index($array, <span class="function"><span class="keyword">function</span> <span class="params">($element)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $element[<span class="string">'id'</span>]; <span class="comment">//匿名函数作为key传递,返回值结果相同</span></span><br><span class="line">&#125;);</span><br><span class="line">print_r($result); </span><br><span class="line">print_r($result2); </span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line">[</span><br><span class="line">    <span class="string">'123'</span> =&gt; [<span class="string">'id'</span> =&gt; <span class="string">'123'</span>, <span class="string">'data'</span> =&gt; <span class="string">'abc'</span>, <span class="string">'device'</span> =&gt; <span class="string">'laptop'</span>],</span><br><span class="line">    <span class="string">'345'</span> =&gt; [<span class="string">'id'</span> =&gt; <span class="string">'345'</span>, <span class="string">'data'</span> =&gt; <span class="string">'hgi'</span>, <span class="string">'device'</span> =&gt; <span class="string">'smartphone'</span>]</span><br><span class="line">    <span class="comment">// 原始数组的第二个元素由于相同的 ID 而被最后一个元素覆盖</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//*******避免第一种的覆盖*****</span></span><br><span class="line">$result = ArrayHelper::index($array, <span class="keyword">null</span>, <span class="string">'id'</span>); <span class="comment">//第一级id</span></span><br><span class="line">$result = ArrayHelper::index($array, <span class="string">'device'</span>,<span class="string">'id'</span>); <span class="comment">//第一级id,第二级 device</span></span><br><span class="line"><span class="comment">//结果分别是</span></span><br><span class="line">[</span><br><span class="line">    <span class="string">'123'</span> =&gt; [</span><br><span class="line">        [<span class="string">'id'</span> =&gt; <span class="string">'123'</span>, <span class="string">'data'</span> =&gt; <span class="string">'abc'</span>, <span class="string">'device'</span> =&gt; <span class="string">'laptop'</span>]</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'345'</span> =&gt; [ <span class="comment">// all elements with this index are present in the result array</span></span><br><span class="line">        [<span class="string">'id'</span> =&gt; <span class="string">'345'</span>, <span class="string">'data'</span> =&gt; <span class="string">'def'</span>, <span class="string">'device'</span> =&gt; <span class="string">'tablet'</span>],</span><br><span class="line">        [<span class="string">'id'</span> =&gt; <span class="string">'345'</span>, <span class="string">'data'</span> =&gt; <span class="string">'hgi'</span>, <span class="string">'device'</span> =&gt; <span class="string">'smartphone'</span>],</span><br><span class="line">    ]</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">--------------------------------------------------------------------------------------</span><br><span class="line">    [</span><br><span class="line">    <span class="string">'123'</span> =&gt; [</span><br><span class="line">        <span class="string">'laptop'</span> =&gt; [</span><br><span class="line">            <span class="string">'abc'</span> =&gt; [<span class="string">'id'</span> =&gt; <span class="string">'123'</span>, <span class="string">'data'</span> =&gt; <span class="string">'abc'</span>, <span class="string">'device'</span> =&gt; <span class="string">'laptop'</span>]</span><br><span class="line">        ]</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'345'</span> =&gt; [</span><br><span class="line">        <span class="string">'tablet'</span> =&gt; [</span><br><span class="line">            <span class="string">'def'</span> =&gt; [<span class="string">'id'</span> =&gt; <span class="string">'345'</span>, <span class="string">'data'</span> =&gt; <span class="string">'def'</span>, <span class="string">'device'</span> =&gt; <span class="string">'tablet'</span>]</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">'smartphone'</span> =&gt; [</span><br><span class="line">            <span class="string">'hgi'</span> =&gt; [<span class="string">'id'</span> =&gt; <span class="string">'345'</span>, <span class="string">'data'</span> =&gt; <span class="string">'hgi'</span>, <span class="string">'device'</span> =&gt; <span class="string">'smartphone'</span>]</span><br><span class="line">        ]</span><br><span class="line">    ]</span><br><span class="line">]</span><br><span class="line">note: 第三个参数会增加数组的子分组多维数组</span><br><span class="line">$result = ArrayHelper::index($array, <span class="string">'device'</span>,[<span class="string">'id'</span>,<span class="string">'device'</span>]); <span class="comment">//输出</span></span><br><span class="line">[</span><br><span class="line">    <span class="string">'123'</span> =&gt; [</span><br><span class="line">        <span class="string">'laptop'</span>=&gt;[</span><br><span class="line">            <span class="string">'laptop'</span> =&gt; [</span><br><span class="line">                <span class="string">'abc'</span> =&gt; [<span class="string">'id'</span> =&gt; <span class="string">'123'</span>, <span class="string">'data'</span> =&gt; <span class="string">'abc'</span>, <span class="string">'device'</span> =&gt; <span class="string">'laptop'</span>]</span><br><span class="line">            ]</span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'345'</span> =&gt; [</span><br><span class="line">        <span class="string">'tablet'</span>=&gt;[</span><br><span class="line">            <span class="string">'tablet'</span> =&gt; [</span><br><span class="line">                <span class="string">'def'</span> =&gt; [<span class="string">'id'</span> =&gt; <span class="string">'345'</span>, <span class="string">'data'</span> =&gt; <span class="string">'def'</span>, <span class="string">'device'</span> =&gt; <span class="string">'tablet'</span>]</span><br><span class="line">            ],</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">'smartphone'</span>=&gt;[</span><br><span class="line">            <span class="string">'smartphone'</span> =&gt; [</span><br><span class="line">                <span class="string">'hgi'</span> =&gt; [<span class="string">'id'</span> =&gt; <span class="string">'345'</span>, <span class="string">'data'</span> =&gt; <span class="string">'hgi'</span>, <span class="string">'device'</span> =&gt; <span class="string">'smartphone'</span>]</span><br><span class="line">            ]</span><br><span class="line">        ]</span><br><span class="line">    ]</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h3 id="ArrayHelper-getColumn"><a href="#ArrayHelper-getColumn" class="headerlink" title="ArrayHelper::getColumn"></a>ArrayHelper::getColumn</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$data = [</span><br><span class="line">    [<span class="string">'id'</span> =&gt; <span class="string">'123'</span>, <span class="string">'data'</span> =&gt; <span class="string">'abc'</span>],</span><br><span class="line">    [<span class="string">'id'</span> =&gt; <span class="string">'345'</span>, <span class="string">'data'</span> =&gt; <span class="string">'def'</span>],</span><br><span class="line">];</span><br><span class="line">$ids = ArrayHelper::getColumn($array, <span class="string">'id'</span>);  <span class="comment">//输出 ['123', '345']</span></span><br><span class="line"><span class="comment">//如需要额外的转换或者取值的方法比较复杂,第二个参数可以指定一个匿名函数</span></span><br></pre></td></tr></table></figure><h3 id="ArrayHelper-map"><a href="#ArrayHelper-map" class="headerlink" title="ArrayHelper::map"></a>ArrayHelper::map</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$array = [</span><br><span class="line">    [<span class="string">'id'</span> =&gt; <span class="string">'123'</span>, <span class="string">'name'</span> =&gt; <span class="string">'aaa'</span>, <span class="string">'class'</span> =&gt; <span class="string">'x'</span>],</span><br><span class="line">    [<span class="string">'id'</span> =&gt; <span class="string">'124'</span>, <span class="string">'name'</span> =&gt; <span class="string">'bbb'</span>, <span class="string">'class'</span> =&gt; <span class="string">'x'</span>],</span><br><span class="line">    [<span class="string">'id'</span> =&gt; <span class="string">'345'</span>, <span class="string">'name'</span> =&gt; <span class="string">'ccc'</span>, <span class="string">'class'</span> =&gt; <span class="string">'y'</span>],</span><br><span class="line">];</span><br><span class="line">$result1 = ArrayHelper::map($array, <span class="string">'id'</span>, <span class="string">'name'</span>);</span><br><span class="line">$result2 = ArrayHelper::map($array, <span class="string">'id'</span>, <span class="string">'name'</span>, <span class="string">'class'</span>);</span><br><span class="line"><span class="comment">//结果分别是</span></span><br><span class="line">[</span><br><span class="line">    <span class="string">'123'</span> =&gt; <span class="string">'aaa'</span>,</span><br><span class="line">    <span class="string">'124'</span> =&gt; <span class="string">'bbb'</span>,</span><br><span class="line">    <span class="string">'345'</span> =&gt; <span class="string">'ccc'</span>,</span><br><span class="line">]</span><br><span class="line">------- map($array, <span class="string">'id'</span>, <span class="string">'name'</span>, <span class="string">'class'</span>)这里面的键逆向--------------</span><br><span class="line">[</span><br><span class="line">    <span class="string">'x'</span> =&gt; [</span><br><span class="line">        <span class="string">'123'</span> =&gt; <span class="string">'aaa'</span>,</span><br><span class="line">        <span class="string">'124'</span> =&gt; <span class="string">'bbb'</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'y'</span> =&gt; [</span><br><span class="line">        <span class="string">'345'</span> =&gt; <span class="string">'ccc'</span>,</span><br><span class="line">    ],</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="ArrayHelper-keyExists-只能是一维数组"><a href="#ArrayHelper-keyExists-只能是一维数组" class="headerlink" title="ArrayHelper::keyExists  只能是一维数组"></a>ArrayHelper::keyExists  只能是一维数组</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$data1 = [</span><br><span class="line">    <span class="string">'userName'</span> =&gt; <span class="string">'Alex'</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">$data2 = [</span><br><span class="line">    <span class="string">'username'</span> =&gt; <span class="string">'Carsten'</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">var_dump(ArrayHelper::keyExists(<span class="string">'username'</span>,$data1,<span class="keyword">true</span>));<span class="comment">//输出 false</span></span><br><span class="line">var_dump(ArrayHelper::keyExists(<span class="string">'username'</span>,$data2,<span class="keyword">false</span>));<span class="comment">//输出 true</span></span><br></pre></td></tr></table></figure><h3 id="ArrayHelper-multisort-多维数组排序"><a href="#ArrayHelper-multisort-多维数组排序" class="headerlink" title="ArrayHelper::multisort  多维数组排序"></a>ArrayHelper::multisort  多维数组排序</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$data = [</span><br><span class="line">    [<span class="string">'age'</span> =&gt; <span class="number">30</span>, <span class="string">'name'</span> =&gt; <span class="string">'Alexander'</span>],</span><br><span class="line">    [<span class="string">'age'</span> =&gt; <span class="number">30</span>, <span class="string">'name'</span> =&gt; <span class="string">'Brian'</span>],</span><br><span class="line">    [<span class="string">'age'</span> =&gt; <span class="number">19</span>, <span class="string">'name'</span> =&gt; <span class="string">'Barney'</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">ArrayHelper::multisort($data,[<span class="string">'age'</span>,<span class="string">'name'</span>],[SORT_ASC,SORT_DESC]);</span><br><span class="line"><span class="comment">//输出, age 排序, name 排序</span></span><br><span class="line">[</span><br><span class="line">    [<span class="string">'age'</span> =&gt; <span class="number">19</span>, <span class="string">'name'</span> =&gt; <span class="string">'Barney'</span>],</span><br><span class="line">    [<span class="string">'age'</span> =&gt; <span class="number">30</span>, <span class="string">'name'</span> =&gt; <span class="string">'Brian'</span>],</span><br><span class="line">    [<span class="string">'age'</span> =&gt; <span class="number">30</span>, <span class="string">'name'</span> =&gt; <span class="string">'Alexander'</span>],</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h3 id="ArrayHelper-isIndexed-ArrayHelper-isAssociative-检测数组是索引数组还是联合数组"><a href="#ArrayHelper-isIndexed-ArrayHelper-isAssociative-检测数组是索引数组还是联合数组" class="headerlink" title="ArrayHelper::isIndexed  ArrayHelper::isAssociative 检测数组是索引数组还是联合数组"></a>ArrayHelper::isIndexed  ArrayHelper::isAssociative 检测数组是索引数组还是联合数组</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 不指定键名的数组</span></span><br><span class="line">$indexed = [<span class="string">'Qiang'</span>, <span class="string">'Paul'</span>];</span><br><span class="line"><span class="keyword">echo</span> ArrayHelper::isIndexed($indexed);  <span class="comment">//true</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 所有键名都是字符串</span></span><br><span class="line">$associative = [<span class="string">'framework'</span> =&gt; <span class="string">'Yii'</span>, <span class="string">'version'</span> =&gt; <span class="string">'2.0'</span>];</span><br><span class="line"><span class="keyword">echo</span> ArrayHelper::isAssociative($associative); <span class="comment">//true</span></span><br></pre></td></tr></table></figure><h3 id="ArrayHelper-isIn-ArrayHelper-isSubset-测试阵列"><a href="#ArrayHelper-isIn-ArrayHelper-isSubset-测试阵列" class="headerlink" title="ArrayHelper::isIn   ArrayHelper::isSubset  测试阵列"></a>ArrayHelper::isIn   ArrayHelper::isSubset  测试阵列</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// true</span></span><br><span class="line">ArrayHelper::isIn(<span class="string">'a'</span>, [<span class="string">'a'</span>]);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line">ArrayHelper::isIn(<span class="string">'a'</span>, <span class="keyword">new</span> \ArrayObject([<span class="string">'a'</span>]));</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line">ArrayHelper::isSubset(<span class="keyword">new</span> \ArrayObject([<span class="string">'a'</span>,<span class="string">'c'</span>]),<span class="keyword">new</span> \ArrayObject([<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>]));</span><br></pre></td></tr></table></figure><h3 id="ArrayHelper-filter-过滤"><a href="#ArrayHelper-filter-过滤" class="headerlink" title="ArrayHelper::filter  过滤"></a>ArrayHelper::filter  过滤</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">$array = [</span><br><span class="line">    <span class="string">'A'</span> =&gt; [<span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">    <span class="string">'B'</span> =&gt; [</span><br><span class="line">        <span class="string">'C'</span> =&gt; <span class="number">1</span>,</span><br><span class="line">        <span class="string">'D'</span> =&gt; <span class="number">2</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'E'</span> =&gt; <span class="number">1</span>,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">$result1 = ArrayHelper::filter($array,[<span class="string">'A'</span>]);</span><br><span class="line">$result2 = ArrayHelper::filter($array,[<span class="string">'A'</span>,<span class="string">'B.C'</span>]);</span><br><span class="line">$result3 = ArrayHelper::filter($array,[<span class="string">'B'</span>,<span class="string">'!B.C'</span>]);</span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line">[<span class="string">'A'</span> =&gt; [<span class="number">1</span>, <span class="number">2</span>]];</span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line">[</span><br><span class="line">    <span class="string">'A'</span> =&gt; [<span class="number">1</span>, <span class="number">2</span>], </span><br><span class="line">    <span class="string">'B'</span> =&gt; [<span class="string">'C'</span> =&gt; <span class="number">1</span>]</span><br><span class="line">]</span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line">[</span><br><span class="line">    <span class="string">'B'</span> =&gt; [<span class="string">'D'</span> =&gt; <span class="number">2</span>],</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p> <a href="https://www.yiiframework.com/doc/guide/2.0/zh-cn/helper-array" title="官网 zh-cn" target="_blank" rel="noopener">官网 zh-cn</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>win -Yii2 镜像源</title>
      <link href="/2018/09/30/win/composer/"/>
      <url>/2018/09/30/win/composer/</url>
      <content type="html"><![CDATA[<h3 id="查看composer-全局设置"><a href="#查看composer-全局设置" class="headerlink" title="查看composer 全局设置"></a>查看composer 全局设置</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">composer<span class="built_in"> config </span>-gl</span><br><span class="line"></span><br><span class="line">composer 镜像源配置文件:</span><br><span class="line">C:\Users\Administrator\AppData\Roaming\Composer\config.json</span><br></pre></td></tr></table></figure><h3 id="修改镜像源"><a href="#修改镜像源" class="headerlink" title="修改镜像源"></a>修改镜像源</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">国内镜像</span><br><span class="line">composer config -g repo<span class="selector-class">.packagist</span> composer https:<span class="comment">//packagist.phpcomposer.com</span></span><br><span class="line">国际镜像</span><br><span class="line">composer config -g repo<span class="selector-class">.packagist</span> composer https:<span class="comment">//packagist.org</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>wind -Yii2 添加扩展</title>
      <link href="/2018/09/30/win/yii2_composer_vendor/"/>
      <url>/2018/09/30/win/yii2_composer_vendor/</url>
      <content type="html"><![CDATA[<h3 id="安装完-Yii2-没有vendor目录"><a href="#安装完-Yii2-没有vendor目录" class="headerlink" title="安装完 Yii2 没有vendor目录"></a>安装完 Yii2 没有vendor目录</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在 yii 跟目录下执行,首次添加最新扩展包</span><br><span class="line">composer <span class="keyword">update</span></span><br></pre></td></tr></table></figure><p><img src="/img/win/vendor.png" alt="vendor"></p><h3 id="添加-redis-扩展"><a href="#添加-redis-扩展" class="headerlink" title="添加 redis 扩展"></a>添加 redis 扩展</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">在根目录执行 </span><br><span class="line"> composer require yiisoft/yii2-redis</span><br><span class="line"> </span><br><span class="line"> 这时在 composer.json 中会自动添加  yiisoft/yii2-redis<span class="string">": "</span>^<span class="number">2.0</span><span class="string">"</span></span><br><span class="line"> 在 vendor/yiisoft/extension.php 中会自动添加</span><br><span class="line">'yiisoft/yii2-redis' =&gt;</span><br><span class="line">    array(</span><br><span class="line">        'name' =&gt; 'yiisoft/yii2-redis',</span><br><span class="line">        'version' =&gt; '2.0.9.0',</span><br><span class="line">        'alias' =&gt;</span><br><span class="line">            array(</span><br><span class="line">                '@yii/redis' =&gt; $vendorDir . '/yiisoft/yii2-redis/src',</span><br><span class="line">            ),</span><br><span class="line">    ),</span><br></pre></td></tr></table></figure><p><img src="/img/win/redis_01.png" alt="redis"></p><p><img src="/img/win/redis_02.png" alt="redis 2"></p><p><img src="/img/win/composer_json.png" alt="composer.json"></p><h3 id="添加-redis-扩展02"><a href="#添加-redis-扩展02" class="headerlink" title="!!!添加 redis 扩展02"></a>!!!添加 redis 扩展02</h3><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">在composer.json 文件中添加 redis扩展     <span class="string">"yiisoft/yii2-redis"</span>: <span class="string">"~2.0.0"</span></span><br><span class="line"><span class="string">"require"</span>: &#123;</span><br><span class="line">    <span class="string">"php"</span>: <span class="string">"&gt;=5.4.0"</span>,</span><br><span class="line">    <span class="string">"yiisoft/yii2"</span>: <span class="string">"~2.0.6"</span>,</span><br><span class="line">    <span class="string">"yiisoft/yii2-bootstrap"</span>: <span class="string">"~2.0.0"</span>,</span><br><span class="line">    <span class="string">"yiisoft/yii2-swiftmailer"</span>: <span class="string">"~2.0.0 || ~2.1.0"</span>,</span><br><span class="line">    <span class="string">"yiisoft/yii2-redis"</span>: <span class="string">"~2.0.0"</span></span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">然后在根目录执行 composer update,这时候会自动升级 composer.lock 文件,</span><br><span class="line">redis 扩展添加成功,[ !!!这种方法会自动升级扩展!!! ]</span><br></pre></td></tr></table></figure><h3 id="install-update-require"><a href="#install-update-require" class="headerlink" title="!!!  install  , update  , require"></a>!!!  install  , update  , require</h3><p>添加一个新的扩展包建议使用 composer require</p><p>另外2个会更新所有扩展到最新版本</p><p>composer install 命令从当前目录读取 composer.json 文件，处理了依赖关系，并把其安装到 vendor 目录下。如果当前目录下存在 composer.lock 文件，它会从此文件读取依赖版本，而不是根据 composer.json 文件去获取依赖。这确保了该库的每个使用者都能得到相同的依赖版本。如果没有 composer.lock 文件，composer 将在处理完依赖关系后创建它.</p><p>composer update  为了获取依赖的最新版本，并且升级 composer.lock 文件，你应该使用 update 命令。</p><h3 id="扩展"><a href="#扩展" class="headerlink" title="扩展"></a>扩展</h3><p>扩展: 这里配置 reids 后,使用 phpstorm 写代码的时候,redis是没有提示的,比如 Yii::$app-&gt;redis-&gt;set(“hello”,”world”);,这里的reids在phpstorm中是跟踪不到的,解决这个问题,在 \vendor\yiisoft\yii2\base\Application.php 中的上面注释中添加如下:</p><ul><li>@property \yii\redis\Connection $redis  </li></ul><p>这样 phpstorm 就可以跟踪代码,并且 Yii::$app-&gt;redis-&gt;set(“hello”,”world”);  这个set 也会有提示;</p><p><img src="/img/win/redis_phpstorm.png" alt="redis 2"></p><h3 id="扩展02-view-层-render-提示"><a href="#扩展02-view-层-render-提示" class="headerlink" title="扩展02 view 层 render 提示"></a>扩展02 view 层 render 提示</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 一般情况下 view 层这个是没有提示的, 在页面的上面添加 /* @var $this \yii\web\View */</span><br><span class="line"><span class="php"><span class="meta">&lt;?</span>= <span class="keyword">$this</span>-&gt;render(<span class="string">'footer/_about'</span>); <span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure><p><img src="/img/win/render_phpstorm.png" alt="render 2"></p><p><img src="/img/win/render_phpstorm_02.png" alt="render 2"></p><h3 id="移除扩展包"><a href="#移除扩展包" class="headerlink" title="移除扩展包"></a>移除扩展包</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">composer <span class="builtin-name">remove</span> yiisoft/yii2-redis</span><br></pre></td></tr></table></figure><p>官方解释</p><p><a href="https://docs.phpcomposer.com/03-cli.html#init" target="_blank" rel="noopener">https://docs.phpcomposer.com/03-cli.html#init</a></p><p><a href="https://docs.phpcomposer.com/03-cli.html#init" target="_blank" rel="noopener">https://docs.phpcomposer.com/03-cli.html#init</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-sql DML (insert update delete select)基本使用</title>
      <link href="/2018/09/28/mysql/sql_DML/"/>
      <url>/2018/09/28/mysql/sql_DML/</url>
      <content type="html"><![CDATA[<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">start transaction;</span><br><span class="line">update 表名 set money=money+500 where id = 2;</span><br><span class="line">update 表名 set money=money-500 where id = 1;</span><br><span class="line">commit;</span><br><span class="line"></span><br><span class="line">select * from 表名 where id =1;</span><br><span class="line">select * from 表名 where id =2;</span><br><span class="line"></span><br><span class="line">+++++++</span><br><span class="line">start transaction;</span><br><span class="line">update 表名 set money=money+500 where id = 2;</span><br><span class="line">rollback;</span><br></pre></td></tr></table></figure><h3 id="where-having-group查询"><a href="#where-having-group查询" class="headerlink" title="where  having  group查询"></a>where  having  group查询</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">要求:查询出2门及2门以上不及格者的平均成绩 demo sql如下:</span><br><span class="line">--------------------------------------------------------------------------</span><br><span class="line">CREATE TABLE `student2` (</span><br><span class="line">  `id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `name` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,</span><br><span class="line">  `subject` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL,</span><br><span class="line">  `score` double(255,0) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=MyISAM AUTO_INCREMENT=9 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;</span><br><span class="line"></span><br><span class="line">INSERT INTO `student2` VALUES (&apos;1&apos;, &apos;张三&apos;, &apos;数学&apos;, &apos;90&apos;);</span><br><span class="line">INSERT INTO `student2` VALUES (&apos;2&apos;, &apos;张三&apos;, &apos;语文&apos;, &apos;50&apos;);</span><br><span class="line">INSERT INTO `student2` VALUES (&apos;3&apos;, &apos;张三&apos;, &apos;地理&apos;, &apos;40&apos;);</span><br><span class="line">INSERT INTO `student2` VALUES (&apos;4&apos;, &apos;李四&apos;, &apos;语文&apos;, &apos;55&apos;);</span><br><span class="line">INSERT INTO `student2` VALUES (&apos;5&apos;, &apos;李四&apos;, &apos;政治&apos;, &apos;45&apos;);</span><br><span class="line">INSERT INTO `student2` VALUES (&apos;6&apos;, &apos;王五&apos;, &apos;政治&apos;, &apos;30&apos;);</span><br><span class="line">INSERT INTO `student2` VALUES (&apos;7&apos;, &apos;马六&apos;, &apos;地理&apos;, &apos;80&apos;);</span><br><span class="line">INSERT INTO `student2` VALUES (&apos;8&apos;, &apos;马六&apos;, &apos;英语&apos;, &apos;90&apos;);</span><br><span class="line"></span><br><span class="line">+----+------+---------+-------+--------+</span><br><span class="line">| id | name | subject | score | score2 |</span><br><span class="line">+----+------+---------+-------+--------+</span><br><span class="line">|  1 | 张三     | 数学       |    90 |     10 |</span><br><span class="line">|  2 | 张三     | 语文        |    50 |     10 |</span><br><span class="line">|  3 | 张三     | 地理        |    40 |     10 |</span><br><span class="line">|  4 | 李四     | 语文        |    55 |     10 |</span><br><span class="line">|  5 | 李四     | 政治        |    45 |     10 |</span><br><span class="line">|  6 | 王五     | 政治        |    30 |     10 |</span><br><span class="line">|  7 | 马六     | 地理        |    80 |     10 |</span><br><span class="line">|  8 | 马六     | 英语       |    90 |     10 |</span><br><span class="line">+----+------+---------+-------+--------+</span><br><span class="line">--------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line">select name,subject,score,score&lt;60 from student2</span><br><span class="line">select name,sum(score&lt;60) as gk ,avg(score) as pj  from student2  group by name </span><br><span class="line">select name,sum(score&lt;60) as gk ,avg(score) as pj  from student2  group by name HAVING gk&gt;=2</span><br><span class="line">结果:</span><br><span class="line">+--------+------+---------+</span><br><span class="line">| name   | gk   | pj      |</span><br><span class="line">+--------+------+---------+</span><br><span class="line">| 张三   |    2 | 60.0000 |</span><br><span class="line">| 李四   |    2 | 50.0000 |</span><br><span class="line">+--------+------+---------+</span><br><span class="line">+++++++++++++ having 是对表的结果进行查询筛选 ++++++++</span><br><span class="line">select * from student2 where id&gt;1</span><br><span class="line">select * from student2 having id&gt;1</span><br><span class="line">select * from student2 where id&gt;1 having id&lt;5</span><br></pre></td></tr></table></figure><h3 id="INNER-JOIN-查询"><a href="#INNER-JOIN-查询" class="headerlink" title="INNER JOIN 查询"></a>INNER JOIN 查询</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">demos sql:</span><br><span class="line">--------------------------------------------------------------------------</span><br><span class="line">DROP TABLE IF EXISTS `m`;</span><br><span class="line">CREATE TABLE `m` (</span><br><span class="line">  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `hid` int(11) DEFAULT NULL COMMENT &apos;主队ID&apos;,</span><br><span class="line">  `gid` int(11) DEFAULT NULL COMMENT &apos;客队ID&apos;,</span><br><span class="line">  `mres` varchar(10) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT &apos;比赛结果&apos;,</span><br><span class="line">  `matime` date DEFAULT NULL COMMENT &apos;比赛开始时间&apos;,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=MyISAM AUTO_INCREMENT=5 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;</span><br><span class="line"></span><br><span class="line">INSERT INTO `m` VALUES (&apos;1&apos;, &apos;1&apos;, &apos;2&apos;, &apos;2:0&apos;, &apos;2006-05-21&apos;);</span><br><span class="line">INSERT INTO `m` VALUES (&apos;2&apos;, &apos;2&apos;, &apos;3&apos;, &apos;1:2&apos;, &apos;2006-06-21&apos;);</span><br><span class="line">INSERT INTO `m` VALUES (&apos;3&apos;, &apos;3&apos;, &apos;1&apos;, &apos;2:5&apos;, &apos;2006-06-25&apos;);</span><br><span class="line">INSERT INTO `m` VALUES (&apos;4&apos;, &apos;2&apos;, &apos;1&apos;, &apos;3:2&apos;, &apos;2006-07-21&apos;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS `t`;</span><br><span class="line">CREATE TABLE `t` (</span><br><span class="line">  `tid` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">  `tname` varchar(20) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT &apos;队伍名称&apos;,</span><br><span class="line">  PRIMARY KEY (`tid`)</span><br><span class="line">) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;</span><br><span class="line"></span><br><span class="line">INSERT INTO `t` VALUES (&apos;1&apos;, &apos;国安&apos;);</span><br><span class="line">INSERT INTO `t` VALUES (&apos;2&apos;, &apos;申花&apos;);</span><br><span class="line">INSERT INTO `t` VALUES (&apos;3&apos;, &apos;布尔联队&apos;);</span><br><span class="line">--------------------------------多次使用INNER JOIN 查询----------------------</span><br><span class="line">SELECT m.id,t1.tname,mres,t2.tname,matime FROM</span><br><span class="line"> m</span><br><span class="line">INNER JOIN t as t1 on m.hid=t1.tid </span><br><span class="line">INNER JOIN t as t2 ON m.gid=t2.tid</span><br></pre></td></tr></table></figure><h2 id="union-和-union-all"><a href="#union-和-union-all" class="headerlink" title="union  和 union all"></a>union  和 union all</h2><p>!!!!   使用union  waring:<br>1.各语句的列数相同<br>2.列名称未必要一直,列名称会使用第一条sql 的列名称为准<br>3.完全相等行将会合并,合并是比较耗时的操作,使用”union all” 可以避免合并</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">demos sql:</span><br><span class="line">--------------------------------------------------------------------------</span><br><span class="line">DROP TABLE IF EXISTS `a`;</span><br><span class="line">CREATE TABLE `a` (</span><br><span class="line">  `id` char(1) COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT &apos;&apos;,</span><br><span class="line">  `num` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;</span><br><span class="line"></span><br><span class="line">INSERT INTO `a` VALUES (&apos;a&apos;, &apos;5&apos;);</span><br><span class="line">INSERT INTO `a` VALUES (&apos;b&apos;, &apos;10&apos;);</span><br><span class="line">INSERT INTO `a` VALUES (&apos;c&apos;, &apos;15&apos;);</span><br><span class="line">INSERT INTO `a` VALUES (&apos;d&apos;, &apos;10&apos;);</span><br><span class="line"></span><br><span class="line">DROP TABLE IF EXISTS `b`;</span><br><span class="line">CREATE TABLE `b` (</span><br><span class="line">  `id` char(1) COLLATE utf8mb4_unicode_ci NOT NULL,</span><br><span class="line">  `num` int(11) DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=MyISAM DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;</span><br><span class="line"></span><br><span class="line">INSERT INTO `b` VALUES (&apos;b&apos;, &apos;5&apos;);</span><br><span class="line">INSERT INTO `b` VALUES (&apos;c&apos;, &apos;15&apos;);</span><br><span class="line">INSERT INTO `b` VALUES (&apos;d&apos;, &apos;20&apos;);</span><br><span class="line">INSERT INTO `b` VALUES (&apos;e&apos;, &apos;99&apos;);</span><br><span class="line">---------------------------------分组后求和--------------------------------------</span><br><span class="line">select id,sum(num) from</span><br><span class="line">(select id,num from a</span><br><span class="line">union all</span><br><span class="line">select id,num from b) as tmp</span><br><span class="line">group by id;</span><br></pre></td></tr></table></figure><h3 id="数据从B库导入到A库"><a href="#数据从B库导入到A库" class="headerlink" title="数据从B库导入到A库"></a>数据从B库导入到A库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO a(id,num) SELECT id,num FROM b</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-systemctl 常用命令</title>
      <link href="/2018/09/26/ubuntu/systemctl_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
      <url>/2018/09/26/ubuntu/systemctl_%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
      <content type="html"><![CDATA[<p>systemctl 常用命令</p><p>常用命令</p><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">常用命令 </span><br><span class="line"></span><br><span class="line">重新加载service文件：     <span class="keyword"> system</span>ctl daemon-reload</span><br><span class="line">启动一个服务：                <span class="keyword"> system</span>ctl start nginx-1.13.0.service</span><br><span class="line">关闭一个服务：                <span class="keyword"> system</span>ctl stop nginx-1.13.0.service</span><br><span class="line">重启一个服务：                <span class="keyword"> system</span>ctl restart nginx-1.13.0.service</span><br><span class="line">显示一个服务的状态：     <span class="keyword"> system</span>ctl status nginx-1.13.0.service</span><br><span class="line">在开机时启用一个服务：  <span class="keyword"> system</span>ctl enable nginx-1.13.0.service</span><br><span class="line">在开机时禁用一个服务：  <span class="keyword"> system</span>ctl disable nginx-1.13.0.service</span><br><span class="line">查看服务是否开机启动：  <span class="keyword"> system</span>ctl is-enabled nginx-1.13.0.service</span><br><span class="line">查看已启动的服务列表：  <span class="keyword"> system</span>ctl list-unit-files|grep enabled</span><br><span class="line">查看启动失败的服务列表：systemctl --failed</span><br><span class="line"></span><br><span class="line">apache</span><br><span class="line">启动 <span class="keyword"> system</span>ctl start httpd</span><br><span class="line">停止 <span class="keyword"> system</span>ctl stop httpd</span><br><span class="line">重启 <span class="keyword"> system</span>ctl restart httpd</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">mysql</span><br><span class="line">启动<span class="keyword"> system</span>ctl start mysqld</span><br><span class="line">停止<span class="keyword"> system</span>ctl stop mysqld</span><br><span class="line">重启<span class="keyword"> system</span>ctl restart mysqld</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">php-fpm</span><br><span class="line">启动<span class="keyword"> system</span>ctl start php-fpm</span><br><span class="line">停止<span class="keyword"> system</span>ctl stop php-fpm</span><br><span class="line">重启<span class="keyword"> system</span>ctl restart php-fpm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">nginx</span><br><span class="line">启动<span class="keyword"> system</span>ctl start nginx</span><br><span class="line">停止<span class="keyword"> system</span>ctl stop nginx</span><br><span class="line">重启<span class="keyword"> system</span>ctl restart nginx</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>linux-DDU  -vagrant 简单使用02</title>
      <link href="/2018/09/25/centos/vagrant_02/"/>
      <url>/2018/09/25/centos/vagrant_02/</url>
      <content type="html"><![CDATA[<h3 id="添加一个-box"><a href="#添加一个-box" class="headerlink" title="添加一个 box"></a>添加一个 box</h3><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vagrant <span class="built_in">box</span> list</span><br><span class="line">vagrant <span class="built_in">box</span> <span class="built_in">add</span> centos7 centos7-vagrant<span class="number">-180906.</span><span class="built_in">box</span></span><br></pre></td></tr></table></figure><p><img src="/img/centos/vagrant/add.png" alt="vagrant add" title="vagrant add"></p><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vagrant</span> init centos7</span><br></pre></td></tr></table></figure><p><img src="/img/centos/vagrant/init.png" alt="vagrant init"></p><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vagrant up <span class="comment">--provider virtualbox</span></span><br><span class="line">启动时,SSH 没有权限,下面修改配置,</span><br></pre></td></tr></table></figure><p><img src="/img/centos/vagrant/up_ssh.png" alt="vagrant up"></p><h3 id="进入虚拟机-virtualBox-运行远程登录"><a href="#进入虚拟机-virtualBox-运行远程登录" class="headerlink" title="进入虚拟机 virtualBox  ,运行远程登录"></a>进入虚拟机 virtualBox  ,运行远程登录</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vim</span> /etc/ssh/sshd_config   <span class="comment">#修改配置文件</span></span><br><span class="line"></span><br><span class="line">PubkeyAuthentication <span class="literal">yes</span>  <span class="comment">#注释取消掉</span></span><br><span class="line"></span><br><span class="line">重启服务 systemct1 restart sshd.service</span><br><span class="line"></span><br><span class="line">windows端:  ssh vagrant@<span class="number">127.0.0.1</span> -p2222</span><br><span class="line">使用密码登录</span><br><span class="line">windows端:  ssh vagrant@<span class="number">192.168.56.3</span>  <span class="comment">#使用指定ip登录</span></span><br></pre></td></tr></table></figure><p><img src="/img/centos/vagrant/ssh_remote.png" alt="ssh remote"></p><p><img src="/img/centos/vagrant/ssh_remote2.png" alt="ssh remote2"></p><p><img src="/img/centos/vagrant/ssh_remote3.png" alt="ssh remote2"></p><h3 id="windows-添加私钥-ssh-免密码登录-在windows中执行"><a href="#windows-添加私钥-ssh-免密码登录-在windows中执行" class="headerlink" title="windows 添加私钥  ssh 免密码登录,[在windows中执行]"></a>windows 添加私钥  ssh 免密码登录,[在windows中执行]</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vagrant ssh-config   #查看实时连接信息</span><br><span class="line">cd /c/Users/Administrator/.vagrant.d/</span><br><span class="line">scp -P2222 vagrant@127.0.0.1:~/.ssh/id_rsa ./  #从远程复制私钥到windows</span><br><span class="line"></span><br><span class="line">mv insecure_private_key insecure_private_key_old  #备份原来文件</span><br><span class="line">mv id_rsa insecure_private_key</span><br></pre></td></tr></table></figure><p><img src="/img/centos/vagrant/scp.png" alt="scp"></p><h3 id="设置-linux-公钥"><a href="#设置-linux-公钥" class="headerlink" title="设置 linux 公钥"></a>设置 linux 公钥</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp authorized_keys authorized_keys_old</span><br><span class="line">cat id_rsa<span class="selector-class">.pub</span> &gt; authorized_keys</span><br></pre></td></tr></table></figure><p><img src="/img/centos/vagrant/id_rsa_pub.png" alt="id_rsa pub"></p><h3 id="配置-Vagrantfile"><a href="#配置-Vagrantfile" class="headerlink" title="配置 Vagrantfile"></a>配置 Vagrantfile</h3><h4 id="vagrantfiile"><a href="#vagrantfiile" class="headerlink" title="vagrantfiile"></a>vagrantfiile</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">config<span class="selector-class">.vm</span><span class="selector-class">.box</span> = <span class="string">"centos7"</span></span><br><span class="line">config<span class="selector-class">.vm</span><span class="selector-class">.network</span> <span class="string">"private_network"</span>, ip: <span class="string">"192.168.56.3"</span></span><br><span class="line">config<span class="selector-class">.vm</span><span class="selector-class">.network</span> <span class="string">"public_network"</span>,:bridge=&gt;<span class="string">'en0: Wi-Fi (AirPort)'</span></span><br><span class="line">config<span class="selector-class">.vm</span><span class="selector-class">.synced_folder</span> <span class="string">"E:/data_web/webroot/"</span>, <span class="string">"/data"</span>,</span><br><span class="line">mount_options: [<span class="string">"dmode=775,fmode=775"</span>]</span><br><span class="line"></span><br><span class="line">------------------  这三种写法都可以 ---------------</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#config</span><span class="selector-class">.vm</span><span class="selector-class">.network</span> <span class="string">"public_network"</span>,:bridge=&gt;<span class="string">'en0: Wi-Fi (AirPort)'</span></span><br><span class="line"><span class="selector-id">#config</span><span class="selector-class">.vm</span><span class="selector-class">.network</span> <span class="string">"public_network"</span>, ip: <span class="string">"192.168.1.201"</span></span><br><span class="line"><span class="selector-id">#config</span><span class="selector-class">.vm</span><span class="selector-class">.network</span> <span class="string">"public_network"</span>, ip: <span class="string">"192.168.1.200"</span>, :bridge =&gt; <span class="string">'en0: Wi-Fi (AirPort)'</span></span><br></pre></td></tr></table></figure><h4 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">vagrant reload</span></span><br></pre></td></tr></table></figure><h3 id="ok"><a href="#ok" class="headerlink" title="ok"></a>ok</h3><p>windows中 E:/data_web/webroot/  下创建文件 ,linux 中 /data ,自动同步</p><p><img src="/img/centos/vagrant/w_l.png" alt="文件同步"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-curl  一个利用URL规则在命令行下工作的文件传输工具</title>
      <link href="/2018/09/19/ubuntu/linux_DDU_curl/"/>
      <url>/2018/09/19/ubuntu/linux_DDU_curl/</url>
      <content type="html"><![CDATA[<p>在 linux 中 curl 是一款利用 URL 规则在命令下工作的开源文件传输工具.</p><p>以下 demo 中,使用文件  index.php 作为实例演示, index.php 中内容为</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//访问本页面的地址为 www.test.com</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">print_r($_GET);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">"分隔符"</span>;</span><br><span class="line"></span><br><span class="line">print_r($_POST);</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_curl/test.png" alt="test" title="test"></p><h3 id="没有参数-获取页面内容"><a href="#没有参数-获取页面内容" class="headerlink" title="没有参数, 获取页面内容"></a>没有参数, 获取页面内容</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl  www<span class="selector-class">.test</span><span class="selector-class">.com</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_curl/curl_01.png" alt="curl" title="curl"></p><h4 id="参数-I-显示-HTTP-头"><a href="#参数-I-显示-HTTP-头" class="headerlink" title="参数 I 显示 HTTP 头"></a>参数 I 显示 HTTP 头</h4><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -I www<span class="selector-class">.test</span><span class="selector-class">.com</span>   [显示头信息,不显示内容]</span><br><span class="line"></span><br><span class="line">curl -<span class="selector-tag">i</span> www<span class="selector-class">.test</span><span class="selector-class">.com</span>   [显示头和内容]</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_curl/curl_I.png" alt="curl I" title="curl I"></p><p><img src="/img/ubuntu/linux_command/linux_curl/curl_ii.png" alt="curl i" title="curl i"></p><h3 id="链接保存到文件中"><a href="#链接保存到文件中" class="headerlink" title="链接保存到文件中"></a>链接保存到文件中</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">curl</span> <span class="selector-tag">www</span><span class="selector-class">.test</span><span class="selector-class">.com</span> &gt; <span class="selector-tag">index</span><span class="selector-class">.html</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_curl/curl_url.png" alt="curl url" title="curl url"></p><h3 id="使用-d-X发送-POST-请求"><a href="#使用-d-X发送-POST-请求" class="headerlink" title="使用 -d  -X发送  POST 请求"></a>使用 -d  -X发送  POST 请求</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -<span class="keyword">d</span> <span class="string">"post1=001&amp;post2=002"</span> www.<span class="keyword">test</span>.com</span><br><span class="line">curl -<span class="keyword">d</span> <span class="string">"post1=001&amp;post2=002"</span> -X <span class="keyword">POST</span> www.<span class="keyword">test</span>.com    # X大写 <span class="keyword">POST</span> 大写</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_curl/curl_post.png" alt="curl post" title="curl post"></p><p><img src="/img/ubuntu/linux_command/linux_curl/curl_post02.png" alt="curl post" title="curl post"></p><p>使用 -d -G 发送 GET 请求</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -d <span class="string">"get01=111&amp;get02=002"</span> -G GET www<span class="selector-class">.test</span><span class="selector-class">.com</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_curl/curl_get.png" alt="curl get" title="curl get"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>linux-DDU -ln  为文件创建连接</title>
      <link href="/2018/09/12/ubuntu/linux_DDU_ln/"/>
      <url>/2018/09/12/ubuntu/linux_DDU_ln/</url>
      <content type="html"><![CDATA[<h3 id="ln-使用的时候要写全路径-否则编辑链接后的文件可能会出现错误"><a href="#ln-使用的时候要写全路径-否则编辑链接后的文件可能会出现错误" class="headerlink" title="ln 使用的时候要写全路径,否则编辑链接后的文件可能会出现错误:"></a>ln 使用的时候要写全路径,否则编辑链接后的文件可能会出现错误:</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@ubuntu</span><span class="symbol">:/home/fei/web</span><span class="comment"># tail -f index.html </span></span><br><span class="line"><span class="symbol">tail:</span> cannot open <span class="string">'index.html'</span> <span class="keyword">for</span> <span class="symbol">reading:</span> Too many levels of symbolic links</span><br><span class="line"><span class="symbol">tail:</span> no files remaining</span><br><span class="line">root<span class="variable">@ubuntu</span><span class="symbol">:/home/fei/web</span><span class="comment"># ll</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_ln/error.png" alt="ln error" title="ln error"></p><h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln [<span class="string">参数</span>] [<span class="string">源文件或目录</span>][<span class="symbol">目标文件或目录</span>]</span><br></pre></td></tr></table></figure><h3 id="demo-硬链接"><a href="#demo-硬链接" class="headerlink" title="demo 硬链接"></a>demo 硬链接</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln <span class="regexp">/home/</span>fei<span class="regexp">/www/i</span>ndex.html <span class="regexp">/home/</span>fei<span class="regexp">/web/</span>    </span><br><span class="line">ln <span class="regexp">/home/</span>fei<span class="regexp">/www/i</span>ndex.html <span class="regexp">/home/</span>fei<span class="regexp">/web/i</span>ndex.txt <span class="comment"># [硬链接]源文件变化后.链接的文件也随着变化</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_ln/ln.png" alt="ln" title="ln"></p><p>硬链接<br>链接文件删除后,源文件不影响;<br>删除源文件后,链接文件不收影响<br><img src="/img/ubuntu/linux_command/linux_ln/ln_001.png" alt="链接文件删除后,源文件不影响" title="链接文件删除后,源文件不影响"><br><img src="/img/ubuntu/linux_command/linux_ln/ln_002.png" alt="删除源文件后,链接文件不收影响" title="删除源文件后,链接文件不收影响"></p><h3 id="软连接符号-s-相当于windows中的快捷方式"><a href="#软连接符号-s-相当于windows中的快捷方式" class="headerlink" title="软连接符号 -s   [ 相当于windows中的快捷方式]"></a>软连接符号 -s   [ 相当于windows中的快捷方式]</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -s /home/fei/www/test01<span class="selector-class">.txt</span> /home/fei/web/</span><br><span class="line">ln -s /home/fei/www/test05<span class="selector-class">.txt</span> /home/fei/web/test_05<span class="selector-class">.txt</span>  <span class="selector-id">#test01</span><span class="selector-class">.txt</span> 源文件变化后.链接的文件也随着变化</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_ln/ln_s.png" alt="ln s" title="ln s 软连接符号"></p><p>软连接符号 -s<br>链接文件删除后,源文件不影响;<br>删除源文件后,链接文件失效<br><img src="/img/ubuntu/linux_command/linux_ln/ln_01.png" alt="链接文件删除后,源文件不影响" title="链接文件删除后,源文件不影响"><br><img src="/img/ubuntu/linux_command/linux_ln/ln_02.png" alt="删除源文件后,链接文件失效" title="删除源文件后,链接文件失效"></p><h3 id="软连接目录"><a href="#软连接目录" class="headerlink" title="软连接目录"></a>软连接目录</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s <span class="regexp">/home/</span>fei<span class="regexp">/www/</span>aaa<span class="regexp">/ /</span>home<span class="regexp">/fei/</span>web<span class="regexp">/</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_ln/ln_s_dir.png" alt="ln s" title="ln s 软连接符号"></p><h3 id="删除软连接"><a href="#删除软连接" class="headerlink" title="删除软连接"></a>删除软连接</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">正确的是：rm -rf link_result</span><br><span class="line"></span><br><span class="line">错误的是：rm -rf link_result/    <span class="meta">#这个会把整个目录都删了</span></span><br><span class="line"></span><br><span class="line">测试: ln -s <span class="meta-keyword">/home/</span>fei<span class="meta-keyword">/web/</span>link_source <span class="meta-keyword">/home/</span>fei<span class="meta-keyword">/www/</span>link_result</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_ln/ln_del.gif" alt="删除链接" title="删除链接"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>linux-DDU  -vagrant 简单使用</title>
      <link href="/2018/09/11/centos/vagrant%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"/>
      <url>/2018/09/11/centos/vagrant%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><p>vagrant 常用命令介绍</p><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">vagrant init  <span class="string">[初始化]</span></span><br><span class="line">vagrant up    <span class="string">[启动虚拟机]</span></span><br><span class="line">vagrant halt  <span class="string">[关闭虚拟机]</span></span><br><span class="line">vagrant reload <span class="string">[重新启动虚拟机,主要用于重新载入配置文件]</span></span><br><span class="line">vagrant suspend <span class="string">[暂停虚拟机,这是虚拟机的内存,配置信息会暂存至硬盘]</span></span><br><span class="line">vagrant resume  <span class="string">[恢复虚拟机]</span></span><br><span class="line">vagrant ssh   <span class="string">[ssh登录到虚拟机]</span></span><br><span class="line">vagrant status  <span class="string">[查看虚拟机运行状态]</span></span><br><span class="line">vagrant destroy <span class="string">[销毁当前虚拟机]</span></span><br><span class="line">vagrant box add <span class="string">[添加一个box]</span></span><br><span class="line">vagrant box list <span class="string">[显示当前已经添加的box列表]</span></span><br><span class="line">vagrant box remove <span class="string">[删除相应的box]</span></span><br><span class="line">vagrant package  <span class="string">[打包命令,可以吧当前运行的虚拟机环境进行打包]</span></span><br><span class="line">vagrant plugin  <span class="string">[用于安装卸载插件]</span></span><br><span class="line">vagrant ssh-config <span class="string">[输出用于ssh连接的一些信息]</span></span><br><span class="line"></span><br><span class="line">vagrant 创建的虚拟机账号</span><br><span class="line">用户名：vagrant </span><br><span class="line">密   码：vagrant </span><br><span class="line">root帐号密码：vagrant</span><br><span class="line">用vagrant创建的ubuntu系统，root账号密码默认是没有设置的，需要手动设置 </span><br><span class="line">sudo passwd</span><br></pre></td></tr></table></figure><p>一般使用</p><figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>vagrant --help</span><br><span class="line"><span class="number">2.</span>vagrant -version</span><br><span class="line"><span class="number">3.</span>显示当前已经添加的<span class="built_in">box</span>列表</span><br><span class="line">vagrant <span class="built_in">box</span> list </span><br><span class="line"><span class="number">4.</span>  添加 <span class="built_in">box</span> </span><br><span class="line">vagrant <span class="built_in">box</span> <span class="built_in">add</span> <span class="keyword">new</span>-<span class="built_in">box</span>-name yours-<span class="built_in">box</span>-name.<span class="built_in">box</span>(你的<span class="built_in">box</span>文件)</span><br><span class="line"><span class="number">5.</span>  删除 <span class="built_in">box</span></span><br><span class="line">vagrant <span class="built_in">box</span> remove yours-<span class="built_in">box</span>-name</span><br><span class="line"><span class="number">6.</span> 指定 <span class="built_in">box</span> 初始化</span><br><span class="line">vagrant init yours-<span class="built_in">box</span>-name</span><br><span class="line"><span class="number">7.</span>启动</span><br><span class="line">vagrant up</span><br><span class="line">vagrant up --provider virtualbox</span><br><span class="line"><span class="number">8.</span>关闭</span><br><span class="line">vagrant halt</span><br><span class="line"><span class="number">9.</span>重新启动,加载配置文件</span><br><span class="line">vagrant reload</span><br><span class="line"><span class="number">10.</span> 挂起</span><br><span class="line">vagrant suspend</span><br><span class="line"><span class="number">11.</span> ssh登录</span><br><span class="line">vagrant ssh</span><br><span class="line"><span class="number">12.</span> 打包<span class="built_in">box</span></span><br><span class="line">打包前删除一个文件</span><br><span class="line">sudo rm -rf /etc/udev/rules.d/<span class="number">70</span>-persistent-net.rules</span><br><span class="line">vagrant <span class="keyword">package</span></span><br><span class="line">vagrant <span class="keyword">package</span> --base ubuntu18_default_1543569229538_92064 --output php72_mysql8_nginx.<span class="built_in">box</span></span><br><span class="line"></span><br><span class="line">demo:</span><br><span class="line">    vagrant --help</span><br><span class="line">    vagrant -version</span><br><span class="line">    vagrant <span class="built_in">box</span> list</span><br><span class="line">    vagrant <span class="built_in">box</span> <span class="built_in">add</span> centos7 centos7-vagrant<span class="number">-123456.</span><span class="built_in">box</span></span><br><span class="line">    vagrant <span class="built_in">box</span> list</span><br><span class="line">    vagrant init centos7</span><br><span class="line">    vagrant up --provider virtualbox</span><br><span class="line">    vagrant ssh</span><br><span class="line">    vagrant reload</span><br><span class="line">    vagrant ssh</span><br><span class="line">    vagrant halt</span><br></pre></td></tr></table></figure><p><a href="http://cloud-images.ubuntu.com/releases/releases/" title="记得要下载release版本" target="_blank" rel="noopener">ubuntu box -releases版本</a></p><p><a href="http://cloud.centos.org/centos/7/vagrant/x86_64/images/" target="_blank" rel="noopener">centos box</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-xargs  用作替换工具，读取输入数据重新格式化后输出</title>
      <link href="/2018/08/28/ubuntu/linux_DDU_xargs/"/>
      <url>/2018/08/28/ubuntu/linux_DDU_xargs/</url>
      <content type="html"><![CDATA[<h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><h3 id="在目录中搜索含有固定字符串文件命令，比如："><a href="#在目录中搜索含有固定字符串文件命令，比如：" class="headerlink" title="在目录中搜索含有固定字符串文件命令，比如："></a>在目录中搜索含有固定字符串文件命令，比如：</h3><p>在当前目录(及其子目录)中搜索扩展名为 .txt 结尾文件中包含 hello 的内容的行</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">搜索文件中内容</span><br><span class="line">grep "hello" test01.txt</span><br><span class="line"></span><br><span class="line">查找 .txt 结尾的文件</span><br><span class="line">find -name "*.txt"</span><br><span class="line">find /home/fei/www -name "*.txt"</span><br><span class="line"><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="emphasis">***</span></span><br><span class="line"></span><br><span class="line">find  -name "*.txt" | xargs grep "hello"</span><br><span class="line">find /home/fei/www -name "*.txt" | xargs grep "hello"</span><br><span class="line">locate *.txt | xargs  grep "hello"</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_xargs/xargs_01.png" alt="xargs 典型使用" title="xargs 典型使用"></p><h3 id="单行输出文本内容"><a href="#单行输出文本内容" class="headerlink" title="单行输出文本内容"></a>单行输出文本内容</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat test01.txt <span class="string">| xargs</span></span><br><span class="line"></span><br><span class="line">cat test01.txt <span class="string">| xargs -n3   [选项 -n]</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_xargs/xargs_02.png" alt="xargs 典型使用02" title="xargs 典型使用02"></p><p><img src="/img/ubuntu/linux_command/linux_xargs/xargs_03.png" alt="xargs 典型使用03" title="xargs 典型使用03"></p><h3 id="其他使用场景demo"><a href="#其他使用场景demo" class="headerlink" title="其他使用场景demo"></a>其他使用场景demo</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat url.txt <span class="string">| xargs wget -c     [下载url.txt 中链接的内容]</span></span><br><span class="line">ls <span class="string">| xargs -n2</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>常见4种排序： 冒泡排序、选择排序、插入排序、快速排序</title>
      <link href="/2018/08/27/%E9%9D%A2%E8%AF%95/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
      <url>/2018/08/27/%E9%9D%A2%E8%AF%95/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/</url>
      <content type="html"><![CDATA[<p>这里介绍4种常见排序： 冒泡排序、选择排序、插入排序、快速排序 、二分查找</p><h3 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h3><p>原理：对一组数据，比较相邻数的大小，将值大的放到后面。</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 冒泡排序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bubbleOrder</span><span class="params">($arr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $count = count($arr);</span><br><span class="line">    $temp = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 外层控制排序次数</span></span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $count - <span class="number">1</span>; $i++) &#123;</span><br><span class="line">        <span class="comment">// 内层控制每轮比较次数</span></span><br><span class="line">        <span class="keyword">for</span> ($j = <span class="number">0</span>; $j &lt; $count - <span class="number">1</span> - $i; $j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ($arr[$j] &gt; $arr[$j + <span class="number">1</span>]) &#123;</span><br><span class="line">                $temp = $arr[$j];</span><br><span class="line">                $arr[$j] = $arr[$j + <span class="number">1</span>];</span><br><span class="line">                $arr[$j + <span class="number">1</span>] = $temp;</span><br><span class="line">            &#125;   <span class="comment">// print_r($arr);  echo "&lt;br&gt;";</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$arr = <span class="keyword">array</span>(<span class="number">5</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">3</span>);</span><br><span class="line">$res = bubbleOrder($arr);</span><br><span class="line">var_dump($res);</span><br></pre></td></tr></table></figure><p><img src="/img/interview/algorithm/sort/冒泡排序_01.png" alt="冒泡排序代码" title="冒泡排序代码"></p><p><img src="/img/interview/algorithm/sort/冒泡排序_02.png" alt="冒泡排序运行结果" title="冒泡排序运行结果"></p><h3 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h3><p>原理：在一组数据中，选出最小的数与第一个位置交换，<br>​     然后在剩下的数据中在找出最小的数和第二个位置交换<br>​     然后在剩下的数据中在找出最小的数和第三个位置交换<br>​     依次类推直到倒数第二个数和最后一个数对比</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 选择排序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">selcetOrder</span><span class="params">($arr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 定义中间变量</span></span><br><span class="line">    $temp = <span class="number">0</span>;</span><br><span class="line">    $count = count($arr);</span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $count - <span class="number">1</span>; $i++) &#123;</span><br><span class="line">        <span class="comment">//定义最小位置</span></span><br><span class="line">        $minIndex = $i;</span><br><span class="line">        <span class="keyword">for</span> ($j = $i + <span class="number">1</span>; $j &lt; $count; $j++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ($arr[$j] &lt; $arr[$minIndex]) &#123;</span><br><span class="line">                $minIndex = $j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> ($i != $minIndex) &#123;</span><br><span class="line">            $temp = $arr[$i];</span><br><span class="line">            $arr[$i] = $arr[$minIndex];</span><br><span class="line">            $arr[$minIndex] = $temp;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$arr = <span class="keyword">array</span>(<span class="number">5</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">3</span>);</span><br><span class="line">$res = selcetOrder($arr);</span><br><span class="line">var_dump($res);</span><br></pre></td></tr></table></figure><p><img src="/img/interview/algorithm/sort/选择排序_01.png" alt="选择排序代码" title="选择排序代码"></p><p><img src="/img/interview/algorithm/sort/选择排序_02.png" alt="选择排序运行结果" title="选择排序运行结果"></p><h3 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h3><p>原理： 将需要排序的书，与前面已经排好的数据从后往前进行比较，使其插入到相应的位置；</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 插入排序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">insertOrder</span><span class="params">($arr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    $len = count($arr);</span><br><span class="line">    <span class="comment">//控制总循环次数</span></span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">0</span>; $i &lt; $len; $i++) &#123;</span><br><span class="line">        $temp = $arr[$i];</span><br><span class="line">        <span class="keyword">for</span> ($j = $i - <span class="number">1</span>; $j &gt;= <span class="number">0</span>; $j--) &#123;</span><br><span class="line">            <span class="comment">//从当前位置从后往前进行对比</span></span><br><span class="line">            <span class="keyword">if</span> ($temp &lt; $arr[$j]) &#123;</span><br><span class="line">                $arr[$j + <span class="number">1</span>] = $arr[$j];</span><br><span class="line">                $arr[$j] = $temp;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $arr;</span><br><span class="line">&#125;</span><br><span class="line">$arr = <span class="keyword">array</span>(<span class="number">5</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">3</span>);</span><br><span class="line">$res = insertOrder($arr);</span><br><span class="line">var_dump($res);</span><br></pre></td></tr></table></figure><p><img src="/img/interview/algorithm/sort/插入排序_01.png" alt="插入排序代码" title="插入排序代码"></p><p><img src="/img/interview/algorithm/sort/插入排序_02.png" alt="插入排序结果" title="插入排序运行结果"></p><h3 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h3><p>原理：初始一个中间值(一般选择第一个)，将需要排序的数组分成3部分，小于中间的值放左边、中间值、大于中间值的放右边，继续用递归用相同的方式来排序左边和右边，最后合并数组</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// 快速排序</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">quickOrder</span><span class="params">($arr)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// 判断是否需要运行,下面要拿出一个中间值</span></span><br><span class="line">    <span class="keyword">if</span> (count($arr)&lt;=<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> $arr;</span><br><span class="line">    &#125;</span><br><span class="line">    $middle = $arr[<span class="number">0</span>]; <span class="comment">// 中间值</span></span><br><span class="line">    $left   = <span class="keyword">array</span>();</span><br><span class="line">    $right  = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">for</span> ($i = <span class="number">1</span>; $i &lt; count($arr); $i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> ($middle &lt; $arr[$i]) &#123;</span><br><span class="line">            $right[] = $arr[$i];</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $left[] = $arr[$i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 递归排序划分好的2边数组</span></span><br><span class="line">    $left = quickOrder($left);</span><br><span class="line">    $right = quickOrder($right);</span><br><span class="line">    <span class="keyword">return</span> array_merge($left, <span class="keyword">array</span>($middle), $right);</span><br><span class="line">&#125;</span><br><span class="line">$arr = <span class="keyword">array</span>(<span class="number">5</span>, <span class="number">2</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">9</span>, <span class="number">3</span>);</span><br><span class="line">$res = quickOrder($arr);</span><br><span class="line">var_dump($res);</span><br></pre></td></tr></table></figure><h3 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正向排序的数组</span></span><br><span class="line">$arr = <span class="keyword">array</span>(<span class="number">1</span>, <span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">11</span>);</span><br><span class="line"><span class="comment">// $arr = array(1, 3, 20, 7, 9, 11);</span></span><br><span class="line"><span class="comment">// $arr2 = array(11, 9, 7, 5, 3, 1);</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">binary_search</span><span class="params">($array, $low, $high, $k)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ($low &lt;= $high)&#123;</span><br><span class="line">        $mid = intval(($low+$high)/<span class="number">2</span>);  <span class="comment">//intval();floor() 都可以无所谓</span></span><br><span class="line">        <span class="keyword">if</span> ($array[$mid] == $k)&#123;</span><br><span class="line">            <span class="keyword">return</span> $mid;</span><br><span class="line">        &#125;<span class="keyword">elseif</span> ($k &lt; $array[$mid])&#123;</span><br><span class="line">            <span class="keyword">return</span> binary_search($array, $low, $mid<span class="number">-1</span>, $k);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> binary_search($array, $mid+<span class="number">1</span>, $high, $k);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'必须是正向排序数组'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> binary_search($arr, <span class="number">0</span>, <span class="number">5</span>, <span class="number">9</span>);</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-locate 搜索</title>
      <link href="/2018/08/26/ubuntu/linux_DDU_locate_updatedb/"/>
      <url>/2018/08/26/ubuntu/linux_DDU_locate_updatedb/</url>
      <content type="html"><![CDATA[<p>使用 locate 搜索前一般先执行 updatedb 来更新</p><h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">locate <span class="string">[选项]</span> <span class="string">[参数]</span></span><br></pre></td></tr></table></figure><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">n 至多显示 n个输出。</span></span><br><span class="line"><span class="ruby">-r 使用正规运算式 做寻找的条件。</span></span><br><span class="line"><span class="ruby">-c 查询指定文件的数目</span></span><br></pre></td></tr></table></figure><p>demo</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">locate</span> pwd</span><br><span class="line"><span class="keyword">locate</span> -n <span class="number">2</span> pwd     [显示<span class="number">2</span>条输出]</span><br><span class="line"><span class="keyword">locate</span> -r  pwdt.*   [使用正则]</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_locate_updatedb/locate_01.png" alt="locate 使用正则搜索" title="使用正则搜索"></p><h3 id="指定位置搜索"><a href="#指定位置搜索" class="headerlink" title="指定位置搜索"></a>指定位置搜索</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">locate</span> aaa/linux.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_locate_updatedb/locate_02.png" alt="locate 指定位置搜素" title="指定位置搜素"></p><h3 id="查询指定文件的数目"><a href="#查询指定文件的数目" class="headerlink" title="查询指定文件的数目"></a>查询指定文件的数目</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">locate</span> -c  pwd</span><br><span class="line"><span class="keyword">locate</span> -c  pwdt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_locate_updatedb/locate_03.png" alt="locate 查询指定文件的数目" title="查询指定文件的数目"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-rename  文件重命名</title>
      <link href="/2018/08/19/ubuntu/linux_DDU_rename/"/>
      <url>/2018/08/19/ubuntu/linux_DDU_rename/</url>
      <content type="html"><![CDATA[<h3 id="命令格式，文件重命名"><a href="#命令格式，文件重命名" class="headerlink" title="命令格式，文件重命名"></a>命令格式，文件重命名</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">rename [-v] [-n] [-f] perlexpr[files]</span><br><span class="line"></span><br><span class="line">-<span class="ruby">v 打印被重命名的文件</span></span><br><span class="line"><span class="ruby">-n 只显示被重命名的文件，而不实际重命名</span></span><br><span class="line"><span class="ruby">-f 覆盖已经存在的文件</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">perlexpr 语言格式的正则表达式</span></span><br></pre></td></tr></table></figure><h3 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h3><h3 id="把-test02-txt-重命名为-test03-txt"><a href="#把-test02-txt-重命名为-test03-txt" class="headerlink" title="把 test02.txt 重命名为 test03.txt"></a>把 test02.txt 重命名为 test03.txt</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rename</span> <span class="string">'s/test02.txt/test03.txt/'</span> test02.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_rename/rename_01.png" alt="rename" title="重命名"></p><h3 id="参数-v-打印被重命名的文件"><a href="#参数-v-打印被重命名的文件" class="headerlink" title="参数 -v 打印被重命名的文件"></a>参数 -v 打印被重命名的文件</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rename</span> -v <span class="string">'s/test03.txt/test02.txt/'</span> test03.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_rename/rename_v.png" alt="rename v" title="重命名参数v"></p><h3 id="参数-n-只显示被重命名的文件，而不实际重命名"><a href="#参数-n-只显示被重命名的文件，而不实际重命名" class="headerlink" title="参数 -n 只显示被重命名的文件，而不实际重命名"></a>参数 -n 只显示被重命名的文件，而不实际重命名</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename -n <span class="string">'s/test02.txt/test03.txt/'</span> test02<span class="selector-class">.txt</span>   [实际没有重命名]</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_rename/rename_n.png" alt="rename n" title="重命名参数n"></p><h3 id="参数-f-覆盖已经存在的文件"><a href="#参数-f-覆盖已经存在的文件" class="headerlink" title="参数 -f 覆盖已经存在的文件"></a>参数 -f 覆盖已经存在的文件</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rename -f <span class="string">'s/test02.txt/test08.txt/'</span> test02.txt</span><br><span class="line">rename -f <span class="string">'s/test02.txt/test08.txt/'</span> *<span class="selector-class">.txt</span>    [也可以]</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_rename/rename_f.png" alt="rename f" title="重命名参数f"></p><p><img src="/img/ubuntu/linux_command/linux_rename/rename_f_2.png" alt="rename f" title="重命名参数f"></p><h2 id="表达式中-替换用-s-转化用-y-或者tr"><a href="#表达式中-替换用-s-转化用-y-或者tr" class="headerlink" title="表达式中 替换用 s ,转化用 y 或者tr"></a>表达式中 替换用 s ,转化用 y 或者tr</h2><h3 id="demo-：-将文件名改为大写"><a href="#demo-：-将文件名改为大写" class="headerlink" title="demo ： 将文件名改为大写"></a>demo ： 将文件名改为大写</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rename</span> <span class="string">'y/a-z/A-Z/'</span> <span class="regexp">*.txt</span></span><br><span class="line">rename <span class="string">'tr/a-z/A-Z/'</span> <span class="regexp">*.txt</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_rename/rename_zhuanhua.png" alt="rename 转化" title="重命名 转化"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-nl  计算文件中行号</title>
      <link href="/2018/08/13/ubuntu/linux_DDU_nl/"/>
      <url>/2018/08/13/ubuntu/linux_DDU_nl/</url>
      <content type="html"><![CDATA[<p>介绍： 计算文件中行号；</p><h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nl <span class="string">[选项]</span> <span class="string">[参数]</span></span><br></pre></td></tr></table></figure><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">b ：指定行号指定的方式，主要有两种：</span></span><br><span class="line"><span class="ruby">    -b a ：表示不论是否为空行，也同样列出行号(类似 cat -n)；</span></span><br><span class="line"><span class="ruby">    -b t ：如果有空行，空的那一行不要列出行号(默认值)；</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">-n ：列出行号表示的方法，主要有三种：</span></span><br><span class="line"><span class="ruby">    -n ln ：行号在萤幕的最左方显示；</span></span><br><span class="line"><span class="ruby">    -n rn ：行号在自己栏位的最右方显示，且不加 <span class="number">0</span> ；</span></span><br><span class="line"><span class="ruby">    -n rz ：行号在自己栏位的最左方显示，且加 <span class="number">0</span> ；</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">-w ：行号栏位的占用的位数。</span></span><br></pre></td></tr></table></figure><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>-b 指定行号列出 test01.txt 的内容【-b a ;     -b t】</p><p>demo</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nl -<span class="selector-tag">b</span> <span class="selector-tag">a</span> test01<span class="selector-class">.txt</span>    【空行显示行号】</span><br><span class="line"></span><br><span class="line">nl -<span class="selector-tag">b</span> t test01<span class="selector-class">.txt</span>    【空行不显示行号】</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_nl/nl_b.png" alt="root passwd" title="-b 指定行号"></p><h3 id="参数-1"><a href="#参数-1" class="headerlink" title="参数"></a>参数</h3><p>-n  显示行号列出test01.txt 的内容【-n ln ;  -n ln; -n rz】</p><p>demo</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nl -n ln test01<span class="selector-class">.txt</span>  【行号在左】</span><br><span class="line"></span><br><span class="line">nl -n rn test01<span class="selector-class">.txt</span>  【行号在右】</span><br><span class="line"></span><br><span class="line">nl -n rz test01<span class="selector-class">.txt</span>  【行号在左，且加零】</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_nl/nl_n.png" alt="root passwd" title="-n 显示行号"></p><h3 id="参数-2"><a href="#参数-2" class="headerlink" title="参数"></a>参数</h3><p>-w  列出行号占用的位数</p><p>demo</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">nl</span> <span class="selector-tag">-n</span> <span class="selector-tag">rz</span> <span class="selector-tag">-w</span> 3 <span class="selector-tag">test01</span><span class="selector-class">.txt</span></span><br><span class="line"><span class="selector-tag">nl</span> <span class="selector-tag">-n</span> <span class="selector-tag">rz</span> <span class="selector-tag">-w</span> 5 <span class="selector-tag">test01</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_nl/nl_w.png" alt="root passwd" title="-w 列出行号占用位数"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Ubuntu -nginx</title>
      <link href="/2018/06/07/ubuntu/linux_ubuntu_nginx_02/"/>
      <url>/2018/06/07/ubuntu/linux_ubuntu_nginx_02/</url>
      <content type="html"><![CDATA[<h3 id="日志切割-testlog-sh"><a href="#日志切割-testlog-sh" class="headerlink" title="日志切割  testlog.sh"></a>日志切割  testlog.sh</h3><p>使用脚本切割 nginx 日志，脚本内容如下</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">--------------------------nginx.conf---------------------</span><br><span class="line">  #打开注释</span><br><span class="line">  #log_format  main </span><br><span class="line">    </span><br><span class="line"> <span class="built_in"> server </span>&#123;</span><br><span class="line">        listen       80;   </span><br><span class="line">        server_name  test.com;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   test.com;</span><br><span class="line">            index  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        access_log  logs/test.com.access.log  main;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">     </span><br><span class="line"></span><br><span class="line">--------------------------testlog.sh---------------------</span><br><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="attribute">LOGPATH</span>=/data/server/nginx-1.4.2/logs/test.com.access.log</span><br><span class="line"><span class="attribute">BASEPATH</span>=/data/$(date -d yesterday +%Y%m)</span><br><span class="line"></span><br><span class="line">mkdir -p <span class="variable">$BASEPATH</span></span><br><span class="line"><span class="attribute">bak</span>=<span class="variable">$BASEPATH</span>/$(date -d yesterday +%Y%m%d%H%M).test.com.access.log</span><br><span class="line"><span class="comment">#echo $bak</span></span><br><span class="line"></span><br><span class="line">mv <span class="variable">$LOGPATH</span> <span class="variable">$bak</span></span><br><span class="line">touch <span class="variable">$LOGPATH</span></span><br><span class="line">kill -USR1 cat /data/server/nginx-1.4.2/logs/nginx.pid</span><br><span class="line"></span><br><span class="line">--------------------------------------------------</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/nginx/other/nginx_log.png" alt="nginx log" title="nginx log"></p><h3 id="location-精准匹配，正则匹配"><a href="#location-精准匹配，正则匹配" class="headerlink" title="location  精准匹配，正则匹配"></a>location  精准匹配，正则匹配</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Syntax:<span class="keyword">location</span> <span class="title">[ = | ~ | ~* | ^~ ] uri</span> &#123; ... &#125;</span><br><span class="line"><span class="keyword">location</span> <span class="title">@name</span> &#123; ... &#125;</span><br><span class="line">Default:—</span><br><span class="line">Context:server, location</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/nginx/other/nginx_location.png" alt="nginx location" title="nginx location"></p><p> <a href="http://nginx.org/en/docs/http/ngx_http_core_module.html#location&quot;location 模块&quot;" target="_blank" rel="noopener">location 模块</a></p><h3 id="location-二级目录-忽略index-html"><a href="#location-二级目录-忽略index-html" class="headerlink" title="location 二级目录,忽略index.html"></a>location 二级目录,忽略index.html</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="rewrite-重写"><a href="#rewrite-重写" class="headerlink" title="rewrite 重写"></a>rewrite 重写</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">location</span> /h5cfsh &#123;</span><br><span class="line"><span class="attribute">index</span> index.html;</span><br><span class="line"><span class="attribute">root</span> /usr/local/apache2/htdocs/cfsh/h5cfsh/dist/;</span><br><span class="line"><span class="attribute">rewrite</span><span class="regexp"> ^(.*)$</span> /index.html <span class="literal">break</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-head -tail -sed 输出文件中的内容</title>
      <link href="/2018/06/06/ubuntu/linux_DDU_head_tail/"/>
      <url>/2018/06/06/ubuntu/linux_DDU_head_tail/</url>
      <content type="html"><![CDATA[<h2 id="命令-head"><a href="#命令-head" class="headerlink" title="命令 head"></a>命令 head</h2><h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">head <span class="string">[选项]</span> <span class="string">[参数]</span></span><br></pre></td></tr></table></figure><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-n<span class="tag">&lt;<span class="name">数字</span>&gt;</span>：指定显示头部内容的行数；</span><br></pre></td></tr></table></figure><p>demo</p><p>默认显示文件前 10 行内容</p><p>参数 n 显示文件的前 2 行</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#显示文件的前<span class="number">2</span>行</span><br><span class="line">head <span class="number">-2</span> d01.txt</span><br><span class="line">head -n <span class="number">2</span> d01.txt</span><br><span class="line"></span><br><span class="line">#输出除了文件最后 <span class="number">2</span> 行的全部内容</span><br><span class="line">head -n <span class="number">-2</span> d01.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_head_tail/head_n.png" alt="root 显示文件的前 2 行" title="显示文件的前 2 行"></p><p><img src="/img/ubuntu/linux_command/linux_head_tail/head_n2.png" alt="root 显示除了文件的最后 2 行" title="显示除了文件的最后 2 行"></p><h2 id="命令-tail"><a href="#命令-tail" class="headerlink" title="命令 tail"></a>命令 tail</h2><h3 id="命令格式-1"><a href="#命令格式-1" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tail <span class="string">[选项]</span> <span class="string">[参数]</span></span><br></pre></td></tr></table></figure><h3 id="选项-1"><a href="#选项-1" class="headerlink" title="选项"></a>选项</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">n&lt;N&gt;或——line=&lt;N&gt;：输出文件的尾部N（N位数字）行内容。</span></span><br><span class="line"><span class="ruby">-f&lt;name/descriptor&gt;：显示文件最新追加的内容。“name”表示以文件名的方式监视文件的变化。</span></span><br><span class="line"><span class="ruby">-F：与选项“-follow=name”和“--<span class="keyword">retry</span><span class="string">"连用时功能相同；</span></span></span><br></pre></td></tr></table></figure><p>demo</p><p>默认显示文件最后 10 行内容</p><p>选项 n 显示文件最后 2 行内容</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tail <span class="number">-2</span> d01.txt</span><br><span class="line">tail -n <span class="number">2</span> d01.txt</span><br><span class="line"></span><br><span class="line">#从文件第 <span class="number">3</span> 行开始显示内容</span><br><span class="line">tail -n +<span class="number">3</span> d01.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_head_tail/tail_n.png" alt="root 显示文件的最后 2 行" title="显示文件的最后 2 行"></p><p><img src="/img/ubuntu/linux_command/linux_head_tail/tail_n2.png" alt="root 从文件第 3 行开始显示内容" title="从文件第 3 行开始显示内容"></p><p>选项 f ,动态显示文件内容</p><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ping</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> &gt; d01.<span class="built_in">log</span> &amp;     <span class="meta">#创建动态任务</span></span><br><span class="line"></span><br><span class="line">tail -f d01.<span class="built_in">log</span>                <span class="meta">#动态显示文件内容</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_head_tail/tail_f.gif" alt="root 动态显示文件内容" title="动态显示文件内容"></p><p>选项 tail -F 功能与 tail -f 功能相同，不同的是执行此命令时文件可以不存在</p><h2 id="命令-sed-其他使用参考-sed-整理"><a href="#命令-sed-其他使用参考-sed-整理" class="headerlink" title="命令 sed, 其他使用参考 -sed 整理"></a>命令 sed, 其他使用参考 -sed 整理</h2><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#显示文件中的指定行内容,显示index.php 中的第<span class="number">2</span>行到第<span class="number">5</span>行内容</span><br><span class="line">sed -n '<span class="number">2</span>,<span class="number">5</span>p' index.php</span><br></pre></td></tr></table></figure><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#文件中前<span class="number">3</span>行写人到新文件</span><br><span class="line">head -<span class="number">3</span> index<span class="selector-class">.php</span> &gt; test<span class="selector-class">.php</span>    </span><br><span class="line"></span><br><span class="line">#文件中后<span class="number">5</span>行写入到新文件中</span><br><span class="line">tail -<span class="number">5</span> index<span class="selector-class">.php</span> &gt; test2.php</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-less -more  显示目录列表</title>
      <link href="/2018/05/30/ubuntu/linux_DDU_less_more/"/>
      <url>/2018/05/30/ubuntu/linux_DDU_less_more/</url>
      <content type="html"><![CDATA[<p>less 与 more 类似，但使用 less 可以随意浏览文件，而且 less 在查看之前不会加载整个文件 </p><h2 id="命令-less"><a href="#命令-less" class="headerlink" title="命令 less"></a>命令 less</h2><h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less <span class="string">[选项]</span> <span class="string">[参数]</span></span><br></pre></td></tr></table></figure><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/字符串：向下搜索“字符串”的功能</span><br><span class="line">?字符串：向上搜索“字符串”的功能</span><br><span class="line">n：重复前一个搜索（与 / 或 ? 有关）</span><br><span class="line">N：反向重复前一个搜索（与 / 或 ? 有关）</span><br><span class="line">b  向后翻一页</span><br><span class="line">d  向后翻半页</span><br><span class="line">h  显示帮助界面</span><br><span class="line">q  退出less 命令</span><br><span class="line">u  向前滚动半页</span><br><span class="line">y  向前滚动一行</span><br><span class="line">空格键 滚动一行</span><br><span class="line">回车键 滚动一页</span><br><span class="line"><span class="string">[pagedown]</span>： 向下翻动一页</span><br><span class="line"><span class="string">[pageup]</span>：   向上翻动一页</span><br></pre></td></tr></table></figure><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>文件：指定要分屏显示内容的文件。 </p><h2 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h2><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">less</span> d01.txt               <span class="comment">#查看文件</span></span><br><span class="line">ps -ef | <span class="keyword">less</span>              <span class="comment">#PS查看进程信息并通过 less 分页显示</span></span><br><span class="line">history | <span class="keyword">less</span>             <span class="comment">#查看历史使用记录并通过 less 分页显示</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">q  退出<span class="keyword">less</span> 命令</span><br><span class="line">[pagedown]： 向下翻动一页</span><br><span class="line">[pageup]：   向上翻动一页</span><br><span class="line"></span><br><span class="line"><span class="keyword">less</span> d01.txt d02.txt d03.txt      <span class="comment">#浏览多个文件</span></span><br><span class="line">说明：</span><br><span class="line">输入 :n后,切换到  d02.txt,继续输入:n后,切换到 d03.txt</span><br><span class="line">输入 :p后,切换到  d02.txt,继续输入:p后,切换到 d01.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_less/less.png" alt="less" title="less"></p><h2 id="命令-more"><a href="#命令-more" class="headerlink" title="命令 more"></a>命令 more</h2><p>more命令从前向后读取文件，因此在启动时就加载整个文件。 </p><h3 id="命令格式-1"><a href="#命令格式-1" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less <span class="string">[选项]</span> <span class="string">[参数]</span></span><br></pre></td></tr></table></figure><h3 id="选项-1"><a href="#选项-1" class="headerlink" title="选项"></a>选项</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+n      从笫n行开始显示</span><br><span class="line">-<span class="ruby">n       定义屏幕大小为n行</span></span><br><span class="line"><span class="ruby">+<span class="regexp">/pattern 在每个档案显示前搜寻该字串（pattern），然后从该字串前两行之后开始显示  </span></span></span><br><span class="line"><span class="ruby">-c       从顶部清屏，然后显示</span></span><br><span class="line"><span class="ruby">-d       提示“Press space to continue，<span class="string">'q'</span> to quit（按空格键继续，按q键退出）”，禁用响铃功能</span></span><br><span class="line"><span class="ruby">-l        忽略Ctrl+l（换页）字符</span></span><br><span class="line"><span class="ruby">-p       通过清除窗口而不是滚屏来对文件进行换页，与-c选项相似</span></span><br><span class="line"><span class="ruby">-s       把连续的多个空行显示为一行</span></span><br><span class="line"><span class="ruby">-u       把文件内容中的下画线去掉</span></span><br></pre></td></tr></table></figure><p>常用命令</p><figure class="highlight excel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Enter    向下<span class="built_in">n</span>行，需要定义。默认为<span class="number">1</span>行</span><br><span class="line">Ctrl+F   向下滚动一屏</span><br><span class="line">空格键  向下滚动一屏</span><br><span class="line">Ctrl+B  返回上一屏</span><br><span class="line">=       输出当前行的行号</span><br><span class="line">：f     输出文件名和当前行的行号</span><br><span class="line">V      调用vi编辑器</span><br><span class="line">!命令   调用Shell，并执行命令 </span><br><span class="line">q       退出more</span><br></pre></td></tr></table></figure><h3 id="demo-1"><a href="#demo-1" class="headerlink" title="demo"></a>demo</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">more +<span class="number">1</span> d01.txt    #显示文件中从第<span class="number">1</span>行器内容</span><br><span class="line">more +<span class="number">2</span> d01.txt    #显示文件中从第<span class="number">2</span>行器内容</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_more/more_01.png" alt="more" title="more"></p><p>从文件中查找第一个出现 “d01” 字符串的行，并从该处前2行显示输出<br>从文件中查找第一个出现 “3” 字符串的行，并从该处前2行显示输出<br>从文件中查找第一个出现 “hello” 字符串的行，并从该处前2行显示输出</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">more +/d01  d01.txt</span><br><span class="line">more +/<span class="number">3</span>  d01.txt</span><br><span class="line">more +/hello  d01.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_more/more_02.png" alt="more" title="more"></p><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">设定每屏显示行数</span><br><span class="line"><span class="keyword">more</span> -1 d01.txt</span><br><span class="line"><span class="keyword">more</span> -2 d01.txt</span><br><span class="line"></span><br><span class="line">列一个目录下的文件，由于内容太多，我们应该学会用<span class="keyword">more</span>来分页显示。这得和管道 | 结合起来</span><br><span class="line"><span class="keyword">ls</span> -<span class="keyword">l</span> | <span class="keyword">more</span> -1</span><br><span class="line"><span class="keyword">ls</span> -<span class="keyword">l</span> | <span class="keyword">more</span> -2</span><br><span class="line"></span><br><span class="line">q 键退出，enter向下</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_more/more_03.png" alt="more" title="more"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-mkdir  -rmdir 显示目录列表</title>
      <link href="/2018/05/28/ubuntu/linux_DDU_mkdir_rmdir/"/>
      <url>/2018/05/28/ubuntu/linux_DDU_mkdir_rmdir/</url>
      <content type="html"><![CDATA[<p>mkdir 不指定参数，创建文件默认权限 为 755  rwxr-xr-x</p><h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir [选项] [参数]</span><br></pre></td></tr></table></figure><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">m&lt;目标属性&gt;或--mode&lt;目标属性&gt;建立目录的同时设置目录的权限；</span></span><br><span class="line"><span class="ruby">-p或--parents 若所要建立目录的上层目录目前尚未建立，则会一并建立上层目录；</span></span><br><span class="line"><span class="ruby">--version 显示版本信息。</span></span><br></pre></td></tr></table></figure><h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p>目录：指定要创建的目录列表，多个目录之间用空格隔开</p><h2 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h2><h3 id="选项-m-创建目录并设置权限"><a href="#选项-m-创建目录并设置权限" class="headerlink" title="选项 -m 创建目录并设置权限"></a>选项 -m 创建目录并设置权限</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">mkdir</span> -<span class="keyword">m</span> 700 /www/<span class="keyword">test</span>    #在 /www  目录下创建子目录<span class="keyword">test</span>，并设置 700 权限</span><br></pre></td></tr></table></figure><p><img src="/img/linux_command/linux_mkdir/mkdir_m.png" alt="mkdir 创建目录并设置权限" title="mkdir 创建目录并设置权限"></p><h3 id="选项-m-创建-子目录"><a href="#选项-m-创建-子目录" class="headerlink" title="选项 -m 创建 子目录"></a>选项 -m 创建 子目录</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p aaa/bbb    #在当前目录创建<span class="built_in"> aaa </span>目录 和 aaa下的bbb目录</span><br></pre></td></tr></table></figure><p><img src="/img/linux_command/linux_mkdir/mkdir_p.png" alt="mkdir 创建子目录" title="mkdir 创建子目录"></p><h2 id="rmdir"><a href="#rmdir" class="headerlink" title="rmdir"></a>rmdir</h2><p>只可以删除空目录</p><h3 id="命令格式-1"><a href="#命令格式-1" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rmdir [选项] [参数]</span><br></pre></td></tr></table></figure><h3 id="选项-1"><a href="#选项-1" class="headerlink" title="选项"></a>选项</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">p或--parents：删除指定目录后，若该目录的上层目录已变成空目录，则将其一并删除；</span></span><br><span class="line"><span class="ruby">-v或-verboes：显示命令的详细执行过程；</span></span><br><span class="line"><span class="ruby">--help：显示命令的帮助信息；</span></span><br><span class="line"><span class="ruby">--version：显示命令的版本信息。</span></span><br></pre></td></tr></table></figure><h3 id="参数-1"><a href="#参数-1" class="headerlink" title="参数"></a>参数</h3><p>目录列表：要删除的空目录列表。当删除多个空目录时，目录名之间使用空格隔开。 </p><h3 id="选项-p-删除空目录"><a href="#选项-p-删除空目录" class="headerlink" title="选项 -p 删除空目录"></a>选项 -p 删除空目录</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">rmdir</span>    aaa/<span class="keyword">bbb </span>  #删除 <span class="keyword">bbb </span>目录</span><br><span class="line"><span class="symbol">rmdir</span> -p aaa/<span class="keyword">bbb </span>  #删除 <span class="keyword">bbb </span>目录，如果aa目录是空也一并删除</span><br></pre></td></tr></table></figure><p><img src="/img/linux_command/linux_mkdir/rmdir.png" alt="rmdir 删除空目录" title="rmdir 删除空目录"></p><p><img src="/img/linux_command/linux_mkdir/rmdir_p.png" alt="rmdir 删除空目录和子目录" title="rmdir 删除空目录和子目录"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-sh  shell 脚本</title>
      <link href="/2018/05/28/ubuntu/linux_DDU_sh/"/>
      <url>/2018/05/28/ubuntu/linux_DDU_sh/</url>
      <content type="html"><![CDATA[<h3 id="简单shell，打印昨天时间，并输出到屏幕上，注意-反引号"><a href="#简单shell，打印昨天时间，并输出到屏幕上，注意-反引号" class="headerlink" title="简单shell，打印昨天时间，并输出到屏幕上，注意 反引号"></a>简单shell，打印昨天时间，并输出到屏幕上，注意 反引号</h3><p>echo  把执行命令的返回结果输出到屏幕上<br>运行脚本  sh test.sh ;  test.sh 内容如下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'date -d yesterday +%Y%m%d'</span>  <span class="comment">#没有使用反引号</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> `date -d yesterday +%Y%m%d`  <span class="comment">#使用反引号，输出昨天时间</span></span><br><span class="line"><span class="built_in">echo</span> `ls /www`                    <span class="comment">#使用反引号，显示 www 目录下文件</span></span><br><span class="line">touch /www/test.txt               <span class="comment">#在 www 目录下创建 test.txt 文件</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_sh/sh_01.png" alt="demo shell" title="demo shell"></p><p>demo 2,创建文件，运行命令  sh testlog.sh</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">BASEPATH=/data/$(date -d yesterday +%Y%m)</span><br><span class="line">bak=$BASEPATH/$(date -d yesterday +%Y%m%d%H%M).test.txt</span><br><span class="line">mkdir -p $BASEPATH</span><br><span class="line">echo $BASEPATH</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_sh/sh_02.png" alt="demo shell" title="demo shell"></p><h3 id="demo3-运行-test-sh-文件使用-source-命令"><a href="#demo3-运行-test-sh-文件使用-source-命令" class="headerlink" title="demo3  运行 test.sh 文件使用 source 命令"></a>demo3  运行 test.sh 文件使用 source 命令</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">source test.sh </span><br><span class="line"><span class="meta">#</span><span class="bash"> 四个的区别区别, 执行权限; 脚本报错后是否继续执行</span></span><br><span class="line">1) ./test.sh</span><br><span class="line">2) sh test.sh</span><br><span class="line">3) . test.sh</span><br><span class="line">4) source test.sh</span><br></pre></td></tr></table></figure><h3 id="利用当前时间作为目录"><a href="#利用当前时间作为目录" class="headerlink" title="利用当前时间作为目录"></a>利用当前时间作为目录</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">cp -arv /home/fei/www/aaa/  "/home/fei/www/ffffffffffff_"$(date  +%Y%m%d%H%M)</span><br></pre></td></tr></table></figure><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/shells </span><br><span class="line">使用 #sh test.sh  #dash test.sh #bash test.sh #rbash test.sh 都是可以执行的 </span><br><span class="line"></span><br><span class="line">root@ubuntu:/home/fei/web# cat /etc/shells </span><br><span class="line"><span class="meta">#</span><span class="bash"> /etc/shells: valid login shells</span></span><br><span class="line">/bin/sh</span><br><span class="line">/bin/dash</span><br><span class="line">/bin/bash</span><br><span class="line">/bin/rbash</span><br><span class="line">root@ubuntu:/home/fei/web#</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-cat  连接文件并打印到标准输出设备上 -split 切割文件</title>
      <link href="/2018/05/28/ubuntu/linux_DDU_cat_split/"/>
      <url>/2018/05/28/ubuntu/linux_DDU_cat_split/</url>
      <content type="html"><![CDATA[<h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat <span class="string">[选项]</span> <span class="string">[参数]</span></span><br></pre></td></tr></table></figure><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">n或-number：有<span class="number">1</span>开始对所有输出的行数编号；</span></span><br><span class="line"><span class="ruby">-b或--number-nonblank：和-n相似，只不过对于空白行不编号；</span></span><br></pre></td></tr></table></figure><h3 id="参数-n-输出行数编号"><a href="#参数-n-输出行数编号" class="headerlink" title="参数  n  输出行数编号"></a>参数  n  输出行数编号</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">cat</span> <span class="selector-tag">-n</span> <span class="selector-tag">d01</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure><p><img src="/img/linux_command/linux_cat/cat_n.png" alt="cat 输出行编号" title="输出行编号"></p><h3 id="参数-b-输出行数编号，忽略空白行"><a href="#参数-b-输出行数编号，忽略空白行" class="headerlink" title="参数 b  输出行数编号，忽略空白行"></a>参数 b  输出行数编号，忽略空白行</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat -<span class="selector-tag">b</span> d01.txt</span><br></pre></td></tr></table></figure><p><img src="/img/linux_command/linux_cat/cat_b.png" alt="cat 输出行编号,忽略空白行" title="输出行编号,忽略空白行"></p><h3 id="输出多个文件内容"><a href="#输出多个文件内容" class="headerlink" title="输出多个文件内容"></a>输出多个文件内容</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">cat</span> <span class="selector-tag">d01</span><span class="selector-class">.txt</span> <span class="selector-tag">d02</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure><p><img src="/img/linux_command/linux_cat/cat_file.png" alt="cat 输出多个文件内容" title="输出多个文件内容"></p><h3 id="demo-2-把文件内容写入到新文件中"><a href="#demo-2-把文件内容写入到新文件中" class="headerlink" title="demo 2  把文件内容写入到新文件中"></a>demo 2  把文件内容写入到新文件中</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat d01<span class="selector-class">.txt</span> &gt; new<span class="selector-class">.txt</span>           #将文件 d01<span class="selector-class">.txt</span> 内容放入文件 new<span class="selector-class">.txt</span> 中</span><br><span class="line">cat d01<span class="selector-class">.txt</span> d02<span class="selector-class">.txt</span> &gt; new<span class="selector-class">.txt</span>   #将文件 d01<span class="selector-class">.txt</span> 和 d02<span class="selector-class">.txt</span> 内容放入文件 new<span class="selector-class">.txt</span> 中</span><br></pre></td></tr></table></figure><p><img src="/img/linux_command/linux_cat/cat_new_file.png" alt="cat 把文件内容写入到新文件中" title="把文件内容写入到新文件中"></p><p><img src="/img/linux_command/linux_cat/cat_new_file02.png" alt="cat 把文件内容写入到新文件中02" title="把文件内容写入到新文件中02"></p><h2 id="split-切割文件"><a href="#split-切割文件" class="headerlink" title="split 切割文件"></a>split 切割文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">参数</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -a 指定长度</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -d 指定数字</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -l 按行数切割文件</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -b 按大小切割文件</span></span><br><span class="line"></span><br><span class="line">split -l 7 test.txt  # l 选项根据文件行数切割,每7行切割为一个文件</span><br></pre></td></tr></table></figure><p><img src="/img/linux_command/linux_cat/split_l.png" alt="split -l 按行数切割文件" title="按行数切割文件"></p><h3 id="指定为数字后缀切割"><a href="#指定为数字后缀切割" class="headerlink" title="指定为数字后缀切割"></a>指定为数字后缀切割</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#-d 指定为数字后缀, -<span class="selector-tag">a</span> 指定数字长度</span><br><span class="line">split -l <span class="number">7</span> test<span class="selector-class">.txt</span> -d -<span class="selector-tag">a</span> <span class="number">4</span></span><br><span class="line">#-<span class="selector-tag">a</span> 指定长度  </span><br><span class="line">split -l <span class="number">7</span> -<span class="selector-tag">a</span> <span class="number">4</span> test.txt</span><br><span class="line">#前缀为fei_</span><br><span class="line">split -l <span class="number">7</span> -<span class="selector-tag">a</span> <span class="number">4</span> test<span class="selector-class">.txt</span> fei_</span><br></pre></td></tr></table></figure><p><img src="/img/linux_command/linux_cat/split_lda.png" alt="split -lda" title="lda"></p><p><img src="/img/linux_command/linux_cat/split_la.png" alt="split -la" title="la"></p><p><img src="/img/linux_command/linux_cat/split_pre.png" alt="split 前缀" title="前缀"></p><h3 id="按大小切割文件"><a href="#按大小切割文件" class="headerlink" title="按大小切割文件"></a>按大小切割文件</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">split -<span class="selector-tag">b</span> <span class="number">100</span> test<span class="selector-class">.txt</span>  #每<span class="number">100</span>kb切割文件</span><br></pre></td></tr></table></figure><p><img src="/img/linux_command/linux_cat/split_b.png" alt="split -b 按大小切割文件" title="按大小切割文件"></p><h3 id="当用split-分割好文件后-使用cat可以把文件合并为原来的文件"><a href="#当用split-分割好文件后-使用cat可以把文件合并为原来的文件" class="headerlink" title="当用split 分割好文件后,使用cat可以把文件合并为原来的文件"></a>当用split 分割好文件后,使用cat可以把文件合并为原来的文件</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">split</span> -l <span class="number">7</span> -<span class="keyword">a</span> <span class="number">4</span> test.txt fei_   <span class="comment">#分割文件</span></span><br><span class="line">cat fei_a* &gt; bbb.txt            <span class="comment">#合并文件</span></span><br></pre></td></tr></table></figure><p><img src="/img/linux_command/linux_cat/split_cat.png" alt="分割文件&amp;&amp;合并文件" title="分割文件&amp;&amp;合并文件"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-sed 自动编辑一个或多个文件；简化对文件的反复操作；编写转换程序</title>
      <link href="/2018/05/04/ubuntu/linux_DDU_sed/"/>
      <url>/2018/05/04/ubuntu/linux_DDU_sed/</url>
      <content type="html"><![CDATA[<p>介绍：</p><p>sed 是实现对流的编辑。要修改原文件记得用参数 i 。</p><h3 id="sed命令格式"><a href="#sed命令格式" class="headerlink" title="sed命令格式"></a>sed命令格式</h3><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sed [<span class="keyword">options</span>] <span class="string">'command'</span> <span class="keyword">file</span>(s)</span><br><span class="line">sed [<span class="keyword">options</span>] -f scriptfile <span class="keyword">file</span>(s)</span><br><span class="line"></span><br><span class="line">sed 选项 <span class="string">'参数/文本中内容/新内容'</span> <span class="keyword">file</span>(s)</span><br></pre></td></tr></table></figure><h3 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">e&lt;script&gt;或--expression=&lt;script&gt;：以选项中的指定的script来处理输入的文本文件；</span></span><br><span class="line"><span class="ruby">-h或--help：显示帮助；</span></span><br><span class="line"><span class="ruby">-n或--quiet或——silent：仅显示script处理后的结果；</span></span><br><span class="line"><span class="ruby">-V或--version：显示版本信息。</span></span><br></pre></td></tr></table></figure><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a\ 在当前行下面插入文本。  没有特殊字符直接写 <span class="selector-tag">a</span> 即可</span><br><span class="line">i\ 在当前行上面插入文本。  没有特殊字符直接写 <span class="selector-tag">i</span> 即可</span><br><span class="line">d 删除，删除选择的行。</span><br><span class="line">D 删除模板块的第一行。</span><br><span class="line">s 替换指定字符</span><br><span class="line">n 读取下一个输入行，用下一个命令处理新的行而不是用第一个命令。</span><br><span class="line"><span class="selector-tag">p</span> 打印模板块的行。</span><br><span class="line"><span class="selector-tag">q</span> 退出Sed。</span><br></pre></td></tr></table></figure><h3 id="sed-替换标记"><a href="#sed-替换标记" class="headerlink" title="sed 替换标记"></a>sed 替换标记</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">g 表示行内全面替换。  </span><br><span class="line"><span class="selector-tag">p</span> 表示打印行。    </span><br><span class="line">\<span class="number">1</span> 子串匹配标记</span><br><span class="line">&amp; 已匹配字符串标记</span><br></pre></td></tr></table></figure><h3 id="sed-元字符集"><a href="#sed-元字符集" class="headerlink" title="sed 元字符集"></a>sed 元字符集</h3><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">^ 匹配行开始，如：/^sed/匹配所有以sed开头的行。</span><br><span class="line">$ 匹配行结束，如：/sed$/匹配所有以sed结尾的行。</span><br><span class="line">. 匹配一个非换行符的任意字符，如：/s.d/匹配s后接一个任意字符，最后是d。</span><br><span class="line">* 匹配0个或多个字符，如：/*sed/匹配所有模板是一个或多个空格后紧跟sed的行。</span><br><span class="line">[] 匹配一个指定范围内的字符，如/[ss]ed/匹配sed和Sed。  </span><br><span class="line">[^] 匹配一个不在指定范围内的字符，如：/[^A-RT-Z]ed/匹配不包含A-R和T-Z的一个字母开头，紧跟ed的行。</span><br><span class="line"><span class="symbol">\(</span>..<span class="symbol">\)</span> 匹配子串，保存匹配的字符，如s/<span class="symbol">\(</span>love<span class="symbol">\)</span>able/<span class="symbol">\1</span>rs，loveable被替换成lovers。</span><br><span class="line">&amp; 保存搜索字符用来替换其他字符，如s/love/**&amp;**/，love这成**love**。</span><br><span class="line"><span class="symbol">\&lt;</span> 匹配单词的开始，如:/<span class="symbol">\&lt;</span>love/匹配包含以love开头的单词的行。</span><br><span class="line"><span class="symbol">\&gt;</span> 匹配单词的结束，如/love<span class="symbol">\&gt;</span>/匹配包含以love结尾的单词的行。</span><br><span class="line">x<span class="symbol">\&#123;</span>m<span class="symbol">\&#125;</span> 重复字符x，m次，如：/0<span class="symbol">\&#123;</span>5<span class="symbol">\&#125;</span>/匹配包含5个0的行。</span><br><span class="line">x<span class="symbol">\&#123;</span>m,<span class="symbol">\&#125;</span> 重复字符x，至少m次，如：/0<span class="symbol">\&#123;</span>5,<span class="symbol">\&#125;</span>/匹配至少有5个0的行。</span><br><span class="line">x<span class="symbol">\&#123;</span>m,n<span class="symbol">\&#125;</span> 重复字符x，至少m次，不多于n次，如：/0<span class="symbol">\&#123;</span>5,10<span class="symbol">\&#125;</span>/匹配5~10个0的行。</span><br></pre></td></tr></table></figure><h2 id="demo"><a href="#demo" class="headerlink" title="demo"></a>demo</h2><h3 id="选项-i-、n-s-，-p-替换文本中指定字符串"><a href="#选项-i-、n-s-，-p-替换文本中指定字符串" class="headerlink" title="选项  i 、n ,    s  ， p 替换文本中指定字符串"></a>选项  i 、n ,    s  ， p 替换文本中指定字符串</h3><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sed -i 's/原内容/新内容/g' 文件    <span class="meta">#!!!注意这里 g 是全文替换</span></span><br><span class="line">!!!注意这个参数并没有实际修改文件的内容</span><br><span class="line">sed 's/d01.txt/dd<span class="number">0011</span>.txt/' d01.txt      <span class="meta">#对流的修改，没有真实修改文件内容</span></span><br><span class="line">sed -i 's/d01.txt/dd<span class="number">0011</span>.txt/' d01.txt    <span class="meta"># 真实修改文件内容</span></span><br><span class="line"></span><br><span class="line">选项 n 仅显示script处理后的结果 , p 打印模板块的行</span><br><span class="line">sed -n 's/d01.txt/dd<span class="number">0011</span>.txt/p' d01.txt    <span class="meta">#打印发生修改的行，没有真实修改文件</span></span><br><span class="line"></span><br><span class="line">sed 's/d01.txt/dd<span class="number">0011</span>.txt/' d01.txt &gt; d01.txt.tmp   <span class="meta">#保存为临时文件</span></span><br><span class="line">mv d01.txt.tmp d01.txt   <span class="meta">#确认临时文件修改内容争取后替换原文件</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_sed/sed_s.png" alt="sed 参数s" title="sed 参数s"></p><p><img src="/img/ubuntu/linux_command/linux_sed/sed_s.png" alt="sed 参数n" title="sed 参数n"></p><h3 id="定界符"><a href="#定界符" class="headerlink" title="定界符"></a>定界符</h3><p>以上命令字符串中使用 / 在 sed 中作为定界符使用，也可以使用任意的定界符</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'s:d01.txt:dd0011.txt:'</span> d01<span class="selector-class">.txt</span>      #对流的修改，没有真实修改文件内容</span><br><span class="line"></span><br><span class="line">在对文本中含有特殊字符的时候可以考虑使用其他定界符，比如，原内容或者新内容中包含（<span class="string">"/"</span> <span class="string">"#"</span>）</span><br><span class="line">sed -<span class="selector-tag">i</span> <span class="string">'s:原内容:新内容:g'</span> 文件名字  sed <span class="string">'s:d01.txt:dd0011.txt:'</span> d01.txt</span><br><span class="line">sed -<span class="selector-tag">i</span> <span class="string">'s,原内容,新内容,g'</span> 文件名字  sed <span class="string">'s,d01.txt,dd0011.txt,'</span> d01.txt</span><br><span class="line">sed -<span class="selector-tag">i</span> <span class="string">'s#原内容#新内容#g'</span> 文件名字  sed <span class="string">'s#d01.txt#dd0011.txt#'</span> d01.txt</span><br><span class="line">sed -<span class="selector-tag">i</span> <span class="string">'s~原内容~新内容~g'</span> 文件名字  sed <span class="string">'s~d01.txt~dd0011.txt~'</span> d01.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_sed/sed_01.png" alt="sed 定界符" title="sed 定界符"></p><h3 id="命令-d-删除操作"><a href="#命令-d-删除操作" class="headerlink" title="命令 d  删除操作"></a>命令 d  删除操作</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">删除空白行</span><br><span class="line">sed <span class="string">'/^$/d'</span> d01<span class="selector-class">.txt</span>     [ 对流的删除 ]</span><br><span class="line">sed -<span class="selector-tag">i</span> <span class="string">'/^$/d'</span> d01<span class="selector-class">.txt</span>  [ 真实删除空白行后，保存 ]</span><br><span class="line"></span><br><span class="line">删除文件的第<span class="number">2</span>行</span><br><span class="line">sed <span class="string">'2d'</span> d01.txt</span><br><span class="line"></span><br><span class="line">删除文件的第<span class="number">2</span>行到末尾所有行：</span><br><span class="line">sed <span class="string">'2,$d'</span> d01<span class="selector-class">.txt</span> </span><br><span class="line"></span><br><span class="line">删除文件的最后一行</span><br><span class="line">sed <span class="string">'$d'</span> d01.txt</span><br><span class="line"></span><br><span class="line">删除文件中所有开头是 hello  的行</span><br><span class="line">sed <span class="string">'/^hello/d'</span> d01.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_sed/sed_d.png" alt="sed 删除" title="sed 删除"></p><h3 id="已匹配字符串标记-amp-，注意这个符号"><a href="#已匹配字符串标记-amp-，注意这个符号" class="headerlink" title="已匹配字符串标记  &amp; ，注意这个符号"></a>已匹配字符串标记  &amp; ，注意这个符号</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">正则表达式 \w\+ 匹配每一个单词，使用 [&amp;] 替换它，&amp; 对应于之前所匹配到的单词</span><br><span class="line">sed <span class="string">'s/\w\+/[&amp;]/g'</span> d01<span class="selector-class">.txt</span>   [ 使用 &amp; 替换]</span><br><span class="line">sed <span class="string">'s/\w\+/[]/g'</span> d01<span class="selector-class">.txt</span>    [ 空白 ]</span><br><span class="line"></span><br><span class="line">sed -<span class="selector-tag">i</span> <span class="string">'s/\w\+/[&amp;]/g'</span> d01<span class="selector-class">.txt</span>    [真是替换，并保存]</span><br><span class="line"></span><br><span class="line">所有以 hello 开头的行都会被替换成他自己加 hi </span><br><span class="line">sed <span class="string">'s/^hello/&amp;hi/'</span> d01.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_sed/sed_&amp;.png" alt="sed 替换" title="sed 替换"></p><p><img src="/img/ubuntu/linux_command/linux_sed/sed_&amp;02.png" alt="sed 替换" title="sed 替换"></p><h3 id="字符串匹配标记-1"><a href="#字符串匹配标记-1" class="headerlink" title="字符串匹配标记   \1"></a>字符串匹配标记   \1</h3><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="keyword">this</span> <span class="keyword">is</span> digit <span class="number">6</span> <span class="keyword">in</span> a number | sed <span class="string">'s/digit \([0-9]\)/\1/'</span></span><br><span class="line">echo <span class="keyword">this</span> <span class="keyword">is</span> digit <span class="number">6</span> <span class="keyword">in</span> a number | sed <span class="string">'s/digit \([0-9]\)/\1test/'</span></span><br><span class="line"></span><br><span class="line">echo <span class="keyword">this</span> <span class="keyword">is</span> test <span class="number">6</span> | sed <span class="string">'s/test \([0-9]\)/\1/'</span></span><br><span class="line">echo <span class="keyword">this</span> <span class="keyword">is</span> test <span class="number">6</span> | sed <span class="string">'s/test \([0-9]\)/\1test/'</span></span><br></pre></td></tr></table></figure><p>命令中 digit 6，被替换成了 6。样式匹配到的子串是 7，(..) 用于匹配子串，对于匹配到的第一个子串就标记为 \1，依此类推匹配到的第二个结果就是 \2，例如：</p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo aaa BBB | sed 's/<span class="symbol">\(</span>[a-z]<span class="symbol">\+</span><span class="symbol">\)</span> <span class="symbol">\(</span>[A-Z]<span class="symbol">\+</span><span class="symbol">\)</span>/<span class="symbol">\2</span> <span class="symbol">\1</span>/'</span><br><span class="line">echo aaa BBB | sed 's/<span class="symbol">\(</span>[a-z]<span class="symbol">\+</span><span class="symbol">\)</span> <span class="symbol">\(</span>[A-Z]<span class="symbol">\+</span><span class="symbol">\)</span>/<span class="symbol">\1</span> <span class="symbol">\2</span>/'</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_sed/sed_str_mark.png" alt="sed 字符串标记" title="sed 字符串标记"></p><figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hi 被标记为 1 ,所有 hiLinux 会被替换成 hiUbuntu, 并打印出来</span><br><span class="line">sed -n 's/<span class="symbol">\(</span>hi<span class="symbol">\)</span>Linux/<span class="symbol">\1</span>Ubuntu/p' d01.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_sed/sed_str_mark02.png" alt="sed 字符串标记" title="sed 字符串标记"></p><h3 id="选项-e-允许在同一行里执行多条命令"><a href="#选项-e-允许在同一行里执行多条命令" class="headerlink" title="选项 e 允许在同一行里执行多条命令"></a>选项 e 允许在同一行里执行多条命令</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -e <span class="string">'1,2d'</span> -e <span class="string">'s/d01.txt/dd0011.txt/'</span>  d01<span class="selector-class">.txt</span>   </span><br><span class="line"></span><br><span class="line">第一条命令，删除<span class="number">1</span>到<span class="number">2</span>行，第二条命令用 dd0011<span class="selector-class">.txt</span> 替换 d01.txt。 这两条命令的前后顺序有影响，如果两个命令都是替换命令，那么第一个替换命令将影响第二个替换命令的结果</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_sed/sed_e.png" alt="sed 多条命令执行" title="sed 多条命令执行"></p><h3 id="退出-命令：-q"><a href="#退出-命令：-q" class="headerlink" title="退出  命令： q"></a>退出  命令： q</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">打印挖第<span class="number">3</span>行后，退出sed</span><br><span class="line">sed '<span class="number">3</span>q' d01.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_sed/sed_q.png" alt="sed 退出" title="sed 退出"></p><h3 id="打印奇数行或偶数行"><a href="#打印奇数行或偶数行" class="headerlink" title="打印奇数行或偶数行"></a>打印奇数行或偶数行</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'p;n'</span> d01<span class="selector-class">.txt</span>  #奇数行</span><br><span class="line">sed -n <span class="string">'n;p'</span> d01<span class="selector-class">.txt</span>  #偶数行</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line">sed -n <span class="string">'1~2p'</span> d01<span class="selector-class">.txt</span>  #奇数行</span><br><span class="line">sed -n <span class="string">'2~2p'</span> d01<span class="selector-class">.txt</span>  #偶数行</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_sed/sed_pn.png" alt="sed 奇数偶数行" title="sed 奇数偶数行"></p><h3 id="插入新一行内容"><a href="#插入新一行内容" class="headerlink" title="插入新一行内容"></a>插入新一行内容</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'4a\我是新添加行内容'</span> d01<span class="selector-class">.txt</span>    #在第<span class="number">4</span>行后插入下一行</span><br><span class="line">sed <span class="string">'4a我是新添加行内容'</span> d01<span class="selector-class">.txt</span>     #在第<span class="number">4</span>行后插入下一行,[没有特殊字符不用加 \ 也行]</span><br><span class="line">sed <span class="string">'/hello/a\我是新添加行内容'</span> d01<span class="selector-class">.txt</span>  #在所有包含 hello 行后面插入下一行</span><br><span class="line"></span><br><span class="line">sed <span class="string">'4i\我是新添加行内容'</span> d01<span class="selector-class">.txt</span>    #在第<span class="number">4</span>行前插入下一行</span><br><span class="line">sed <span class="string">'4i我是新添加行内容'</span> d01<span class="selector-class">.txt</span>     #在第<span class="number">4</span>行前插入下一行,[没有特殊字符不用加 \ 也行]</span><br><span class="line">sed <span class="string">'/hello/i\我是新添加行内容'</span> d01<span class="selector-class">.txt</span>  #在所有包含 hello 行前面面插入下一行</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_sed/sed_insert.png" alt="sed 插入下一行" title="sed 插入下一行"></p><h3 id="替换某一行内容"><a href="#替换某一行内容" class="headerlink" title="替换某一行内容"></a>替换某一行内容</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed  <span class="string">"1s/.*/第一行全部替换新内容/"</span> d01<span class="selector-class">.txt</span>    #把第一行内容全部替换</span><br><span class="line">sed  <span class="string">"2s/.*/第二行全部替换新内容/"</span> d01<span class="selector-class">.txt</span>    #把第二行内容全部替换</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_sed/sed_line_replace.png" alt="sed 替换具体的某一行" title="sed 替换具体的某一行"></p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">'s/d01.txt/dd0011.txt/'</span> d01.txt    <span class="comment"># 真实修改文件内容 用参数 i</span></span><br><span class="line"></span><br><span class="line">某些转义符</span><br><span class="line"><span class="string">\n</span>  表示新的一行</span><br><span class="line"><span class="string">\r</span>  表示回车</span><br><span class="line"><span class="string">\t</span>  表示水平制表符</span><br><span class="line"><span class="string">\v</span>  表示垂直制表符</span><br><span class="line"><span class="string">\b</span>  表示后退符</span><br><span class="line"><span class="string">\a</span>  表示<span class="string">"alert"</span>(蜂鸣或者闪烁)</span><br><span class="line"><span class="string">\0xx</span> 转换为八进制的ASCII码</span><br><span class="line"></span><br><span class="line"><span class="comment">#显示文件中的指定行内容,显示index.php 中的第2行到第5行内容</span></span><br><span class="line">sed -n <span class="string">'2,5p'</span> index.php</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title></title>
      <link href="/2018/05/02/ubuntu/linux_DDU_grep/"/>
      <url>/2018/05/02/ubuntu/linux_DDU_grep/</url>
      <content type="html"><![CDATA[<p>title:    -grep  查找文件里符合条件的字符串</p><h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep  <span class="string">[选项]</span>  <span class="string">[文件]</span></span><br></pre></td></tr></table></figure><h3 id="命令参数"><a href="#命令参数" class="headerlink" title="命令参数"></a>命令参数</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">a 不要忽略二进制数据。</span></span><br><span class="line"><span class="ruby">-A&lt;显示列数&gt; 除了显示符合范本样式的那一行之外，并显示该行之后的内容。</span></span><br><span class="line"><span class="ruby">-b 在显示符合范本样式的那一行之外，并显示该行之前的内容。</span></span><br><span class="line"><span class="ruby">-c 计算符合范本样式的列数。</span></span><br><span class="line"><span class="ruby">-C&lt;显示列数&gt;或-&lt;显示列数&gt;  除了显示符合范本样式的那一列之外，并显示该列之前后的内容。</span></span><br><span class="line"><span class="ruby">-d&lt;进行动作&gt; 当指定要查找的是目录而非文件时，必须使用这项参数，否则grep命令将回报信息并停止动作。</span></span><br><span class="line"><span class="ruby">-e&lt;范本样式&gt; 指定字符串作为查找文件内容的范本样式。</span></span><br><span class="line"><span class="ruby">-E 将范本样式为延伸的普通表示法来使用，意味着使用能使用扩展正则表达式。</span></span><br><span class="line"><span class="ruby">-f&lt;范本文件&gt; 指定范本文件，其内容有一个或多个范本样式，让grep查找符合范本条件的文件内容，格式为每一列的范本样式。</span></span><br><span class="line"><span class="ruby">-F 将范本样式视为固定字符串的列表。</span></span><br><span class="line"><span class="ruby">-G 将范本样式视为普通的表示法来使用。</span></span><br><span class="line"><span class="ruby">-h 在显示符合范本样式的那一列之前，不标示该列所属的文件名称。</span></span><br><span class="line"><span class="ruby">-H 在显示符合范本样式的那一列之前，标示该列的文件名称。</span></span><br><span class="line"><span class="ruby">-i 忽略字符大小写的差别。</span></span><br><span class="line"><span class="ruby">-l 列出文件内容符合指定的范本样式的文件名称。</span></span><br><span class="line"><span class="ruby">-L 列出文件内容不符合指定的范本样式的文件名称。</span></span><br><span class="line"><span class="ruby">-n 在显示符合范本样式的那一列之前，标示出该列的编号。</span></span><br><span class="line"><span class="ruby">-q 不显示任何信息。</span></span><br><span class="line"><span class="ruby">-R/-r 此参数的效果和指定“-d recurse”参数相同。</span></span><br><span class="line"><span class="ruby">-s 不显示错误信息。</span></span><br><span class="line"><span class="ruby">-v 反转查找。</span></span><br><span class="line"><span class="ruby">-w 只显示全字符合的列。</span></span><br><span class="line"><span class="ruby">-x 只显示全列符合的列。</span></span><br><span class="line"><span class="ruby">-y 此参数效果跟“-i”相同。</span></span><br><span class="line"><span class="ruby">-o 只输出文件中匹配到的部分。</span></span><br></pre></td></tr></table></figure><h3 id="在文件中搜索一个单词，命令会返回一个包含-PHP-的文本【行或者段落】"><a href="#在文件中搜索一个单词，命令会返回一个包含-PHP-的文本【行或者段落】" class="headerlink" title="在文件中搜索一个单词，命令会返回一个包含 PHP 的文本【行或者段落】"></a>在文件中搜索一个单词，命令会返回一个包含 PHP 的文本【行或者段落】</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">grep</span> <span class="selector-tag">PHP</span> <span class="selector-tag">aaa</span><span class="selector-class">.txt</span></span><br><span class="line"><span class="selector-tag">grep</span> <span class="selector-tag">php</span> <span class="selector-tag">aaa</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_grep/grep.png" alt="grep 文件中搜索单词" title="grep 搜索"></p><h3 id="多个文件中搜索，命令会返回一个包含-PHP-的文本【行或者段落】"><a href="#多个文件中搜索，命令会返回一个包含-PHP-的文本【行或者段落】" class="headerlink" title="多个文件中搜索，命令会返回一个包含 PHP 的文本【行或者段落】"></a>多个文件中搜索，命令会返回一个包含 PHP 的文本【行或者段落】</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">grep</span> <span class="selector-tag">php</span> <span class="selector-tag">aaa</span><span class="selector-class">.txt</span> <span class="selector-tag">bbb</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_grep/grep_02.png" alt="grep 文件中搜索单词" title="grep 搜索"></p><h3 id="选项-v-输出除-xxxxxx-之外的所有行或者段落"><a href="#选项-v-输出除-xxxxxx-之外的所有行或者段落" class="headerlink" title="选项 -v 输出除 xxxxxx  之外的所有行或者段落"></a>选项 -v 输出除 xxxxxx  之外的所有行或者段落</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">grep</span> <span class="selector-tag">-v</span> <span class="selector-tag">php</span> <span class="selector-tag">aaa</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_grep/grep_03.png" alt="grep 文件中搜索单词" title="grep 搜索"></p><h3 id="选项-E-使用正则表达式"><a href="#选项-E-使用正则表达式" class="headerlink" title="选项 -E  使用正则表达式"></a>选项 -E  使用正则表达式</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">grep</span> <span class="selector-tag">-E</span> "<span class="selector-attr">[1-9]</span>+" <span class="selector-tag">aaa</span><span class="selector-class">.txt</span>  或者</span><br><span class="line"><span class="selector-tag">egrep</span> "<span class="selector-attr">[1-9]</span>+" <span class="selector-tag">aaa</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_grep/grep_E.png" alt="grep 正则" title="grep 正则"></p><h3 id="选项-o-只输出文件中匹配到的部分"><a href="#选项-o-只输出文件中匹配到的部分" class="headerlink" title="选项  -o 只输出文件中匹配到的部分"></a>选项  -o 只输出文件中匹配到的部分</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">grep</span> <span class="selector-tag">-o</span> <span class="selector-tag">php</span> <span class="selector-tag">aaa</span><span class="selector-class">.txt</span></span><br><span class="line"><span class="selector-tag">grep</span> <span class="selector-tag">-o</span> <span class="selector-tag">PHP</span> <span class="selector-tag">aaa</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_grep/grep_o.png" alt="grep 输出匹配部分" title="grep 输出匹配部分"></p><h3 id="选项-c-统计文本或者文本中包含匹配字符串的行数-选项-n"><a href="#选项-c-统计文本或者文本中包含匹配字符串的行数-选项-n" class="headerlink" title="选项  -c  统计文本或者文本中包含匹配字符串的行数[  选项 -n   ]"></a>选项  -c  统计文本或者文本中包含匹配字符串的行数[  选项 -n   ]</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">统计</span><br><span class="line">grep -c <span class="string">"PHP"</span> aaa.txt</span><br><span class="line"></span><br><span class="line">选项 -n 输出包含匹配字符串的行数</span><br><span class="line">grep -n <span class="string">"PHP"</span> aaa.txt</span><br><span class="line">grep -n <span class="string">"php"</span> aaa.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_grep/grep_c.png" alt="grep 统计匹配行数" title="grep 统计匹配行数"></p><p><img src="/img/ubuntu/linux_command/linux_grep/grep_n.png" alt="grep 输出匹配行数" title="grep 输出匹配行数"></p><h3 id="选项-l-搜索多个文件并查找匹配文本在那个文件中"><a href="#选项-l-搜索多个文件并查找匹配文本在那个文件中" class="headerlink" title="选项 -l  搜索多个文件并查找匹配文本在那个文件中"></a>选项 -l  搜索多个文件并查找匹配文本在那个文件中</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep -l php aaa<span class="selector-class">.txt</span> bbb.txt</span><br><span class="line">grep -l php *.txt</span><br><span class="line">grep -l PHP *.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_grep/grep_l.png" alt="grep 文件中搜索" title="grep 文件中搜索"></p><h3 id="选项-r-递归搜索文件"><a href="#选项-r-递归搜索文件" class="headerlink" title="选项  -r 递归搜索文件"></a>选项  -r 递归搜索文件</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grep</span> PHP . -r         [ . 表示当前目录]</span><br><span class="line"><span class="keyword">grep</span> PHP . -r -n</span><br><span class="line"><span class="keyword">grep</span> PHP <span class="regexp">/home/</span>www<span class="regexp">/test -r -n     [ 指定目录 ]</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_grep/grep_r.png" alt="grep 递归搜索" title="grep 递归搜索"></p><h3 id="选项-i-忽略大小写搜索文件"><a href="#选项-i-忽略大小写搜索文件" class="headerlink" title="选项 -i 忽略大小写搜索文件"></a>选项 -i 忽略大小写搜索文件</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -<span class="selector-tag">i</span> php  aaa.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_grep/grep_i.png" alt="grep 忽略大小写搜索" title="grep 忽略大小写搜索"></p><h3 id="选项-e-扩展多个匹配样式"><a href="#选项-e-扩展多个匹配样式" class="headerlink" title="选项 -e 扩展多个匹配样式"></a>选项 -e 扩展多个匹配样式</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">grep</span> <span class="selector-tag">-e</span> <span class="selector-tag">php</span> <span class="selector-tag">-e</span> <span class="selector-tag">The</span> <span class="selector-tag">aaa</span><span class="selector-class">.txt</span>  <span class="selector-attr">[ 搜索 PHP、搜索 The ]</span></span><br></pre></td></tr></table></figure><h3 id="选项-q-静默输出，一般配合-if-逻辑判断"><a href="#选项-q-静默输出，一般配合-if-逻辑判断" class="headerlink" title="选项 -q  静默输出，一般配合 if  逻辑判断"></a>选项 -q  静默输出，一般配合 if  逻辑判断</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>  grep -q hello aaa.txt ; <span class="keyword">then</span> <span class="built_in">echo</span> yes;<span class="keyword">else</span> <span class="built_in">echo</span> no; <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">if</span>  grep -q php aaa.txt ; <span class="keyword">then</span> <span class="built_in">echo</span> yes;<span class="keyword">else</span> <span class="built_in">echo</span> no; <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">grep -q php aaa.php</span><br><span class="line">grep -q hello aaa.php</span><br><span class="line"></span><br><span class="line">不会输出任何内容，命令运行成功返回 0 ，失败返回非 0 值，一般配合逻辑判断使用</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_grep/grep_q.png" alt="grep 一般配合逻辑判断" title="grep 一般配合逻辑判断"></p><h3 id="选项-A-B-C-显示匹配结果之后行、之前行、之前之后行"><a href="#选项-A-B-C-显示匹配结果之后行、之前行、之前之后行" class="headerlink" title="选项   -A   -B   -C   显示匹配结果之后行、之前行、之前之后行"></a>选项   -A   -B   -C   显示匹配结果之后行、之前行、之前之后行</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">测试文件 aaa.php 内容如下，注意看行号：</span><br><span class="line">  <span class="number">1</span> I am aaa.php</span><br><span class="line">  <span class="number">2</span> <span class="number">222</span></span><br><span class="line">  <span class="number">3</span> hello world <span class="number">3</span> line</span><br><span class="line">  <span class="number">4</span> <span class="number">444</span></span><br><span class="line">  <span class="number">5</span> hello  php  grep_test</span><br><span class="line">  <span class="number">6</span> <span class="number">666</span></span><br><span class="line">  <span class="number">7</span> hello world <span class="number">7</span> line</span><br><span class="line">  <span class="number">8</span> <span class="number">888</span></span><br><span class="line">  <span class="number">9</span> hello world</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">grep -A1 -n  php aaa.php   [ <span class="number">1</span>代表显示多少行，-n 表示显示行号]</span><br><span class="line">显示匹配结果之后 <span class="number">1</span> 行</span><br><span class="line">grep -A1 -n  php aaa.php   [ 匹配结果之后的<span class="number">1</span>行 ]</span><br><span class="line">grep -B1 -n  php aaa.php   [ 匹配结果之前的<span class="number">1</span>行 ]</span><br><span class="line">grep -C1 -n  php aaa.php   [ 匹配结果之前的<span class="number">1</span>行和之后一行]</span><br><span class="line"></span><br><span class="line">grep -C1 -n  php aaa.php</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_grep/grep_ABC.png" alt="grep 前后" title="grep 前后"></p><p>其他：</p><p>grep家族总共有三个：grep，egrep，fgrep。</p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-ls 显示目录列表</title>
      <link href="/2018/05/02/ubuntu/linux_DDU_ls/"/>
      <url>/2018/05/02/ubuntu/linux_DDU_ls/</url>
      <content type="html"><![CDATA[<h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls[选项][文件][目录]</span><br></pre></td></tr></table></figure><h3 id="命令参数"><a href="#命令参数" class="headerlink" title="命令参数"></a>命令参数</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">-<span class="ruby">a：显示所有档案及目录（ls内定将档案名或目录名称为“.”的视为影藏，不会列出）；</span></span><br><span class="line"><span class="ruby">-A：显示除影藏文件“.”和“..”以外的所有文件列表；</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">-c：与“-lt”选项连用时，按照文件状态时间排序输出目录内容，排序的依据是文件的索引节点中的ctime字段。与“-l”选项连用时，则排序的一句是文件的状态改变时间；</span></span><br><span class="line"><span class="ruby">-C：多列显示输出结果。这是默认选项；</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">-l：与“-C”选项功能相反，所有输出信息用单列格式输出，不输出为多列；以长格式显示目录下的内容列表。输出的信息从     左到右依次包括文件名，文件类型、权限模式、硬连接数、所有者、组、文件大小和文件的最后修改时间等；</span></span><br><span class="line"><span class="ruby">-L：如果遇到性质为符号链接的文件或目录，直接列出该链接所指向的原始文件或目录；</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">-f：此参数的效果和同时指定“aU”参数相同，并关闭“lst”参数的效果；</span></span><br><span class="line"><span class="ruby">-F：在每个输出项后追加文件的类型标识符，具体含义：“*”表示具有可执行权限的普通文件，“/”表示目录，“@”表示符号链接，“<span class="params">|”表示命令管道FIFO，“=”表示sockets套接字。当文件为普通文件时，不输出任何标识符；</span></span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">-r：以文件名反序排列并输出目录内容列表；</span></span><br><span class="line"><span class="ruby">-R：递归处理，将指定目录下的所有文件及子目录一并处理；</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">--full-time：列出完整的日期与时间；  等价于full-iso</span></span><br><span class="line"><span class="ruby">--time-style=long-iso   显示时间风格</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">/<span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">/  以下不经常用到  /</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">//</span><span class="regexp">/</span></span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">-b：将文件中的不可输出的字符以反斜线“”加字符编码的方式输出；</span></span><br><span class="line"><span class="ruby">-d：仅显示目录名，而不显示目录下的内容列表。显示符号链接文件本身，而不显示其所指向的目录列表；</span></span><br><span class="line"><span class="ruby">-i：显示文件索引节点号（inode）。一个索引节点代表一个文件；</span></span><br><span class="line"><span class="ruby">-k：以KB（千字节）为单位显示文件大小；</span></span><br><span class="line"><span class="ruby">-m：用“,”号区隔每个文件和目录的名称；</span></span><br><span class="line"><span class="ruby">-n：以用户识别码和群组识别码替代其名称；</span></span><br><span class="line"><span class="ruby">-s：显示文件和目录的大小，以区块为单位；</span></span><br><span class="line"><span class="ruby">-t：用文件和目录的更改时间排序；</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">--color[=WHEN]：使用不同的颜色高亮显示不同类型的。</span></span><br></pre></td></tr></table></figure><h3 id="选项-a-、c-、-l-显示目录"><a href="#选项-a-、c-、-l-显示目录" class="headerlink" title="选项  a  、c 、 l  显示目录"></a>选项  a  、c 、 l  显示目录</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ls</span> -a</span><br><span class="line"><span class="keyword">ls</span> -A</span><br><span class="line"></span><br><span class="line"><span class="keyword">ls</span> -c</span><br><span class="line"><span class="keyword">ls</span> -C  [ 大写 ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">ls</span> -l  [常用这个]</span><br><span class="line"><span class="keyword">ls</span> -L</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_ls/ls_acl.png" alt="linux ls acl" title="linux ls acl"></p><h3 id="选项-full-time"><a href="#选项-full-time" class="headerlink" title="选项  full-time"></a>选项  full-time</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ls</span> <span class="params">--full-time</span></span><br><span class="line"><span class="keyword">ls</span> -l <span class="params">--time-style=long-iso</span></span><br><span class="line"><span class="keyword">ls</span> -l <span class="params">--time-style=local</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_ls/ls_full-time.png" alt="linux ls 显示详细时间" title="linux ls full-time"></p><p><img src="/img/ubuntu/linux_command/linux_ls/time_style.png" alt="ls time-style" title="ls time-style"></p><h3 id="排除某些文件显示"><a href="#排除某些文件显示" class="headerlink" title="排除某些文件显示"></a>排除某些文件显示</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ls</span> *<span class="string">.txt</span>|egrep -v '<span class="params">(*.md)</span>'</span><br><span class="line"><span class="keyword">ls</span> *<span class="string">.txt</span>|egrep -v *<span class="string">.md</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ls</span> | grep -v aaa.txt</span><br><span class="line"><span class="keyword">ls</span> *<span class="string">.txt</span> | grep -v aaa.txt</span><br><span class="line"><span class="keyword">ls</span> *<span class="string">.txt</span> | egrep -v aaa.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_ls/ls_other_01.png" alt="linux rm 排除指定文件显示" title="linux ls 排除指定文件显示"></p><p><img src="/img/ubuntu/linux_command/linux_ls/ls_other_02.png" alt="linux rm 排除指定文件显示" title="linux ls 排除指定文件显示"></p><h3 id="显示某一目录下文件，显示-www-目录下文件"><a href="#显示某一目录下文件，显示-www-目录下文件" class="headerlink" title="显示某一目录下文件，显示  www 目录下文件"></a>显示某一目录下文件，显示  www 目录下文件</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ls</span> -l <span class="string">/www</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_ls/ls_other_03.png" alt="显示 www目录下文件" title="显示 www目录下文件"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-rm  删除文件或目录</title>
      <link href="/2018/04/29/ubuntu/linux_DDU_rm/"/>
      <url>/2018/04/29/ubuntu/linux_DDU_rm/</url>
      <content type="html"><![CDATA[<h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm <span class="string">[选项]</span> 文件…</span><br></pre></td></tr></table></figure><h3 id="命令参数"><a href="#命令参数" class="headerlink" title="命令参数"></a>命令参数</h3><p>​    -d：   直接把欲删除的目录的硬连接数据删除成0，删除该目录；<br>​    -f, –force       忽略不存在的文件，从不给出提示。<br>​    -i, –interactive    进行交互式删除<br>​    -r, -R, –recursive       指示rm将参数中列出的全部目录和子目录均递归地删除。<br>​    -v, –verbose        详细显示进行的步骤<br>​       –help               显示此帮助信息并退出<br>​       –version          输出版本信息并退出</p><h3 id="选项-i-交互式删除"><a href="#选项-i-交互式删除" class="headerlink" title="选项  i  交互式删除"></a>选项  i  交互式删除</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -<span class="selector-tag">i</span> aaa<span class="selector-class">.txt</span> baa.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_rm/rm_i.png" alt="linux rm 交互式删除" title="linux rm 交互式删除"></p><h3 id="选项-r-递归删除目录及子目录中文件"><a href="#选项-r-递归删除目录及子目录中文件" class="headerlink" title="选项  r  递归删除目录及子目录中文件"></a>选项  r  递归删除目录及子目录中文件</h3><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">rm</span> -r aaa/</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_rm/rm_r.png" alt="linux rm 递归删除" title="linux rm 递归删除"></p><h3 id="选项-f-直接删除没有任何提示"><a href="#选项-f-直接删除没有任何提示" class="headerlink" title="选项  f  直接删除没有任何提示"></a>选项  f  直接删除没有任何提示</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">rm</span> <span class="selector-tag">-f</span> <span class="selector-tag">bbaa</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_rm/rm_f.png" alt="linux rm 直接删除" title="linux rm 直接删除"></p><h3 id="选项-v-详细显示进行的步骤"><a href="#选项-v-详细显示进行的步骤" class="headerlink" title="选项  v  详细显示进行的步骤"></a>选项  v  详细显示进行的步骤</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">rm</span> <span class="selector-tag">-v</span> <span class="selector-tag">bbb</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_rm/rm_v.png" alt="linux rm  详细显示进行的步骤" title="linux rm  详细显示进行的步骤"></p><h3 id="选项-i-交互式删除，某一类文件"><a href="#选项-i-交互式删除，某一类文件" class="headerlink" title="选项  i  交互式删除，某一类文件"></a>选项  i  交互式删除，某一类文件</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -<span class="selector-tag">i</span> *aa.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_rm/rm_i_regex01.png" alt="linux rm 交互式删除" title="linux rm 交互式删除"></p><h3 id="排除指定文件删除"><a href="#排除指定文件删除" class="headerlink" title="排除指定文件删除"></a>排除指定文件删除</h3><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">删除所有 txt 结尾的文件，除了 aaa.txt </span><br><span class="line"></span><br><span class="line">rm `ls *.txt|egrep -v aaa.txt`</span><br><span class="line"></span><br><span class="line">rm `ls *.txt|egrep -v <span class="string">'(aaa.txt|bbb.txt|ccc.txt)'</span>`</span><br><span class="line"></span><br><span class="line">rm `ls *.txt|egrep -v <span class="string">'(aaa.*)'</span>`</span><br><span class="line"></span><br><span class="line">rm `ls *.txt|egrep -v <span class="string">'(*.md)'</span>`</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_rm/rm_other_01.png" alt="linux rm 排除指定文件删除" title="linux rm 排除指定文件删除"></p><p><img src="/img/ubuntu/linux_command/linux_rm/rm_other_02.png" alt="linux rm 排除指定文件删除" title="linux rm 排除指定文件删除"></p><p><img src="/img/ubuntu/linux_command/linux_rm/rm_other_04.png" alt="linux rm 排除指定文件删除" title="linux rm 排除指定文件删除"></p><p>rm命令可以用 -i 选项，这个选项在使用文件扩展名字符删除多个文件时特别有用</p><p>………………………………unlink 命令删除文件，不能删除目录…………………………</p><p>demo: 删除文件 test02.txt </p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">unlink</span> <span class="selector-tag">test02</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_rm/unlink.png" alt="unlink 删除文件" title="unlink 删除文件"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu16 -php7 extension imagick</title>
      <link href="/2018/04/20/ubuntu/php_extension_imagick/"/>
      <url>/2018/04/20/ubuntu/php_extension_imagick/</url>
      <content type="html"><![CDATA[<h3 id="Extension-之-imagick"><a href="#Extension-之-imagick" class="headerlink" title="Extension 之 imagick"></a>Extension 之 imagick</h3><p>温馨提示: 在安装过程中出现错误，一般是由于缺少编译工具包导致，可根据提示参照第一步安装相应的工具包即可</p><h3 id="安装-ImageMagick"><a href="#安装-ImageMagick" class="headerlink" title="安装 ImageMagick"></a>安装 ImageMagick</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wget <span class="symbol">http:</span>/<span class="regexp">/www.imagemagick.org/download</span><span class="regexp">/ImageMagick.tar.gz</span></span><br><span class="line"><span class="regexp">解压到指定目录【我这里是 /data</span><span class="regexp">/server/other</span>_component/】</span><br><span class="line">tar -zxvf ImageMagick.tar.gz -C /data/server/other_component/</span><br><span class="line">cd ImageMagick-<span class="number">7.0</span>.<span class="number">7</span>-<span class="number">28</span>/</span><br><span class="line">./configure --prefix=<span class="regexp">/data/server</span><span class="regexp">/other_component/</span>ImageMagick-<span class="number">7.0</span>.<span class="number">7</span>-<span class="number">28</span> </span><br><span class="line">make &amp;&amp; make install</span><br><span class="line"></span><br><span class="line">export PKG_CONFIG_PATH=<span class="regexp">/data/server</span><span class="regexp">/other_component/</span>ImageMagick-<span class="number">7.0</span>.<span class="number">7</span>-<span class="number">28</span>/<span class="class"><span class="keyword">lib</span>/<span class="title">pkgconfig</span>/  <span class="comment">#设置环境变量 【重启电脑执行下一步】</span></span></span><br></pre></td></tr></table></figure><h3 id="安装-imagick"><a href="#安装-imagick" class="headerlink" title="安装 imagick"></a>安装 imagick</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">wget <span class="symbol">http:</span>/<span class="regexp">/pecl.php.net/get</span><span class="regexp">/imagick-3.4.3.tgz</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">解压到指定目录【我这里是 /data</span><span class="regexp">/server/other</span>_component/】</span><br><span class="line">tar -zxvf imagick-<span class="number">3.4</span>.<span class="number">3</span>.tgz -C /data/server/other_component/</span><br><span class="line">cd imagick-<span class="number">3.4</span>.<span class="number">3</span>/</span><br><span class="line"></span><br><span class="line">/data/server/php7/bin/phpize   <span class="comment">#用phpize生成configure配置文件，[找到你PHP安装位置中的phpsize]</span></span><br><span class="line"></span><br><span class="line">./configure \</span><br><span class="line">--<span class="keyword">with</span>-php-config=<span class="regexp">/data/server</span><span class="regexp">/php7/bin</span><span class="regexp">/php-config \</span></span><br><span class="line"><span class="regexp">--with-imagick=/data</span><span class="regexp">/server/other</span>_component/ImageMagick-<span class="number">7.0</span>.<span class="number">7</span>-<span class="number">28</span> </span><br><span class="line"></span><br><span class="line">make &amp; make install</span><br><span class="line"></span><br><span class="line">安装完成后提示如下，表示安装成功：</span><br><span class="line">root@<span class="symbol">www:</span>/data/server/other_component/phpredis-<span class="number">4.0</span>.<span class="number">0</span><span class="comment"># make install</span></span><br><span class="line">Installing shared <span class="symbol">extensions:</span>     /data/server/php7/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>/<span class="title">extensions</span>/<span class="title">no</span>-<span class="title">debug</span>-<span class="title">non</span>-<span class="title">zts</span>-20151012/</span></span><br><span class="line">root@<span class="symbol">www:</span>/data/server/other_component/phpredis-<span class="number">4.0</span>.<span class="number">0</span><span class="comment">#</span></span><br></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">安装完成后配置【找到 php.ini 的位置添加扩展】：</span><br><span class="line">vi /etc/php/<span class="number">7.0</span>/cli/php.ini</span><br><span class="line">vi  /data/server/php7/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>.<span class="title">ini</span>  </span></span><br><span class="line">这两个里面都要写上一以下内容：</span><br><span class="line">extension=imagick.so</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">拷贝扩展，否则 在 【cli   PHP -m】 模式中看不到扩展：</span><br><span class="line">cp /data/server/php7/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>/<span class="title">extensions</span>/<span class="title">no</span>-<span class="title">debug</span>-<span class="title">non</span>-<span class="title">zts</span>-20151012/<span class="title">imagick</span>.<span class="title">so</span>  /<span class="title">usr</span>/<span class="title">lib</span>/<span class="title">php</span>/20151012/</span></span><br></pre></td></tr></table></figure><h3 id="重启php-fpm"><a href="#重启php-fpm" class="headerlink" title="重启php-fpm"></a>重启php-fpm</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">重启php-fpm</span><br><span class="line">查找PHP服务 ps aux | <span class="keyword">grep</span> php-fpm</span><br><span class="line">pkill -<span class="number">9</span> php</span><br><span class="line">php启动命令</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/php7/</span>sbin<span class="regexp">/php-fpm</span></span><br></pre></td></tr></table></figure><h3 id="查看扩展"><a href="#查看扩展" class="headerlink" title="查看扩展"></a>查看扩展</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">php -m | grep imagick</span><br><span class="line">提示如下</span><br><span class="line">root<span class="variable">@www</span><span class="symbol">:/data/server/other_component/ImageMagick-</span><span class="number">7.0</span>.<span class="number">7</span>-<span class="number">28</span><span class="comment"># php -m | grep redis</span></span><br><span class="line">imagick</span><br><span class="line">root<span class="variable">@www</span><span class="symbol">:/data/server/other_component/ImageMagick-</span><span class="number">7.0</span>.<span class="number">7</span>-<span class="number">28</span><span class="comment">#</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/php/extension/e_imagick.png" alt="imagick 扩展" title="redis imagick"></p><p><img src="/img/ubuntu/php/extension/e_imagick2.png" alt="imagick 扩展" title="redis imagick"></p><p><a href="http://pecl.php.net/package/imagick" title="PHP扩展imagick下载网址" target="_blank" rel="noopener">PHP扩展imagick下载网址</a></p><p> <a href="http://pecl.php.net/package-stats.php" title="PHP扩展下载网址" target="_blank" rel="noopener">PHP扩展下载网址</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu16 -php7 extension redis</title>
      <link href="/2018/04/20/ubuntu/php_extension_redis/"/>
      <url>/2018/04/20/ubuntu/php_extension_redis/</url>
      <content type="html"><![CDATA[<h3 id="Extension-之-redis"><a href="#Extension-之-redis" class="headerlink" title="Extension 之 redis"></a>Extension 之 redis</h3><h3 id="下载-redis-包"><a href="#下载-redis-包" class="headerlink" title="下载 redis 包"></a>下载 redis 包</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="regexp">//gi</span>thub.com<span class="regexp">/nicolasff/</span>phpredis<span class="regexp">/archive/</span><span class="number">4.0</span>.<span class="number">0</span>.tar.gz</span><br><span class="line">wget http:<span class="regexp">//</span>pecl.php.net<span class="regexp">/get/</span>redis-<span class="number">4.0</span>.<span class="number">0</span>.tgz</span><br></pre></td></tr></table></figure><h3 id="安装redis"><a href="#安装redis" class="headerlink" title="安装redis"></a>安装redis</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">解压到指定目录【我这里是 /data/server/other_component/】</span><br><span class="line">tar -zxvf <span class="number">4.0</span>.<span class="number">0</span>.tar.gz -C /data/server/other_component/</span><br><span class="line">cd phpredis-<span class="number">4.0</span>.<span class="number">0</span>/</span><br><span class="line"></span><br><span class="line">/data/server/php7/bin/phpize   <span class="comment">#用phpize生成configure配置文件，[找到你PHP安装位置中的phpsize]</span></span><br><span class="line">./configure --<span class="keyword">with</span>-php-config=<span class="regexp">/data/server</span><span class="regexp">/php7/bin</span><span class="regexp">/php-config   #配置</span></span><br><span class="line"><span class="regexp">make</span></span><br><span class="line"><span class="regexp">make install</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">安装完成后提示如下，表示安装成功：</span></span><br><span class="line"><span class="regexp">root@www:/data</span><span class="regexp">/server/other</span>_component/phpredis-<span class="number">4.0</span>.<span class="number">0</span><span class="comment"># make install</span></span><br><span class="line">Installing shared <span class="symbol">extensions:</span>     /data/server/php7/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>/<span class="title">extensions</span>/<span class="title">no</span>-<span class="title">debug</span>-<span class="title">non</span>-<span class="title">zts</span>-20151012/</span></span><br><span class="line">root@<span class="symbol">www:</span>/data/server/other_component/phpredis-<span class="number">4.0</span>.<span class="number">0</span><span class="comment">#</span></span><br></pre></td></tr></table></figure><h3 id="配置-redis"><a href="#配置-redis" class="headerlink" title="配置 redis"></a>配置 redis</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">安装完成后配置【找到 php.ini 的位置添加扩展】：</span><br><span class="line">vi /etc/php/<span class="number">7.0</span>/cli/php.ini</span><br><span class="line">vi  /data/server/php7/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>.<span class="title">ini</span>  </span></span><br><span class="line">这两个里面都要写上一以下内容：</span><br><span class="line">extension=redis.so</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">拷贝扩展，否则 在 【cli   PHP -m】 模式中看不到扩展：</span><br><span class="line">cp /data/server/php7/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>/<span class="title">extensions</span>/<span class="title">no</span>-<span class="title">debug</span>-<span class="title">non</span>-<span class="title">zts</span>-20151012/<span class="title">opcache</span>.<span class="title">a</span>  /<span class="title">usr</span>/<span class="title">lib</span>/<span class="title">php</span>/20151012/</span></span><br><span class="line">cp /data/server/php7/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>/<span class="title">extensions</span>/<span class="title">no</span>-<span class="title">debug</span>-<span class="title">non</span>-<span class="title">zts</span>-20151012/<span class="title">opcache</span>.<span class="title">so</span>  /<span class="title">usr</span>/<span class="title">lib</span>/<span class="title">php</span>/20151012/</span></span><br><span class="line">cp /data/server/php7/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>/<span class="title">extensions</span>/<span class="title">no</span>-<span class="title">debug</span>-<span class="title">non</span>-<span class="title">zts</span>-20151012/<span class="title">redis</span>.<span class="title">so</span>  /<span class="title">usr</span>/<span class="title">lib</span>/<span class="title">php</span>/20151012/</span></span><br></pre></td></tr></table></figure><h3 id="重启php-fpm-并查看扩展"><a href="#重启php-fpm-并查看扩展" class="headerlink" title="重启php-fpm  并查看扩展"></a>重启php-fpm  并查看扩展</h3><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">重启php-fpm</span><br><span class="line">查找PHP服务 ps aux <span class="params">| grep php-fpm</span></span><br><span class="line"><span class="params">pkill -9 php</span></span><br><span class="line"><span class="params">php启动命令</span></span><br><span class="line"><span class="params">/data/server/php7/sbin/php-fpm</span></span><br><span class="line"><span class="params"></span></span><br><span class="line"><span class="params">查看扩展</span></span><br><span class="line"><span class="params">php -m |</span> grep redis</span><br><span class="line">提示如下</span><br><span class="line">root@www<span class="symbol">:/data/server/other_component/phpredis-</span><span class="number">4.0</span>.<span class="number">0</span><span class="comment"># php -m | grep redis</span></span><br><span class="line">redis</span><br><span class="line">root@www<span class="symbol">:/data/server/other_component/phpredis-</span><span class="number">4.0</span>.<span class="number">0</span><span class="comment">#</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/php/extension/e_redis.png" alt="redis 扩展" title="redis 扩展"></p><p> <a href="https://github.com/phpredis/phpredis/releases" title="历史版本" target="_blank" rel="noopener">历史版本</a></p><p> <a href="http://pecl.php.net/package/redis" title="历史版本2" target="_blank" rel="noopener">历史版本2</a></p><p> <a href="http://pecl.php.net/package-stats.php" title="PHP扩展下载网址" target="_blank" rel="noopener">PHP扩展下载网址</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-vim  编辑文件</title>
      <link href="/2018/04/19/ubuntu/linux_DDU_vim/"/>
      <url>/2018/04/19/ubuntu/linux_DDU_vim/</url>
      <content type="html"><![CDATA[<h3 id="跳转到指定行"><a href="#跳转到指定行" class="headerlink" title="跳转到指定行"></a>跳转到指定行</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:5</span>  回车</span><br><span class="line"><span class="selector-pseudo">:10</span>  回车</span><br><span class="line"><span class="selector-pseudo">:15</span>  回车</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_vim/vim_01.gif" alt="vim" title="vim"></p><h3 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">利用 <span class="symbol">:s</span> 命令可以实现字符串的替换。具体的用法包括：</span><br><span class="line"><span class="symbol">:s/str1/str2/</span>       用字符串 str2 替换[行]中[首次]出现的字符串 str1</span><br><span class="line"><span class="symbol">:s/str1/str2/g</span>      用字符串 str2 替换[行]中[所有]出现的字符串 str1</span><br><span class="line"><span class="symbol">:</span>.,<span class="variable">$ </span>s/str1/str2/g  用字符串 str2 替换[正文]当前[行到末尾]所有出现的字符串 str1</span><br><span class="line"><span class="symbol">:</span><span class="number">1</span>,<span class="variable">$ </span>s/str1/str2/g  用字符串 str2 替换[正文]中[所有]出现的字符串 str1</span><br><span class="line"><span class="symbol">:g/str1/s//str2/g</span>   功能同上</span><br><span class="line"></span><br><span class="line"><span class="symbol">:%s/^/dada</span>          在每行开始添加dada</span><br><span class="line"><span class="symbol">:%s/</span><span class="variable">$/</span>feifei        在每行末尾添加feifei</span><br></pre></td></tr></table></figure><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">u         <span class="comment">#撤销</span></span><br><span class="line">ctrl + r  <span class="comment">#反撤销</span></span><br><span class="line"><span class="built_in">shift</span> + G <span class="comment">#最后一行</span></span><br><span class="line">:<span class="built_in">set</span> nu   <span class="comment">#显示行号</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>centos -PHP7</title>
      <link href="/2018/04/18/centos/php/"/>
      <url>/2018/04/18/centos/php/</url>
      <content type="html"><![CDATA[<h3 id="centos-PHP7-安装"><a href="#centos-PHP7-安装" class="headerlink" title="centos  PHP7 安装"></a>centos  PHP7 安装</h3><h3 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">yum <span class="keyword">install</span> -y epel-<span class="keyword">release</span></span><br><span class="line">yum -y <span class="keyword">install</span> libxslt libxslt-devel</span><br><span class="line">yum -y <span class="keyword">install</span> libxml2 libxml2-devel  libjpeg-devel libpng-devel  libmcrypt-devel</span><br><span class="line">yum -y <span class="keyword">install</span>  curl-devel freetype-devel</span><br><span class="line">yum <span class="keyword">install</span> openssl openssl-devel</span><br></pre></td></tr></table></figure><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">安装php</span><br><span class="line">wget http:<span class="comment">//cn2.php.net/get/php-7.0.28.tar.gz/from/this/mirror</span></span><br><span class="line">mv mirror php-<span class="number">7.0</span>.<span class="number">28</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line"></span><br><span class="line">解压到你指定的目录，我这里选择  /data/server/ 目录</span><br><span class="line">tar -zxvf php-<span class="number">7.0</span>.<span class="number">28</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span> -C /data/server/</span><br><span class="line">mv php-<span class="number">7.0</span>.<span class="number">28</span> php7</span><br><span class="line">cd php7/</span><br></pre></td></tr></table></figure><h3 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/data/server/php7 \</span><br><span class="line"> -<span class="ruby">-with-curl \</span></span><br><span class="line"><span class="ruby"> --with-freetype-dir \</span></span><br><span class="line"><span class="ruby"> --with-gd \</span></span><br><span class="line"><span class="ruby"> --with-gettext \</span></span><br><span class="line"><span class="ruby"> --with-iconv-dir \</span></span><br><span class="line"><span class="ruby"> --with-kerberos \</span></span><br><span class="line"><span class="ruby"> --with-libdir=lib64 \</span></span><br><span class="line"><span class="ruby"> --with-libxml-dir \</span></span><br><span class="line"><span class="ruby"> --with-mysqli \</span></span><br><span class="line"><span class="ruby"> --with-openssl \</span></span><br><span class="line"><span class="ruby"> --with-pcre-regex \</span></span><br><span class="line"><span class="ruby"> --with-pdo-mysql \</span></span><br><span class="line"><span class="ruby"> --with-pdo-sqlite \</span></span><br><span class="line"><span class="ruby"> --with-pear \</span></span><br><span class="line"><span class="ruby"> --with-png-dir \</span></span><br><span class="line"><span class="ruby"> --with-xmlrpc \</span></span><br><span class="line"><span class="ruby"> --with-xsl \</span></span><br><span class="line"><span class="ruby"> --with-zlib \</span></span><br><span class="line"><span class="ruby"> --enable-fpm \</span></span><br><span class="line"><span class="ruby"> --enable-bcmath \</span></span><br><span class="line"><span class="ruby"> --enable-libxml \</span></span><br><span class="line"><span class="ruby"> --enable-inline-optimization \</span></span><br><span class="line"><span class="ruby"> --enable-gd-native-ttf \</span></span><br><span class="line"><span class="ruby"> --enable-mbregex \</span></span><br><span class="line"><span class="ruby"> --enable-mbstring \</span></span><br><span class="line"><span class="ruby"> --enable-opcache \</span></span><br><span class="line"><span class="ruby"> --enable-pcntl \</span></span><br><span class="line"><span class="ruby"> --enable-shmop \</span></span><br><span class="line"><span class="ruby"> --enable-soap \</span></span><br><span class="line"><span class="ruby"> --enable-sockets \</span></span><br><span class="line"><span class="ruby"> --enable-sysvsem \</span></span><br><span class="line"><span class="ruby"> --enable-xml \</span></span><br><span class="line"><span class="ruby"> --enable-zip \</span></span><br><span class="line"><span class="ruby"> --enable-mysqlnd \</span></span><br><span class="line"><span class="ruby"> --with-pdo-mysql=mysqlnd \</span></span><br><span class="line"><span class="ruby"> --with-mcrypt</span></span><br></pre></td></tr></table></figure><p><img src="/img/centos/php/configure.png" alt="PHP 编译" title="PHP 编译"></p><h3 id="预处理ok后，make-编译"><a href="#预处理ok后，make-编译" class="headerlink" title="预处理ok后，make 编译"></a>预处理ok后，make 编译</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span> &amp;&amp;  <span class="built_in">make</span> install</span><br><span class="line"></span><br><span class="line">最后用 <span class="built_in">make</span> test 测试一下【这个过程时间比较长】</span><br></pre></td></tr></table></figure><h3 id="安装完毕"><a href="#安装完毕" class="headerlink" title="安装完毕"></a>安装完毕</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">查看 php 版本</span><br><span class="line">/<span class="meta">data</span>/server/php7/<span class="keyword">bin/php </span>-v</span><br><span class="line">这时候在命令窗口执行 php -v ,会提示命令找不到,需要配置环境变量,详情看下文</span><br></pre></td></tr></table></figure><h3 id="配置PHP"><a href="#配置PHP" class="headerlink" title="配置PHP"></a>配置PHP</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cp <span class="regexp">/data/</span>server<span class="regexp">/php7/</span>php.ini-development   <span class="regexp">/data/</span>server<span class="regexp">/php7/</span>lib/php.ini</span><br><span class="line">cp <span class="regexp">/data/</span>server<span class="regexp">/php7/</span>etc<span class="regexp">/php-fpm.conf.default /</span>data<span class="regexp">/server/</span>php7<span class="regexp">/etc/</span>php-fpm.conf</span><br><span class="line">cp <span class="regexp">/data/</span>server<span class="regexp">/php7/</span>etc<span class="regexp">/php-fpm.d/</span>www.conf.<span class="keyword">default</span> <span class="regexp">/data/</span>server<span class="regexp">/php7/</span>etc<span class="regexp">/php-fpm.d/</span>www.conf</span><br><span class="line"></span><br><span class="line">官方这里拷贝文件有点不一样，注意一下</span><br></pre></td></tr></table></figure><h3 id="添加-PHP-启动用户"><a href="#添加-PHP-启动用户" class="headerlink" title="添加 PHP 启动用户"></a>添加 PHP 启动用户</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">groupadd www</span><br><span class="line">useradd -r -g www -s /bin/<span class="literal">false</span> www</span><br><span class="line"></span><br><span class="line">设置 PHP 启动用户</span><br><span class="line">cd /data/server/php7/etc/php-fpm.d</span><br><span class="line">vi www.conf  修改23、24行，内容如下：</span><br><span class="line"><span class="built_in"> user </span>= 启动fpm的用户名</span><br><span class="line"><span class="built_in"> group </span>= 启动fpm的用户所在组</span><br><span class="line"> </span><br><span class="line"><span class="built_in"> user </span>= www</span><br><span class="line"><span class="built_in"> group </span>= www</span><br><span class="line"></span><br><span class="line">修改完启动 PHP-fpm</span><br></pre></td></tr></table></figure><h3 id="php-启动命令"><a href="#php-启动命令" class="headerlink" title="php 启动命令"></a>php 启动命令</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/php7/</span>sbin<span class="regexp">/php-fpm</span></span><br></pre></td></tr></table></figure><h3 id="配置虚拟主机测试一下"><a href="#配置虚拟主机测试一下" class="headerlink" title="配置虚拟主机测试一下"></a>配置虚拟主机测试一下</h3><p>在 /data/www/ 目录下创建 index.php 内容如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> phpinfo();</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure><p>在 nginx 中配置虚拟主机</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  <span class="number">127.0.0.1</span> <span class="number">192.168.1.230</span>;</span><br><span class="line">    <span class="attribute">client_max_body_size</span> <span class="number">10m</span>;</span><br><span class="line">    <span class="attribute">charset</span> utf-<span class="number">8</span>;</span><br><span class="line">    <span class="comment">#access_log /data/server/tengine/logs/127.0.0.1_access.log;</span></span><br><span class="line">    <span class="comment">#error_log  /data/server/tengine/logs/127.0.0.1_error.log;</span></span><br><span class="line">    <span class="attribute">root</span>  /data/www/;</span><br><span class="line">   <span class="comment"># index index.html;</span></span><br><span class="line">    <span class="attribute">index</span> index.php;</span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ .+\.php($|/)</span> &#123;</span><br><span class="line">        <span class="attribute">fastcgi_pass</span> <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">        <span class="attribute">fastcgi_index</span> index.php;</span><br><span class="line">        <span class="attribute">include</span> fastcgi.conf;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/centos/php/php7_test.png" alt="PHP7 测试" title="PHP7 测试"></p><h3 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">这时候在命令窗口执行 php -v ,会提示命令找不到,需要配置环境变量,详情看下文</span><br><span class="line">修改 /etc<span class="built_in">/profile </span>配置环境变量</span><br><span class="line"><span class="attribute">PATH</span>=<span class="variable">$PATH</span>:/data/server/php/bin</span><br><span class="line"><span class="builtin-name">export</span> PATH</span><br><span class="line">然后执行source /etc<span class="built_in">/profile </span>或者 .<span class="built_in">/profile </span>使其生效; 执行完后可以通过 echo <span class="variable">$PATH</span>  命令查看环境变量,</span><br><span class="line">在次执行 PHP -v 就看到PHP信息</span><br></pre></td></tr></table></figure><p><img src="/img/centos/php/php_env.png" alt="PHP7 环境变量" title="PHP7 环境变量"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu -mysql others</title>
      <link href="/2018/04/18/ubuntu/linux_ubuntu_mysql_others/"/>
      <url>/2018/04/18/ubuntu/linux_ubuntu_mysql_others/</url>
      <content type="html"><![CDATA[<h3 id="mysql-5-6-其他"><a href="#mysql-5-6-其他" class="headerlink" title="mysql 5.6 其他"></a>mysql 5.6 其他</h3><h3 id="查看-MySQL-配置"><a href="#查看-MySQL-配置" class="headerlink" title="查看 MySQL 配置;"></a>查看 MySQL 配置;</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">windows下是my.ini</span><br><span class="line">linux下是my.cnf</span><br><span class="line"></span><br><span class="line">linux 中 locate my<span class="selector-class">.cnf</span> 就出来了（没有的话先updatedb）</span><br></pre></td></tr></table></figure><h3 id="MySQL-忘记密码"><a href="#MySQL-忘记密码" class="headerlink" title="MySQL 忘记密码"></a>MySQL 忘记密码</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1、查找 my.cnf 配置文件位置，在文件最后添加 skip-grant-tables  保存退出，修改完密码记得删掉</span><br><span class="line">2、修改密码，命令</span><br><span class="line"><span class="meta">MySQL&gt;</span><span class="bash"> UPDATE mysql.user SET Password=PASSWORD(<span class="string">'你的密码'</span>) <span class="built_in">where</span> USER=<span class="string">'root'</span>;</span></span><br><span class="line"><span class="meta">MySQL&gt;</span><span class="bash"> flush privileges; </span></span><br><span class="line"><span class="meta">MySQL&gt;</span><span class="bash"> <span class="built_in">exit</span>;</span></span><br><span class="line"></span><br><span class="line">yum 安装的mysql 跳过密码,修改配置文件无效,可以使用命令跳过密码</span><br><span class="line">/usr/bin/mysqld_safe --skip-grant-tables </span><br><span class="line">执行后,从新开一个窗口,连接数据库</span><br></pre></td></tr></table></figure><p><img src="/img/mysql/mysql_others/04.png" alt="mysql 跳过密码" title="mysql 跳过密码"></p><h3 id="确定-MySQL-中文件位置"><a href="#确定-MySQL-中文件位置" class="headerlink" title="确定 MySQL 中文件位置"></a>确定 MySQL 中文件位置</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">1、locate mysql.server 找到后启动 mysql</span><br><span class="line">./mysql.server start</span><br><span class="line">2、 ps -aux  | grep mysql  看到信息如下（我自己的）：</span><br><span class="line">root     19312  0.0  0.0 113256  1596 pts/2    S    14:09   0:00 </span><br><span class="line"><span class="comment">/bin/sh /usr/bin/mysqld_safe             #数据库登录运行路径</span></span><br><span class="line">-<span class="ruby">-datadir=<span class="regexp">/var/lib</span><span class="regexp">/mysql                 #数据库文件的存放路径</span></span></span><br><span class="line"><span class="ruby">--pid-file=<span class="regexp">/var/lib</span><span class="regexp">/mysql/i</span>Z2ze8dugwavcbouiggqoeZ.pid</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">mysql    <span class="number">19413</span>  <span class="number">0</span>.<span class="number">1</span>  <span class="number">5.8</span> <span class="number">1236108</span> <span class="number">465644</span> pts/<span class="number">2</span>  Sl   <span class="number">14</span><span class="symbol">:</span>09   <span class="number">0</span><span class="symbol">:</span><span class="number">01</span> </span></span><br><span class="line"><span class="ruby">/usr/sbin/mysqld </span></span><br><span class="line"><span class="ruby">--basedir=<span class="regexp">/usr </span></span></span><br><span class="line"><span class="ruby">--datadir=<span class="regexp">/var/lib</span><span class="regexp">/mysql                 #数据库文件的存放路径</span></span></span><br><span class="line"><span class="ruby">--plugin-dir=<span class="regexp">/usr/lib</span>64/mysql/plugin </span></span><br><span class="line"><span class="ruby">--user=mysql </span></span><br><span class="line"><span class="ruby">--log-error=<span class="regexp">/var/lib</span><span class="regexp">/mysql/i</span>Z2ze8dugwavcbouiggqoeZ.err  <span class="comment">#错误日志</span></span></span><br><span class="line"><span class="ruby">--pid-file=<span class="regexp">/var/lib</span><span class="regexp">/mysql/i</span>Z2ze8dugwavcbouiggqoeZ.pid</span></span><br></pre></td></tr></table></figure><h3 id="创建行用户并授权给指定数据库权限【以下命令在服务器-MySQL-中运行】"><a href="#创建行用户并授权给指定数据库权限【以下命令在服务器-MySQL-中运行】" class="headerlink" title="创建行用户并授权给指定数据库权限【以下命令在服务器 MySQL 中运行】"></a>创建行用户并授权给指定数据库权限【以下命令在服务器 MySQL 中运行】</h3><figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、登录MySQL</span><br><span class="line">mysql -u root -p</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>、创建新用户</span><br><span class="line"><span class="keyword">CREATE</span> USER <span class="string">'用户名'</span>@<span class="string">'ip地址'</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">'密码'</span>; </span><br><span class="line">%                 代表所有ip都能访问</span><br><span class="line">localhost         代表本机才能访问</span><br><span class="line"><span class="number">123.123</span>.<span class="number">123.123</span>   代表指定ip才能访问</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、验证账号是否创建成功</span><br><span class="line"><span class="keyword">SELECT</span> host, user, password <span class="keyword">FROM</span> mysql.user <span class="keyword">WHERE</span> user=<span class="string">'用户'</span>;</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>、给新建用户授权指定数据库</span><br><span class="line">GRANT &lt;privileges&gt; <span class="keyword">ON</span> &lt;database&gt;.&lt;table&gt; <span class="keyword">TO</span> <span class="string">'myuser'</span>@<span class="string">'localhost'</span>;</span><br><span class="line"></span><br><span class="line">命令中 </span><br><span class="line">&lt;privileges&gt;         代表着用逗号分隔权限列表</span><br><span class="line">&lt;database&gt;.&lt;table&gt;   代表数据库.表</span><br><span class="line"></span><br><span class="line">demo：</span><br><span class="line">GRANT ALL <span class="keyword">ON</span> &lt;database&gt;.&lt;table&gt; <span class="keyword">TO</span> <span class="string">'myuser'</span>@<span class="string">'localhost'</span>;</span><br><span class="line">GRANT <span class="keyword">CREATE</span>,INSERT <span class="keyword">ON</span> &lt;database&gt;.&lt;table&gt; <span class="keyword">TO</span> <span class="string">'myuser'</span>@<span class="string">'localhost'</span>;</span><br><span class="line"></span><br><span class="line">以下是一些可用权限&lt;privileges&gt;：</span><br><span class="line">ALL: 所有可用的权限</span><br><span class="line"><span class="keyword">CREATE</span>: 创建库、表和索引</span><br><span class="line">LOCK_TABLES: 锁定表</span><br><span class="line">ALTER: 修改表</span><br><span class="line">DELETE: 删除表</span><br><span class="line">INSERT: 插入表或列</span><br><span class="line"><span class="keyword">SELECT</span>: 检索表或列的数据</span><br><span class="line">CREATE_VIEW: 创建视图</span><br><span class="line">SHOW_DATABASES: 列出数据库</span><br><span class="line">DROP: 删除库、表和视图</span><br><span class="line"></span><br><span class="line"><span class="number">5</span>、验证给用户的权限</span><br><span class="line">SHOW GRANTS <span class="keyword">FOR</span> <span class="string">'用户名'</span>@<span class="string">'ip地址'</span>;</span><br><span class="line"></span><br><span class="line"><span class="number">6</span>、移除权限</span><br><span class="line">REVOKE &lt;privileges&gt; <span class="keyword">ON</span> &lt;database&gt;.&lt;table&gt; <span class="keyword">FROM</span> <span class="string">'用户名'</span>@<span class="string">'ip地址'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">demo：</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE afei_db;</span><br><span class="line"><span class="keyword">CREATE</span> USER <span class="string">'afei'</span>@<span class="string">'%'</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">'123456'</span>;</span><br><span class="line"><span class="keyword">SELECT</span> host, user, password <span class="keyword">FROM</span> mysql.user <span class="keyword">WHERE</span> user=<span class="string">'afei'</span>;</span><br><span class="line">grant all privileges <span class="keyword">on</span> afei_db.* <span class="keyword">to</span> <span class="string">'afei'</span>@<span class="string">'%'</span>;            #没有指定密码授权</span><br><span class="line">SHOW GRANTS <span class="keyword">FOR</span> <span class="string">'afei'</span>@<span class="string">'%'</span>;</span><br><span class="line">flush privileges;    #刷新</span><br><span class="line"></span><br><span class="line">扩展命令</span><br><span class="line">grant all privileges <span class="keyword">on</span> afei.* <span class="keyword">to</span> afei@l% identified <span class="keyword">by</span> <span class="string">'123456'</span>;  #指定命令授权</span><br><span class="line">drop user <span class="string">'afei'</span>@<span class="string">'%'</span>;     #删除用户</span><br></pre></td></tr></table></figure><p><img src="/img/mysql/mysql_others/01.png" alt="mysql 创建行用户并授权给指定数据库权限01" title="mysql 创建行用户并授权给指定数据库权限01"></p><p><img src="/img/mysql/mysql_others/01.png" alt="mysql 创建行用户并授权给指定数据库权限02" title="mysql 创建行用户并授权给指定数据库权限02"></p><h3 id="linux-查看-MySQL-版本"><a href="#linux-查看-MySQL-版本" class="headerlink" title="linux 查看 MySQL 版本"></a>linux 查看 MySQL 版本</h3><p>1、在help中查找 mysql –help |grep Distrib<br>2、在help中查找 mysql –help |grep Distrib</p><p><img src="/img/mysql/mysql_others/03.png" alt="mysql 版本" title="mysql 版本"></p><h3 id="Mysql-常用性能分析方法"><a href="#Mysql-常用性能分析方法" class="headerlink" title="Mysql 常用性能分析方法??"></a>Mysql 常用性能分析方法??</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">select</span> version();  <span class="meta">#查版本号</span></span><br><span class="line"><span class="keyword">show</span> processlist;  <span class="meta">#查看那些线程正在运行</span></span><br><span class="line"><span class="keyword">show</span> profiles; </span><br><span class="line"><span class="keyword">show</span> profiles <span class="keyword">for</span> query <span class="number">3</span>;  <span class="meta">#更具query_id 查看某个查询的详细时间耗费</span></span><br><span class="line">explian + sql <span class="meta"># 分析执行计划和最左前缀原理</span></span><br><span class="line">reset query cache;   <span class="meta">#清除缓存</span></span><br></pre></td></tr></table></figure><h3 id="mysql-SQL-执行顺序"><a href="#mysql-SQL-执行顺序" class="headerlink" title="mysql  SQL 执行顺序"></a>mysql  SQL 执行顺序</h3><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(7)     <span class="keyword">SELECT</span> </span><br><span class="line">(<span class="number">8</span>)     <span class="keyword">DISTINCT</span> &lt;select_list&gt;</span><br><span class="line">(<span class="number">1</span>)     <span class="keyword">FROM</span> &lt;left_table&gt;</span><br><span class="line">(<span class="number">3</span>)     &lt;join_type&gt; <span class="keyword">JOIN</span> &lt;right_table&gt;</span><br><span class="line">(<span class="number">2</span>)     <span class="keyword">ON</span> &lt;join_condition&gt;</span><br><span class="line">(<span class="number">4</span>)     <span class="keyword">WHERE</span> &lt;where_condition&gt;</span><br><span class="line">(<span class="number">5</span>)     <span class="keyword">GROUP</span> <span class="keyword">BY</span> &lt;group_by_list&gt;</span><br><span class="line">(<span class="number">6</span>)     <span class="keyword">HAVING</span> &lt;having_condition&gt;</span><br><span class="line">(<span class="number">9</span>)     <span class="keyword">ORDER</span> <span class="keyword">BY</span> &lt;order_by_condition&gt;</span><br><span class="line">(<span class="number">10</span>)    <span class="keyword">LIMIT</span> &lt;limit_number&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>computer install ubuntu16</title>
      <link href="/2018/04/17/ubuntu/ubuntu_install/"/>
      <url>/2018/04/17/ubuntu/ubuntu_install/</url>
      <content type="html"><![CDATA[<h3 id="电脑安装ubuntu系统"><a href="#电脑安装ubuntu系统" class="headerlink" title="电脑安装ubuntu系统"></a>电脑安装ubuntu系统</h3><h3 id="下载：-ubuntu下载"><a href="#下载：-ubuntu下载" class="headerlink" title="下载： ubuntu下载"></a>下载： <a href="https://www.ubuntu.com/download/desktop" title="ubuntu下载" target="_blank" rel="noopener">ubuntu下载</a></h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https:<span class="regexp">//</span>www.ubuntu.com<span class="regexp">/download/</span>desktop</span><br></pre></td></tr></table></figure><p>安装好 UltraISO 软碟通 ，安装完软件后，打开软件，点击文件打开，找到刚才下载的 ubuntu 的 ISO 文件，点击开开，完成 ISO 文件的加载。接着插入 u 盘，点击 UltraISO 启动选项，然后找到写入硬盘选项，点击它进入将要操作的界面，最后点击写入;</p><p><img src="/img/ubuntu/ubuntu_install/make1.png" alt="ubuntu 安装" title="ubuntu 安装"></p><p><img src="/img/ubuntu/ubuntu_install/make2.png" alt="ubuntu 安装" title="ubuntu 安装"></p><p><img src="/img/ubuntu/ubuntu_install/make3.png" alt="ubuntu 安装" title="ubuntu 安装"></p><p><img src="/img/ubuntu/ubuntu_install/make4.png" alt="ubuntu 安装" title="ubuntu 安装"></p><p><img src="/img/ubuntu/ubuntu_install/make5.png" alt="ubuntu 安装" title="ubuntu 安装"></p><p>install</p><p><img src="/img/ubuntu/ubuntu_install/01.png" alt="ubuntu 安装" title="ubuntu 安装"></p><p><img src="/img/ubuntu/ubuntu_install/02.png" alt="ubuntu 安装" title="ubuntu 安装"></p><p><img src="/img/ubuntu/ubuntu_install/03.png" alt="ubuntu 安装" title="ubuntu 安装"></p><p><img src="/img/ubuntu/ubuntu_install/04.png" alt="ubuntu 安装" title="ubuntu 安装"></p><p><img src="/img/ubuntu/ubuntu_install/05.png" alt="ubuntu 安装" title="ubuntu 安装"></p><p><img src="/img/ubuntu/ubuntu_install/06.png" alt="ubuntu 安装" title="ubuntu 安装"></p><p><img src="/img/ubuntu/ubuntu_install/07.png" alt="ubuntu 安装" title="ubuntu 安装"></p><p><img src="/img/ubuntu/ubuntu_install/08.png" alt="ubuntu 安装" title="ubuntu 安装"></p><p><img src="/img/ubuntu/ubuntu_install/09.png" alt="ubuntu 安装" title="ubuntu 安装"></p><p><img src="/img/ubuntu/ubuntu_install/10.png" alt="ubuntu 安装" title="ubuntu 安装"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu16 Redmine</title>
      <link href="/2018/04/13/ubuntu/Redmine/"/>
      <url>/2018/04/13/ubuntu/Redmine/</url>
      <content type="html"><![CDATA[<h3 id="Rvm-Ruby-Rails-【具体细节效果以后版本修改……】"><a href="#Rvm-Ruby-Rails-【具体细节效果以后版本修改……】" class="headerlink" title="Rvm+Ruby+Rails  【具体细节效果以后版本修改……】"></a>Rvm+Ruby+Rails  【具体细节效果以后版本修改……】</h3><p>rvm是用于管理多个ruby版本的一个管理器</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> <span class="keyword">update</span> </span><br><span class="line">sudo apt-<span class="built_in">get</span> upgrade</span><br><span class="line"></span><br><span class="line">gpg --keyserver hkp://<span class="built_in">keys</span>.gnupg.net --recv-<span class="built_in">keys</span> <span class="number">409</span>B6B1796C275462A1703113804BB82D39DC0E3</span><br><span class="line">curl -sSL http<span class="variable">s:</span>//<span class="built_in">get</span>.rvm.io | bash -s stable</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//如果上面的连接失败，可以尝试:</span><br><span class="line">curl -L http<span class="variable">s:</span>//raw.githubusercontent.<span class="keyword">com</span>/wayneeseguin/rvm/master/binscripts/rvm-installer | bash -s stable</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">载入 Rvm  环境[ 根据提示操作 ]</span><br><span class="line"> <span class="keyword">source</span> /etc/<span class="keyword">profile</span>.d/rvm.<span class="keyword">sh</span></span><br><span class="line">检查Rvm是否安装成功</span><br><span class="line"> rvm -v</span><br><span class="line">用 RVM 安装 Ruby 环境(同时把RubyGems也安装）</span><br><span class="line"> rvm requirements</span><br><span class="line"> rvm install <span class="number">2.5</span>.<span class="number">1</span> #可以到 Ruby(http<span class="variable">s:</span>//www.<span class="keyword">ruby</span>-lang.org/<span class="keyword">en</span>/downloads/)官网查看最新版本号，时间比较长</span><br><span class="line">RVM装好后，可以执行以下命令将刚才安装的Ruby版本，设置系统<span class="keyword">ruby</span>默认版本</span><br><span class="line"> rvm use <span class="number">2.5</span>.<span class="number">1</span> --default</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/rvm01.png" alt="root passwd" title="rvm01"></p><p>由于某些原因，调整gem安装目录至国内镜像，有且仅有一个就好！</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">检查下Ruby和RubyGems的版本</span><br><span class="line"> ruby -v</span><br><span class="line"> gem -v</span><br><span class="line">gem update <span class="params">--system</span> </span><br><span class="line">gem -v </span><br><span class="line"></span><br><span class="line">换源</span><br><span class="line"> gem sources <span class="params">--add</span> https:<span class="string">//gems.ruby-china.org/</span> <span class="params">--remove</span> https:<span class="string">//rubygems.org</span></span><br><span class="line"> gem sources <span class="params">--add</span> https:<span class="string">//ruby.taobao.org/</span> <span class="params">--remove</span> https:<span class="string">//rubygems.org</span></span><br><span class="line"> gem sources -l<span class="string">//</span>查看在用的gem源</span><br><span class="line"> </span><br><span class="line"> 显示如下：</span><br><span class="line">root@ubuntu:<span class="string">/data/server</span><span class="comment"># gem sources -l</span></span><br><span class="line">*** CURRENT SOURCES ***</span><br><span class="line"></span><br><span class="line">https:<span class="string">//rubygems.org/</span></span><br><span class="line">https:<span class="string">//gems.ruby-china.org/</span></span><br><span class="line">root@ubuntu:<span class="string">/data/server</span><span class="comment"># </span></span><br><span class="line"></span><br><span class="line">安装bundlers</span><br><span class="line"> gem install bundler</span><br><span class="line">安装Rails</span><br><span class="line"> gem install rails  5.2.0             <span class="comment"># 可以到rails官网查看最新版本号</span></span><br><span class="line"> 或者使用： gem install rails          <span class="comment">#自己默认选择最新版</span></span><br><span class="line">查看版本</span><br><span class="line"> rails -v </span><br><span class="line"> </span><br><span class="line"> 最后检查一下所有版本</span><br><span class="line"> rvm -v</span><br><span class="line"> ruby -v</span><br><span class="line"> rails -v</span><br><span class="line"> bundler -v</span><br><span class="line"></span><br><span class="line">适当升级</span><br><span class="line">gem update <span class="params">--system</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/rvm02.png" alt="root passwd" title="rvm02"></p><h3 id="Redmine"><a href="#Redmine" class="headerlink" title="Redmine"></a>Redmine</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="comment">//www.redmine.org/releases/redmine-3.4.5.tar.gz</span></span><br><span class="line">tar -zxvf  redmine-<span class="number">3.4</span>.<span class="number">5</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span> -C /data/server</span><br><span class="line">mv redmine-<span class="number">3.4</span>.<span class="number">5</span> redmine</span><br><span class="line">cd redmine</span><br></pre></td></tr></table></figure><h3 id="设置数据库连接"><a href="#设置数据库连接" class="headerlink" title="设置数据库连接"></a>设置数据库连接</h3><p>Redmine 需要 nginx 和 MySQL  自行安装这里不再安装</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp config/database<span class="selector-class">.yml</span><span class="selector-class">.example</span>  config/database<span class="selector-class">.yml</span> </span><br><span class="line">vim config/database.yml</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/Redmine_database.png" alt="Redmine database" title="Redmine database"></p><h3 id="安装依赖包"><a href="#安装依赖包" class="headerlink" title="安装依赖包"></a>安装依赖包</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看缺少依赖包，安装完依赖后执行一次这个命令,直到到出现 Bundle complete!</span></span><br><span class="line"><span class="keyword">bundle </span><span class="keyword">install </span>--without development test   </span><br><span class="line"></span><br><span class="line">我的值缺少依赖包如下：</span><br><span class="line">apt-get <span class="keyword">install </span>libmysqlclient-dev</span><br><span class="line"></span><br><span class="line">不在缺少依赖，显示如下：</span><br><span class="line"><span class="keyword">Bundle </span>complete! <span class="number">31</span> Gemfile dependencies, <span class="number">55</span> gems now <span class="keyword">installed.</span></span><br><span class="line"><span class="keyword">Gems </span>in the groups development <span class="keyword">and </span>test were not <span class="keyword">installed.</span></span><br><span class="line"><span class="keyword">Use </span>`<span class="keyword">bundle </span>info [gemname]` to see where a <span class="keyword">bundled </span>gem is <span class="keyword">installed.</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/Redmine_depend.png" alt="Redmine depend" title="Redmine depend"></p><h3 id="Session-存储秘钥"><a href="#Session-存储秘钥" class="headerlink" title="Session 存储秘钥"></a>Session 存储秘钥</h3><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rake <span class="keyword">ge</span><span class="symbol">nerate_secret_token</span></span><br></pre></td></tr></table></figure><h3 id="生成redmine的数据库表结构和初始化数据"><a href="#生成redmine的数据库表结构和初始化数据" class="headerlink" title="生成redmine的数据库表结构和初始化数据"></a>生成redmine的数据库表结构和初始化数据</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RAILS_ENV=production rake <span class="string">db:</span>migrate    <span class="comment">//生成表结构</span></span><br><span class="line">RAILS_ENV=production rake <span class="string">redmine:</span>load_default_data <span class="comment">//初始化数据</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/Redmine_database2.png" alt="Redmine database" title="Redmine database"></p><h3 id="创建上传文件的目录，设置文件夹的权限"><a href="#创建上传文件的目录，设置文件夹的权限" class="headerlink" title="创建上传文件的目录，设置文件夹的权限"></a>创建上传文件的目录，设置文件夹的权限</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">useradd redmine</span><br><span class="line">passwd redmine  <span class="comment">//设置redmine账户的密码</span></span><br><span class="line"></span><br><span class="line">这里先不做</span><br><span class="line">mkdir -p tmp tmp/pdf <span class="keyword">public</span>/plugin_assets/</span><br><span class="line">chown -R redmine:redmine files <span class="built_in">log</span> tmp <span class="keyword">public</span>/plugin_assets</span><br><span class="line">chmod -R <span class="number">755</span> files <span class="built_in">log</span> tmp <span class="keyword">public</span>/plugin_assets/</span><br></pre></td></tr></table></figure><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ruby bin/rails<span class="built_in"> server </span>webrick -e production</span><br><span class="line">ruby bin/rails<span class="built_in"> server </span>webrick -e production -b 0.0.0.0 -p3000  #允许远程访问</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/Redmine_test.png" alt="Redmine test" title="Redmine test"></p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>默认账户 admin/admin 初次登录需要修改密码，</p><p><img src="/img/ubuntu/Redmine_ok.png" alt="Redmine ok" title="Redmine ok"></p><p>关机重启后，需要再次运行 source /etc/profile.d/rvm.sh  载入环境</p><p>网站：</p><p><a href="https://www.phusionpassenger.com/library/install/standalone/install/oss/tarball/" target="_blank" rel="noopener">https://www.phusionpassenger.com/library/install/standalone/install/oss/tarball/</a></p><p><a href="https://www.phusionpassenger.com/library/install/standalone/install/oss/tarball/" target="_blank" rel="noopener">https://www.phusionpassenger.com/library/install/standalone/install/oss/tarball/</a></p><p>下载地址：</p><p><a href="https://www.phusionpassenger.com/latest_stable_tarball" target="_blank" rel="noopener">https://www.phusionpassenger.com/latest_stable_tarball</a></p><p><a href="https://www.phusionpassenger.com/latest_stable_tarball" target="_blank" rel="noopener">https://www.phusionpassenger.com/latest_stable_tarball</a></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget  https:<span class="comment">//www.phusionpassenger.com/latest_stable_tarball</span></span><br><span class="line">tar -xzvf passenger-X<span class="selector-class">.X</span><span class="selector-class">.X</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span> -C /somewhere-permanent</span><br></pre></td></tr></table></figure><p>rootroot</p><p>内容start</p><p>代码分为行内代码和代码块</p><p>行内代码使用<code>&lt;p&gt;这里使用代码块&lt;/p&gt;</code>    </p><p>这里没有代码块</p><p></p><p>代码语法高亮</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">"dddddd"</span>;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> abc = <span class="string">"123"</span>;</span><br><span class="line">alert(abc);</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/Redmine.png" alt="root passwd" title="fdfdsfd"></p><p> <a href="http://example.com/" title="这里是title" target="_blank" rel="noopener">我是a里面的内容</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Markdown语法</title>
      <link href="/2018/04/11/hexo/Markdown%E8%AF%AD%E6%B3%95/"/>
      <url>/2018/04/11/hexo/Markdown%E8%AF%AD%E6%B3%95/</url>
      <content type="html"><![CDATA[<h3 id="在头部显示大纲"><a href="#在头部显示大纲" class="headerlink" title="在头部显示大纲"></a>在头部显示大纲</h3><p>使用 [TOC]  可以在顶部显示目录，在Markdown中写如下 demo：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[TOC]</span><br><span class="line"></span><br><span class="line">## 1.创建大纲和目录的必要性</span><br><span class="line">### 大纲</span><br><span class="line">### 目录</span><br><span class="line">## 2.使用的软件</span><br><span class="line">### typora</span><br><span class="line">### markdown语法</span><br><span class="line">##3.怎么创建大纲和目录</span><br><span class="line">### 怎么创建大纲</span><br><span class="line">### 怎么创建目录</span><br></pre></td></tr></table></figure><h3 id="这里是标题"><a href="#这里是标题" class="headerlink" title="这里是标题"></a>这里是标题</h3><p>内容start</p><h3 id="代码和代码块"><a href="#代码和代码块" class="headerlink" title="代码和代码块"></a>代码和代码块</h3><p>代码分为行内代码和代码块<br>行内代码使用<code>&lt;p&gt;这里使用代码块&lt;/p&gt;</code>    </p><p>这里没有代码块</p><p></p><h3 id="代码语法高亮"><a href="#代码语法高亮" class="headerlink" title="代码语法高亮"></a>代码语法高亮</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">echo</span> <span class="string">"dddddd"</span>;</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> abc = <span class="string">"123"</span>;</span><br><span class="line">alert(abc);</span><br></pre></td></tr></table></figure><h3 id="图片语法"><a href="#图片语法" class="headerlink" title="图片语法"></a>图片语法</h3><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">![<span class="string">这是一张图片</span>](<span class="link">https://github.githubassets.com/images/icons/emoji/octocat.png "这是一张图片"</span>)</span><br></pre></td></tr></table></figure><p><img src="https://github.githubassets.com/images/icons/emoji/octocat.png" alt="一张图片" title="图片"></p><h3 id="超链接语法"><a href="#超链接语法" class="headerlink" title="超链接语法"></a>超链接语法</h3><p> <a href="https://github.com/" title="这是一个超链接" target="_blank" rel="noopener">这是一个超链接</a></p><h3 id="折叠和收起"><a href="#折叠和收起" class="headerlink" title="折叠和收起"></a>折叠和收起</h3><p>details：折叠语法标签<br>summary：折叠语法展示的摘要<br>pre：以原有格式显示元素内的文字是已经格式化的文本  ——保持空格换行<br>code：指定代码范例<br>blockcode：表示程序的代码块       </p><font color="#f00"> 行与行之间不能有多余的空行</font><h4 id="基本效果01"><a href="#基本效果01" class="headerlink" title="基本效果01"></a>基本效果01</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">summary</span>&gt;</span>我是Title<span class="tag">&lt;/<span class="name">summary</span>&gt;</span>    </span><br><span class="line">    我是content!!!</span><br><span class="line"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span><br></pre></td></tr></table></figure><details><br>    <summary>我是Title</summary><br>    我是content!!!<br></details><h4 id="效果02-pre"><a href="#效果02-pre" class="headerlink" title="效果02 pre"></a>效果02 <code>pre</code></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">summary</span>&gt;</span>我是pre<span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span> 我是pre__content,我可以保留空格,代码的格式化效果<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pre</span>&gt;</span></span><br><span class="line">        public class HelloWorld &#123;</span><br><span class="line">            public static void main(String[] args) &#123;</span><br><span class="line">                System.out.println("Hello World");</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span><br></pre></td></tr></table></figure><details><br>    <summary>我是pre</summary><br>    <p> 我是pre__content</p><br>    <pre><br>        public class HelloWorld {<br>            public static void main(String[] args) {<br>                System.out.println(“Hello World”);<br>            }<br>        }<br>    </pre><br></details><h4 id="效果03-code"><a href="#效果03-code" class="headerlink" title="效果03 code"></a>效果03 <code>code</code></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">summary</span>&gt;</span>我是pre_code<span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span> 我是pre_code__content<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pre</span>&gt;</span><span class="tag">&lt;<span class="name">code</span>&gt;</span></span><br><span class="line">            public class HelloWorld &#123;</span><br><span class="line">                public static void main(String[] args) &#123;</span><br><span class="line">                    System.out.println("Hello World");</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">code</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span><br></pre></td></tr></table></figure><details><br>    <summary>我是pre_code</summary><br>    <p> 我是pre_code__content</p><br>    <pre><code><br>            public class HelloWorld {<br>                public static void main(String[] args) {<br>                    System.out.println(“Hello World”);<br>                }<br>            }<br>        </code></pre><br></details><h4 id="效果04-blockcode"><a href="#效果04-blockcode" class="headerlink" title="效果04 blockcode"></a>效果04 <code>blockcode</code></h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">details</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">summary</span>&gt;</span>我是pre_blockcode<span class="tag">&lt;/<span class="name">summary</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span> 我是pre_blockcode__content<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">pre</span>&gt;</span><span class="tag">&lt;<span class="name">blockcode</span>&gt;</span></span><br><span class="line">            public class HelloWorld &#123;</span><br><span class="line">                public static void main(String[] args) &#123;</span><br><span class="line">                    System.out.println("Hello World");</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">blockcode</span>&gt;</span><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">details</span>&gt;</span></span><br></pre></td></tr></table></figure><details><br>    <summary>我是pre_blockcode</summary><br>    <p> 我是pre_blockcode__content</p><br>    <pre><blockcode><br>            public class HelloWorld {<br>                public static void main(String[] args) {<br>                    System.out.println(“Hello World”);<br>                }<br>            }<br>        </blockcode></pre><br></details>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu -mysql5.6.39</title>
      <link href="/2018/04/08/ubuntu/linux_ubuntu_mysql_02/"/>
      <url>/2018/04/08/ubuntu/linux_ubuntu_mysql_02/</url>
      <content type="html"><![CDATA[<h3 id="mysql5-6-39"><a href="#mysql5-6-39" class="headerlink" title="mysql5.6.39"></a>mysql5.6.39</h3><h3 id="编译环境"><a href="#编译环境" class="headerlink" title="编译环境"></a>编译环境</h3><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install make cmake gcc g++ perl bison libaio-<span class="built_in">dev</span> libncurses5 libncurses5-<span class="built_in">dev</span> libnuma-<span class="built_in">dev</span></span><br></pre></td></tr></table></figure><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">安装版本<span class="number">5.6</span>.<span class="number">39</span></span><br><span class="line"></span><br><span class="line">wget http<span class="variable">s:</span>//dev.mysql.<span class="keyword">com</span>/<span class="built_in">get</span>/Downloads/MySQL-<span class="number">5.6</span>/mysql-<span class="number">5.6</span>.<span class="number">39</span>.tar.gz</span><br><span class="line">wget http<span class="variable">s:</span>//dev.mysql.<span class="keyword">com</span>/<span class="built_in">get</span>/Downloads/MySQL-<span class="number">5.6</span>/mysql-<span class="number">5.6</span>.<span class="number">39</span>.tar.gz</span><br><span class="line">【解压到你指定的目录，我这里选择 /data/server/ 】</span><br><span class="line">tar zxvf mysql-<span class="number">5.6</span>.<span class="number">39</span>.tar.gz -C  /data/server/</span><br><span class="line">mv mysql-<span class="number">5.6</span>.<span class="number">39</span> mysql</span><br><span class="line"><span class="keyword">cd</span> mysql</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/mysql/5.6/mysql_download.png" alt="root mysql download" title="mysql download"></p><h3 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">cmake \</span><br><span class="line">-<span class="ruby">DCMAKE_INSTALL_PREFIX=<span class="regexp">/data/server</span><span class="regexp">/mysql \</span></span></span><br><span class="line"><span class="ruby">-DMYSQL_DATADIR=<span class="regexp">/data/server</span><span class="regexp">/mysql/data</span> \</span></span><br><span class="line"><span class="ruby">-DSYSCONFDIR=<span class="regexp">/data/server</span><span class="regexp">/mysql/etc</span> \</span></span><br><span class="line"><span class="ruby">-DWITH_MYISAM_STORAGE_ENGINE=<span class="number">1</span> \</span></span><br><span class="line"><span class="ruby">-DWITH_INNOBASE_STORAGE_ENGINE=<span class="number">1</span> \</span></span><br><span class="line"><span class="ruby">-DWITH_MEMORY_STORAGE_ENGINE=<span class="number">1</span> \</span></span><br><span class="line"><span class="ruby">-DWITH_READLINE=<span class="number">1</span> \</span></span><br><span class="line"><span class="ruby">-DMYSQL_UNIX_ADDR=<span class="regexp">/data/server</span><span class="regexp">/mysql/mysql</span>.sock \</span></span><br><span class="line"><span class="ruby">-DMYSQL_TCP_PORT=<span class="number">3306</span> \</span></span><br><span class="line"><span class="ruby">-DENABLED_LOCAL_INFILE=<span class="number">1</span> \</span></span><br><span class="line"><span class="ruby">-DWITH_PARTITION_STORAGE_ENGINE=<span class="number">1</span> \</span></span><br><span class="line"><span class="ruby">-DEXTRA_CHARSETS=all \</span></span><br><span class="line"><span class="ruby">-DDEFAULT_CHARSET=utf8 \</span></span><br><span class="line"><span class="ruby">-DDEFAULT_COLLATION=utf8_general_ci</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">make &amp;&amp; make install</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">注意事项：</span></span><br><span class="line"><span class="ruby">重新编译时，需要清除旧的对象文件和缓存信息</span></span><br><span class="line"><span class="ruby"><span class="comment"># make clean</span></span></span><br><span class="line"><span class="ruby"><span class="comment"># rm -f CMakeCache.txt</span></span></span><br><span class="line"><span class="ruby"><span class="comment"># rm -rf /data/server/etc/my.cnf</span></span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">编译参数： <span class="symbol">https:</span>/<span class="regexp">/dev.mysql.com/doc</span><span class="regexp">/refman/</span><span class="number">5.6</span>/en/source-configuration-options.html</span></span><br><span class="line"><span class="ruby">编译参数： <span class="symbol">https:</span>/<span class="regexp">/dev.mysql.com/doc</span><span class="regexp">/refman/</span><span class="number">5.6</span>/en/source-configuration-options.html</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">cmake \</span></span><br><span class="line"><span class="ruby">-DCMAKE_INSTALL_PREFIX=<span class="regexp">/data/server</span><span class="regexp">/mysql \   安装路径</span></span></span><br><span class="line"><span class="ruby">-DMYSQL_DATADIR=<span class="regexp">/data/server</span><span class="regexp">/mysql/data</span> \         文件存放路径</span></span><br><span class="line"><span class="ruby">-DSYSCONFDIR=<span class="regexp">/etc \                              配置文件路径 /data</span><span class="regexp">/server/mysql</span><span class="regexp">/etc</span></span></span><br><span class="line"><span class="ruby">-DWITH_MYISAM_STORAGE_ENGINE=<span class="number">1</span> \</span></span><br><span class="line"><span class="ruby">-DWITH_INNOBASE_STORAGE_ENGINE=<span class="number">1</span> \</span></span><br><span class="line"><span class="ruby">-DWITH_MEMORY_STORAGE_ENGINE=<span class="number">1</span> \</span></span><br><span class="line"><span class="ruby">-DWITH_READLINE=<span class="number">1</span> \</span></span><br><span class="line"><span class="ruby">-DMYSQL_UNIX_ADDR=<span class="regexp">/tmp/mysql</span><span class="regexp">/mysql.sock \         sock文件路径/data</span><span class="regexp">/server/mysql</span><span class="regexp">/mysql.sock</span></span></span><br><span class="line"><span class="ruby">-DMYSQL_TCP_PORT=<span class="number">3306</span> \</span></span><br><span class="line"><span class="ruby">-DENABLED_LOCAL_INFILE=<span class="number">1</span> \</span></span><br><span class="line"><span class="ruby">-DWITH_PARTITION_STORAGE_ENGINE=<span class="number">1</span> \</span></span><br><span class="line"><span class="ruby">-DEXTRA_CHARSETS=all \</span></span><br><span class="line"><span class="ruby">-DDEFAULT_CHARSET=utf8 \                      字符集 -DDEFAULT_CHARSET=utf8mb4 </span></span><br><span class="line"><span class="ruby">-DDEFAULT_COLLATION=utf8_general_ci           排序字符集  -DDEFAULT_COLLATION=utf8mb4_general_ci</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/mysql/5.6/mysql_make.png" alt="mysql make" title="mysql make"></p><h3 id="创建-mysql-组跟用户"><a href="#创建-mysql-组跟用户" class="headerlink" title="创建 mysql 组跟用户"></a>创建 mysql 组跟用户</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">检查系统中是否已经存在 mysql 用户，如果没有则创建</span><br><span class="line">cat /etc/passwd | grep mysql</span><br><span class="line">cat /etc<span class="built_in">/group </span>| grep mysql</span><br><span class="line"></span><br><span class="line">创建 mysql 用户</span><br><span class="line">sudo groupadd mysql</span><br><span class="line">sudo useradd -r -g mysql -s /bin/<span class="literal">false</span> mysql</span><br></pre></td></tr></table></figure><h4 id="更改-mysql-目录权限"><a href="#更改-mysql-目录权限" class="headerlink" title="更改 mysql 目录权限"></a>更改 mysql 目录权限</h4><figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /data/server/mysql</span><br><span class="line">sudo chown -R mysql .</span><br><span class="line">sudo chgrp -R mysql .</span><br></pre></td></tr></table></figure><h3 id="初始化数据库"><a href="#初始化数据库" class="headerlink" title="初始化数据库"></a>初始化数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">chmod +x mysql_install_db 或者  chmod +x scripts/mysql_install_db</span><br><span class="line"></span><br><span class="line">./scripts/mysql_install_db <span class="comment">--basedir=/data/server/mysql --datadir=/data/server/mysql/data --user=mysql</span></span><br><span class="line"></span><br><span class="line">初始化后提示：</span><br><span class="line"></span><br><span class="line">To <span class="keyword">start</span> mysqld <span class="keyword">at</span> boot <span class="keyword">time</span> you have <span class="keyword">to</span> copy</span><br><span class="line">support-files/mysql.server <span class="keyword">to</span> the <span class="keyword">right</span> place <span class="keyword">for</span> your <span class="keyword">system</span></span><br><span class="line"></span><br><span class="line">PLEASE REMEMBER <span class="keyword">TO</span> <span class="keyword">SET</span> A <span class="keyword">PASSWORD</span> <span class="keyword">FOR</span> THE MySQL root <span class="keyword">USER</span> !</span><br><span class="line"><span class="keyword">To</span> <span class="keyword">do</span> so, <span class="keyword">start</span> the <span class="keyword">server</span>, <span class="keyword">then</span> issue the <span class="keyword">following</span> commands:</span><br><span class="line"></span><br><span class="line">  /<span class="keyword">data</span>/<span class="keyword">server</span>/mysql/<span class="keyword">bin</span>/mysqladmin -u root <span class="keyword">password</span> <span class="string">'new-password'</span></span><br><span class="line">  /<span class="keyword">data</span>/<span class="keyword">server</span>/mysql/<span class="keyword">bin</span>/mysqladmin -u root -h ubuntu <span class="keyword">password</span> <span class="string">'new-password'</span></span><br><span class="line"></span><br><span class="line">Alternatively you can run:</span><br><span class="line"></span><br><span class="line">  /<span class="keyword">data</span>/<span class="keyword">server</span>/mysql/<span class="keyword">bin</span>/mysql_secure_installation</span><br><span class="line"></span><br><span class="line">which will also give you the <span class="keyword">option</span> <span class="keyword">of</span> removing the <span class="keyword">test</span></span><br><span class="line"><span class="keyword">databases</span> <span class="keyword">and</span> anonymous <span class="keyword">user</span> created <span class="keyword">by</span> default.  This <span class="keyword">is</span></span><br><span class="line">strongly recommended <span class="keyword">for</span> production servers.</span><br><span class="line">See the <span class="keyword">manual</span> <span class="keyword">for</span> more instructions.</span><br><span class="line">You can <span class="keyword">start</span> the MySQL daemon <span class="keyword">with</span>:</span><br><span class="line"></span><br><span class="line">  cd . ; /data/server/mysql/bin/mysqld_safe &amp;</span><br><span class="line"></span><br><span class="line">You can test the MySQL daemon with mysql-test-run.pl</span><br><span class="line">  cd mysql-test ; perl mysql-test-run.pl</span><br><span class="line">Please report any problems at http://bugs.mysql.com/</span><br><span class="line">The latest information about MySQL is available on the web at</span><br><span class="line">  http://www.mysql.com</span><br><span class="line">Support MySQL by buying support/licenses at http://shop.mysql.com</span><br><span class="line">New default config file was created as /data/server/mysql/my.cnf and</span><br><span class="line">will be used by default by the server when you <span class="keyword">start</span> it.</span><br><span class="line">You may edit this <span class="keyword">file</span> <span class="keyword">to</span> <span class="keyword">change</span> <span class="keyword">server</span> <span class="keyword">settings</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/mysql/5.6/mysql_init.png" alt="mysql init" title="mysql init"></p><h3 id="启动数据库"><a href="#启动数据库" class="headerlink" title="启动数据库"></a>启动数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">chmod +x mysql.server 或者 chmod +x support-files/mysql.server</span><br><span class="line"> ./support-files/mysql.server <span class="keyword">start</span></span><br><span class="line"> </span><br><span class="line">初始化密码，我这里设置密码： <span class="number">123456</span> 做测试，实际中设置你认为安全的密码</span><br><span class="line">  /<span class="keyword">data</span>/<span class="keyword">server</span>/mysql/<span class="keyword">bin</span>/mysqladmin -u root <span class="keyword">password</span> <span class="string">'123456'</span></span><br><span class="line">  </span><br><span class="line">登录MySQL</span><br><span class="line">  <span class="keyword">bin</span>/mysql -u root -p</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/mysql/5.6/mysql_pwd.png" alt="mysql 启动" title="mysql 启动"></p><h3 id="创建新用户，并允许远程连接"><a href="#创建新用户，并允许远程连接" class="headerlink" title="创建新用户，并允许远程连接"></a>创建新用户，并允许远程连接</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">命令: </span><br><span class="line"><span class="keyword">GRANT</span> ALL <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'username'</span>@<span class="string">'host'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'new_password'</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>; </span><br><span class="line"></span><br><span class="line">. 点代表所有表</span><br><span class="line">username 代表你创建的用户名</span><br><span class="line">host 代表你指定在那台机器可以登录，本地登录就是 localhost ，允许所有远程登录就是 % ；</span><br><span class="line">new_password 代表该用户的登录密码，密码可以为空，如果是空则改用户可以不需要密码登录</span><br><span class="line"></span><br><span class="line">demo:</span><br><span class="line">新增超级权限并允许远程访问：</span><br><span class="line"><span class="keyword">GRANT</span> ALL <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'afei2'</span>@<span class="string">'%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'123456'</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;   </span><br><span class="line"><span class="keyword">FLUSH</span>   <span class="keyword">PRIVILEGES</span>;</span><br><span class="line"></span><br><span class="line">查看创建的新用户信息：</span><br><span class="line"><span class="keyword">SELECT</span> <span class="string">`Host`</span>,<span class="string">`User`</span>,<span class="string">`Password`</span>,authentication_string,password_expired <span class="keyword">FROM</span> <span class="string">`user`</span>;</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/mysql/5.6/mysql_remote_connect.png" alt="mysql 连接" title="mysql 远程连接"></p><h3 id="MySQL-命令"><a href="#MySQL-命令" class="headerlink" title="MySQL 命令"></a>MySQL 命令</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">support-files/mysql<span class="selector-class">.server</span> start</span><br><span class="line">support-files/mysql<span class="selector-class">.server</span> stop</span><br><span class="line">/data/server/mysql/bin/mysql -u root -p</span><br><span class="line"></span><br><span class="line">mysql -h 你登录的ip -u username -P <span class="number">3306</span> -<span class="selector-tag">p</span> 【远程登录】</span><br><span class="line">demo： mysql -h <span class="number">192.168</span>.<span class="number">1.230</span> -u afei2 -p</span><br></pre></td></tr></table></figure><h3 id="查看-mysql-默认读取-my-cnf-的目录"><a href="#查看-mysql-默认读取-my-cnf-的目录" class="headerlink" title="查看 mysql 默认读取 my.cnf 的目录"></a>查看 mysql 默认读取 my.cnf 的目录</h3><p>如果没有设置使用指定目录的my.cnf，mysql启动时会读取安装目录根目录及默认目录下的my.cnf文件。查看mysql启动时读取配置文件的默认目录</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">mysql --<span class="keyword">help</span>|<span class="keyword">grep</span> <span class="string">'my.cnf'</span></span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">root@ubuntu:/data/server/mysql/bin# mysql --<span class="keyword">help</span>|<span class="keyword">grep</span> <span class="string">'my.cnf'</span></span><br><span class="line">/etc/my.<span class="keyword">cnf</span> /etc/mysql/my.<span class="keyword">cnf</span> ~/.my.<span class="keyword">cnf</span> </span><br><span class="line">                      order of preference, my.<span class="keyword">cnf</span>, $MYSQL_TCP_PORT,</span><br><span class="line">root@ubuntu:/data/server/mysql/bin# </span><br><span class="line"></span><br><span class="line">//////////////////或者/////////////////</span><br><span class="line">./bin/mysqld --<span class="keyword">verbose</span> --<span class="keyword">help</span> |<span class="keyword">grep</span> -A <span class="number">1</span> <span class="string">'Default options'</span></span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">root@ubuntu:/data/server/mysql# ./bin/mysqld --<span class="keyword">verbose</span> --<span class="keyword">help</span> |<span class="keyword">grep</span> -A <span class="number">1</span> <span class="string">'Default options'</span></span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">08</span> <span class="number">01</span>:<span class="number">55</span>:<span class="number">32</span> <span class="number">0</span> [Note] --secure-<span class="keyword">file</span>-priv <span class="keyword">is</span> <span class="keyword">set</span> <span class="keyword">to</span> NULL. Operations related <span class="keyword">to</span> importing <span class="built_in">and</span> exporting data are disabled</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">08</span> <span class="number">01</span>:<span class="number">55</span>:<span class="number">32</span> <span class="number">0</span> [Note] ./bin/mysqld (mysqld <span class="number">5.6</span>.<span class="number">39</span>) starting <span class="keyword">as</span> process <span class="number">34387</span> ...</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">08</span> <span class="number">01</span>:<span class="number">55</span>:<span class="number">32</span> <span class="number">34387</span> [Note] Plugin <span class="string">'FEDERATED'</span> <span class="keyword">is</span> disabled.</span><br><span class="line">Default <span class="keyword">options</span> are <span class="keyword">read</span> from the following <span class="keyword">files</span> in the given order:</span><br><span class="line">/etc/my.<span class="keyword">cnf</span> /etc/mysql/my.<span class="keyword">cnf</span> /data/server/mysql/etc/my.<span class="keyword">cnf</span> ~/.my.<span class="keyword">cnf</span> </span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">08</span> <span class="number">01</span>:<span class="number">55</span>:<span class="number">32</span> <span class="number">34387</span> [Note] Binlog end</span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">08</span> <span class="number">01</span>:<span class="number">55</span>:<span class="number">32</span> <span class="number">34387</span> [Note] Shutting down plugin <span class="string">'CSV'</span></span><br><span class="line"><span class="number">2018</span>-<span class="number">04</span>-<span class="number">08</span> <span class="number">01</span>:<span class="number">55</span>:<span class="number">32</span> <span class="number">34387</span> [Note] Shutting down plugin <span class="string">'MyISAM'</span></span><br><span class="line">root@ubuntu:/data/server/mysql# </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/etc/my.<span class="keyword">cnf</span>, /etc/mysql/my.<span class="keyword">cnf</span>, /usr/local/etc/my.<span class="keyword">cnf</span>, ~/.my.<span class="keyword">cnf</span> 这些就是mysql默认会搜寻my.<span class="keyword">cnf</span>的目录，顺序排前的优先</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/mysql/5.6/my_cnf.png" alt="mysql 配置文件" title="mysql 配置文件"></p><h3 id="查看错误日志位置"><a href="#查看错误日志位置" class="headerlink" title="查看错误日志位置"></a>查看错误日志位置</h3><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">修改 my.cnf 文件指定错误日志位置</span><br><span class="line">log<span class="emphasis">_error=/data/mysql.log</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">错误日志默认存放位置为数据目录下，你也可以用下面命令查看:</span></span><br><span class="line"><span class="emphasis">SHOW  GLOBAL VARIABLES LIKE '%log_</span>error%<span class="emphasis">';</span></span><br><span class="line"><span class="emphasis"></span></span><br><span class="line"><span class="emphasis">mysql&gt; SHOW  GLOBAL VARIABLES LIKE '</span>%log<span class="emphasis">_error%';</span></span><br><span class="line"><span class="emphasis">+---------------------+-----------------+</span></span><br><span class="line"><span class="emphasis">| Variable_</span>name       | Value           |</span><br><span class="line"><span class="code">+---------------------+</span>-----------------+</span><br><span class="line">| binlog<span class="emphasis">_error_</span>action | IGNORE<span class="emphasis">_ERROR    |</span></span><br><span class="line"><span class="emphasis">| log_</span>error           | /data/mysql.log |</span><br><span class="line"><span class="code">+---------------------+</span>-----------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt;</span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/doc/refman/5.6/en/source-configuration-options.html" title="mysql官方预编译配置参数" target="_blank" rel="noopener">mysql官方预编译配置参数</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>BlueLake 主题配置</title>
      <link href="/2018/03/26/hexo/hexo-BlueLake/"/>
      <url>/2018/03/26/hexo/hexo-BlueLake/</url>
      <content type="html"><![CDATA[<h3 id="添加本地搜索"><a href="#添加本地搜索" class="headerlink" title="添加本地搜索"></a>添加本地搜索</h3><p>安装插件<a href="https://github.com/alexbruno/hexo-generator-json-content" target="_blank" rel="noopener">hexo-generator-json-content</a>来创建JSON数据文件</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> hexo-generator-<span class="keyword">json</span>-<span class="keyword">content</span>@<span class="number">2.2</span><span class="number">.0</span> <span class="comment">--save</span></span><br></pre></td></tr></table></figure><p>在根配置  _config.yml  添加配置</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jsonContent:</span></span><br><span class="line"><span class="attr">  meta:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">  pages:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">  posts:</span></span><br><span class="line"><span class="attr">    title:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    date:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    path:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    text:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">    raw:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    content:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    slug:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    updated:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    comments:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    link:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    permalink:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    excerpt:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    categories:</span> <span class="literal">false</span></span><br><span class="line"><span class="attr">    tags:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>在主题 _config.yml 中添加</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">local_search:</span> <span class="literal">true</span>      <span class="comment">#安装好 BlueLake主题后，会有这个配置</span></span><br></pre></td></tr></table></figure><p><img src="/img/hexo/BlueLake_config/search_01.png" alt="站内搜索" title="站内搜索"></p><p><img src="/img/hexo/BlueLake_config/search_02.png" alt="站内搜索" title="站内搜索"></p><p><img src="/img/hexo/BlueLake_config/search_03.png" alt="站内搜索" title="站内搜索"></p><h3 id="BlueLake-主题底部的访问量统计-不显示问题"><a href="#BlueLake-主题底部的访问量统计-不显示问题" class="headerlink" title="BlueLake : 主题底部的访问量统计,不显示问题;"></a>BlueLake : 主题底部的访问量统计,不显示问题;</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">按照作者配置:</span><br><span class="line">主题_config<span class="selector-class">.yml</span>               themes/BlueLake/_config.yml</span><br><span class="line"></span><br><span class="line">busuanzi: true</span><br><span class="line"></span><br><span class="line">这个配置完后,需要修改 themes\BlueLake\layout\_partial\after_footer<span class="selector-class">.jade</span> 这个文件</span><br><span class="line">把卜算子地址改为如下:</span><br><span class="line"><span class="function"><span class="title">script</span><span class="params">(src=<span class="string">'https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js'</span>, async)</span></span></span><br><span class="line"></span><br><span class="line">不蒜子作者提示:域名已经更换</span><br><span class="line">http:<span class="comment">//busuanzi.ibruce.info/</span></span><br></pre></td></tr></table></figure><h3 id="标签显示"><a href="#标签显示" class="headerlink" title="标签显示"></a>标签显示</h3><p>01)   hexo new page categories</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">01</span><span class="bullet">-1</span><span class="string">)</span> <span class="string">hexo</span> <span class="string">new</span> <span class="string">page</span> <span class="string">categories</span></span><br><span class="line"><span class="string">成功后提示:</span> <span class="string">source\categories\index.md</span></span><br><span class="line"><span class="string">打开</span> <span class="string">index.md</span> <span class="string">添加</span>  <span class="attr">type:</span> <span class="string">"categories"</span> <span class="string">,添加完后为:</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">categories</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">"categories"</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="string">保存关闭文件</span></span><br><span class="line"><span class="number">01</span><span class="bullet">-2</span><span class="string">)</span> <span class="string">给文章添加</span> <span class="string">categories</span> <span class="string">属性,随便打开一个md文章,添加</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">这里是title</span>  </span><br><span class="line"><span class="attr">categories:</span> </span><br><span class="line"><span class="bullet">-</span> <span class="string">这是分类categories</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>02) hexo new page tags</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">02</span><span class="bullet">-1</span><span class="string">)</span> <span class="string">hexo</span> <span class="string">new</span> <span class="string">page</span> <span class="string">tags</span></span><br><span class="line"><span class="string">成功后提示:</span> <span class="string">source\tags\index.md</span></span><br><span class="line"><span class="string">打开</span> <span class="string">index.md</span> <span class="string">添加</span>  <span class="attr">type:</span> <span class="string">"tags"</span> <span class="string">,添加完后为:</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">tags</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">"tags"</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="string">保存关闭文件</span></span><br><span class="line"><span class="number">02</span><span class="bullet">-2</span><span class="string">)</span> <span class="string">给文章添加</span> <span class="string">tags</span> <span class="string">属性,随便打开一个md文章,添加</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">这里是title</span>  </span><br><span class="line"><span class="attr">categories:</span> </span><br><span class="line"><span class="bullet">-</span> <span class="string">这是分类categories</span> </span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">这是分类tags</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu16 -swoole</title>
      <link href="/2018/03/21/ubuntu/linux_ubuntu_swoole/"/>
      <url>/2018/03/21/ubuntu/linux_ubuntu_swoole/</url>
      <content type="html"><![CDATA[<h3 id="swoole"><a href="#swoole" class="headerlink" title="swoole"></a>swoole</h3><p>php7 中安装swoole1.9.1</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">安装依赖</span><br><span class="line">apt-get <span class="keyword">install</span> libpcre3 libpcre3-dev  </span><br><span class="line"></span><br><span class="line">*********************************************</span><br><span class="line"></span><br><span class="line">cd  /<span class="keyword">data</span>/<span class="keyword">server</span>/</span><br><span class="line">wget https://github.com/swoole/swoole-src/<span class="keyword">archive</span>/v1<span class="number">.9</span><span class="number">.1</span>-stable.tar.gz</span><br><span class="line">tar zxvf v1<span class="number">.9</span><span class="number">.1</span>-stable.tar.gz -C /<span class="keyword">data</span>/<span class="keyword">server</span>/</span><br><span class="line">cd swoole-src<span class="number">-1.9</span><span class="number">.1</span>-stable</span><br><span class="line"></span><br><span class="line">/<span class="keyword">data</span>/<span class="keyword">server</span>/php7/<span class="keyword">bin</span>/phpize</span><br><span class="line">【</span><br><span class="line">这一步很少出问题： 我的报错如下：</span><br><span class="line">错误一：</span><br><span class="line">root@ubuntu:/<span class="keyword">data</span>/<span class="keyword">server</span>/swoole-src<span class="number">-1.9</span><span class="number">.1</span>-stable# /<span class="keyword">data</span>/<span class="keyword">server</span>/php7/<span class="keyword">bin</span>/phpize</span><br><span class="line">Configuring <span class="keyword">for</span>:</span><br><span class="line">PHP Api <span class="keyword">Version</span>:         <span class="number">20151012</span></span><br><span class="line">Zend <span class="keyword">Module</span> Api <span class="keyword">No</span>:      <span class="number">20151012</span></span><br><span class="line">Zend Extension Api <span class="keyword">No</span>:   <span class="number">320151012</span></span><br><span class="line">Cannot find autoconf. Please <span class="keyword">check</span> your autoconf installation <span class="keyword">and</span> the</span><br><span class="line">$PHP_AUTOCONF environment variable. <span class="keyword">Then</span>, rerun this script.</span><br><span class="line">错误二:</span><br><span class="line">Cannot find config.m4. </span><br><span class="line">Make sure that you run <span class="string">'/data/server/php7/bin/phpize'</span> <span class="keyword">in</span> the top <span class="keyword">level</span> <span class="keyword">source</span> <span class="keyword">directory</span> <span class="keyword">of</span> the <span class="keyword">module</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">解决方法：</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> m4</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> autoconf</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">】</span><br><span class="line">./configure <span class="comment">--with-php-config=/data/server/php7/bin/php-config</span></span><br><span class="line">make</span><br><span class="line">make <span class="keyword">install</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">最后安装成功后显示：</span><br><span class="line">root@ubuntu:/<span class="keyword">data</span>/<span class="keyword">server</span>/swoole-src<span class="number">-1.9</span><span class="number">.1</span>-stable# make <span class="keyword">install</span></span><br><span class="line">Installing <span class="keyword">shared</span> extensions:     /<span class="keyword">data</span>/<span class="keyword">server</span>/php7/lib/php/extensions/<span class="keyword">no</span>-debug-non-zts<span class="number">-20151012</span>/</span><br><span class="line">root@ubuntu:/<span class="keyword">data</span>/<span class="keyword">server</span>/swoole-src<span class="number">-1.9</span><span class="number">.1</span>-stable#</span><br></pre></td></tr></table></figure><h3 id="配置php支持swoole"><a href="#配置php支持swoole" class="headerlink" title="配置php支持swoole"></a>配置php支持swoole</h3><p>vi  /data/server/php7/lib/php.ini   #######编辑配置文件，在最后一行添加以下内容(查找php.ini最好的方法就是phpinfo)</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/php/<span class="number">7.0</span>/cli/php.ini</span><br><span class="line">vi  /data/server/php7/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>.<span class="title">ini</span>  </span></span><br><span class="line">这两个里面都要写上一以下内容：</span><br><span class="line"></span><br><span class="line">extension=swoole.so</span><br></pre></td></tr></table></figure><h3 id="重启php-fpm"><a href="#重启php-fpm" class="headerlink" title="重启php-fpm"></a>重启php-fpm</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">查找PHP服务 ps aux | <span class="keyword">grep</span> php-fpm</span><br><span class="line">pkill -<span class="number">9</span> php</span><br><span class="line">php启动命令</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/php7/</span>sbin<span class="regexp">/php-fpm</span></span><br></pre></td></tr></table></figure><p>先用 php -m 看一下,没有 swoole ，扩展，检索一下  locate php.ini   ,发现在  /etc/php/7.0/cli/php.ini  这里还有一个，这里也加上  extension=swoole.so   ，在看看有没有，如果还是没有，   php -ini|grep ‘extesion_dir’  看一下，发现如下错误：</p><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@<span class="symbol">ubuntu:</span>/home/afei<span class="comment"># php -ini|grep 'extesion_dir'</span></span><br><span class="line">PHP <span class="symbol">Warning:</span>  PHP <span class="symbol">Startup:</span> Unable to load dynamic library <span class="string">'/usr/lib/php/20151012/swoole.so'</span> - <span class="regexp">/usr/lib</span><span class="regexp">/php/</span><span class="number">20151012</span>/swoole.<span class="symbol">so:</span> cannot open shared object <span class="symbol">file:</span> No such file or directory in Unknown on line <span class="number">0</span></span><br><span class="line">root@<span class="symbol">ubuntu:</span>/home/afei<span class="comment"># cd  /usr/lib/php/20151012</span></span><br><span class="line">root@<span class="symbol">ubuntu:</span>/usr/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>/20151012<span class="comment"># ls -l</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">解决办法， 拷贝一份过去： </span><br><span class="line">cp /data/server/php7/<span class="class"><span class="keyword">lib</span>/<span class="title">php</span>/<span class="title">extensions</span>/<span class="title">no</span>-<span class="title">debug</span>-<span class="title">non</span>-<span class="title">zts</span>-20151012/<span class="title">swoole</span>.<span class="title">so</span>  /<span class="title">usr</span>/<span class="title">lib</span>/<span class="title">php</span>/20151012/</span></span><br></pre></td></tr></table></figure><p>在phpinfo页面可以看到关于swoole的选项，说明安装成功</p><p><img src="/img/ubuntu/swoole/swoole_success.png" alt="swoole 安装成功" title="swoole 安装成功"></p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">01</span>) 让phpstorm 对 swoole的函数提示</span><br><span class="line">下载地址 https:<span class="comment">//github.com/swoole/ide-helper</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">phpstorm</span>--&gt;</span><span class="function"><span class="title">settings</span>--&gt;</span><span class="function"><span class="title">languages</span>&amp;Frameworks--&gt;</span>(Include <span class="built_in">path</span>)添加下载的文件</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/swoole/swoole_ide.png" alt="swoole ide" title="swoole ide"></p><p><img src="/img/ubuntu/swoole/swoole_ide_success.png" alt="swoole ide ok" title="swoole ide ok"></p><p> <a href="https://wiki.swoole.com/wiki/page/6.html" title="swoole官方文档" target="_blank" rel="noopener">swoole官方文档</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu15 -tengine</title>
      <link href="/2018/03/17/ubuntu/linux_ubuntu_tengine/"/>
      <url>/2018/03/17/ubuntu/linux_ubuntu_tengine/</url>
      <content type="html"><![CDATA[<p>Tengine 官网安装相当简略，这里详细安装一次（ubuntu15 安装 tengine）</p><h3 id="安装必要的编译环境"><a href="#安装必要的编译环境" class="headerlink" title="安装必要的编译环境"></a>安装必要的编译环境</h3><p>Tengine 安装需要使用源代码自行编译，所以安装前需要安装必要的编译工具</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> update</span><br><span class="line">sudo apt-<span class="builtin-name">get</span> install g++</span><br><span class="line">apt-<span class="builtin-name">get</span> install libgd-dev</span><br></pre></td></tr></table></figure><h3 id="安装所需要的组件【pcre、openssl、zlib】，组件安装的时候注意路径"><a href="#安装所需要的组件【pcre、openssl、zlib】，组件安装的时候注意路径" class="headerlink" title="安装所需要的组件【pcre、openssl、zlib】，组件安装的时候注意路径"></a>安装所需要的组件【pcre、openssl、zlib】，组件安装的时候注意路径</h3><h4 id="PCRE"><a href="#PCRE" class="headerlink" title="PCRE"></a>PCRE</h4><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget <span class="symbol">ftp:</span>/<span class="regexp">/ftp.csx.cam.ac.uk/pub</span><span class="regexp">/software/programming</span><span class="regexp">/pcre/pcre</span>-<span class="number">8.38</span>.tar.gz</span><br><span class="line">解压到你指定的目录</span><br><span class="line">tar -zxvf pcre-<span class="number">8.38</span>.tar.gz -C /data/server/tengine_component</span><br><span class="line">mv pcre-<span class="number">8.38</span> pcre</span><br><span class="line">cd pcre/</span><br><span class="line">./configure --prefix=<span class="regexp">/data/server</span><span class="regexp">/tengine_component/pcre</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/tengine/component_pcre.png" alt="pcre 组件" title="pcre 组件"></p><h3 id="OpenSSL"><a href="#OpenSSL" class="headerlink" title="OpenSSL"></a>OpenSSL</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget <span class="symbol">http:</span>/<span class="regexp">/www.openssl.org/source</span><span class="regexp">/openssl-1.0.2.tar.gz</span></span><br><span class="line"><span class="regexp">解压到你指定的目录</span></span><br><span class="line"><span class="regexp">tar -zxvf openssl-1.0.2.tar.gz -C /data</span><span class="regexp">/server/tengine</span>_component</span><br><span class="line">mv openssl-<span class="number">1.0</span>.<span class="number">2</span> openssl</span><br><span class="line">cd openssl/</span><br><span class="line">./config --prefix=<span class="regexp">/data/server</span><span class="regexp">/tengine_component/openssl</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>这个执行时间稍微长一点  </p><p><img src="/img/ubuntu/tengine/component_openssl.png" alt="OpenSSL  组件" title="OpenSSL 组件"></p><h3 id="Zlib"><a href="#Zlib" class="headerlink" title="Zlib"></a>Zlib</h3><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget http://<span class="literal">zlib</span>.net/<span class="literal">zlib</span>-<span class="number">1.2</span>.<span class="number">11</span>.tar.gz</span><br><span class="line">解压到你指定的目录</span><br><span class="line">tar -zxvf <span class="literal">zlib</span>-<span class="number">1.2</span>.<span class="number">11</span>.tar.gz -C /data/server/tengine_component</span><br><span class="line">mv <span class="literal">zlib</span>-<span class="number">1.2</span>.<span class="number">11</span> <span class="literal">zlib</span></span><br><span class="line">cd <span class="literal">zlib</span>/</span><br><span class="line">./configure --prefix=/data/server/tengine_component/<span class="literal">zlib</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/tengine/component_Zlib.png" alt="Zlib  组件" title="Zlib 组件"></p><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###有空试试这个不添加应该也是可以的，安装完有2个报错，不用理会，手动创建 logs 目录，修改权限；###</span></span><br><span class="line">groupadd www</span><br><span class="line">useradd -s /sbin/nologin -g www www</span><br><span class="line"><span class="regexp">////</span><span class="regexp">////</span><span class="regexp">////</span><span class="regexp">////</span><span class="regexp">////</span><span class="regexp">////</span><span class="regexp">////</span><span class="regexp">////</span><span class="regexp">////</span><span class="regexp">////</span><span class="regexp">////</span><span class="regexp">////</span><span class="regexp">////</span><span class="regexp">////</span><span class="regexp">///</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">wget http://</span>tengine.taobao.org/download/tengine-<span class="number">2.1</span>.<span class="number">2.tar</span>.gz</span><br><span class="line">解压到你指定的目录</span><br><span class="line">tar -zxvf tengine-<span class="number">2.1</span>.<span class="number">2.tar</span>.gz -C <span class="regexp">/data/server/</span></span><br><span class="line">mv tengine-<span class="number">2.1</span>.<span class="number">2</span> tengine</span><br><span class="line">cd tengine</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">./configure --prefix=/data/server/tengine <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-pcre=/data/server/tengine_component/pcre <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-openssl=/data/server/tengine_component/openssl <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-http_gzip_static_module <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-http_realip_module <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-http_stub_status_module <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-http_concat_module <span class="string">\</span></span><br><span class="line">--<span class="keyword">with</span>-zlib=/data/server/tengine_component/zlib</span><br><span class="line"></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>注意配置的时候 –with-pcre 、–with-openssl、–with-zlib的路径为源文件的路径</p><p><img src="/img/ubuntu/tengine/tengine_install.png" alt="tengine install" title="tengine install"></p><h3 id="检测是否可用"><a href="#检测是否可用" class="headerlink" title="检测是否可用"></a>检测是否可用</h3><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta-keyword">/data/</span>server<span class="meta-keyword">/tengine/</span>sbin/nginx -t</span><br><span class="line"></span><br><span class="line">没有logs目录，那就创建一个logs目录： mkdir logs</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/tengine/tengine_check.png" alt="tengine check" title="tengine check"></p><p><img src="/img/ubuntu/tengine/tengine_ok.png" alt="tengine ok" title="tengine ok"></p><h3 id="启动关闭命令"><a href="#启动关闭命令" class="headerlink" title="启动关闭命令"></a>启动关闭命令</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/tengine/</span>sbin/nginx -t</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/tengine/</span>sbin/nginx -s start</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/tengine/</span>sbin/nginx -s stop</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/tengine/</span>sbin/nginx -s reload</span><br><span class="line"></span><br><span class="line">pid出错时，可以使用这个：</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/tengine/</span>sbin<span class="regexp">/nginx  -c /</span>data<span class="regexp">/server/</span>tengine<span class="regexp">/conf/</span>nginx.conf</span><br></pre></td></tr></table></figure><p>扩展：有时候，我们有好多域名，为了方便我们修改一下 nginx.conf  ,修改内容如下，主要是最后一句 include servers/*;然后在nginx.conf 当前位置创建 servers 目录；【修改之前记得把原来的备份  cp nginx.conf nginx.conf_backups  】</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">user  nobody;</span></span><br><span class="line">worker_processes  1;</span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  notice;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">error_log  logs/error.log  info;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">pid        logs/nginx.pid;</span></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"> load modules compiled as Dynamic Shared Object (DSO)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">dso &#123;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    load ngx_http_fastcgi_module.so;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    load ngx_http_rewrite_module.so;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">&#125;</span></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include       mime.types;</span><br><span class="line">    default_type  application/octet-stream;</span><br><span class="line">    charset utf-8;</span><br><span class="line"><span class="meta">#</span><span class="bash">    server_tokens off;</span></span><br><span class="line"><span class="meta">#</span><span class="bash">    server_names_hash_bucket_size 128;</span></span><br><span class="line"><span class="meta"> #</span><span class="bash">   client_header_buffer_size 32k;</span></span><br><span class="line"><span class="meta"> #</span><span class="bash">   large_client_header_buffers 4 32k;</span></span><br><span class="line"><span class="meta">  #</span><span class="bash">  client_max_body_size 20m;</span></span><br><span class="line"><span class="meta">   #</span><span class="bash"> client_body_buffer_size  128k;</span></span><br><span class="line">    client_header_timeout 30m;</span><br><span class="line">    client_body_timeout 30m;</span><br><span class="line"><span class="meta">   #</span><span class="bash"> client_body_temp_path /dev/shm/client_body_temp_path 1 2;</span></span><br><span class="line">    send_timeout 30m;</span><br><span class="line">    #sendfile on;</span><br><span class="line"><span class="meta">   #</span><span class="bash"> tcp_nopush on;</span></span><br><span class="line"><span class="meta">   #</span><span class="bash"> tcp_nodelay on;</span></span><br><span class="line">    keepalive_timeout 60;</span><br><span class="line"><span class="meta">   #</span><span class="bash"> fastcgi_connect_timeout 300;</span></span><br><span class="line"><span class="meta">   #</span><span class="bash"> fastcgi_send_timeout 300;</span></span><br><span class="line"><span class="meta">   #</span><span class="bash"> fastcgi_read_timeout 300;</span></span><br><span class="line"><span class="meta">   #</span><span class="bash"> fastcgi_buffer_size 256k;</span></span><br><span class="line"><span class="meta">   #</span><span class="bash"> fastcgi_buffers 4 256k;</span></span><br><span class="line"><span class="meta">   #</span><span class="bash"> fastcgi_busy_buffers_size 512k;</span></span><br><span class="line"><span class="meta">   #</span><span class="bash"> fastcgi_temp_file_write_size 512k;</span></span><br><span class="line"><span class="meta">   #</span><span class="bash"> fastcgi_temp_path /dev/shm/factcgi_temp_path 1 2;</span></span><br><span class="line"><span class="meta">   #</span><span class="bash"> fastcgi_cache_path   /dev/shm/fastcgi_cache  levels=1:2  keys_zone=PHPCACHE:1024m inactive=15m;</span></span><br><span class="line"><span class="meta">   #</span><span class="bash"> fastcgi_cache_key <span class="string">"<span class="variable">$scheme</span><span class="variable">$request_method</span><span class="variable">$host</span><span class="variable">$request_uri</span>"</span>;</span></span><br><span class="line"><span class="meta">   #</span><span class="bash"> fastcgi_cache_use_stale error  timeout invalid_header http_500;</span></span><br><span class="line"><span class="meta">   #</span><span class="bash"> fastcgi_intercept_errors on;    <span class="comment">#开启后支持4XX 和 5XX 错误自定义</span></span></span><br><span class="line">    gzip on;</span><br><span class="line">    gzip_vary on;</span><br><span class="line">    gzip_min_length  10k;</span><br><span class="line">    gzip_buffers     4 16k;</span><br><span class="line">    gzip_http_version 1.0;</span><br><span class="line">    gzip_comp_level 2;</span><br><span class="line">    gzip_types   text/plain text/css text/xml text/javascript application/x-javascript application/xml application/javascript;</span><br><span class="line">    gzip_disable  "MSIE [1-6]\.";</span><br><span class="line">    include servers/*;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>demo 测试，在新建的 servers 目录下创建 文件 127.0.0.1</p><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       <span class="number">80</span>;</span><br><span class="line">    server_name  <span class="number">127.0.</span><span class="number">0.1</span>;</span><br><span class="line">    client_max_body_size 0m;</span><br><span class="line">    charset utf-<span class="number">8</span>;</span><br><span class="line">    #access_log /<span class="keyword">data</span>/server/tengine/logs/<span class="number">127.0.</span><span class="number">0.</span>_access.<span class="built_in">log</span>;</span><br><span class="line">    #error_log  /<span class="keyword">data</span>/server/tengine/logs/<span class="number">127.0.</span><span class="number">0.</span>_error.<span class="built_in">log</span>;</span><br><span class="line">    root  /<span class="keyword">data</span>/www/;</span><br><span class="line">    <span class="built_in">index</span> <span class="built_in">index</span>.html;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">或者：</span><br><span class="line">server &#123;</span><br><span class="line">    listen       <span class="number">80</span>;</span><br><span class="line">    server_name  <span class="number">127.0.</span><span class="number">0.1</span> <span class="number">192.168.</span><span class="number">1.232</span>;</span><br><span class="line">    client_max_body_size 0m;</span><br><span class="line">    charset utf-<span class="number">8</span>;</span><br><span class="line">    #access_log /<span class="keyword">data</span>/server/tengine/logs/<span class="number">127.0.</span><span class="number">0.</span>_access.<span class="built_in">log</span>;</span><br><span class="line">    #error_log  /<span class="keyword">data</span>/server/tengine/logs/<span class="number">127.0.</span><span class="number">0.</span>_error.<span class="built_in">log</span>;</span><br><span class="line">    root  /<span class="keyword">data</span>/www/;</span><br><span class="line">    <span class="built_in">index</span> <span class="built_in">index</span>.html <span class="built_in">index</span>.php;</span><br><span class="line">    </span><br><span class="line">    location ~ .+\.php($|/) &#123;</span><br><span class="line">        fastcgi_pass <span class="number">127.0.</span><span class="number">0.1</span>:<span class="number">9000</span>;</span><br><span class="line">        fastcgi_index <span class="built_in">index</span>.php;</span><br><span class="line">        <span class="keyword">include</span> fastcgi.conf;</span><br><span class="line">    &#125;    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/tengine/demo_test01.png" alt="demo_test01" title="demo_test01"></p><p><img src="/img/ubuntu/tengine/demo_test01.png" alt="demo_test02" title="demo_test02"></p><p><a href="http://tengine.taobao.org/document_cn/install_cn.html" title="Tengine 官网安装" target="_blank" rel="noopener">Tengine 官网安装</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu15 -mysql5.7</title>
      <link href="/2018/03/17/ubuntu/linux_ubuntu_mysql/"/>
      <url>/2018/03/17/ubuntu/linux_ubuntu_mysql/</url>
      <content type="html"><![CDATA[<h3 id="mysql-5-7安装"><a href="#mysql-5-7安装" class="headerlink" title="mysql 5.7安装"></a>mysql 5.7安装</h3><h3 id="在终端执行-以下命令"><a href="#在终端执行-以下命令" class="headerlink" title="在终端执行 以下命令"></a>在终端执行 以下命令</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get <span class="keyword">install</span> mysql-<span class="keyword">server</span></span><br><span class="line">sudo apt <span class="keyword">install</span> mysql-<span class="keyword">client</span></span><br><span class="line">sudo apt <span class="keyword">install</span> libmysqlclient-dev</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/mysql/fast_mysql_install.png" alt="mysql install" title="mysql install"></p><p>安装完用以下命测试,出现图中说明 OK</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo netstat -tap <span class="string">| grep mysql</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/mysql/fast_mysql_check.png" alt="mysql check" title="mysql check"></p><h3 id="进入-mysql"><a href="#进入-mysql" class="headerlink" title="进入 mysql"></a>进入 mysql</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -uroot -<span class="selector-tag">p</span>   然后回车输入密码</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/mysql/fast_show_databases.png" alt="show databases" title="show databases"></p><h3 id="设置-mysql-运行远程访问"><a href="#设置-mysql-运行远程访问" class="headerlink" title="设置 mysql 运行远程访问"></a>设置 mysql 运行远程访问</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/mysql/mysql<span class="selector-class">.conf</span><span class="selector-class">.d</span>/mysqld.cnf</span><br></pre></td></tr></table></figure><p>1、注释掉  bind-address  = 127.0.0.1  保存退出【在43行】<br>2、grant all on <em>.</em> to root@’%’ identified by ‘你的密码’ with grant option;<br>3、flush privileges;<br>4、exit; 退出 mysql服务<br>5、重启服务： service mysql restart</p><p><img src="/img/ubuntu/mysql/fast_remote_connection.png" alt="remote connection" title="remote connection"></p><h3 id="卸载mysql"><a href="#卸载mysql" class="headerlink" title="卸载mysql"></a>卸载mysql</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> <span class="built_in">remove</span> mysql-server</span><br><span class="line">sudo apt-<span class="built_in">get</span> autoremove mysql-server</span><br><span class="line">sudo apt-<span class="built_in">get</span> <span class="built_in">remove</span> mysql-common <span class="comment">//这个很重要</span></span><br><span class="line"></span><br><span class="line">清理残留数据；</span><br><span class="line">dpkg -l |grep ^rc|awk <span class="string">'&#123;print $2&#125;'</span> |sudo xargs dpkg -P</span><br></pre></td></tr></table></figure><h2 id="mysql-手动安装"><a href="#mysql-手动安装" class="headerlink" title="mysql 手动安装"></a>mysql 手动安装</h2><h3 id="编译环境"><a href="#编译环境" class="headerlink" title="编译环境"></a>编译环境</h3><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install make cmake gcc g++ perl bison libaio-<span class="built_in">dev</span> libncurses5 libncurses5-<span class="built_in">dev</span> libnuma-<span class="built_in">dev</span></span><br></pre></td></tr></table></figure><h3 id="下载【注意版本】"><a href="#下载【注意版本】" class="headerlink" title="下载【注意版本】"></a>下载【注意版本】</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">安装版本 <span class="number">5</span>.<span class="number">7</span>.<span class="number">21</span>；如果是虚拟机建议内容 <span class="number">4</span>G <span class="comment">;</span></span><br><span class="line"></span><br><span class="line"><span class="symbol">wget</span> https://dev.mysql.com/<span class="meta">get</span>/Downloads/MySQL-<span class="number">5</span>.<span class="number">7</span>/mysql-<span class="keyword">boost-5.7.21.tar.gz</span></span><br><span class="line"><span class="keyword">【解压到你指定的目录，我这里选择 </span>/<span class="meta">data</span>/server/ 】</span><br><span class="line"><span class="symbol">tar</span> zxvf mysql-<span class="keyword">boost-5.7.21.tar.gz </span>-C /<span class="meta">data</span>/server/</span><br><span class="line"><span class="symbol">mv</span> mysql-<span class="number">5</span>.<span class="number">7</span>.<span class="number">21</span> mysql</span><br><span class="line"><span class="symbol">cd</span> mysql</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/mysql/mysql_download.png" alt="mysql download" title="mysql download"></p><h3 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"> 可以试试这个参数选项</span><br><span class="line"> -<span class="ruby">DDEFAULT_CHARSET=utf8mb4 </span></span><br><span class="line"><span class="ruby"> -DDEFAULT_COLLATION=utf8mb4_general_ci</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">--------------------------------------</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">cmake . -DBUILD_CONFIG=mysql_release \</span></span><br><span class="line"><span class="ruby">-DCPACK_MONOLITHIC_INSTALL=ON \</span></span><br><span class="line"><span class="ruby">-DCMAKE_INSTALL_PREFIX=<span class="regexp">/data/server</span><span class="regexp">/mysql \</span></span></span><br><span class="line"><span class="ruby">-DDEFAULT_CHARSET=utf8 \</span></span><br><span class="line"><span class="ruby">-DDEFAULT_COLLATION=utf8_general_ci \</span></span><br><span class="line"><span class="ruby">-DMYSQL_UNIX_ADDR=<span class="regexp">/data/server</span><span class="regexp">/mysql/mysql</span>.sock \</span></span><br><span class="line"><span class="ruby">-DMYSQL_TCP_PORT=<span class="number">3306</span> \</span></span><br><span class="line"><span class="ruby">-DMYSQLX_UNIX_ADDR=<span class="regexp">/data/server</span><span class="regexp">/mysql/mysqlx</span>.sock \</span></span><br><span class="line"><span class="ruby">-DMYSQL_DATADIR=<span class="regexp">/data/server</span><span class="regexp">/mysql/data</span> \</span></span><br><span class="line"><span class="ruby">-DSYSCONFDIR=<span class="regexp">/data/server</span><span class="regexp">/mysql/etc</span> \</span></span><br><span class="line"><span class="ruby">-DWITH_BOOST=<span class="regexp">/data/server</span><span class="regexp">/mysql/boost</span><span class="regexp">/boost_1_59_0</span></span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">make &amp;&amp; make install</span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">注意这一项：这个是你 boost 下载好的目录，我的这个版本的 MySQL 解压后对应的目录中有这个</span></span><br><span class="line"><span class="ruby">-DWITH_BOOST=<span class="regexp">/data/server</span><span class="regexp">/mysql/boost</span><span class="regexp">/boost_1_59_0</span></span></span><br><span class="line"><span class="ruby"></span></span><br><span class="line"><span class="ruby">make 的过程比较耗时；耐心等待，make install 就很快啦</span></span><br><span class="line"><span class="ruby">官方预编译配置参数：</span></span><br><span class="line"><span class="ruby"><span class="symbol">https:</span>/<span class="regexp">/dev.mysql.com/doc</span><span class="regexp">/refman/</span><span class="number">5.7</span>/en/source-configuration-options.html<span class="comment">#cmake-general-options</span></span></span><br><span class="line"><span class="ruby"><span class="symbol">https:</span>/<span class="regexp">/dev.mysql.com/doc</span><span class="regexp">/refman/</span><span class="number">5.7</span>/en/source-configuration-options.html<span class="comment">#cmake-general-options</span></span></span><br></pre></td></tr></table></figure><p>这个过程时间比较长…………</p><p><img src="/img/ubuntu/mysql/mysql_make.png" alt="mysql make install" title="mysql make install"></p><p><img src="/img/ubuntu/mysql/exception_01.png" alt="mysql exception_01" title="mysql exception_01"></p><h3 id="初始化设置-mysql"><a href="#初始化设置-mysql" class="headerlink" title="初始化设置 mysql"></a>初始化设置 mysql</h3><h4 id="创建-MySQL-组跟用户"><a href="#创建-MySQL-组跟用户" class="headerlink" title="创建 MySQL 组跟用户"></a>创建 MySQL 组跟用户</h4><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo groupadd mysql</span><br><span class="line">sudo useradd -r -g mysql -s <span class="regexp">/bin/</span><span class="keyword">false</span> mysql</span><br></pre></td></tr></table></figure><h4 id="更改-mysql-目录权限"><a href="#更改-mysql-目录权限" class="headerlink" title="更改 mysql 目录权限"></a>更改 mysql 目录权限</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##cd /data/server/mysql</span></span><br><span class="line"><span class="comment">##sudo chown -R mysql .</span></span><br><span class="line"><span class="comment">##sudo chgrp -R mysql .</span></span><br><span class="line"></span><br><span class="line">这里不用 . 来操作</span><br><span class="line">cd /data/server</span><br><span class="line">chown -R mysql mysql57   #把目录下的所有文件变为mysql用户,在回到上级目录修改为root</span><br><span class="line">chgrp -R mysql mysql57</span><br><span class="line"></span><br><span class="line">cd <span class="built_in">..</span>/</span><br><span class="line">chown root mysql57</span><br><span class="line">chgrp root  mysql57</span><br></pre></td></tr></table></figure><h4 id="初始化-mysql-，-生成-root-用户临时密码，"><a href="#初始化-mysql-，-生成-root-用户临时密码，" class="headerlink" title="初始化 mysql ， 生成 root 用户临时密码，"></a>初始化 mysql ， 生成 root 用户临时密码，</h4><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo bin/mysqld --initialize --user=mysql</span><br><span class="line"></span><br><span class="line">通过mysqld初始化data目录时，如果使用--initialize选项，则会为'root'@'localhost'用户创建一个随机密码。该密码会打印在控制台，如下所示行中末尾就是临时密码：</span><br><span class="line"></span><br><span class="line">2018-03-29T01:10:08.161779Z 1 [Note] A temporary password is generated for root@localhost: xJB.L-TJ)2wB</span><br><span class="line"></span><br><span class="line"><span class="strong">*****</span><span class="strong">*****</span><span class="strong">*****</span><span class="strong">**初始化一个空密码，使用initialize-insecure **</span><span class="strong">*****</span><span class="strong">*****</span><span class="emphasis">***</span>*</span><br><span class="line">sudo bin/mysqld --initialize-insecure --user=mysql</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/mysql/mysql_init.png" alt="mysql init" title="mysql init"></p><h3 id="启动-mysql"><a href="#启动-mysql" class="headerlink" title="启动 mysql"></a>启动 mysql</h3><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">support-<span class="keyword">files</span>/mysql.server start</span><br><span class="line">bin/mysql -u root -p</span><br><span class="line">alter user <span class="string">'root'</span>@<span class="string">'localhost'</span> identified by <span class="string">'new_password'</span>;  #修改密码</span><br><span class="line">修改完重启mysql 或者 刷新</span><br><span class="line">support-<span class="keyword">files</span>/mysql.server stop   或者</span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line"><span class="comment">*************************************************************</span></span><br><span class="line">我这里设置密码： <span class="number">123456</span> 做测试，实际中设置你认为安全的密码</span><br><span class="line">方法<span class="number">1</span>：alter user <span class="string">'root'</span>@<span class="string">'localhost'</span> identified by <span class="string">'123456'</span>;</span><br><span class="line">方法<span class="number">2</span>：<span class="keyword">set</span> password=password(<span class="string">'123456'</span>);</span><br><span class="line">方法<span class="number">3</span>：update user <span class="keyword">set</span> authentication_string=password(<span class="string">'123456'</span>) where <span class="comment">user=</span><span class="comment">'root'</span>;</span><br><span class="line">( 不建议使用方法<span class="number">3</span>,SQL会记录到日志中 )</span><br><span class="line"></span><br><span class="line">这里如果不重新设置密码，系统会一直提示：</span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">ERROR <span class="number">1820</span> (HY000): You must reset your password <span class="keyword">using</span> ALTER USER statement before executing this statement.</span><br><span class="line"></span><br><span class="line"><span class="comment">****其他****</span></span><br><span class="line">ALTER USER <span class="string">'root'</span>@<span class="string">'localhost'</span> PASSWORD EXPIRE;  #使密码过期</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/mysql/mysql_pwd.png" alt="mysql 启动" title="mysql 启动"></p><h3 id="设为系统服务"><a href="#设为系统服务" class="headerlink" title="设为系统服务"></a>设为系统服务</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cp /data/server/mysql/support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line"></span><br><span class="line">systemctl daemon-reload  [重新加载<span class="built_in"> service </span>文件]</span><br><span class="line">systemctl start mysqld</span><br><span class="line">systemctl stop  mysqld</span><br><span class="line">systemctl restart mysqld</span><br></pre></td></tr></table></figure><h3 id="创建新用户，并允许远程连接"><a href="#创建新用户，并允许远程连接" class="headerlink" title="创建新用户，并允许远程连接"></a>创建新用户，并允许远程连接</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">命令: </span><br><span class="line"><span class="keyword">GRANT</span> ALL <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'username'</span>@<span class="string">'host'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'new_password'</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>; </span><br><span class="line"></span><br><span class="line">. 点代表所有表</span><br><span class="line">username 代表你创建的用户名</span><br><span class="line">host 代表你指定在那台机器可以登录，本地登录就是 localhost ，允许所有远程登录就是 % ；</span><br><span class="line">new_password 代表该用户的登录密码，密码可以为空，如果是空则改用户可以不需要密码登录</span><br><span class="line"></span><br><span class="line">demo:</span><br><span class="line">新增超级权限并允许远程访问：</span><br><span class="line"><span class="keyword">GRANT</span> ALL <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'afei2'</span>@<span class="string">'%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'123456'</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;   </span><br><span class="line"><span class="keyword">FLUSH</span>   <span class="keyword">PRIVILEGES</span>;</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/mysql/mysql_remote_connect.png" alt="mysql 远程连接" title="mysql 远程连接"></p><h3 id="MySQL-命令"><a href="#MySQL-命令" class="headerlink" title="MySQL 命令"></a>MySQL 命令</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">support-files/mysql<span class="selector-class">.server</span> start</span><br><span class="line">support-files/mysql<span class="selector-class">.server</span> stop</span><br><span class="line">/data/server/mysql/bin/mysql -u root -p</span><br><span class="line"></span><br><span class="line">mysql -h 你登录的ip -u username -P <span class="number">3306</span> -<span class="selector-tag">p</span> 【远程登录】</span><br><span class="line">demo： mysql -h <span class="number">192.168</span>.<span class="number">1.230</span> -u afei2 -p</span><br></pre></td></tr></table></figure><h3 id="mysql-配置文件-my-cnf"><a href="#mysql-配置文件-my-cnf" class="headerlink" title="mysql 配置文件 my.cnf"></a>mysql 配置文件 my.cnf</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mysql5.<span class="number">7</span> 以后版本中编译安装完后没有my.<span class="keyword">cnf</span> 文件,需要自己创建</span><br><span class="line"></span><br><span class="line">./bin/mysql --<span class="keyword">help</span>|<span class="keyword">grep</span> <span class="string">'my.cnf'</span>   #查看mysql默认读取的my.<span class="keyword">cnf</span></span><br><span class="line"></span><br><span class="line">/data/server/mysql  下新建 </span><br><span class="line"><span class="built_in">mkdir</span> etc    </span><br><span class="line"><span class="keyword">cd</span> etc</span><br><span class="line">touch my.<span class="keyword">cnf</span>       #权限 chmod <span class="number">644</span> /data/server/mysql/etc/my.<span class="keyword">cnf</span>  权限过大会出问题</span><br><span class="line">chown mysq<span class="variable">l:mysql</span> -R etc/my.<span class="keyword">cnf</span>    #用户</span><br><span class="line"></span><br><span class="line">在my.<span class="keyword">cnf</span> 中修改日志配置测试文件是否生效</span><br><span class="line">[mysqld]</span><br><span class="line"><span class="built_in">log</span>-error = /data/server/mysql/mysql_log/error.<span class="built_in">log</span></span><br></pre></td></tr></table></figure><h3 id="mysql-命令行工具中-c-取消之前的输入-重新开始输入"><a href="#mysql-命令行工具中-c-取消之前的输入-重新开始输入" class="headerlink" title="mysql  命令行工具中 \c  取消之前的输入,重新开始输入"></a>mysql  命令行工具中 \c  取消之前的输入,重新开始输入</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> fdfds \c</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> show tables ddjfkldjfdklsf \c</span></span><br><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> show tables;</span></span><br></pre></td></tr></table></figure><p>mysql  命令行工具中 \G 竖向显示内容</p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; <span class="keyword">show </span>tables \G<span class="comment">;</span></span><br><span class="line">mysql&gt; <span class="keyword">show </span>table status \G<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>mysql  命令行工具中 \q 退出终端</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">mysql&gt;</span><span class="bash"> \q;</span></span><br></pre></td></tr></table></figure><p> <a href="https://dev.mysql.com/downloads/mysql/" title="mysql官方下载地址" target="_blank" rel="noopener">mysql官方下载地址</a></p><p> <a href="http://ftp.ntu.edu.tw/MySQL/Downloads/" title="mysql官方下载地址" target="_blank" rel="noopener">mysql官方下载地址</a></p><p> <a href="https://dev.mysql.com/doc/refman/5.7/en/source-configuration-options.html#cmake-general-options" title="mysql官方预编译配置参数" target="_blank" rel="noopener">mysql官方预编译配置参数</a></p><p> <a href="https://dev.mysql.com/doc/refman/5.7/en/faqs.html" title="mysql官方手册" target="_blank" rel="noopener">mysql官方手册</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu16 -php7.0.28</title>
      <link href="/2018/03/17/ubuntu/linux_ubuntu_php/"/>
      <url>/2018/03/17/ubuntu/linux_ubuntu_php/</url>
      <content type="html"><![CDATA[<p>源码编译安装php7.0</p><h3 id="依赖安装，安装依赖"><a href="#依赖安装，安装依赖" class="headerlink" title="依赖安装，安装依赖"></a>依赖安装，安装依赖</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">apt-get <span class="keyword">install</span> libxml2 libxml2-dev</span><br><span class="line"></span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> openssl</span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> libssl-dev</span><br><span class="line"></span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> curl</span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> libcurl4-gnutls-dev</span><br><span class="line"></span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> libxslt-dev</span><br><span class="line"></span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> libpng-dev</span><br><span class="line"></span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> libfreetype6-dev</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// RetHat CentOS <span class="keyword">or</span> Fedora 使用下面安装命令</span><br><span class="line">yum <span class="keyword">install</span> curl curl-devel</span><br><span class="line"></span><br><span class="line">****************一般使用的依赖都是以下这些***************************</span><br><span class="line">安装相关依赖库</span><br><span class="line"></span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">update</span></span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libxml2-dev</span><br><span class="line">#安装gcc</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> <span class="keyword">build</span>-essential</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> openssl </span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libssl-dev </span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> make</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> curl</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libcurl4-gnutls-dev</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libjpeg-dev</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libpng-dev</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libmcrypt-dev</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libreadline6 libreadline6-dev</span><br><span class="line">apt-<span class="keyword">get</span> -y <span class="keyword">install</span> libfreetype6-dev  </span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libxslt1-dev</span><br></pre></td></tr></table></figure><h3 id="下载-PHP-源码"><a href="#下载-PHP-源码" class="headerlink" title="下载 PHP 源码"></a>下载 PHP 源码</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="comment">//cn2.php.net/get/php-7.0.28.tar.gz/from/this/mirror</span></span><br><span class="line">mv mirror php-<span class="number">7.0</span>.<span class="number">28</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br><span class="line"></span><br><span class="line">解压到你指定的目录，我这里选择  /data/server/ 目录</span><br><span class="line">tar -zxvf php-<span class="number">7.0</span>.<span class="number">28</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span> -C /data/server/</span><br><span class="line">mv php-<span class="number">7.0</span>.<span class="number">28</span> php7</span><br><span class="line">cd php7/</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/php/php7_download.png" alt="PHP7.0.28 下载" title="PHP7.0.28 下载"></p><h3 id="查看安装帮助，执行配置脚本进行配置"><a href="#查看安装帮助，执行配置脚本进行配置" class="headerlink" title="查看安装帮助，执行配置脚本进行配置"></a>查看安装帮助，执行配置脚本进行配置</h3><figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"># ./configure   --help</span><br><span class="line"># ./configure --prefix=/data/server/php7 \</span><br><span class="line"> -<span class="ruby">-with-curl \</span></span><br><span class="line"><span class="ruby"> --with-freetype-dir \</span></span><br><span class="line"><span class="ruby"> --with-gd \</span></span><br><span class="line"><span class="ruby"> --with-gettext \</span></span><br><span class="line"><span class="ruby"> --with-iconv-dir \</span></span><br><span class="line"><span class="ruby"> --with-kerberos \</span></span><br><span class="line"><span class="ruby"> --with-libdir=lib64 \</span></span><br><span class="line"><span class="ruby"> --with-libxml-dir \</span></span><br><span class="line"><span class="ruby"> --with-mysqli \</span></span><br><span class="line"><span class="ruby"> --with-openssl \</span></span><br><span class="line"><span class="ruby"> --with-pcre-regex \</span></span><br><span class="line"><span class="ruby"> --with-pdo-mysql \</span></span><br><span class="line"><span class="ruby"> --with-pdo-sqlite \</span></span><br><span class="line"><span class="ruby"> --with-pear \</span></span><br><span class="line"><span class="ruby"> --with-png-dir \</span></span><br><span class="line"><span class="ruby"> --with-xmlrpc \</span></span><br><span class="line"><span class="ruby"> --with-xsl \</span></span><br><span class="line"><span class="ruby"> --with-zlib \</span></span><br><span class="line"><span class="ruby"> --enable-fpm \</span></span><br><span class="line"><span class="ruby"> --enable-bcmath \</span></span><br><span class="line"><span class="ruby"> --enable-libxml \</span></span><br><span class="line"><span class="ruby"> --enable-inline-optimization \</span></span><br><span class="line"><span class="ruby"> --enable-gd-native-ttf \</span></span><br><span class="line"><span class="ruby"> --enable-mbregex \</span></span><br><span class="line"><span class="ruby"> --enable-mbstring \</span></span><br><span class="line"><span class="ruby"> --enable-opcache \</span></span><br><span class="line"><span class="ruby"> --enable-pcntl \</span></span><br><span class="line"><span class="ruby"> --enable-shmop \</span></span><br><span class="line"><span class="ruby"> --enable-soap \</span></span><br><span class="line"><span class="ruby"> --enable-sockets \</span></span><br><span class="line"><span class="ruby"> --enable-sysvsem \</span></span><br><span class="line"><span class="ruby"> --enable-xml \</span></span><br><span class="line"><span class="ruby"> --enable-zip \</span></span><br><span class="line"><span class="ruby"> --enable-mysqlnd \</span></span><br><span class="line"><span class="ruby"> --with-pdo-mysql=mysqlnd \</span></span><br><span class="line"><span class="ruby"> --with-mcrypt</span></span><br></pre></td></tr></table></figure><p>我的错误</p><table><thead><tr><th>Configure Command</th><th>‘./configure’ ‘–prefix=/data/server/php7’ ‘–with-gd’ ‘–with-freetype-dir’ ‘–enable-gd-native-ttf’ ‘–enable-mysqlnd’ ‘–with-pdo-mysql=mysqlnd’ ‘–with-openssl’ ‘–with-mcrypt’ ‘–enable-mbstring’ ‘–enable-zip’ ‘–enable-fpm’</th></tr></thead><tbody><tr><td>Server API</td><td>FPM/FastCGI</td></tr><tr><td>Virtual Directory Support</td><td>disabled</td></tr><tr><td>Configuration File (php.ini) Path</td><td>/data/server/php7/lib</td></tr><tr><td>Loaded Configuration File</td><td>(none)        【正常情况这里不应该没有值的，还是之前的编译有问题，请仔细查看<br>                     正常应该是这个值   /data/server/php7/lib/php.ini】</td></tr><tr><td>Scan this dir for additional .ini files</td><td>(none)</td></tr><tr><td>Additional .ini files parsed</td><td>(none)</td></tr></tbody></table><p>之前安装过依赖这里就可以不用装，然后会提示部分依赖没有安装，安装依赖</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">apt-get <span class="keyword">install</span> libxml2 libxml2-dev</span><br><span class="line"></span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> openssl</span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> libssl-dev</span><br><span class="line"></span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> curl</span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> libcurl4-gnutls-dev</span><br><span class="line"></span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> libxslt-dev</span><br><span class="line"></span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> libpng-dev</span><br><span class="line"></span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">install</span> libfreetype6-dev</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// RetHat CentOS <span class="keyword">or</span> Fedora 使用下面安装命令</span><br><span class="line">yum <span class="keyword">install</span> curl curl-devel</span><br><span class="line"></span><br><span class="line">****************一般使用的依赖都是以下这些***************************</span><br><span class="line">安装相关依赖库</span><br><span class="line"></span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">update</span></span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libxml2-dev</span><br><span class="line">#安装gcc</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> <span class="keyword">build</span>-essential</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> openssl </span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libssl-dev </span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> make</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> curl</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libcurl4-gnutls-dev</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libjpeg-dev</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libpng-dev</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libmcrypt-dev</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libreadline6 libreadline6-dev</span><br><span class="line">apt-<span class="keyword">get</span> -y <span class="keyword">install</span> libfreetype6-dev  </span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libxslt1-dev</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/php/php7_configure01.png" alt="php configure" title="php configure"></p><h3 id="预处理ok后，make-编译"><a href="#预处理ok后，make-编译" class="headerlink" title="预处理ok后，make 编译"></a>预处理ok后，make 编译</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span> &amp;&amp;  <span class="built_in">make</span> install</span><br><span class="line"></span><br><span class="line">最后用 <span class="built_in">make</span> test 测试一下【这个过程时间比较长】</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/php/php7_configure01.png" alt="php make" title="php make"></p><p><img src="/img/ubuntu/php/php7_make_install.png" alt="php make install" title="php make install"></p><h3 id="安装完毕"><a href="#安装完毕" class="headerlink" title="安装完毕"></a>安装完毕</h3><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#查看 php 版本 ,这个时候没有环境变量,全局还不能使用 php -v,下问有介绍</span></span><br><span class="line">/<span class="class"><span class="keyword">data</span>/server/php7/bin/php -v  </span></span><br><span class="line"></span><br><span class="line"><span class="meta">#查看配置文件,没有加载,需要自己复制一份 php.ini</span></span><br><span class="line">/<span class="class"><span class="keyword">data</span>/server/php7/bin/php <span class="comment">--ini</span></span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/php/php7_version.png" alt="php version" title="php version"></p><h3 id="配置PHP"><a href="#配置PHP" class="headerlink" title="配置PHP"></a>配置PHP</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">cp <span class="regexp">/data/</span>server<span class="regexp">/php7/</span>php.ini-development   <span class="regexp">/data/</span>server<span class="regexp">/php7/</span>lib/php.ini</span><br><span class="line">cp <span class="regexp">/data/</span>server<span class="regexp">/php7/</span>etc<span class="regexp">/php-fpm.conf.default /</span>data<span class="regexp">/server/</span>php7<span class="regexp">/etc/</span>php-fpm.conf</span><br><span class="line">cp <span class="regexp">/data/</span>server<span class="regexp">/php7/</span>etc<span class="regexp">/php-fpm.d/</span>www.conf.<span class="keyword">default</span> <span class="regexp">/data/</span>server<span class="regexp">/php7/</span>etc<span class="regexp">/php-fpm.d/</span>www.conf</span><br><span class="line"></span><br><span class="line">官方这里拷贝文件有点不一样，注意一下</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/php/php7_php_ini.png" alt="php7 php.ini" title="php7 php.ini"></p><h3 id="添加-PHP-启动用户"><a href="#添加-PHP-启动用户" class="headerlink" title="添加 PHP 启动用户"></a>添加 PHP 启动用户</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">PHP 安装默认使用 www 用户，这里根据自己情况添加用户</span><br><span class="line">groupadd managers</span><br><span class="line">useradd -r -g managers -s /bin/<span class="literal">false</span> managers</span><br><span class="line"></span><br><span class="line">设置 PHP 启动用户</span><br><span class="line">cd /data/server/php7/etc/php-fpm.d</span><br><span class="line">vi www.conf  修改23、24行，内容如下：</span><br><span class="line"><span class="built_in"> user </span>= 启动fpm的用户名</span><br><span class="line"><span class="built_in"> group </span>= 启动fpm的用户所在组</span><br><span class="line"> </span><br><span class="line"><span class="built_in"> user </span>= managers</span><br><span class="line"><span class="built_in"> group </span>= managers</span><br><span class="line"></span><br><span class="line">修改完启动 PHP-fpm</span><br></pre></td></tr></table></figure><h3 id="php-启动命令"><a href="#php-启动命令" class="headerlink" title="php 启动命令"></a>php 启动命令</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/php7/</span>sbin<span class="regexp">/php-fpm</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/php/php7_user.png" alt="php7 启动用户" title="php7 启动用户"></p><h3 id="配置虚拟主机测试一下"><a href="#配置虚拟主机测试一下" class="headerlink" title="配置虚拟主机测试一下"></a>配置虚拟主机测试一下</h3><p>在 /data/www/ 目录下创建 index.php 内容如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> phpinfo();</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure><p>在 nginx 中配置虚拟主机</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">    <span class="attribute">listen</span>       <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span>  <span class="number">127.0.0.1</span> <span class="number">192.168.1.230</span>;</span><br><span class="line">    <span class="attribute">client_max_body_size</span> <span class="number">10m</span>;</span><br><span class="line">    <span class="attribute">charset</span> utf-<span class="number">8</span>;</span><br><span class="line">    <span class="comment">#access_log /data/server/tengine/logs/127.0.0.1_access.log;</span></span><br><span class="line">    <span class="comment">#error_log  /data/server/tengine/logs/127.0.0.1_error.log;</span></span><br><span class="line">    <span class="attribute">root</span>  /data/www/;</span><br><span class="line">   <span class="comment"># index index.html;</span></span><br><span class="line">    <span class="attribute">index</span> index.php;</span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ .+\.php($|/)</span> &#123;</span><br><span class="line">        <span class="attribute">fastcgi_pass</span> <span class="number">127.0.0.1:9000</span>;</span><br><span class="line">        <span class="attribute">fastcgi_index</span> index.php;</span><br><span class="line">        <span class="attribute">include</span> fastcgi.conf;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/php/php7_test.jpg" alt="php7 测试" title="php7 测试"></p><p>扩展： 使用 php -m  查看扩展,提示如下：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root<span class="variable">@ubuntu</span><span class="symbol">:/data/server/php7/bin</span><span class="comment"># php -m</span></span><br><span class="line">The program <span class="string">'php'</span> can be found <span class="keyword">in</span> the following <span class="symbol">packages:</span></span><br><span class="line"> * php7.<span class="number">0</span>-cli</span><br><span class="line"> * hhvm</span><br><span class="line"><span class="symbol">Try:</span> apt install &lt;selected package&gt;</span><br><span class="line">root<span class="variable">@ubuntu</span><span class="symbol">:/data/server/php7/bin</span><span class="comment"># apt install php7.0-cli</span></span><br><span class="line"></span><br><span class="line">安装：  apt install php7.<span class="number">0</span>-cli</span><br></pre></td></tr></table></figure><p>PHP命令</p><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">php --ini   <span class="meta">#查看PHP的配置文件</span></span><br><span class="line">php -ini    <span class="meta">#查看php.ini里面的配置</span></span><br><span class="line">php  -a     <span class="meta">#进入交互模式,可以写PHP代码,demo: 输入 echo <span class="string">"hello world"</span>; 然后回车显示hello world</span></span><br><span class="line"></span><br><span class="line">查询 PHP 服务 ps aux | grep php-fpm</span><br><span class="line">pkill <span class="number">-9</span> php</span><br><span class="line">php启动命令</span><br><span class="line"><span class="meta-keyword">/data/</span>server<span class="meta-keyword">/php7/</span>sbin/php-fpm</span><br><span class="line"></span><br><span class="line"><span class="meta">#查看PHP的编译参数</span></span><br><span class="line"><span class="meta-keyword">/data/</span>server<span class="meta-keyword">/php7/</span>bin/php -i | grep configure</span><br><span class="line">此命令使用场景:</span><br><span class="line">编译web服务器由nginx换为Apache的时候需要在Apache中添加PHP模块,  PHP需要添加 --with-apxs2 后重新编译</span><br></pre></td></tr></table></figure><h3 id="配置-php-全局变量"><a href="#配置-php-全局变量" class="headerlink" title="配置 php 全局变量"></a>配置 php 全局变量</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">PHP编译安装后的目录:  /data/server/php7/bin</span><br><span class="line">vim  /etc/profile</span><br><span class="line"></span><br><span class="line"><span class="comment">#centos中配置PHP环境变量:</span></span><br><span class="line">修改 /etc<span class="built_in">/profile </span>配置环境变量</span><br><span class="line"><span class="attribute">PATH</span>=<span class="variable">$PATH</span>:/data/server/php7/bin</span><br><span class="line"><span class="builtin-name">export</span> PATH</span><br><span class="line">然后执行source /etc<span class="built_in">/profile </span>或者 .<span class="built_in">/profile </span>使其生效; 执行完后可以通过 echo <span class="variable">$PATH</span>  命令查看环境变量</span><br><span class="line"></span><br><span class="line"><span class="comment">###PATH=$PATH:/data/server/php/bin  意思加入环境变量</span></span><br><span class="line"><span class="comment">###export PATH          意思使环境变量生效</span></span><br></pre></td></tr></table></figure><p> <a href="http://www.php.net/downloads.php" target="_blank" rel="noopener">PHP官网下载地址</a></p><p><a href="http://php.net/manual/zh/install.unix.nginx.php" title="PHP 官方安装文档" target="_blank" rel="noopener">PHP官方安装文档</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>win server 2008 部署php</title>
      <link href="/2018/03/15/win/win_server_2008_IIS/"/>
      <url>/2018/03/15/win/win_server_2008_IIS/</url>
      <content type="html"><![CDATA[<h3 id="配置IIS-（安装好-PHPstudy-后测试php）"><a href="#配置IIS-（安装好-PHPstudy-后测试php）" class="headerlink" title="配置IIS （安装好 PHPstudy 后测试php）"></a>配置IIS （安装好 PHPstudy 后测试php）</h3><p>在计算机右击,选择管理，出现服务器管理界面；或者打开“开始”菜单→“服务器管理”，出现服务器管理界面</p><p><img src="/img/win_server2008/IIS_01.png" alt="IIS"></p><p>添加角色，下一步，选择 web 服务器（IIS）,下一步 选择 CGI,一直下一步</p><p><img src="/img/win_server2008/IIS_02.png" alt="IIS"></p><p><img src="/img/win_server2008/IIS_03.png" alt="IIS"></p><p><img src="/img/win_server2008/IIS_04.png" alt="IIS"></p><p>安装好IIS后，需要测试一下，在浏览器中输入 localhost ，如果出现 IIS7 欢迎界面说明正常；</p><p><img src="/img/win_server2008/IIS_05.png" alt="IIS"></p><p>配置一个新网站，打开 IIS 管理器（“开始”→“所有程序”→“管理工具”→“internet 信息服务（IIS）管理器”）；<br>备注：使用 PHPstudy 打开 IIS 管理器，需要提前安装好 PHPstudy；</p><p><img src="/img/win_server2008/IIS_06.png" alt="IIS"></p><p><img src="/img/win_server2008/IIS_07.png" alt="IIS"></p><p>添加好后，在 IIS 管理器中，在刚才添加的网站 “网站名称” 上右键，点击 “编辑权限” ，进入后点击“安全”选项卡，再点击其中的“编辑” 。打开“编辑”窗口后点击“添加”按钮。添加一个“用户”到权限用户列表中，然后为其勾选除了“完全控制”之外的权限。然后点击“确定” “应用”。</p><p><img src="/img/win_server2008/IIS_08.png" alt="IIS"></p><p>结束后，在刚才选择的物理路径下创建 index.html ,然后用记事本打开，输入 ”hello world“ 测试；</p><p>如果是做 PHP 开发，安装好 PHPstudy 后，可出在刚才选择的物理路径下创建 index.php ,然后用记事本打开，输入 如下做测试</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> phpinfo();</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure><p><img src="/img/win_server2008/IIS_09.png" alt="IIS"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu -lnmp环境</title>
      <link href="/2018/03/13/ubuntu/linux_ubuntu_lnmp/"/>
      <url>/2018/03/13/ubuntu/linux_ubuntu_lnmp/</url>
      <content type="html"><![CDATA[<h3 id="LNMP环境搭建"><a href="#LNMP环境搭建" class="headerlink" title="LNMP环境搭建"></a>LNMP环境搭建</h3><p>使用命令下载 nginx 安装包</p><p><img src="/img/ubuntu/linux_command/linux_00/root_passwd.png" alt="root passwd"></p><p> <a href="http://nginx.org/" title="nginx官网" target="_blank" rel="noopener">nginx官网</a><br> <a href="http://nginx.org/" title="nginx官网" target="_blank" rel="noopener">nginx官网</a><br> <a href="http://nginx.org/" title="nginx官网" target="_blank" rel="noopener">nginx官网</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu -shipyard</title>
      <link href="/2018/03/09/ubuntu/linux_ubuntu_shipyard/"/>
      <url>/2018/03/09/ubuntu/linux_ubuntu_shipyard/</url>
      <content type="html"><![CDATA[<h3 id="Shipyard简介"><a href="#Shipyard简介" class="headerlink" title="Shipyard简介"></a>Shipyard简介</h3><p>待完善。。。。。。。</p><p>Shipyard 是一个基于 Web 的 Docker 管理工具，支持多 host，可以把多个 Docker host 上的 containers 统一管理；可以查看 images，甚至 build images；并提供 RESTful API 等</p><h3 id="安装-shipyard"><a href="#安装-shipyard" class="headerlink" title="安装 shipyard"></a>安装 shipyard</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="keyword">run</span> --<span class="keyword">rm</span> -v /<span class="keyword">var</span>/<span class="keyword">run</span>/docker.sock:/<span class="keyword">var</span>/<span class="keyword">run</span>/docker.sock shipyard/deploy start</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/shipyard/shipyard_install.png" alt="root passwd"></p><p> <a href="http://shipyard-project.com/&quot;shipyard官网 最近官网不能访问&quot;" target="_blank" rel="noopener">Shipyard官网最近官网不能访问</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-scp  Linux之间复制文件和目录</title>
      <link href="/2018/03/08/ubuntu/linux_DDU_scp/"/>
      <url>/2018/03/08/ubuntu/linux_DDU_scp/</url>
      <content type="html"><![CDATA[<h3 id="scp-简介"><a href="#scp-简介" class="headerlink" title="scp 简介"></a>scp 简介</h3><p>scp是secure copy的简写，用于在Linux下进行远程拷贝文件的命令，和它类似的命令有cp，<font color="red">不过cp只是在本机进行拷贝不能跨服务器</font>，而且scp传输是加密的。可能会稍微影响一下速度。当你服务器硬盘变为只读 read only system时，用scp可以帮你把文件移出来。另外，scp还非常不占资源，不会提高多少系统负荷，在这一点上，rsync就远远不及它了。虽然 rsync比scp会快一点，但当小文件众多的情况下，rsync会导致硬盘I/O非常高，而scp基本不影响系统正常使用</p><h3 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h3><p>scp [参数]  [原路径]  [目标路径]</p><h3 id="命令参数"><a href="#命令参数" class="headerlink" title="命令参数"></a>命令参数</h3><p>-1 强制scp命令使用协议ssh1<br>-2 强制scp命令使用协议ssh2<br>-4 强制scp命令只使用IPv4寻址<br>-6 强制scp命令只使用IPv6寻址<br>-B 使用批处理模式（传输过程中不询问传输口令或短语）<br>-C 允许压缩。（将-C标志传递给ssh，从而打开压缩功能）<br>-p 保留原文件的修改时间，访问时间和访问权限。<br>-q 不显示传输进度条。<br>-r 递归复制整个目录。<br>-v 详细方式显示输出。scp和ssh(1)会显示出整个过程的调试信息。这些信息用于调试连接，验证和配置问题。<br>-c cipher 以cipher将数据传输进行加密，这个选项将直接传递给ssh。<br>-F ssh_config 指定一个替代的ssh配置文件，此参数直接传递给ssh。<br>-i identity_file 从指定文件中读取传输时使用的密钥文件，此参数直接传递给ssh。<br>-l limit 限定用户所能使用的带宽，以Kbit/s为单位。<br>-o ssh_option 如果习惯于使用ssh_config(5)中的参数传递方式，<br>-P port 注意是大写的P, port是指定数据传输用到的端口号<br>-S program 指定加密传输时所使用的程序。此程序必须能够理解ssh(1)的选项</p><h3 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h3><p>使用scp前提：两台服务器必须都安装 ssh</p><h4 id="从本地服务器复制到远程服务器"><a href="#从本地服务器复制到远程服务器" class="headerlink" title="从本地服务器复制到远程服务器"></a>从本地服务器复制到远程服务器</h4><h4 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">注意目标文件的权限<span class="symbol">:</span></span><br><span class="line">scp local_file remote_username<span class="variable">@remote_ip</span><span class="symbol">:remote_folder</span></span><br><span class="line">或者</span><br><span class="line">scp local_file remote_username<span class="variable">@remote_ip</span><span class="symbol">:remote_file</span></span><br><span class="line">或者</span><br><span class="line">scp local_file <span class="symbol">remote_ip:</span>remote_folder</span><br><span class="line">或者</span><br><span class="line">scp local_file <span class="symbol">remote_ip:</span>remote_file</span><br><span class="line"></span><br><span class="line">demo：</span><br><span class="line">scp test2_01.test dafei<span class="variable">@192</span>.<span class="number">168.1</span>.<span class="number">113</span><span class="symbol">:/data/www/test/</span></span><br></pre></td></tr></table></figure><p>第1,2个指定了用户名，命令执行后需要输入用户密码，<br>第1个仅指定了远程的目录，文件名字不变，<br>第2个指定了文件名<br>第3,4个没有指定用户名，命令执行后需要输入用户名和密码（默认使用root），<br>第3个仅指定了远程的目录，文件名字不变，<br>第4个指定了文件名</p><p><img src="/img/ubuntu/linux_command/linux_scp/scp_local_remote01.png" alt="scp 本地拷贝到远程复制文件" title="本地拷贝到远程复制文件"></p><h4 id="复制目录"><a href="#复制目录" class="headerlink" title="复制目录"></a>复制目录</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-r参数不要遗漏：【否则报错： <span class="keyword">not</span> a regular file】</span><br><span class="line">scp -r local_folder remote_username<span class="variable">@remote_ip</span><span class="symbol">:remote_folder</span></span><br><span class="line">或者</span><br><span class="line">scp -r local_folder <span class="symbol">remote_ip:</span>remote_folder </span><br><span class="line"></span><br><span class="line"><span class="symbol">demo:</span></span><br><span class="line">scp -r test2 dafei<span class="variable">@192</span>.<span class="number">168.1</span>.<span class="number">113</span><span class="symbol">:/data/www/test/</span></span><br></pre></td></tr></table></figure><p>第1个指定了用户名，命令执行后需要输入用户密码；<br>第2个没有指定用户名，命令执行后需要输入用户名和密码(默认使用root)；</p><p><img src="/img/ubuntu/linux_command/linux_scp/scp_local_remote02.png" alt="scp 本地拷贝到远程复制目录" title="scp 本地拷贝到远程复制目录"></p><h4 id="从远程服务器复制到本地服务器"><a href="#从远程服务器复制到本地服务器" class="headerlink" title="从远程服务器复制到本地服务器"></a>从远程服务器复制到本地服务器</h4><p>从远程复制到本地的scp命令与上面的命令雷同，只要将从本地复制到远程的命令后面2个参数互换顺序就行了</p><p>从远程拷贝文件到本地目录</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp root<span class="variable">@remote_ip</span><span class="symbol">:remote_file</span> local_folder</span><br><span class="line">demo：</span><br><span class="line">scp dafei<span class="variable">@192</span>.<span class="number">168.1</span>.<span class="number">87</span><span class="symbol">:/data/www/test2/test2_01</span>.test  /data/www/test/</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_scp/scp_remote_locat01.png" alt="scp 远程拷贝文件到本地" title="scp 远程拷贝文件到本地"></p><h4 id="从远处复制目录到本地"><a href="#从远处复制目录到本地" class="headerlink" title="从远处复制目录到本地"></a>从远处复制目录到本地</h4><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp -r root<span class="variable">@remote_ip</span><span class="symbol">:remote_folder</span> local_folder</span><br><span class="line"><span class="symbol">demo:</span></span><br><span class="line">scp -r dafei<span class="variable">@192</span>.<span class="number">168.1</span>.<span class="number">87</span><span class="symbol">:/data/www/test2</span> /data/www/test/</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_scp/scp_remote_locat02.png" alt="scp 远程拷贝目录到本地" title="scp 远程拷贝目录到本地"></p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p> <a href="https://github.com/an7oine/expect-nt/tree/master/original-5.21r1b1" title="expect-nt" target="_blank" rel="noopener">expect-nt</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu -tomact</title>
      <link href="/2018/03/01/ubuntu/linux_ubuntu_tomact/"/>
      <url>/2018/03/01/ubuntu/linux_ubuntu_tomact/</url>
      <content type="html"><![CDATA[<h4 id="官网下载-Tomact-包上传到服务器"><a href="#官网下载-Tomact-包上传到服务器" class="headerlink" title="官网下载 Tomact 包上传到服务器"></a>官网下载 Tomact 包上传到服务器</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">然后解压：</span><br><span class="line"><span class="selector-tag">sudo</span> <span class="selector-tag">tar</span> <span class="selector-tag">-zxvf</span> <span class="selector-tag">apache-tomcat-9</span><span class="selector-class">.0</span><span class="selector-class">.5</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/tomact/tomcat_tar.png" alt="tomact 解压" title="tomact 解压"></p><p>在 /data/server 目录创建 tomcat 目录；然后将文件夹 apache-tomcat-9.0.5 移动到   /data/server/tomcat 下：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir tomcat</span><br><span class="line">sudo mv  apache-tomcat-<span class="number">9.0</span>.<span class="number">5</span> <span class="regexp">/data/</span>server<span class="regexp">/tomcat/</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/tomact/tomcat_position.png" alt="tomact 位置" title="tomact 位置"></p><h4 id="进入-data-server-tomcat-apache-tomcat-9-0-5-bin，编辑-startup-sh"><a href="#进入-data-server-tomcat-apache-tomcat-9-0-5-bin，编辑-startup-sh" class="headerlink" title="进入/data/server/tomcat/apache-tomcat-9.0.5/bin，编辑 startup.sh"></a>进入/data/server/tomcat/apache-tomcat-9.0.5/bin，编辑 startup.sh</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">在最后一行加入下信息;</span><br><span class="line"></span><br><span class="line"><span class="comment">#set java environment</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/lib/jvm/jdk1.8.0_161    ## 这里要注意要换成自己解压的 jdk 目录</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JRE_HOME</span>=<span class="variable">$&#123;JAVA_HOME&#125;</span>/jre</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">CLASSPATH</span>=.:%&#123;JAVA_HOME&#125;/lib:%&#123;JRE_HOME&#125;/lib</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:$PATH</span><br><span class="line"></span><br><span class="line"><span class="comment">#tomcat</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">TOMCAT_HOME</span>=/data/server/tomcat/apache-tomcat-9.0.5  ## 这里要注意要换成自己解压的 tomcat 目录</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/tomact/tomcat_environment.png" alt="tomact 环境变量" title="tomact 环境变量"></p><h4 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h4><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="string">./startup.sh</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/tomact/tomcat_start.png" alt="tomact 启动成功" title="tomact 启动成功"></p><h4 id="关闭-tomcat-，需要在-shutdown-sh-对应的位置添加信息"><a href="#关闭-tomcat-，需要在-shutdown-sh-对应的位置添加信息" class="headerlink" title="关闭 tomcat ，需要在 shutdown.sh 对应的位置添加信息"></a>关闭 tomcat ，需要在 shutdown.sh 对应的位置添加信息</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">在最后一行加入下信息;</span><br><span class="line"></span><br><span class="line"><span class="comment">#set java environment</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/lib/jvm/jdk1.8.0_161      ## 这里要注意要换成自己解压的 jdk 目录</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JRE_HOME</span>=<span class="variable">$&#123;JAVA_HOME&#125;</span>/jre</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">CLASSPATH</span>=.:%&#123;JAVA_HOME&#125;/lib:%&#123;JRE_HOME&#125;/lib</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:$PATH</span><br><span class="line"></span><br><span class="line"><span class="comment">#tomcat</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">TOMCAT_HOME</span>=/data/server/tomcat/apache-tomcat-9.0.5  ## 这里要注意要换成自己解压的 tomcat 目录</span><br></pre></td></tr></table></figure><h4 id="停止"><a href="#停止" class="headerlink" title="停止"></a>停止</h4><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ./<span class="built_in">shutdown</span>.sh</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/tomact/tomcat_stop.png" alt="tomact 停止" title="tomact 停止"></p><h4 id="加入开机启动："><a href="#加入开机启动：" class="headerlink" title="加入开机启动："></a>加入开机启动：</h4><h4 id="把catalina-sh文件复制到-etc-init-d"><a href="#把catalina-sh文件复制到-etc-init-d" class="headerlink" title="把catalina.sh文件复制到/etc/init.d"></a>把catalina.sh文件复制到/etc/init.d</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">sudo cp -p /data/server/tomcat/apache-tomcat-9.0.5/bin/catalina.sh /etc/init.d/tomcat  </span><br><span class="line"></span><br><span class="line">编辑tomcat文件： </span><br><span class="line">sudo vim /etc/init.d/tomcat </span><br><span class="line"></span><br><span class="line">在开头写如下内容：【提醒：这里一定要注意书写格式，不能有空格，有#的注释部分也要写全，不要遗漏】</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## BEGIN INIT INFO  </span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Provides:          tomcat  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Required-Start:    <span class="variable">$local_fs</span> <span class="variable">$network</span>  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Required-Stop:     <span class="variable">$local_fs</span>  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Default-Start:     2 3 4 5  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Default-Stop:      0 1 6  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Short-Description: tomcat service  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"> Description:       tomcat service daemon  </span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">## END INIT INFO  </span></span></span><br><span class="line">CATALINA_HOME=/data/server/tomcat/apache-tomcat-9.0.5  </span><br><span class="line">JAVA_HOME=/usr/lib/jvm/jdk1.8.0_161</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/tomact/tomcat_edit_content.png" alt="tomact 开机自启编辑内容" title="tomact 开机自启编辑内容"></p><h4 id="添加自启动服务"><a href="#添加自启动服务" class="headerlink" title="添加自启动服务"></a>添加自启动服务</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span>-rc.d tomcat <span class="keyword">defaults</span></span><br></pre></td></tr></table></figure><h4 id="测试，关机重启访问-localhost-8080-或者-192-168-1-113-8080"><a href="#测试，关机重启访问-localhost-8080-或者-192-168-1-113-8080" class="headerlink" title="测试，关机重启访问 localhost:8080  或者 192.168.1.113:8080"></a>测试，关机重启访问 localhost:8080  或者 192.168.1.113:8080</h4><p><img src="/img/ubuntu/tomact/tomcat_start2.png" alt="tomact 开机自启成功" title="tomact 开机自启成功"></p><h4 id="tomact-命令"><a href="#tomact-命令" class="headerlink" title="tomact 命令"></a>tomact 命令</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">service tomcat &#123;start|stop|restart&#125;</span><br><span class="line">service tomcat stop</span><br><span class="line">service tomcat start</span><br><span class="line">service tomcat restart</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Ubuntu -jdk</title>
      <link href="/2018/02/28/ubuntu/linux_ubuntu_jdk/"/>
      <url>/2018/02/28/ubuntu/linux_ubuntu_jdk/</url>
      <content type="html"><![CDATA[<h2 id="Ubuntu-安装-jdk-2-种方式"><a href="#Ubuntu-安装-jdk-2-种方式" class="headerlink" title="Ubuntu 安装 jdk 2 种方式"></a>Ubuntu 安装 jdk 2 种方式</h2><p>1、 通过 ppa 源方式安装 jdk8<br>2、通过官网下载安装包安装 jdk8</p><p>检测linux多少位： getconf LONG_BIT    我的系统是64位</p><h2 id="使用-ppa-源方式安装"><a href="#使用-ppa-源方式安装" class="headerlink" title="使用 ppa 源方式安装"></a>使用 ppa 源方式安装</h2><h3 id="添加ppa"><a href="#添加ppa" class="headerlink" title="添加ppa"></a>添加ppa</h3><figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo<span class="built_in"> add-apt-repository </span>ppa:webupd8team/java</span><br><span class="line">sudo apt-get update</span><br></pre></td></tr></table></figure><h3 id="安装oracle-java-installer"><a href="#安装oracle-java-installer" class="headerlink" title="安装oracle-java-installer"></a>安装oracle-java-installer</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install oracle-java8-installer</span><br></pre></td></tr></table></figure><p>接下来会出现连个界面，选择ok、yes 即可</p><p><img src="/img/ubuntu/jdk/installer.png" alt="jdk1.8 install" title="jdk1.8 install"></p><p><img src="/img/ubuntu/jdk/installer.png" alt="jdk1.8 install" title="jdk1.8 install02"></p><h4 id="查看java版本"><a href="#查看java版本" class="headerlink" title="查看java版本"></a>查看java版本</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -<span class="built_in">version</span></span><br></pre></td></tr></table></figure><h3 id="卸载jdk"><a href="#卸载jdk" class="headerlink" title="卸载jdk"></a>卸载jdk</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> <span class="builtin-name">remove</span> openjdk*</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/jdk/uninstall.png" alt="uninstall" title="uninstall"></p><h3 id="直接下载-jdk-压缩包方式安装"><a href="#直接下载-jdk-压缩包方式安装" class="headerlink" title="直接下载 jdk 压缩包方式安装"></a>直接下载 jdk 压缩包方式安装</h3><h4 id="官网下载-jdk"><a href="#官网下载-jdk" class="headerlink" title="官网下载 jdk"></a>官网下载 jdk</h4><p><a href="http://www.oracle.com/technetwork/java/javase/downloads/java-archive-javase8-2177648.html" title="jdk1.8 官网地址" target="_blank" rel="noopener">jdk1.8 官网地址</a>    选择相应的系统 .tar.gz 包，然后用ssh上传到服务器【提醒：不要在服务器直接下载，否则解压会出错】</p><p><img src="/img/ubuntu/jdk/tar_download_error.png" alt="tar Download error" title="tar Download error"></p><h4 id="解压缩，放到指定目录"><a href="#解压缩，放到指定目录" class="headerlink" title="解压缩，放到指定目录"></a>解压缩，放到指定目录</h4><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -zxvf jdk-<span class="number">8</span>u161-linux-x64.tar.gz -C /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">jvm</span></span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/jdk/tar_jdk.png" alt="tar jdk" title="tar jdk"></p><h4 id="修改环境变量"><a href="#修改环境变量" class="headerlink" title="修改环境变量"></a>修改环境变量</h4><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="keyword">vim</span> ~/.bashrc    #或者修改 <span class="keyword">vim</span> /etc/<span class="keyword">profile</span></span><br></pre></td></tr></table></figure><p>文件的末尾追加下面内容</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#set oracle jdk environment</span></span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JAVA_HOME</span>=/usr/lib/jvm/jdk1.8.0_161  ## 这里要注意目录要换成自己解压的jdk 目录</span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">JRE_HOME</span>=<span class="variable">$&#123;JAVA_HOME&#125;</span>/jre  </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">CLASSPATH</span>=.:$&#123;JAVA_HOME&#125;/lib:<span class="variable">$&#123;JRE_HOME&#125;</span>/lib  </span><br><span class="line"><span class="builtin-name">export</span> <span class="attribute">PATH</span>=<span class="variable">$&#123;JAVA_HOME&#125;</span>/bin:$PATH</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/jdk/jdk_environment.png" alt="jdk environment" title="jdk environment"></p><h4 id="设置系统默认-jdk-版本"><a href="#设置系统默认-jdk-版本" class="headerlink" title="设置系统默认 jdk 版本"></a>设置系统默认 jdk 版本</h4><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo update-alternatives --install /usr/bin/java java /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">jvm</span>/<span class="title">jdk1</span>.8.0<span class="title">_161</span>/<span class="title">bin</span>/<span class="title">java</span> 300  </span></span><br><span class="line">sudo update-alternatives --install /usr/bin/javac javac /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">jvm</span>/<span class="title">jdk1</span>.8.0<span class="title">_161</span>/<span class="title">bin</span>/<span class="title">javac</span> 300  </span></span><br><span class="line">sudo update-alternatives --install /usr/bin/jar jar /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">jvm</span>/<span class="title">jdk1</span>.8.0<span class="title">_161</span>/<span class="title">bin</span>/<span class="title">jar</span> 300   </span></span><br><span class="line">sudo update-alternatives --install /usr/bin/javah javah /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">jvm</span>/<span class="title">jdk1</span>.8.0<span class="title">_161</span>/<span class="title">bin</span>/<span class="title">javah</span> 300   </span></span><br><span class="line">sudo update-alternatives --install /usr/bin/javap javap /usr/<span class="class"><span class="keyword">lib</span>/<span class="title">jvm</span>/<span class="title">jdk1</span>.8.0<span class="title">_161</span>/<span class="title">bin</span>/<span class="title">javap</span> 300  </span></span><br><span class="line"></span><br><span class="line">然后执行</span><br><span class="line">sudo update-alternatives --config java</span><br></pre></td></tr></table></figure><h4 id="测试-jdk"><a href="#测试-jdk" class="headerlink" title="测试 jdk"></a>测试 jdk</h4><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -<span class="built_in">version</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/jdk/java_version.png" alt="java version" title="java version"></p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java -<span class="keyword">version</span>  <span class="comment">// 查看jdk版本</span></span><br><span class="line">java -verbose  <span class="comment">// 查看jdk安装路径</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Ubuntu16 -nginx</title>
      <link href="/2018/02/26/ubuntu/linux_ubuntu_nginx/"/>
      <url>/2018/02/26/ubuntu/linux_ubuntu_nginx/</url>
      <content type="html"><![CDATA[<h2 id="安装nginx-01"><a href="#安装nginx-01" class="headerlink" title="安装nginx 01"></a>安装nginx 01</h2><h3 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install nginx</span><br><span class="line"></span><br><span class="line">启动 ngnnx:  </span><br><span class="line">sudo<span class="built_in"> service </span>nginx start</span><br><span class="line"></span><br><span class="line">扩展centos nginx 重启</span><br><span class="line">service nginx restart</span><br><span class="line">/etc/init.d/nginx stop</span><br><span class="line">/etc/init.d/nginx start</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/nginx/nginx_start.png" alt="ubuntu nginx start" title="ubuntu nginx start"></p><h3 id="查看nginx配置文件目录"><a href="#查看nginx配置文件目录" class="headerlink" title="查看nginx配置文件目录"></a>查看nginx配置文件目录</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ps</span> -aux | <span class="keyword">grep</span> nginx   【返回结果包含安装目录】</span><br><span class="line">nginx -t               【返回结果包含配置文件目录】</span><br><span class="line"><span class="keyword">cat</span> /etc/nginx/nginx.<span class="keyword">conf</span></span><br></pre></td></tr></table></figure><p> <img src="/img/ubuntu/nginx/nginx_server.png" alt="nginx 安装位置" title="nginx 安装位置"></p><h2 id="编译安装02"><a href="#编译安装02" class="headerlink" title="编译安装02"></a>编译安装02</h2><h3 id="安装必要的编译环境-在ubuntu18中编译安装参考另一篇文章"><a href="#安装必要的编译环境-在ubuntu18中编译安装参考另一篇文章" class="headerlink" title="安装必要的编译环境,[ 在ubuntu18中编译安装参考另一篇文章]"></a>安装必要的编译环境,[ 在ubuntu18中编译安装参考另一篇文章]</h3><p>Tengine 安装需要使用源代码自行编译，所以安装前需要安装必要的编译工具</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get <span class="keyword">install</span> <span class="keyword">build</span>-essential</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> libtool</span><br><span class="line">sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> g++</span><br><span class="line"></span><br><span class="line">centos 平台编译环境命令：</span><br><span class="line">yum -y <span class="keyword">install</span> gcc automake autoconf libtool make</span><br><span class="line">yum <span class="keyword">install</span> gcc gcc-c++</span><br></pre></td></tr></table></figure><p>安装所需要的组件【pcre、openssl、zlib】，组件安装的时候注意路径</p><h3 id="PCRE"><a href="#PCRE" class="headerlink" title="PCRE"></a>PCRE</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">!!!只需要解压即可,nginx安装的时候,指定到解压目录就ok</span><br><span class="line">wget <span class="symbol">ftp:</span>/<span class="regexp">/ftp.csx.cam.ac.uk/pub</span><span class="regexp">/software/programming</span><span class="regexp">/pcre/pcre</span>-<span class="number">8.38</span>.tar.gz</span><br><span class="line">解压到你指定的目录</span><br><span class="line">tar -zxvf pcre-<span class="number">8.38</span>.tar.gz -C /data/server/nginx_component</span><br><span class="line">mv pcre-<span class="number">8.38</span> pcre</span><br><span class="line">cd pcre/</span><br><span class="line">./configure --prefix=<span class="regexp">/data/server</span><span class="regexp">/nginx_component/pcre</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/nginx/component_pcre.png" alt="component pcre" title="component pcre"></p><h3 id="OpenSSL"><a href="#OpenSSL" class="headerlink" title="OpenSSL"></a>OpenSSL</h3><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">!!!只需要解压即可,nginx安装的时候,指定到解压目录就ok</span><br><span class="line">wget <span class="symbol">http:</span>/<span class="regexp">/www.openssl.org/source</span><span class="regexp">/openssl-1.0.2.tar.gz</span></span><br><span class="line"><span class="regexp">解压到你指定的目录</span></span><br><span class="line"><span class="regexp">tar -zxvf openssl-1.0.2.tar.gz -C /data</span><span class="regexp">/server/nginx</span>_component</span><br><span class="line">mv openssl-<span class="number">1.0</span>.<span class="number">2</span> openssl</span><br><span class="line">cd openssl/</span><br><span class="line">./config --prefix=<span class="regexp">/data/server</span><span class="regexp">/nginx_component/openssl</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/nginx/component_openssl.png" alt="component openssl" title="component openssl"></p><h3 id="Zlib"><a href="#Zlib" class="headerlink" title="Zlib"></a>Zlib</h3><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">!!!只需要解压即可,nginx安装的时候,指定到解压目录就ok</span><br><span class="line">wget http://<span class="literal">zlib</span>.net/<span class="literal">zlib</span>-<span class="number">1.2</span>.<span class="number">11</span>.tar.gz</span><br><span class="line">解压到你指定的目录</span><br><span class="line">tar -zxvf <span class="literal">zlib</span>-<span class="number">1.2</span>.<span class="number">11</span>.tar.gz -C /data/server/nginx_component</span><br><span class="line">mv <span class="literal">zlib</span>-<span class="number">1.2</span>.<span class="number">11</span> <span class="literal">zlib</span></span><br><span class="line">cd <span class="literal">zlib</span>/</span><br><span class="line">./configure --prefix=/data/server/nginx_component/<span class="literal">zlib</span></span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/nginx/component_zlip.png" alt="component pcre" title="component pcre"></p><h3 id="下载nginx安装包，我选择的是-1-4-2"><a href="#下载nginx安装包，我选择的是-1-4-2" class="headerlink" title="下载nginx安装包，我选择的是 1.4.2"></a>下载nginx安装包，我选择的是 1.4.2</h3><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">./configure --help  可以查看nginx的编译参数说明,这里可以看到nginx需要的【pcre、openssl、zlib】的源码位置</span><br><span class="line">,所有者三个东西可以不用需要编译安装,只需要有源码即可</span><br><span class="line"></span><br><span class="line">wget http://nginx.org/download/nginx<span class="string">-1</span>.4.2.tar.gz</span><br><span class="line"></span><br><span class="line">解压到 /data/server/nginx 目录（可以根据实际情况选择目录）：</span><br><span class="line">tar -zxvf nginx<span class="string">-1</span>.4.2.tar.gz -C /data/server/</span><br><span class="line">mv nginx<span class="string">-1</span>.4.2 nginx</span><br><span class="line">cd nginx</span><br><span class="line"></span><br><span class="line">##注意路径</span><br><span class="line"> ./configure --prefix=/data/server/nginx \</span><br><span class="line">--with-http_ssl_module \</span><br><span class="line">--with-pcre=/data/server/nginx_component/pcre \</span><br><span class="line">--with-zlib=/data/server/nginx_component/zlib \</span><br><span class="line">--with-openssl=/data/server/nginx_component/openssl</span><br><span class="line"></span><br><span class="line"> make &amp; make install</span><br><span class="line"> </span><br><span class="line">安装完的提示：</span><br><span class="line">.........</span><br><span class="line"><span class="keyword">test </span>-f '/data/server/nginx/nginx.conf' || cp conf/nginx.conf '/data/server/nginx/nginx.conf'</span><br><span class="line">cp conf/nginx.conf '/data/server/nginx/nginx.conf.default'</span><br><span class="line"><span class="keyword">test </span>-d '/data/server/nginx' || mkdir -p '/data/server/nginx'</span><br><span class="line"><span class="keyword">test </span>-d '/usr/local/nginx/logs' || mkdir -p '/usr/local/nginx/logs'</span><br><span class="line"><span class="keyword">test </span>-d '/usr/local/nginx/html' || cp -R html '/usr/local/nginx'</span><br><span class="line"><span class="keyword">test </span>-d '/usr/local/nginx/logs' || mkdir -p '/usr/local/nginx/logs'</span><br><span class="line">make[1]: Leaving directory '/data/server/nginx'</span><br><span class="line">[1]+  Exit 2  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">****************************</span><br><span class="line">-------------如果执行make报错-----------</span><br><span class="line">cc1: all warnings being treated as errors</span><br><span class="line">objs/Makefile:447: recipe for target 'objs/src/core/ngx_murmurhash.o' failed</span><br><span class="line">make[1]: *** [objs/src/core/ngx_murmurhash.o] Error 1</span><br><span class="line">make[1]: Leaving directory '/data/download/nginx<span class="string">-1</span>.4.2'</span><br><span class="line">Makefile:8: recipe for target 'build' failed</span><br><span class="line">make: *** [build] Error 2</span><br><span class="line">--------  修改 /nginx<span class="string">-1</span>.4.2/objs/Makefile----</span><br><span class="line">现在修改  /nginx<span class="string">-1</span>.4.2/objs/Makefile</span><br><span class="line">   2 CC =    cc</span><br><span class="line">   3 CFLAGS =  -pipe  -O -W -Wall -Wpointer-arith -Wno-unused -Werror -g</span><br><span class="line">   4 CPP =   cc -E</span><br><span class="line">   5 LINK =  $(CC)</span><br><span class="line">去掉这里面的 -Werror  </span><br><span class="line">重新make,不要重新编译</span><br><span class="line">---------------------------------------</span><br><span class="line">make</span><br><span class="line">make install</span><br><span class="line">****************************</span><br></pre></td></tr></table></figure><p>注意配置的时候 –with-pcre 、–with-openssl、–with-zlib的路径为源文件的路径</p><p><img src="/img/ubuntu/nginx/nginx_end.png" alt="nginx 安装结束" title="nginx 安装结束"></p><h3 id="检测是否可用"><a href="#检测是否可用" class="headerlink" title="检测是否可用"></a>检测是否可用</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>nginx -t</span><br><span class="line">.<span class="regexp">/nginx -t</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/nginx/nginx_check.png" alt="nginx 检测" title="nginx 检测"></p><p><img src="/img/ubuntu/nginx/nginx_ok.jpg" alt="nginx 检测成功" title="nginx 检测成功"></p><h3 id="报错："><a href="#报错：" class="headerlink" title="报错："></a>报错：</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">安装完会有异常,没有 pid 文件，那就创建一个 pid  文件</span><br><span class="line">root<span class="variable">@ubuntu</span><span class="symbol">:/data/server/nginx</span><span class="comment"># /data/server/nginx/nginx -s reload</span></span><br><span class="line"><span class="symbol">nginx:</span> [error] open() <span class="string">"/data/server/nginx/nginx.pid"</span> failed (<span class="number">2</span>: No such file <span class="keyword">or</span> directory)</span><br><span class="line">root<span class="variable">@ubuntu</span><span class="symbol">:/data/server/nginx</span><span class="comment"># touch nginx.pid</span></span><br><span class="line">root<span class="variable">@ubuntu</span><span class="symbol">:/data/server/nginx</span><span class="comment"># /data/server/nginx/nginx -s reload</span></span><br><span class="line"><span class="symbol">nginx:</span> [error] invalid PID number <span class="string">""</span> <span class="keyword">in</span> <span class="string">"/data/server/nginx/nginx.pid"</span></span><br><span class="line">root<span class="variable">@ubuntu</span><span class="symbol">:/data/server/nginx</span><span class="comment"># /data/server/nginx/nginx  -c /data/server/nginx/conf/nginx.conf</span></span><br><span class="line">root<span class="variable">@ubuntu</span><span class="symbol">:/data/server/nginx</span><span class="comment"># /data/server/nginx/nginx -s reload</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/nginx/nginx_error.png" alt="nginx 异常" title="nginx 异常"></p><h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>nginx -t          【检查配置】</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>nginx             【启动命令】</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>nginx -s stop     【停止命令】</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>nginx -s reload   【重启命令：】</span><br><span class="line"></span><br><span class="line">pid出错时，可以使用这个：</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>nginx  -c <span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>conf<span class="regexp">/nginx.conf</span></span><br></pre></td></tr></table></figure><h2 id="编译安装03"><a href="#编译安装03" class="headerlink" title="编译安装03"></a>编译安装03</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">当前操作目录位置：  <span class="regexp">/home/</span>fei/server</span><br><span class="line">wget <span class="string">http:</span><span class="comment">//nginx.org/download/nginx-1.4.2.tar.gz</span></span><br><span class="line">tar -zxvf nginx<span class="number">-1.4</span><span class="number">.2</span>.tar.gz  -C <span class="regexp">/home/</span>fei/server</span><br><span class="line">cd nginx<span class="number">-1.4</span><span class="number">.2</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/nginx/nginx03_install.png" alt="nginx 安装" title="安装"></p><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">./configure <span class="attribute">--prefix</span>=/data/server/nginx-1.4.2</span><br><span class="line">发现少包，安装缺少的包</span><br><span class="line">sudo apt-<span class="builtin-name">get</span> install libpcre3 libpcre3-dev </span><br><span class="line">再次配置【 一直到不在缺少包 】</span><br><span class="line">./configure <span class="attribute">--prefix</span>=/data/server/nginx-1.4.2</span><br><span class="line"></span><br><span class="line">【 常见缺少少包： pcre、openssl、zlib，安装这三个包命令如下】</span><br><span class="line">sudo apt-<span class="builtin-name">get</span> install libpcre3 libpcre3-dev </span><br><span class="line">sudo apt-<span class="builtin-name">get</span> install openssl libssl-dev  </span><br><span class="line">sudo apt-<span class="builtin-name">get</span> install zlib1g-dev  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">配置 OK 后，继续操作</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/nginx/nginx03_packet1.png" alt="nginx 安装缺少包" title="安装缺少包"></p><p><img src="/img/ubuntu/nginx/nginx03_packet2.png" alt="nginx 安装缺少包" title="安装缺少包"></p><h3 id="编译安装"><a href="#编译安装" class="headerlink" title="编译安装"></a>编译安装</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">make</span> &amp;&amp; <span class="built_in">make</span> install</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/nginx/nginx03_make.png" alt="nginx 安装" title="安装"></p><h3 id="检测是否可用-1"><a href="#检测是否可用-1" class="headerlink" title="检测是否可用"></a>检测是否可用</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/nginx-1.4.2/</span>sbin<span class="regexp">/nginx -t</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/nginx/nginx03_test.png" alt="nginx 检测是否可用" title="检测是否可用"></p><h3 id="安装完成后，原文件就没有用了"><a href="#安装完成后，原文件就没有用了" class="headerlink" title="安装完成后，原文件就没有用了"></a>安装完成后，原文件就没有用了</h3><p><img src="/img/ubuntu/nginx/remove_useless.png" alt="nginx 删除没有用文件" title="删除没有用文件"></p><h3 id="命令-1"><a href="#命令-1" class="headerlink" title="命令"></a>命令</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>nginx -t          【检查配置】</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>nginx             【启动命令】</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>nginx -s stop     【停止命令】</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>nginx -s reload   【重启命令：】</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>nginx -v          【查看nginx版本】</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>nginx -V          【大写V 检查编译参数】</span><br><span class="line"></span><br><span class="line">pid出错时，可以使用这个：</span><br><span class="line"><span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>nginx  -c <span class="regexp">/data/</span>server<span class="regexp">/nginx/</span>conf/nginx.conf</span><br><span class="line"></span><br><span class="line">让nginx 返回http状态码</span><br><span class="line"><span class="keyword">return</span> <span class="number">403</span>;</span><br><span class="line"><span class="keyword">return</span> <span class="number">500</span>;</span><br></pre></td></tr></table></figure><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><h3 id="让普通用户可以启动nginx"><a href="#让普通用户可以启动nginx" class="headerlink" title="让普通用户可以启动nginx"></a>让普通用户可以启动nginx</h3><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">用root用户进入....nginx/sbin</span><br><span class="line">然后chown root nginx</span><br><span class="line">chmod u+s nginx</span><br><span class="line">然后通过普通用户就可以启动了。</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/nginx/common_star.png" alt="nginx 普通用户启动nginx" title="普通用户启动nginx"></p><p><a href="http://nginx.org/" target="_blank" rel="noopener">nginx 官网</a>   </p><p><a href="http://nginx.org/download/" target="_blank" rel="noopener">nginx 官网下载</a>      </p><p><a href="http://nginx.org/en/docs/configure.html" target="_blank" rel="noopener">nginx 官网linux安装</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu -jenkins</title>
      <link href="/2018/02/17/ubuntu/linux_ubuntu_jenkins/"/>
      <url>/2018/02/17/ubuntu/linux_ubuntu_jenkins/</url>
      <content type="html"><![CDATA[<h3 id="下载war-包"><a href="#下载war-包" class="headerlink" title="下载war 包"></a>下载war 包</h3><h4 id="第一种安装方式："><a href="#第一种安装方式：" class="headerlink" title="第一种安装方式："></a>第一种安装方式：</h4><p>前提：系统中必须安装好jdk，我的 jdk 是1.8</p><p>将下载好的war包放到linux中；切换到 jenkins.war　存放目录，输入命令： java -jar jenkins.war　<br>然后在浏览器中输入localhost:8080,就可以打开Jenkins</p><p><img src="/img/ubuntu/jenkins/01_install01" alt="Jenkins 安装" title="Jenkins 安装"></p><p><img src="/img/ubuntu/jenkins/01_install02" alt="Jenkins 安装" title="Jenkins 安装"></p><p>这种方式安装好后命令窗口会一直保持打开状态，不太实用；</p><h4 id="第二种安装方式，在-tomcat-中启动"><a href="#第二种安装方式，在-tomcat-中启动" class="headerlink" title="第二种安装方式，在 tomcat 中启动"></a>第二种安装方式，在 tomcat 中启动</h4><p><img src="/img/ubuntu/jenkins/01.png" alt="Jenkins war包" title="Jenkins war包"></p><p><img src="/img/ubuntu/jenkins/02.png" alt="Jenkins" title="Jenkins"></p><p><img src="/img/ubuntu/jenkins/03.png" alt="Jenkins" title="Jenkins"></p><p><img src="/img/ubuntu/jenkins/04.png" alt="Jenkins" title="Jenkins"></p><p><img src="/img/ubuntu/jenkins/05.png" alt="Jenkins" title="Jenkins"></p><p><img src="/img/ubuntu/jenkins/windows.png" alt="Jenkins" title="Jenkins"></p><p>不管用那种方法，安装后登录时空白，现在没有时间弄了，有知道的请留言</p><p><img src="/img/ubuntu/jenkins/06_error.png" alt="Jenkins error" title="Jenkins error"></p><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wget -q -O - http<span class="variable">s:</span>//pkg.jenkins.io/debian/jenkins-ci.org.key | sudo apt-key <span class="built_in">add</span> -</span><br><span class="line">sudo <span class="keyword">sh</span> -<span class="keyword">c</span> <span class="string">'echo deb http://pkg.jenkins.io/debian-stable binary/ &gt; /etc/apt/sources.list.d/jenkins.list'</span></span><br><span class="line">sudo apt-<span class="built_in">get</span> <span class="keyword">update</span></span><br><span class="line">sudo apt-<span class="built_in">get</span> install jenkins</span><br><span class="line"></span><br><span class="line">如果是升级，直接使用一下命令</span><br><span class="line">sudo apt-<span class="built_in">get</span> <span class="keyword">update</span></span><br><span class="line">sudo apt-<span class="built_in">get</span> install jenkins</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/jenkins/jenkins_user.png" alt="jenkins 用户" title="Jenkins 用户"></p><h3 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h3><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//服务</span></span><br><span class="line">sudo apt-<span class="built_in">get</span> <span class="built_in">remove</span> jenkins</span><br><span class="line"></span><br><span class="line"><span class="comment">//安装包，注意这里如果不是ubuntu那就yum</span></span><br><span class="line">sudo apt-<span class="built_in">get</span> <span class="built_in">remove</span> --<span class="keyword">auto</span>-<span class="built_in">remove</span> jenkins</span><br><span class="line"></span><br><span class="line"><span class="comment">//配置和数据</span></span><br><span class="line">sudo apt-<span class="built_in">get</span> purge jenkins</span><br><span class="line"></span><br><span class="line">sudo apt-<span class="built_in">get</span> purge --<span class="keyword">auto</span>-<span class="built_in">remove</span> jenkins</span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Ubuntu -git</title>
      <link href="/2018/02/13/ubuntu/linux_ubuntu_git/"/>
      <url>/2018/02/13/ubuntu/linux_ubuntu_git/</url>
      <content type="html"><![CDATA[<h3 id="前言："><a href="#前言：" class="headerlink" title="前言："></a>前言：</h3><p>本地:  windows7   ip: 192.168.1.105<br>服务器Ubuntu ： Ubuntu 15.10     ip: 192.168.1.113  【cat /etc/issue】 </p><h3 id="Ubuntu中git安装"><a href="#Ubuntu中git安装" class="headerlink" title="Ubuntu中git安装"></a>Ubuntu中git安装</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="comment">--version  【检测当前环境是否安装git】</span></span><br><span class="line"></span><br><span class="line">sudo apt-<span class="keyword">get</span> install git  【安装git】</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/git/git_install.png" alt="git install" title="git install"></p><h3 id="新增用户"><a href="#新增用户" class="headerlink" title="新增用户"></a>新增用户</h3><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">新增用户(用户名为git_dafei),用于运行git服务，回车后输入密码</span><br><span class="line"><span class="keyword">adduser </span>git_dafei</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/git/git_adduser.png" alt="git adduser" title="git adduser"></p><h3 id="初始git仓库，"><a href="#初始git仓库，" class="headerlink" title="初始git仓库，"></a>初始git仓库，</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">我在 /home/git_dafei/<span class="selector-tag">code</span> ( mkdir -<span class="selector-tag">p</span> /home/git_dafei/<span class="selector-tag">code</span> 注意创建这个目录后的所有者，权限)</span><br><span class="line">这个目录下，使用 git init 这个--bare 选项为它设置一个空的存储库，</span><br><span class="line">一般服务器上的 Git 仓库是以 <span class="selector-class">.git</span> 结尾的空仓库</span><br><span class="line"></span><br><span class="line">git init --bare test.git</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/git/git_init.png" alt="git init" title="git init"></p><p><img src="/img/ubuntu/git/git_init02.png" alt="git init02" title="git init02"></p><p>开始本地(windows)操作</p><h3 id="本地生成公钥-位置-C-Users-Administrator-ssh-或者-ssh"><a href="#本地生成公钥-位置-C-Users-Administrator-ssh-或者-ssh" class="headerlink" title="本地生成公钥,位置  C:\Users\Administrator\.ssh 或者  ~/.ssh"></a>本地生成公钥,位置  C:\Users\Administrator\.ssh 或者  ~/.ssh</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa <span class="keyword">ls</span> ~<span class="string">/.ssh/</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/git/git_win_ssh.png" alt="git win ssh" title="git win ssh"></p><h3 id="将win用户的公钥-即-id-rsa-pub-添加到服务器上"><a href="#将win用户的公钥-即-id-rsa-pub-添加到服务器上" class="headerlink" title="将win用户的公钥(即 id_rsa.pub )添加到服务器上"></a>将win用户的公钥(即 id_rsa.pub )添加到服务器上</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> scp ~<span class="regexp">/.ssh/id</span>_rsa.pub git_dafei<span class="variable">@192</span>.<span class="number">168.1</span>.<span class="number">113</span><span class="symbol">:/home/git_dafei/</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">[扩展<span class="symbol">:</span>使用ssh端口 ] scp -P <span class="number">22</span> ~<span class="regexp">/.ssh/id</span>_rsa.pub git_dafei<span class="variable">@192</span>.<span class="number">168.1</span>.<span class="number">113</span><span class="symbol">:/home/git_dafei/</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/git/git_win_scp.png" alt="git win scp" title="git win scp"></p><h3 id="将本地用户的公钥添加到认证文件中"><a href="#将本地用户的公钥添加到认证文件中" class="headerlink" title="将本地用户的公钥添加到认证文件中"></a>将本地用户的公钥添加到认证文件中</h3><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> <span class="string">/home/git_dafei</span></span><br><span class="line">mkdir <span class="string">.ssh</span></span><br><span class="line">touch authorized_keys    【在 <span class="string">.ssh</span>中创建 】</span><br><span class="line">cat id_rsa.pub &gt;&gt; <span class="string">.ssh/authorized_keys</span>   [如果没有 authorized_keys 请创建 touch authorized_keys</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/git/git_ssh.png" alt="git ssh" title="git ssh"></p><p><img src="/img/ubuntu/git/git_id_rs.png" alt="git id_rs" title="git id_rs"></p><h3 id="修改文件所有者为-git-dafei-用户"><a href="#修改文件所有者为-git-dafei-用户" class="headerlink" title="修改文件所有者为 git_dafei 用户"></a>修改文件所有者为 git_dafei 用户</h3><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">chown -R git_dafei:git_dafei /home/git_dafei</span><br><span class="line"></span><br><span class="line">chmod<span class="number"> 755 </span>/home/git_dafei/                       <span class="comment"># 1. 用户git_dafei目录755权限</span></span><br><span class="line">chmod<span class="number"> 700 </span>/home/git_dafei/.ssh                   <span class="comment"># 2. .ssh目录700权限</span></span><br><span class="line">chmod<span class="number"> 600 </span>/home/git_dafei/.ssh/authorized_keys   <span class="comment"># 3. authorized_keys 600权限 </span></span><br><span class="line"></span><br><span class="line">////////////////////效果//////////////////////////</span><br><span class="line">drwxr-xr-x<span class="number"> 2 </span>git_dafei git_dafei<span class="number"> 4096 </span>Feb<span class="number"> 14 </span>19:39 .ssh  【修改前权限】</span><br><span class="line">chmod<span class="number"> 700 </span>/home/git_dafei/.ssh</span><br><span class="line">drwx------<span class="number"> 2 </span>git_dafei git_dafei<span class="number"> 4096 </span>Feb<span class="number"> 14 </span>19:39 .ssh  【修改后权限】</span><br><span class="line"></span><br><span class="line">【修改前权限】：</span><br><span class="line">-rw-r--r--<span class="number"> 1 </span>git_dafei git_dafei<span class="number"> 401 </span>Feb<span class="number"> 14 </span>19:40 /home/git_dafei/.ssh/authorized_keys </span><br><span class="line"></span><br><span class="line">chmod<span class="number"> 600 </span>/home/git_dafei/.ssh/authorized_keys</span><br><span class="line"></span><br><span class="line">【修改后权限】</span><br><span class="line">-rw-------<span class="number"> 1 </span>git_dafei git_dafei<span class="number"> 401 </span>Feb<span class="number"> 14 </span>19:40 /home/git_dafei/.ssh/authorized_keys</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/git/git_chmod.png" alt="git chmod" title="git chmod"></p><h3 id="修改ssh配置文件"><a href="#修改ssh配置文件" class="headerlink" title="修改ssh配置文件"></a>修改ssh配置文件</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">修改ssh配置文件/etc/ssh/sshd_config，取消这行(33行) AuthorizedKeysFile    %h/.ssh/authorized_keys 前面的注释</span><br><span class="line">修改完重启ssh: <span class="built_in"> service </span>ssh restart</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/git/git_sshd_config.png" alt="git sshd_config" title="git sshd_config"></p><h3 id="安全"><a href="#安全" class="headerlink" title="安全"></a>安全</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">为例安全，禁止 git_dafei 用户 shell登录，需要修改 /etc/passwd</span><br><span class="line">将    <span class="symbol">git_dafei:</span><span class="symbol">x:</span><span class="number">1002</span><span class="symbol">:</span><span class="number">1002</span><span class="symbol">:</span>,,,<span class="symbol">:/home/git_dafei</span><span class="symbol">:/bin/bash</span></span><br><span class="line">改为  <span class="symbol">git_dafei:</span><span class="symbol">x:</span><span class="number">1002</span><span class="symbol">:</span><span class="number">1002</span><span class="symbol">:</span>,,,<span class="symbol">:/home/git_dafei</span><span class="symbol">:/usr/bin/git-shell</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/git/git_passwd.png" alt="git passwd" title="git passwd"></p><h3 id="在win中clone刚才创建的test-git"><a href="#在win中clone刚才创建的test-git" class="headerlink" title="在win中clone刚才创建的test.git"></a>在win中clone刚才创建的test.git</h3><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">克隆的用户有错</span><br><span class="line">git clone git_dafei<span class="variable">@192</span>.<span class="number">168.1</span>.<span class="number">113</span><span class="symbol">:/home/git_dafei/code/test</span>.git</span><br><span class="line"></span><br><span class="line">git clone 上面设置的用户名@服务器<span class="symbol">ip:</span>/home/git_dafei/code/test.git</span><br><span class="line">git clone <span class="symbol">ssh:</span>/<span class="regexp">/git_dafei@192.168.1.113:22 /home</span><span class="regexp">/git_dafei/code</span><span class="regexp">/test.git  [指定ssh端口克隆]</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/git/git_win_clone.png" alt="git win clone" title="git win clone"></p><p><img src="/img/ubuntu/git/git_win_user.png" alt="git win use" title="git win use"></p><p><img src="/img/ubuntu/git/git_ubuntu_clone.png" alt="git ubuntu clone" title="git ubuntu clone"></p><p><a href="https://help.ubuntu.com/lts/serverguide/git.html" title="Ubuntu git官方文档" target="_blank" rel="noopener">Ubuntu git官方文档</a><br><a href="https://git-scm.com/book/en/v2/Git-on-the-Server-Setting-Up-the-Server&quot;git官方文档&quot;" target="_blank" rel="noopener">git官方文档</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu15 -redis安装</title>
      <link href="/2018/02/12/ubuntu/linux_ubuntu_redis/"/>
      <url>/2018/02/12/ubuntu/linux_ubuntu_redis/</url>
      <content type="html"><![CDATA[<p>redis2种安装方式</p><h3 id="安装redis"><a href="#安装redis" class="headerlink" title="安装redis"></a>安装redis</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get <span class="keyword">install</span> redis-<span class="keyword">server</span>  </span><br><span class="line"></span><br><span class="line">启动redis</span><br><span class="line">redis-<span class="keyword">server</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/redis/redis_install.png" alt="redis install" title="redis install"></p><h3 id="检查redis-进程"><a href="#检查redis-进程" class="headerlink" title="检查redis 进程"></a>检查redis 进程</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ps</span> -aux|<span class="keyword">grep</span> redis</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/redis/reids_server.png" alt="redis server" title="redis server"></p><h3 id="终端输入：redis-cli-测试redis是否成功"><a href="#终端输入：redis-cli-测试redis是否成功" class="headerlink" title="终端输入：redis-cli 测试redis是否成功"></a>终端输入：redis-cli 测试redis是否成功</h3><p><img src="/img/ubuntu/redis/redis_cli.png" alt="redis-cli" title="redis-cli"></p><h3 id="redis-设置密码"><a href="#redis-设置密码" class="headerlink" title="redis 设置密码"></a>redis 设置密码</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">reids默认是不需要密码的，设置密码</span><br><span class="line">sudo vi /etc/redis/redis.conf  </span><br><span class="line"></span><br><span class="line">在<span class="number">397</span>行：   </span><br><span class="line">取消 注释      # requirepass foobared  </span><br><span class="line">设置新密码：   requirepass redis_pwd_123456  </span><br><span class="line">让 reids 远程登录  </span><br><span class="line">注释bind，在<span class="number">69</span>行  </span><br><span class="line"># bind <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br></pre></td></tr></table></figure><p> <img src="/img/ubuntu/redis/redis_pwd_remote.png" alt="redis pwd remote" title="redis pwd remote"></p><h3 id="修改后重启redis"><a href="#修改后重启redis" class="headerlink" title="修改后重启redis"></a>修改后重启redis</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="regexp">/etc/i</span>nit.d<span class="regexp">/redis-server restart</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/redis/redis_restart.png" alt="redis restart" title="redis restart"></p><h3 id="记得使用密码登录奥！！！"><a href="#记得使用密码登录奥！！！" class="headerlink" title="记得使用密码登录奥！！！"></a>记得使用密码登录奥！！！</h3><p><img src="/img/ubuntu/redis/redis_login.png" alt="redis login" title="redis login"></p><h3 id="卸载redis"><a href="#卸载redis" class="headerlink" title="卸载redis"></a>卸载redis</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> purge --auto-<span class="builtin-name">remove</span> redis-server</span><br></pre></td></tr></table></figure><h2 id="2、编译安装"><a href="#2、编译安装" class="headerlink" title="2、编译安装"></a>2、编译安装</h2><h3 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="comment">//download.redis.io/releases/redis-4.0.8.tar.gz</span></span><br><span class="line">tar -xzvf redis-<span class="number">4.0</span>.<span class="number">8</span><span class="selector-class">.tar</span><span class="selector-class">.gz</span>  -C /data/server/</span><br><span class="line">cd redis-<span class="number">4.0</span>.<span class="number">8</span>/</span><br><span class="line">make</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/redis/redis02_install.png" alt="redis02 install" title="redis02 install"></p><h3 id="启动redis"><a href="#启动redis" class="headerlink" title="启动redis"></a>启动redis</h3><p>make完后 redis-4.0.8目录下会出现编译后的redis服务程序redis-server,还有用于测试的客户端程序redis-cli,两个程序位于安装目录 src 目录下，下面启动redis服务.</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> src/</span><br><span class="line"><span class="string">./redis-server</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/redis/redis02_start.png" alt="redis02 start" title="redis02 start"></p><h3 id="redis设置密码"><a href="#redis设置密码" class="headerlink" title="redis设置密码"></a>redis设置密码</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">reids默认是不需要密码的，设置密码</span><br><span class="line">vi redis.conf  </span><br><span class="line"></span><br><span class="line">在<span class="number">500</span>行：   </span><br><span class="line">取消 注释      # requirepass foobared  </span><br><span class="line">设置新密码：   requirepass redis_pwd_123456</span><br><span class="line">让 reids 远程登录  </span><br><span class="line">注释bind，在<span class="number">69</span>行  </span><br><span class="line"># bind <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br></pre></td></tr></table></figure><p> <img src="/img/ubuntu/redis/redis_pwd_remote.png" alt="redis02 pwd remote" title="redis02 pwd remote"></p><h3 id="修改后启动redis"><a href="#修改后启动redis" class="headerlink" title="修改后启动redis"></a>修改后启动redis</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src/redis-server ./redis<span class="selector-class">.conf</span>   【指定配置文件启动】</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/redis/redis02_login.png" alt="redis02 pwd login" title="redis02 pwd login"></p><p><img src="/img/ubuntu/redis/redis_pwd.png" alt="redis02 pwd2 login" title="redis02 pwd2 login"></p><h3 id="设置-reids-后台启动"><a href="#设置-reids-后台启动" class="headerlink" title="设置 reids 后台启动"></a>设置 reids 后台启动</h3><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">vi redis<span class="selector-class">.conf</span>  </span><br><span class="line"></span><br><span class="line">在<span class="number">136</span>行</span><br><span class="line">把 daemonize no 改成 daemonize yes</span><br><span class="line"></span><br><span class="line">修改完重启redis：</span><br><span class="line">src/redis-server ./redis<span class="selector-class">.conf</span>   【指定配置文件启动】</span><br><span class="line">/data/server/redis-<span class="number">4.0</span>.<span class="number">8</span>/src/redis-server ./redis<span class="selector-class">.conf</span>   【指定配置文件启动】</span><br><span class="line">/data/server/redis-<span class="number">4.0</span>.<span class="number">8</span>/src/redis-server /data/server/redis-<span class="number">4.0</span>.<span class="number">8</span>/redis<span class="selector-class">.conf</span>   【指定配置文件启动】</span><br><span class="line">后台启动后关闭命令：</span><br><span class="line">./redis-cli -h <span class="number">127.0</span>.<span class="number">0.1</span> -<span class="selector-tag">a</span> redis_pwd_123456 -<span class="selector-tag">p</span> <span class="number">6379</span> shutdown</span><br><span class="line">/data/server/redis-<span class="number">4.0</span>.<span class="number">8</span>/src/redis-cli -h <span class="number">127.0</span>.<span class="number">0.1</span> -<span class="selector-tag">a</span> redis_pwd_123456 -<span class="selector-tag">p</span> <span class="number">6379</span> shutdown</span><br><span class="line"></span><br><span class="line">指定密码登录：</span><br><span class="line">/data/server/redis-<span class="number">4.0</span>.<span class="number">8</span>/src/redis-cli -<span class="selector-tag">a</span> redis_pwd_123456</span><br><span class="line">./redis-cli -<span class="selector-tag">a</span> redis_pwd_123456</span><br><span class="line">./redis-cli   回车后,输入 auth  密码</span><br><span class="line">测试数据：</span><br><span class="line">set key1 <span class="string">"hello world"</span></span><br><span class="line">get key1</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/redis/redis02_backend_start.png" alt="redis02 backend start" title="redis02 backend start"></p><p> <a href="http://download.redis.io/releases/" target="_blank" rel="noopener">redis官网下载地址</a></p><p> <a href="http://www.redis.net.cn/tutorial/3503.html" target="_blank" rel="noopener">redis官网安装</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Ubuntu -ssh</title>
      <link href="/2018/02/12/ubuntu/linux_ubuntu_ssh/"/>
      <url>/2018/02/12/ubuntu/linux_ubuntu_ssh/</url>
      <content type="html"><![CDATA[<h3 id="安装客户端"><a href="#安装客户端" class="headerlink" title="安装客户端"></a>安装客户端</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt <span class="keyword">install</span> openssh-<span class="keyword">client</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/ssh/ssh_client.png" alt="ssh client" title="ssh client"></p><h3 id="安装服务端"><a href="#安装服务端" class="headerlink" title="安装服务端"></a>安装服务端</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt <span class="keyword">install</span> openssh-<span class="keyword">server</span></span><br></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">查看手册   <span class="keyword">man</span> sshd_config</span><br></pre></td></tr></table></figure><p>在编辑配置文件之前，您应该生成一个原始文件的拷贝并对其写保护，以便您可以参考原始文件并在必要时重用它。拷贝 /etc/ssh/sshd_config 文件并对其写保护可以通过在终端提示符后运行下列命令</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cp <span class="regexp">/etc/</span>ssh<span class="regexp">/sshd_config /</span>etc<span class="regexp">/ssh/</span>sshd_config.original</span><br><span class="line">sudo chmod a-w <span class="regexp">/etc/</span>ssh<span class="regexp">/sshd_config.original</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/ssh/ssh_sshd_config.png" alt="ssh sshd_config" title="ssh sshd_config"></p><ul><li><p>要设置您 OpenSSH 在 TCP 2222 端口而不是缺省的 TCP 20 端口监听，可以如下使用改变 Port 语句：</p><p>Port 2222</p></li><li><p>要让 sshd 允许基于公钥登录证书，可以简单添加或修改该行语句：</p><p>PubkeyAuthentication yes</p><p>If the line is already present, then ensure it is not commented out.</p></li><li><p>要使您的 OpenSSH 服务器显示 /etc/issue.net 文件的内容以作为预登录 Banner，只需简单地将下行添加或修改：</p><p>Banner /etc/issue.net</p><p>在 /etc/ssh/sshd_config 文件中。</p></li></ul><p>在修改 /etc/ssh/sshd_config 文件之后，保存该文件并重启 sshd 服务器应用程序以使之生效。可以在终端提示符后使用下列命令：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">sudo</span> <span class="selector-tag">systemctl</span> <span class="selector-tag">restart</span> <span class="selector-tag">sshd</span><span class="selector-class">.service</span></span><br></pre></td></tr></table></figure><h3 id="SSH服务器命令"><a href="#SSH服务器命令" class="headerlink" title="SSH服务器命令"></a>SSH服务器命令</h3><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">停止服务：sudo /etc/init.d/ssh stop</span><br><span class="line">启动服务：sudo /etc/init.d/ssh start</span><br><span class="line">重启服务：sudo /etc/init.d/ssh restart</span><br><span class="line">登录： ssh 用户名@远程ip</span><br><span class="line">demo： ssh dafei@<span class="number">192.168</span><span class="number">.1</span><span class="number">.82</span></span><br><span class="line">  ssh -p <span class="number">22</span> dafei@<span class="number">192.168</span><span class="number">.1</span><span class="number">.82</span>   [指定端口登录]</span><br><span class="line">断开连接：exit;</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/ssh/ssh_remote_login.png" alt="ssh remote_login" title="ssh remote_login"></p><p>如果细心，可能发现远程登录不能用root登录，解决办法： 修改 /etc/ssh/sshd_config 配置文件</p><figure class="highlight basic"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">26 </span># Authentication:</span><br><span class="line"><span class="symbol">27 </span>LoginGraceTime <span class="number">120</span></span><br><span class="line"><span class="symbol">28 </span># PermitRootLogin prohibit-password    【找到这一行注释掉】</span><br><span class="line"><span class="symbol">29 </span>PermitRootLogin yes                    【改为yes】</span><br><span class="line"><span class="symbol">30 </span>StrictModes yes</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/ssh/ssh_remote_login_root.png" alt="ssh remote_login_root" title="ssh remote_login_root"></p><p><img src="/img/ubuntu/ssh/ssh_remote_login_ok.png" alt="ssh remote_login_root_ok" title="ssh remote_login_root_ok"></p><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>证书登录、无密码登录这里不在写，有需要的自己网上找资料；这个也是修改 sshd_config 文件</p><p>扩展：<br> <a href="https://help.ubuntu.com/lts/serverguide/openssh-server.html&quot;Ubuntu ssh&quot;" target="_blank" rel="noopener">Ubuntu ssh</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu -docker</title>
      <link href="/2018/02/08/ubuntu/linux_ubuntu_docker/"/>
      <url>/2018/02/08/ubuntu/linux_ubuntu_docker/</url>
      <content type="html"><![CDATA[<h3 id="Linux-ubuntu-docker"><a href="#Linux-ubuntu-docker" class="headerlink" title="Linux ubuntu docker"></a>Linux ubuntu docker</h3><p>前提条件 Docker要求Ubuntu系统内核版本高于3.10，查看内核版本</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">uname -r</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/docker/docker_get_error.png" alt="获取docker安装包报错"></p><p>系统版本没有问题，docker安装一直包这错。试一下docker命令，检查镜像信息</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br><span class="line">现在Ubuntu系统提示安装docker命令，我们执行</span><br><span class="line">apt-<span class="builtin-name">get</span> install docker.io</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/docker/docker_instal.png" alt="根据系统提示安装docker"></p><h3 id="查看docker版本"><a href="#查看docker版本" class="headerlink" title="查看docker版本"></a>查看docker版本</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">version</span></span><br><span class="line"></span><br><span class="line">sudo docker <span class="built_in">run</span> hello-world    【确认docker是否安装成功】</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/docker/docker_v.png" alt="却docker是否安装成功"></p><p>———————–到这里docker已经安装完成————————</p><h3 id="安装docker-compose"><a href="#安装docker-compose" class="headerlink" title="安装docker-compose"></a>安装docker-compose</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -L <span class="keyword">https</span>://github.com/docker/compose/releases/download/<span class="number">1.17</span><span class="number">.1</span>/docker-compose-`uname -s`-`uname -m` &gt; /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"></span><br><span class="line">sudo chmod +x /usr/<span class="built_in">local</span>/bin/docker-compose</span><br><span class="line"></span><br><span class="line">curl -L <span class="keyword">https</span>://raw.githubusercontent.com/docker/compose/<span class="number">1.8</span><span class="number">.0</span>/contrib/completion/bash/docker-compose &gt; /etc/bash_completion.d/docker-compose    【bash 补全命令】</span><br><span class="line"><span class="comment">////////如果出现超时，加上2个参数： ///////////</span></span><br><span class="line"><span class="comment">--connect-timeout 100000 -m 1000000</span></span><br><span class="line">-m为数据最大传输时间</span><br><span class="line">curl -L <span class="string">"https://github.com/docker/compose/releases/download/1.9.0/docker-compose-$(uname -s)-$(uname -m)"</span> -o /usr/<span class="built_in">local</span>/bin/docker-compose <span class="comment">--connect-timeout 100000 -m 1000000 </span></span><br><span class="line"><span class="comment">////////////////////////////////////////////</span></span><br><span class="line"></span><br><span class="line">docker-compose -<span class="built_in">version</span>    【检测 docker-compose 版本】</span><br><span class="line"></span><br><span class="line">sudo rm /usr/<span class="built_in">local</span>/bin/docker-compose    【卸载docker-compose】</span><br><span class="line"></span><br><span class="line"><span class="comment">-----------------------------------------------</span></span><br><span class="line"></span><br><span class="line">docker-compose 命令</span><br><span class="line">docker-compose ps   查看容器运行状态</span><br><span class="line">docker-compose restart <span class="comment">#重启所有容器</span></span><br><span class="line">docker-compose restart App1  <span class="comment">#重启App1</span></span><br><span class="line">docker-compose <span class="built_in">stop</span> <span class="comment">#停止所有容器</span></span><br><span class="line">docker-compose rm   <span class="comment">#删除所有容器</span></span><br><span class="line">docker-compose <span class="built_in">stop</span> App1  <span class="comment">#停止App1</span></span><br><span class="line">docker-compose -f docker-compose.yml down    停止并删除容器、网络、镜像、数据卷</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/docker/docker_compose.png" alt="docker-compose"></p><p>———————–到这里docker-compose已经安装完成————————</p><h3 id="Docker-Compose-搭建-Rails"><a href="#Docker-Compose-搭建-Rails" class="headerlink" title="Docker Compose 搭建 Rails"></a>Docker Compose 搭建 Rails</h3><p>温馨提示： 复制粘贴命令的时候注意别丢信息</p><h4 id="创建项目目录"><a href="#创建项目目录" class="headerlink" title="创建项目目录"></a>创建项目目录</h4><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> myapp</span><br><span class="line"><span class="built_in">cd</span> myapp</span><br></pre></td></tr></table></figure><h4 id="创建-Dockerfile文件，包含以下内容"><a href="#创建-Dockerfile文件，包含以下内容" class="headerlink" title="创建 Dockerfile文件，包含以下内容"></a>创建 Dockerfile文件，包含以下内容</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> ruby:<span class="number">2.3</span>.<span class="number">3</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> apt-get update -qq &amp;&amp; apt-get install -y build-essential libpq-dev nodejs</span></span><br><span class="line"><span class="bash">RUN mkdir /myapp</span></span><br><span class="line"><span class="bash">WORKDIR /myapp</span></span><br><span class="line"><span class="bash">COPY Gemfile /myapp/Gemfile</span></span><br><span class="line"><span class="bash">COPY Gemfile.lock /myapp/Gemfile.lock</span></span><br><span class="line"><span class="bash">RUN bundle install</span></span><br><span class="line"><span class="bash">COPY . /myapp</span></span><br></pre></td></tr></table></figure><h4 id="创建-Gemfile-文件，包含以下内容"><a href="#创建-Gemfile-文件，包含以下内容" class="headerlink" title="创建 Gemfile 文件，包含以下内容"></a>创建 Gemfile 文件，包含以下内容</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">source</span> <span class="string">'https://rubygems.org'</span></span><br><span class="line">gem <span class="string">'rails'</span>, <span class="string">'5.0.0.1'</span></span><br></pre></td></tr></table></figure><h4 id="创建空的-Gemfile-lock-文件"><a href="#创建空的-Gemfile-lock-文件" class="headerlink" title="创建空的 Gemfile.lock 文件"></a>创建空的 Gemfile.lock 文件</h4><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch Gemfile.<span class="keyword">lock</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/docker/docker_compose_Rails02.png" alt="docker-compose Rails02"></p><h4 id="创建一个-docker-compose-yml-，包含以下内容"><a href="#创建一个-docker-compose-yml-，包含以下内容" class="headerlink" title="创建一个 docker-compose.yml ，包含以下内容"></a>创建一个 docker-compose.yml ，包含以下内容</h4><p>温馨提示：<br>docker-compose.yml  中 version: ‘3’ 改为 version: ‘2’</p><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">version</span>: <span class="string">'2'</span></span><br><span class="line"><span class="attribute">services</span>:</span><br><span class="line">  <span class="attribute">db</span>:</span><br><span class="line">    <span class="attribute">image</span>: postgres</span><br><span class="line">  <span class="attribute">web</span>:</span><br><span class="line">    <span class="attribute">build</span>: .</span><br><span class="line">    <span class="attribute">command</span>: bundle exec rails s -p <span class="number">3000</span> -b <span class="string">'0.0.0.0'</span></span><br><span class="line">    <span class="attribute">volumes</span>:</span><br><span class="line">      - .:/myapp</span><br><span class="line">    <span class="attribute">ports</span>:</span><br><span class="line">      - <span class="string">"3000:3000"</span></span><br><span class="line">    <span class="attribute">depends_on</span>:</span><br><span class="line">      - db</span><br></pre></td></tr></table></figure><h4 id="接下来执行"><a href="#接下来执行" class="headerlink" title="接下来执行"></a>接下来执行</h4><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose <span class="builtin-name">run</span> web rails new . --force <span class="attribute">--database</span>=postgresql</span><br></pre></td></tr></table></figure><p>查看现在的目录：  ls -l   </p><p><img src="/img/ubuntu/docker/docker_compose_Rails03.png" alt="docker-compose Rails"></p><h4 id="修改权限，重建-Docker-镜像"><a href="#修改权限，重建-Docker-镜像" class="headerlink" title="修改权限，重建 Docker 镜像"></a>修改权限，重建 Docker 镜像</h4><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo chown -R $USER:$<span class="keyword">USER</span> <span class="title">.</span></span><br><span class="line"><span class="title">docker-compose</span> build</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/docker/docker_compose_Rails04.png" alt="docker-compose Rails"></p><h4 id="修改-config-database-yml-文件"><a href="#修改-config-database-yml-文件" class="headerlink" title="修改 config/database.yml 文件"></a>修改 config/database.yml 文件</h4><p>如果担心修改错误，可以先备份原文件： cp database.yml database.yml_backup</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">清空</span> <span class="string">database.yml</span> <span class="string">文件</span></span><br><span class="line"><span class="string">echo</span> <span class="string">" "</span><span class="string">&gt;database.yml</span></span><br><span class="line"></span><br><span class="line"><span class="string">database.yml</span> <span class="string">文件写入以下内容</span></span><br><span class="line"></span><br><span class="line"><span class="attr">default:</span> <span class="meta">&amp;default</span></span><br><span class="line"><span class="attr">  adapter:</span> <span class="string">postgresql</span></span><br><span class="line"><span class="attr">  encoding:</span> <span class="string">unicode</span></span><br><span class="line"><span class="attr">  host:</span> <span class="string">db</span></span><br><span class="line"><span class="attr">  username:</span> <span class="string">postgres</span></span><br><span class="line"><span class="attr">  password:</span></span><br><span class="line"><span class="attr">  pool:</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="attr">development:</span></span><br><span class="line">  <span class="string">&lt;&lt;:</span> <span class="meta">*default</span></span><br><span class="line"><span class="attr">  database:</span> <span class="string">myapp_development</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">test:</span></span><br><span class="line">  <span class="string">&lt;&lt;:</span> <span class="meta">*default</span></span><br><span class="line"><span class="attr">  database:</span> <span class="string">myapp_test</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/docker/docker_compose_Rails05.png" alt="docker-compose Rails"></p><h4 id="启动应用"><a href="#启动应用" class="headerlink" title="启动应用"></a>启动应用</h4><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">docker-compose up</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/docker/docker_compose_Rails06.png" alt="docker-compose Rails"></p><h4 id="创建数据库，在另一个终端中，执行"><a href="#创建数据库，在另一个终端中，执行" class="headerlink" title="创建数据库，在另一个终端中，执行"></a>创建数据库，在另一个终端中，执行</h4><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose <span class="keyword">run</span><span class="bash"> web rake db:create</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/docker/docker_compose_Rails07.png" alt="docker-compose Rails"></p><p>用浏览器访问 <a href="http://localhost:3000/" target="_blank" rel="noopener">http://localhost:3000</a> ，你会看到 Rails 的欢迎信息：</p><p><img src="/img/ubuntu/docker/docker_compose_Rails.png" alt="docker-compose Rails"></p><h4 id="If-you-are-using-Docker-Machine-then-docker-machine-ip-MACHINE-VM-returns-the-Docker-host-IP-address-to-which-you-can-append-the-port-lt-Docker-Host-IP-gt-3000"><a href="#If-you-are-using-Docker-Machine-then-docker-machine-ip-MACHINE-VM-returns-the-Docker-host-IP-address-to-which-you-can-append-the-port-lt-Docker-Host-IP-gt-3000" class="headerlink" title="If you are using Docker Machine, then docker-machine ip MACHINE_VM returns the Docker host IP address, to which you can append the port (&lt;Docker-Host-IP&gt;:3000)."></a>If you are using <a href="https://docs.docker.com/machine/overview/" target="_blank" rel="noopener">Docker Machine</a>, then <code>docker-machine ip MACHINE_VM</code> returns the Docker host IP address, to which you can append the port (<code>&lt;Docker-Host-IP&gt;:3000</code>).</h4><p><img src="/img/ubuntu/docker/docker_compose_Rails08.png" alt="docker-compose Rails"></p><p><a href="https://docs.docker.com/compose/rails/#rebuild-the-application" title="docker-compose 安装Rails官方文档" target="_blank" rel="noopener">Compose and Rail 官方文档</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>ubuntu系统</title>
      <link href="/2018/02/07/ubuntu/linux_ubuntu_centos/"/>
      <url>/2018/02/07/ubuntu/linux_ubuntu_centos/</url>
      <content type="html"><![CDATA[<h3 id="虚拟机安装完ubuntu后root没有密码"><a href="#虚拟机安装完ubuntu后root没有密码" class="headerlink" title="虚拟机安装完ubuntu后root没有密码"></a>虚拟机安装完ubuntu后root没有密码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">设置root密码</span><br><span class="line">sudo passwd</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_00/root_passwd.png" alt="root passwd"></p><h3 id="虚拟机安装完centos后重新设置root密码"><a href="#虚拟机安装完centos后重新设置root密码" class="headerlink" title="虚拟机安装完centos后重新设置root密码"></a>虚拟机安装完centos后重新设置root密码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">设置root密码</span><br><span class="line">passwd</span><br></pre></td></tr></table></figure><hr><h3 id="用户切换："><a href="#用户切换：" class="headerlink" title="用户切换："></a>用户切换：</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="keyword">su</span> (切换到root用户)；    </span><br><span class="line"><span class="keyword">su</span> user（user是你自己安装时候的用户名；切换到普通用户）</span><br><span class="line"></span><br><span class="line">其他命令：</span><br><span class="line">修改文件权限：</span><br><span class="line">    sudo chmod -R 777 文件名</span><br><span class="line">安装文件命令：</span><br><span class="line">    sudo apt-get install 文件名</span><br><span class="line">   清空某个文件</span><br><span class="line">   echo <span class="string">""</span> &gt;<span class="keyword">log</span>.<span class="built_in">log</span></span><br><span class="line">   动态查看内容</span><br><span class="line">   tail -f api_v1.<span class="built_in">log</span></span><br><span class="line">   修改文件权限</span><br><span class="line">    sudo chmod -R 777 文件名</span><br></pre></td></tr></table></figure><h3 id="ubuntu安装好系统后，vi不能正常使用方向键和退格键"><a href="#ubuntu安装好系统后，vi不能正常使用方向键和退格键" class="headerlink" title="ubuntu安装好系统后，vi不能正常使用方向键和退格键"></a><code>ubuntu</code>安装好系统后，vi不能正常使用方向键和退格键</h3><p>ubuntu中vi在编辑状态下方向键不能用，还有回格键不能删除等我们平时习惯的一些键都不能使用。解决办法：可以安装vim full版本，在full版本下键盘正常，安装好后同样使用vi命令。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">-----------（1）-----一般安装步骤------------------</span></span><br><span class="line">   sudo apt-get remove vim-common</span><br><span class="line">   sudo apt-get <span class="keyword">install</span> vim</span><br><span class="line"><span class="comment">-----------（2）------直接安装vim 报错 packet 不存在、找不到  请换源，参考下面-----------</span></span><br><span class="line">进入/etc/apt/</span><br><span class="line">cd /etc/apt</span><br><span class="line">对 sources.list文件进行备份</span><br><span class="line">sudo cp sources.list sources.list.bak</span><br><span class="line">删除掉 sources.list 中的内容【命令 echo <span class="string">""</span>&gt;sources.list  】，选择阿里云源</span><br><span class="line"></span><br><span class="line">deb <span class="keyword">http</span>://mirrors.aliyun.com/ubuntu/ xenial <span class="keyword">main</span> <span class="keyword">restricted</span> universe multiverse</span><br><span class="line">deb <span class="keyword">http</span>://mirrors.aliyun.com/ubuntu/ xenial-<span class="keyword">security</span> <span class="keyword">main</span> <span class="keyword">restricted</span> universe multiverse</span><br><span class="line">deb <span class="keyword">http</span>://mirrors.aliyun.com/ubuntu/ xenial-updates <span class="keyword">main</span> <span class="keyword">restricted</span> universe multiverse</span><br><span class="line">deb <span class="keyword">http</span>://mirrors.aliyun.com/ubuntu/ xenial-proposed <span class="keyword">main</span> <span class="keyword">restricted</span> universe multiverse</span><br><span class="line">deb <span class="keyword">http</span>://mirrors.aliyun.com/ubuntu/ xenial-backports <span class="keyword">main</span> <span class="keyword">restricted</span> universe multiverse</span><br><span class="line">deb-src <span class="keyword">http</span>://mirrors.aliyun.com/ubuntu/ xenial <span class="keyword">main</span> <span class="keyword">restricted</span> universe multiverse</span><br><span class="line">deb-src <span class="keyword">http</span>://mirrors.aliyun.com/ubuntu/ xenial-<span class="keyword">security</span> <span class="keyword">main</span> <span class="keyword">restricted</span> universe multiverse</span><br><span class="line">deb-src <span class="keyword">http</span>://mirrors.aliyun.com/ubuntu/ xenial-updates <span class="keyword">main</span> <span class="keyword">restricted</span> universe multiverse</span><br><span class="line">deb-src <span class="keyword">http</span>://mirrors.aliyun.com/ubuntu/ xenial-proposed <span class="keyword">main</span> <span class="keyword">restricted</span> universe multiverse</span><br><span class="line">deb-src <span class="keyword">http</span>://mirrors.aliyun.com/ubuntu/ xenial-backports <span class="keyword">main</span> <span class="keyword">restricted</span> universe multiverse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">------------（3）换源结束-------------------------------</span></span><br><span class="line">apt-<span class="keyword">get</span> <span class="keyword">update</span>   先更新一下</span><br><span class="line"></span><br><span class="line">现在可以安装vim</span><br><span class="line"> sudo apt-<span class="keyword">get</span> <span class="keyword">install</span> vim</span><br></pre></td></tr></table></figure><h3 id="centos7换源"><a href="#centos7换源" class="headerlink" title="centos7换源"></a><code>centos7</code>换源</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">进入 /etc/yum.repos.d/ </span><br><span class="line">cd /etc/yum.repos.d/</span><br><span class="line">对 CentOS-Base.repo 文件备份 CentOS-Base.repo.backups</span><br><span class="line">   cp -avr CentOS-Base.repo  CentOS-Base.repo.backups</span><br><span class="line"></span><br><span class="line">cenos7的源;</span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line">或者</span><br><span class="line">curl -o /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line"></span><br><span class="line"> yum clean all   #清理缓存</span><br><span class="line"> yum makecache   #生成新缓存</span><br><span class="line"> yum update -y  #更新源设置</span><br></pre></td></tr></table></figure><h3 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld.service</span><br></pre></td></tr></table></figure><p><a href="https://opsx.alibaba.com/guide?lang=zh-CN&amp;document=69a1db68-801e-11e8-b6bd-00163e04cdbb" target="_blank" rel="noopener">OPSX阿里巴巴开源镜像站</a></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>数据库账号管理</title>
      <link href="/2018/02/01/mysql_DDU_%E6%95%B0%E6%8D%AE%E5%BA%93%E8%B4%A6%E5%8F%B7/"/>
      <url>/2018/02/01/mysql_DDU_%E6%95%B0%E6%8D%AE%E5%BA%93%E8%B4%A6%E5%8F%B7/</url>
      <content type="html"><![CDATA[<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul><li>分配数据库账号权限时，请按最小权限原则和业务角色创建账号，并合理分配只读和读写权限。必要时可以把数据库账号和数据库拆分成更小粒度，使每个数据库账号只能访问其业务之内的数据。如果不需要数据库写入操作，请分配只读权限</li><li>为保障数据库的安全，请将数据库账号的密码设置为强密码，并定期更换。</li></ul>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-cp  创建文件和目录的副本</title>
      <link href="/2018/01/29/ubuntu/linux_DDU_cp/"/>
      <url>/2018/01/29/ubuntu/linux_DDU_cp/</url>
      <content type="html"><![CDATA[<h3 id="不带任何参数-运行cp"><a href="#不带任何参数-运行cp" class="headerlink" title="不带任何参数,运行cp"></a>不带任何参数,运行cp</h3><p>cp最基本命令，拷贝file_3.txt 从一个位置复制到另一个位置</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ls -all     【递归展示目录本文中会多次用到】</span><br><span class="line">----------------------------</span><br><span class="line">cp file<span class="emphasis">_3.txt /home/destination_</span>file</span><br><span class="line">或者</span><br><span class="line">cp /home/soruce<span class="emphasis">_file2/file_</span>3.txt /home/destination<span class="emphasis">_file</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_cp/cp.png" alt="cp" title="cp"></p><h3 id="拷贝多个文件"><a href="#拷贝多个文件" class="headerlink" title="拷贝多个文件"></a>拷贝多个文件</h3><p>拷贝多个文件，我们只需将文件名字用空格隔开。或者使用*拷贝所有文件</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp file_3.txt file_4.txt /<span class="built_in">home</span>/destination_file</span><br><span class="line">cp *  /<span class="built_in">home</span>/destination_file       【拷贝所有文件，注意观察截图，aaa目录没有拷贝成功，稍后解决】</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_cp/cp_02.png" alt="cp 多个文件" title="cp 多个文件"></p><h3 id="拷贝一个目录"><a href="#拷贝一个目录" class="headerlink" title="拷贝一个目录"></a>拷贝一个目录</h3><p>-r 或者 -R ，不论目录是否为空都会拷贝</p><figure class="highlight x86asm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -r <span class="keyword">aaa</span>/ /home/destination_file     【这就解决上次没有拷贝<span class="keyword">aaa</span>目录】</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_cp/cp_r.png" alt="cp 递归拷贝目录" title="cp 递归拷贝目录"></p><h3 id="创建文件硬链接，而不是拷贝他们"><a href="#创建文件硬链接，而不是拷贝他们" class="headerlink" title="创建文件硬链接，而不是拷贝他们"></a>创建文件硬链接，而不是拷贝他们</h3><p>拷贝文件意味着你必须使用一些存储空间来储存拷贝的文件。有时候出于某种原因，你可能想要创建“快捷方式”或者链接到文件，而不是拷贝它们。要做到这一点，我们可以使用-l选项。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -l file_3<span class="selector-class">.txt</span> /home/destination_file</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_cp/cp_l.png" alt="cp 拷贝硬链接" title="cp 拷贝硬链接"></p><h3 id="创建文件的软连接【符号链接、快捷方式…-】"><a href="#创建文件的软连接【符号链接、快捷方式…-】" class="headerlink" title="创建文件的软连接【符号链接、快捷方式…..】"></a>创建文件的软连接【符号链接、快捷方式…..】</h3><p>软连接（符号链接）用 -s实现</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">cp</span> <span class="selector-tag">-s</span> <span class="selector-tag">file_3</span><span class="selector-class">.txt</span> <span class="selector-tag">file_44</span><span class="selector-class">.txt</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_cp/cp_s.png" alt="cp 拷贝软链接" title="cp 软链接"></p><h3 id="文件归档"><a href="#文件归档" class="headerlink" title="文件归档"></a>文件归档</h3><p>使用 -a 选项来归档文件。保留链接和文件属性，递归拷贝目录，相当于下面的d、p、r三个选项组合。</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -a  * /<span class="built_in">home</span>/destination_file/</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_cp/cp_a.png" alt="cp a" title="cp a"></p><h4 id="只拷贝文件属性"><a href="#只拷贝文件属性" class="headerlink" title="只拷贝文件属性"></a>只拷贝文件属性</h4><p>只拷贝文件属性，不拷贝文件内容，使用 –attributes-only 选项</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp <span class="params">--attributes-only</span> file_3.txt <span class="string">/home/destination_file/</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_cp/cp_attributes_only.png" alt="cp --attributes-only" title="cp 拷贝文件属性，不拷贝内容"></p><h3 id="显示正在做什么"><a href="#显示正在做什么" class="headerlink" title="显示正在做什么"></a>显示正在做什么</h3><p>默认情况下，拷贝是不会显示拷贝时发生了什么，我们可以使用 -v选项</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -v  * /<span class="built_in">home</span>/destination_file/</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_cp/cp_v.png" alt="cp v" title="cp v显示信息"></p><h3 id="目标文件时间是最新更改，源文件时间老"><a href="#目标文件时间是最新更改，源文件时间老" class="headerlink" title="目标文件时间是最新更改，源文件时间老"></a>目标文件时间是最新更改，源文件时间老</h3><p>拷贝时，目标文件先存着和源文件同名文件，切目标文件时间是最新更改，使用 -u,不会覆盖最新文件</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -vu file_3<span class="selector-class">.txt</span> file_4<span class="selector-class">.txt</span> /home/destination_file/</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_cp/cp_u.png" alt="cp u" title="cp 跳过目标最新文件"></p><h3 id="使用交互模式"><a href="#使用交互模式" class="headerlink" title="使用交互模式"></a>使用交互模式</h3><p>交互模式下会询问是否覆盖目标目录下的文件。使用 -i 选项</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -<span class="selector-tag">i</span> file_3<span class="selector-class">.txt</span> file_4<span class="selector-class">.txt</span> /home/destination_file/</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_cp/cp_i.png" alt="cp i" title="cp 交互模式"></p><h3 id="创建备份文件"><a href="#创建备份文件" class="headerlink" title="创建备份文件"></a>创建备份文件</h3><p>目标文件中存在与源文件同名文件，使用 -b 选项，备份目标文件，拷贝新文件</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -bv * /<span class="built_in">home</span>/destination_file/</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_cp/cp_b.png" alt="cp b" title="cp 拷贝备份"></p><h3 id="强制拷贝"><a href="#强制拷贝" class="headerlink" title="强制拷贝"></a>强制拷贝</h3><p>使用 -f 强制拷贝文件。如果目标文件不能打开，可以用 -f 尝试一下。</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp -f * /<span class="built_in">home</span>/destination_file/</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_cp/cp_f.png" alt="cp f" title="cp 强制拷贝"></p><h4 id="在拷贝之前先删除目标"><a href="#在拷贝之前先删除目标" class="headerlink" title="在拷贝之前先删除目标"></a>在拷贝之前先删除目标</h4><p>可以用，–remove-destination 选项 实现。这个选项与上面的-f选项形成对照。如果 cp 命令在目标目录下发现同名文件， cp 命令会先删除目标文件，然后再拷贝一份新的。</p><figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp --<span class="built_in">remove</span>-destination -v * /<span class="built_in">home</span>/destination_file/</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_cp/cp_remove_destination.png" alt="cp cp_remove_destination.png" title="cp 拷贝前删除目标"></p><p>其他：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">一般情况下用这个命令 【参数avr】</span><br><span class="line"><span class="keyword">cd</span> <span class="string">/home/www/Downloads</span></span><br><span class="line">cp -avr * <span class="string">/data/www/</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>阿里云CDN上实现https</title>
      <link href="/2018/01/18/%E9%98%BF%E9%87%8C%E4%BA%91CDN%E4%B8%8A%E5%AE%9E%E7%8E%B0https/"/>
      <url>/2018/01/18/%E9%98%BF%E9%87%8C%E4%BA%91CDN%E4%B8%8A%E5%AE%9E%E7%8E%B0https/</url>
      <content type="html"><![CDATA[<h3 id="SSL证书管理"><a href="#SSL证书管理" class="headerlink" title="SSL证书管理"></a>SSL证书管理</h3><p>对于静态资源的请求，由于存储在阿里OSS上，并在前端使用了阿里云CDN,因此将相关SSL证书的信息在阿里云CDN上配置一下就ok。</p><figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">客户端</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="comment">请求（js</span><span class="string">,</span><span class="comment">img，css）</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">CDN</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span><span class="literal">-</span>&gt;<span class="comment">云存储OSS</span></span><br></pre></td></tr></table></figure><h3 id="从阿里云CA证书服务下载证书"><a href="#从阿里云CA证书服务下载证书" class="headerlink" title="从阿里云CA证书服务下载证书"></a>从阿里云CA证书服务下载证书</h3><p><img src="/img/ali/ali_CDN_https/CA.png" alt="ali CA"></p><p>下载解压后得到2个文件：  xxx.pem   xxx.key</p><h3 id="在阿里云CDN管理控制台找到-HTTPS设置"><a href="#在阿里云CDN管理控制台找到-HTTPS设置" class="headerlink" title="在阿里云CDN管理控制台找到 HTTPS设置"></a>在阿里云CDN管理控制台找到 HTTPS设置</h3><p>点击域名中的配置,然后找到HTTPS设置，修改配置</p><p><img src="/img/ali/ali_CDN_https/HTTPS_config_01.png" alt="ali https1"></p><p>打开之前下载好的xxx.pem 和 xxx.key ,将里面的内容分别复制到证书对应位置,建议跳转类型设置为默认，保存之后用HTTPS访问你的静态资源，测试一下</p><p><img src="/img/ali/ali_CDN_https/HTTPS_config_02.png" alt="ali https2"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>计算两点之间的距离</title>
      <link href="/2017/12/30/mysql_DDU_%E8%AE%A1%E7%AE%97%E4%B8%A4%E7%82%B9%E4%B9%8B%E9%97%B4%E7%9A%84%E8%B7%9D%E7%A6%BB/"/>
      <url>/2017/12/30/mysql_DDU_%E8%AE%A1%E7%AE%97%E4%B8%A4%E7%82%B9%E4%B9%8B%E9%97%B4%E7%9A%84%E8%B7%9D%E7%A6%BB/</url>
      <content type="html"><![CDATA[<h3 id="MySql查询执行流程图"><a href="#MySql查询执行流程图" class="headerlink" title="MySql查询执行流程图"></a>MySql查询执行流程图</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">发送语句</span><br><span class="line">查询缓存</span><br><span class="line">查询优化</span><br><span class="line">执行查询</span><br><span class="line">返回结果</span><br></pre></td></tr></table></figure><p><img src="/img/mysql/MySql_query_execution_flow_chart.png" alt="mysql查询执行流程图"></p><h3 id="计算两点之间的距离"><a href="#计算两点之间的距离" class="headerlink" title="计算两点之间的距离"></a>计算两点之间的距离</h3><p>一个典型的例子是计算以某个点为中心，一定半径内的所有点。典型的实际案例可能是查找某个附近所有可以出租的房子，或者社交网站中“匹配”附近的用户，等等。假设我们有如下表：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE `locations` (</span><br><span class="line">  `id` int(11) <span class="keyword">NOT</span> <span class="literal">NULL</span> AUTO_INCREMENT,</span><br><span class="line">  `name` varchar(30)<span class="built_in"> DEFAULT </span><span class="literal">NULL</span>,</span><br><span class="line">  `lat` float <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  `lon` float <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">  PRIMARY KEY (`id`)</span><br><span class="line">) <span class="attribute">ENGINE</span>=MyISAM<span class="built_in"> DEFAULT </span><span class="attribute">CHARSET</span>=latin1;</span><br><span class="line"></span><br><span class="line">INSERT INTO locations(name,lat,lon)VALUES(<span class="string">"Charlottesville,Virginia"</span>,38.03,-78.48),(<span class="string">"Chicago,Illinois"</span>,41.85,-87.65),(<span class="string">"Mashington,DC"</span>,38.89,-77.04)</span><br></pre></td></tr></table></figure></p><p>这里经度和纬度的单位是“度”，通常我们假设地球是圆的，然后使用两点所在最大圆（半正矢）公式来计算两点之间的距离。现在有坐标latA和lonA、latB和lonB，那么点A和点B的距离计算公式如下：</p><figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AcOS(</span><br><span class="line">COS(<span class="name">latA</span>)*COS(latB)*COS(<span class="name">lonA-lonB</span>)</span><br><span class="line">+SIN(<span class="number">1</span>atA)*SIN(LatB)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>计算出的结果是一个弧度，如果要将结果的单位转换成英里或者千米，则需要乘以地球的半径，也就是3959英里或者6371千米。假设我们需要找出所有距离Baron所居住的地方Charlottesville100英里以内的点，那么我们需要将经纬度带入上面的计算公式：</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM locations </span><br><span class="line">WHERE </span><br><span class="line">3979*ACOS(</span><br><span class="line">COS(radians(lat))<span class="strong">*COS(radians(38.03))*</span>COS(radians(lon)-radians(-78.48))+</span><br><span class="line">SIN(radians(lat))<span class="strong">*SIN(radians(38.03))</span></span><br><span class="line"><span class="strong">)&lt;=100;</span></span><br><span class="line"><span class="strong"></span></span><br><span class="line"><span class="strong">+----+--------------------------+-------+--------+</span></span><br><span class="line"><span class="strong">| id | name                     | lat   | lon    |</span></span><br><span class="line"><span class="strong">+----+--------------------------+-------+--------+</span></span><br><span class="line"><span class="strong">|  1 | Charlottesville,Virginia | 38.03 | -78.48 |</span></span><br><span class="line"><span class="strong">|  3 | Mashington,DC            | 38.89 | -77.04 |</span></span><br><span class="line"><span class="strong">+----+--------------------------+-------+--------+</span></span><br></pre></td></tr></table></figure><p>这类查询不仅无法使用索引，而且还会非常消耗CPU时间，给服务器带来很大的压力，而且我们还得反复计算这个。那要怎样优化呢?这个设计中有几个地方可以微优化。第一，看看是否真的需要这么精确的计算。其实这种算法已经有很多不精确的地方了，如下所示：两个地方之间的直线距离可能是100英里，但实际上它们之间的行走距离很可能不是这个值。无论你们在哪两个地方，要到达彼此位置的行走距离多半都不是直线距离，路上可能需要绕很多的弯，比如说如果有一条河，需要绕远走到一个有桥的地方。所以，这里计算的绝对距离只是一个参考值。</p><p>如果我们根据邮政编码来确定某个人所在的地区，再根据这个地区的中心位置计算他和别人的距离，那么这本身就是一个估算。Baron 住在Charlottesville，不过不是在中心地区，他对华盛顿物理位置的中心也不感兴趣。所以，通常并不需要精确计算，很多应用如果这样计算，多半是认真过头了。这类似于有效数字的估算：计算结果的精度永远都不会比测量的值更高。（换句话说，“错进，错出”。）</p><p>如果不需要太高的精度，那么我们认为地球是圆的应该也没什么问题，其实准确的说应该是椭圆。根据毕达哥拉斯定理，做些三角函数变换，我们可以把上面的公式转换得更简单，只需要做些求和、乘积以及平方根运算，就可以得出一个点是否在另一个点多少英里之内。益习等等，为什么就到这为止？我们是否真需要计算一个圆周呢？为什么不直接使用一个正方形代替?边长为200英里的正方形，一个顶点到中心的距离大概是141英里，这和实际计算的100英里相差得并不是那么远。那我们根据正方形公式来计算弧度为0.0253（100英里）的中心到边长的距离：</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM locations </span><br><span class="line">WHERE lat BETWEEN 38.03 - DEGREES(0.0253) AND 38.03 + DEGREES(0.0253)</span><br><span class="line">AND   lon BETWEEN -78.48 - DEGREES(0.0253) AND -78.48 + DEGREES(0.0253);</span><br><span class="line"></span><br><span class="line"><span class="code">+----+</span>--------------------------<span class="code">+-------+</span>--------+</span><br><span class="line">| id | name                     | lat   | lon    |</span><br><span class="line"><span class="code">+----+</span>--------------------------<span class="code">+-------+</span>--------+</span><br><span class="line">|  1 | Charlottesville,Virginia | 38.03 | -78.48 |</span><br><span class="line">|  3 | Mashington,DC            | 38.89 | -77.04 |</span><br><span class="line"><span class="code">+----+</span>--------------------------<span class="code">+-------+</span>--------+</span><br></pre></td></tr></table></figure><p>现在我们看看如何使用索引来优化这个查询。简单地，我们可以增加索引（lat,lon)或者（lon,lat)。不过这样做效果并不会很好。正如我们所知，MySQL5.5和之前的版本，如果第一列是范围查询的话，就无法使用素引后面的列了。因为两个列都是范围的，所以这里只能使用索引的一个列（BETMEEN等效于一个大于和一个小于）。我们再次想起了通常使用的IN（）优化。我们先新增两个列，用来存储坐标的近似值FLOOR()，然后在查询中使用IN（）将所有点的整数值都放到列表中。下面是我们需要新增的列和索引：</p><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE locations <span class="builtin-name">ADD</span> lat_floor INT <span class="keyword">NOT</span> <span class="literal">NULL</span><span class="built_in"> DEFAULT </span>0, </span><br><span class="line"><span class="builtin-name">ADD</span> lon_floor INT <span class="keyword">NOT</span> <span class="literal">NULL</span><span class="built_in"> DEFAULT </span>0, </span><br><span class="line"><span class="builtin-name">ADD</span> KEY (lat_floor,lon_floor);</span><br><span class="line"></span><br><span class="line">-----------------------------------------</span><br><span class="line"></span><br><span class="line">UPDATE locations</span><br><span class="line"><span class="builtin-name">SET</span> lat_floor = FLOOR(lat),<span class="attribute">lon_floor</span>=FLOOR(lon);</span><br></pre></td></tr></table></figure><p>现在我们可以根据坐标的一定范围的近似值来搜索了，这个近似值包括最小值和最大值，地理上分别对应的是南北。下面的查询为我们只展示了如何查某个范围的所有点：数值需要在应用程序中计算而不是MySQL中：</p><figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SELECT  FLOOR(38.03 - DEGREES(0.0253))AS lat<span class="emphasis">_1b,</span></span><br><span class="line"><span class="emphasis">CEILING( 38.03 + DEGREES(0.0253))AS lat_</span>lub,</span><br><span class="line">FLOOR(-78.48 - DEGREES(0.0253))AS 1on<span class="emphasis">_1b,</span></span><br><span class="line"><span class="emphasis">CEILING(-78.48 + DEGREES(0.0253))AS 1on_</span>ub;</span><br><span class="line">------------------------------------------------------</span><br><span class="line"><span class="code">+--------+</span>---------<span class="code">+--------+</span>--------+</span><br><span class="line">| lat<span class="emphasis">_1b | lat_</span>lub | 1on<span class="emphasis">_1b | 1on_</span>ub |</span><br><span class="line"><span class="code">+--------+</span>---------<span class="code">+--------+</span>--------+</span><br><span class="line">|     36 |      40 |    -80 |    -77 |</span><br><span class="line"><span class="code">+--------+</span>---------<span class="code">+--------+</span>--------+</span><br></pre></td></tr></table></figure><p>现在我们就可以生成IN（）列表中的整数了，也就是前面计算的地板和天花板数值之间的数字。下面是加上WHERE条件的完整查询：<br><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">现在我们就可以生成IN（）列表中的整数了，也就是前面计算的地板和天花板数值之间的数字。下面是加上WHERE条件的完整查询：</span><br><span class="line"></span><br><span class="line">SELECT * FROM locations</span><br><span class="line">WHERE lat BETWEEN <span class="number">38.03</span>-DEGREES(<span class="number">0.0253</span>)AND <span class="number">38.03</span> + DEGREES(<span class="number">0.0253</span>)</span><br><span class="line">AND lon BETWEEN<span class="number">-78.48</span>-DEGREES(<span class="number">0.0253</span>)AND<span class="number">-78.48</span> +DEGREES(<span class="number">0.0253</span>)</span><br><span class="line">AND lat_floor IN(<span class="number">36</span>,<span class="number">37</span>,<span class="number">38</span>,<span class="number">39</span>,<span class="number">40</span>)AND lon_floor IN(<span class="number">-80</span>,<span class="number">-79</span>,<span class="number">-78</span>,<span class="number">-77</span>);</span><br><span class="line"></span><br><span class="line">+----+--------------------------+-------+--------+-----------+-----------+</span><br><span class="line">| id | name                     | lat   | lon    | lat_floor | lon_floor |</span><br><span class="line">+----+--------------------------+-------+--------+-----------+-----------+</span><br><span class="line">|  <span class="number">1</span> | Charlottesville,Virginia | <span class="number">38.03</span> | <span class="number">-78.48</span> |        <span class="number">38</span> |       <span class="number">-79</span> |</span><br><span class="line">|  <span class="number">3</span> | Mashington,DC            | <span class="number">38.89</span> | <span class="number">-77.04</span> |        <span class="number">38</span> |       <span class="number">-78</span> |</span><br><span class="line">+----+--------------------------+-------+--------+-----------+-----------+</span><br></pre></td></tr></table></figure></p><p>使用近似值会让我们的计算结果有些偏差，所以我们还需要一些额外的条件剔除在正方形之外的点。这和前面使用CRC32做哈希索引类似：先建一个索引帮我们过滤出近似值，再使用精确条件匹配所有的记录并移除不满足条件的记录。事实上，到这时我们就无须根据正方形的近似来过滤数据了，我们可以使用最大圆公式或者毕达哥拉斯定理来计算：</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM locations</span><br><span class="line">WHERE lat_floor IN(<span class="number">36</span>,<span class="number">37</span>,<span class="number">38</span>,<span class="number">39</span>,<span class="number">40</span>)</span><br><span class="line">AND lon_floor IN(<span class="number">-80</span>,<span class="number">-79</span>,<span class="number">-78</span>,<span class="number">-77</span>)</span><br><span class="line">AND <span class="number">3979</span>*ACOS(</span><br><span class="line">COS(radians(lat))*COS(radians(<span class="number">38.03</span>))*COS(radians(lon)-radians(<span class="number">-78.48</span>))+SIN(radians(lat))*SIN(radians(<span class="number">38.03</span>))</span><br><span class="line">)&lt;=<span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">----------------------------------------------</span><br><span class="line"></span><br><span class="line">+----+--------------------------+-------+--------+-----------+-----------+</span><br><span class="line">| id | name                     | lat   | lon    | lat_floor | lon_floor |</span><br><span class="line">+----+--------------------------+-------+--------+-----------+-----------+</span><br><span class="line">|  <span class="number">1</span> | Charlottesville,Virginia | <span class="number">38.03</span> | <span class="number">-78.48</span> |        <span class="number">38</span> |       <span class="number">-79</span> |</span><br><span class="line">|  <span class="number">3</span> | Mashington,DC            | <span class="number">38.89</span> | <span class="number">-77.04</span> |        <span class="number">38</span> |       <span class="number">-78</span> |</span><br><span class="line">+----+--------------------------+-------+--------+-----------+-----------+</span><br></pre></td></tr></table></figure><p>这时计算精度再次回到前面——使用一个精确的圆周——不过，现在的做法更快。只要能够高效地过滤掉大部分的点，例如使用近似整数和索引，之后再做精确数学计算的代价并不大。只是不要直接使用大圆周的算法，否则速度会很慢。</p><p>Sphinx有很多内置的地理信息搜索功能，比MySQL实现要好很多。如果正在考虑使用MyISAM的GIS函数，并使用上面的技巧来计算，那么你需要记住：这样做效果并不会很好，MyISAM本身也并不适合大数据量、高并发的应用，另外MyISAM本身还有一些弱点，如数据文件崩溃、表级锁等。</p><h3 id="回顾一下上面的案例，我们采用了下面这些常用的优化策略："><a href="#回顾一下上面的案例，我们采用了下面这些常用的优化策略：" class="headerlink" title="回顾一下上面的案例，我们采用了下面这些常用的优化策略："></a>回顾一下上面的案例，我们采用了下面这些常用的优化策略：</h3><p>·尽量少做事，可能的话尽量不做事。这个案例中就不要对所有的点计算大圆周公式；先使用简单的方案过滤大多数数据，然后再到过滤出来的更小的集合上使用复杂的公式运算。</p><p>快速地完成事情。确保在你的设计中尽可能地让查询都用上合适的索引，使用近似计算（例如本案例中，认为地球是平的，使用一个正方形来近似圆周）来避免复杂的计算。</p><p>需要的时候，尽可能让应用程序完成一些计算。例如本案例中，在应用程序中计算所有的三角函数。</p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>-mv   移动或重命名文件/目录</title>
      <link href="/2017/12/19/ubuntu/linux_DDU_mv/"/>
      <url>/2017/12/19/ubuntu/linux_DDU_mv/</url>
      <content type="html"><![CDATA[<h3 id="移动文件"><a href="#移动文件" class="headerlink" title="移动文件"></a>移动文件</h3><p>移动文件时需要注意的是文件的源地址和目标地址必须不同。这里有个例子，想要将file_1.txt文件从当前目录移动到其它目录，以/home/destination_file为例，语法应该如下：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv file_1<span class="selector-class">.txt</span> /home/destination_file/</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_mv/mv.png" alt="linux mv"></p><h3 id="移动多个文件"><a href="#移动多个文件" class="headerlink" title="移动多个文件"></a>移动多个文件</h3><p>如果想一次移动多个文件，我们可以将他们放在一行并用空格分开。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mv file_2<span class="selector-class">.txt</span> file_3<span class="selector-class">.txt</span> file_4<span class="selector-class">.txt</span> /home/destination_file/</span><br><span class="line">或者</span><br><span class="line">mv file_&#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125;<span class="selector-class">.txt</span> /home/destination_file/</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_mv/mv_much.png" alt="linux mv 移动多个文件夹"></p><p>如果你的文件夹有规律可循那么你就可以使用通配符，比如，为了移除所有以.txt为扩展名的文件夹，我们可以使用下面的命令：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv *<span class="string">.txt</span> <span class="string">/home/destination_file/</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_mv/mv_much02.png" alt="linux mv 移动多个文件夹"></p><h3 id="移动目录"><a href="#移动目录" class="headerlink" title="移动目录"></a>移动目录</h3><p>不同于复制命令，用mv命令移动目录相当于直接。移动目录你可以使用不带选项的mv命令。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv <span class="regexp">/soruce_file/</span> <span class="regexp">/home/</span>destination_file<span class="regexp">/</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_mv/mv_directory.png" alt="linux mv 移动目录"></p><h3 id="重命名文件或目录"><a href="#重命名文件或目录" class="headerlink" title="重命名文件或目录"></a>重命名文件或目录</h3><p>我们也用mv命令来重命名文件或目录，不过目标位置必须相同才可以。然后文件名字必须不同。假定我们当前做所在目录为/home/soruce_file</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mv file_1<span class="selector-class">.txt</span> file_new1.txt</span><br><span class="line">如果是绝对路径，应该像下面这样：</span><br><span class="line">mv /home/soruce_file/file_2<span class="selector-class">.txt</span> /home/soruce_file/file_new2.txt</span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_mv/mv_re_directory.png" alt="linux mv 重命名文件或目录"></p><h3 id="重命名目录"><a href="#重命名目录" class="headerlink" title="重命名目录"></a>重命名目录</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">上一段的规则同样适用于目录。</span><br><span class="line">mv <span class="regexp">/home/</span>soruce_file<span class="regexp">/ /</span>home<span class="regexp">/soruce_file2/</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_mv/mv_re_directory02.png" alt="linux mv 重命名文目录"></p><h3 id="打印移动信息"><a href="#打印移动信息" class="headerlink" title="打印移动信息"></a>打印移动信息</h3><p>当你移动或重命名一大堆文件或目录时，你可能会想在不去目标位置去查看的情况下知道自己的命令是否成功地执行了。这就用到-v选项了。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv -v  <span class="regexp">/home/</span>soruce_file2<span class="regexp">/*.txt /</span>home<span class="regexp">/destination_file/</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_mv/mv_v.png" alt="linux mv 打印移动信息"></p><h3 id="使用交互模式"><a href="#使用交互模式" class="headerlink" title="使用交互模式"></a>使用交互模式</h3><p>当你将文件移动到其他位置，而那个位置恰好有同样的文件，这时mv命令会覆盖掉原来的文件，对于mv的这一行为一般不会有什么提示。如果想产生一个关于覆盖文件的提示，我们可以使用-i选项。</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv -<span class="selector-tag">i</span> /home/soruce_file2/file_3<span class="selector-class">.txt</span> /home/destination_file/</span><br></pre></td></tr></table></figure><p>这个提示会让我们知道目标位置处file_3.txt的存在。如果我们按y键，那么那个文件将会被删除，否则不会</p><p><img src="/img/ubuntu/linux_command/linux_mv/mv_i.png" alt="linux mv 移动文件是否覆盖"></p><h3 id="使用更新选项"><a href="#使用更新选项" class="headerlink" title="使用更新选项"></a>使用更新选项</h3><p>-i 选项会提示我们关于覆盖文件的提示，而 -u 则只在源文件比目标文件新时才执行更新，如果目标文件比源文件新，则不会执行。让我们看一看下面的例子：</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv -uv <span class="regexp">/home/</span>soruce_file2<span class="regexp">/*.txt /</span>home<span class="regexp">/destination_file/</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_mv/mv_u.png" alt="linux mv 移动文件最新是否覆盖"></p><h3 id="不要覆盖任何已存在的文件"><a href="#不要覆盖任何已存在的文件" class="headerlink" title="不要覆盖任何已存在的文件"></a>不要覆盖任何已存在的文件</h3><p>如果-i选项询问我们是否覆盖文件，那么-n选项将不会允许我么覆盖任何已存在的文件，</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv -vn <span class="regexp">/home/</span>soruce_file2<span class="regexp">/file_new_time2.txt  /</span>home<span class="regexp">/destination_file/</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_mv/rm_n.png" alt="linux mv 移动文件最新是否覆盖"></p><h3 id="复制时创建备份"><a href="#复制时创建备份" class="headerlink" title="复制时创建备份"></a>复制时创建备份</h3><p>默认情况下，移动文件将会覆盖已存在的目标文件。但是如果我们移动错了文件而目标文件已经被新的文件覆盖了，这时应该怎么办才好呢？-b选项可以办到，该选项会在新文件覆盖旧文件时将旧文件做备份。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv -bv <span class="regexp">/home/</span>soruce_file2<span class="regexp">/file_new_time2.txt  /</span>home<span class="regexp">/destination_file/</span></span><br></pre></td></tr></table></figure><p><img src="/img/ubuntu/linux_command/linux_mv/mv_b.png" alt="linux mv 移动文件并备份"></p><h3 id="无条件覆盖已经存在的文件"><a href="#无条件覆盖已经存在的文件" class="headerlink" title="无条件覆盖已经存在的文件"></a>无条件覆盖已经存在的文件</h3><p>覆盖已经存在的文件或目录，使用-f选项。如果同时指定了 -f 选项和 -i 或 -n 选项，则 -f 选项会覆盖它们——即不进行任何提示而覆盖。所以在使用此参数的时候，你要保持头脑清醒，知道自己在做什么。</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv -f <span class="regexp">/home/</span>soruce_file2<span class="regexp">/file_new_time2.txt  /</span>home<span class="regexp">/destination_file/</span></span><br></pre></td></tr></table></figure><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>移动文件和目录命令是Linux系统的基本命令。通常你可以通过man mv 或者 mv –help显示mv的手册页以了解更多详细信息。</p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>YII2搭建后台并实现rbac权限控制</title>
      <link href="/2017/12/08/Yii2%E6%90%AD%E5%BB%BA%E5%90%8E%E5%8F%B0%E5%B9%B6%E5%AE%9E%E7%8E%B0rbac%E6%9D%83%E9%99%90%E6%8E%A7/"/>
      <url>/2017/12/08/Yii2%E6%90%AD%E5%BB%BA%E5%90%8E%E5%8F%B0%E5%B9%B6%E5%AE%9E%E7%8E%B0rbac%E6%9D%83%E9%99%90%E6%8E%A7/</url>
      <content type="html"><![CDATA[<h3 id="安装Yii2"><a href="#安装Yii2" class="headerlink" title="安装Yii2"></a>安装Yii2</h3><p>参考官网安装文档<br><a href="http://www.yiiframework.com/download" target="_blank" rel="noopener"><font color="red">yiiframework</font></a><br><a href="http://www.yiichina.com/download" target="_blank" rel="noopener"><font color="red">yiichina</font></a></p><h3 id="配置数据库"><a href="#配置数据库" class="headerlink" title="配置数据库"></a>配置数据库</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">创建数据库： create database yii2advanced default charset utf8;</span><br><span class="line"></span><br><span class="line">修改common/config/main-local.php数据库配置</span><br><span class="line"></span><br><span class="line">        <span class="string">'db'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'yii\db\Connection'</span>,</span><br><span class="line">            <span class="string">'dsn'</span> =&gt; <span class="string">'mysql:host=localhost;dbname=yii2advanced'</span>,</span><br><span class="line">            <span class="string">'username'</span> =&gt; <span class="string">'root'</span>,</span><br><span class="line">            <span class="string">'password'</span> =&gt; <span class="string">'root'</span>,</span><br><span class="line">            <span class="string">'charset'</span> =&gt; <span class="string">'utf8'</span>,</span><br><span class="line">        ],</span><br></pre></td></tr></table></figure><p><img src="/img/Yii2/mysql_config.png" alt="数据配置"></p><h3 id="使用composer安装yii2-admin"><a href="#使用composer安装yii2-admin" class="headerlink" title="使用composer安装yii2-admin"></a>使用composer安装yii2-admin</h3><figure class="highlight erlang-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">composer require mdmsoft/yii2-admin <span class="string">"~2.0"</span></span><br><span class="line"></span><br><span class="line">!!!温馨提示：建议安装 <span class="number">1.0</span> 版本不安装 <span class="number">2.0</span> 版本!!!</span><br><span class="line">composer require mdmsoft/yii2-admin <span class="string">"~1.0"</span></span><br></pre></td></tr></table></figure><h3 id="配置yii2-admin运行环境"><a href="#配置yii2-admin运行环境" class="headerlink" title="配置yii2-admin运行环境"></a>配置yii2-admin运行环境</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">权限控制在后台，所以在 backend/config/main.php 中配置以下内容：</span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="string">'modules'</span> =&gt; [</span><br><span class="line">        <span class="string">'admin'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'mdm\admin\Module'</span>,</span><br><span class="line">             <span class="string">'layout'</span> =&gt; <span class="string">'left-menu'</span>,<span class="comment">//yii2-admin的导航菜单</span></span><br><span class="line">        ]</span><br><span class="line">        ...</span><br><span class="line">    ],</span><br><span class="line">    ...</span><br><span class="line">    <span class="string">'components'</span> =&gt; [</span><br><span class="line">        ...</span><br><span class="line">        <span class="string">'authManager'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'yii\rbac\DbManager'</span>, <span class="comment">// 使用数据库管理配置文件</span></span><br><span class="line">        ]</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'as access'</span> =&gt; [</span><br><span class="line">        <span class="string">'class'</span> =&gt; <span class="string">'mdm\admin\components\AccessControl'</span>,</span><br><span class="line">        <span class="string">'allowActions'</span> =&gt; [</span><br><span class="line">            <span class="string">'site/*'</span>,<span class="comment">//允许访问的节点，可自行添加</span></span><br><span class="line">            <span class="string">'admin/*'</span>,<span class="comment">//允许所有人访问admin节点及其子节点</span></span><br><span class="line">        ]</span><br><span class="line">    ],</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h3 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">php yii migrate --migrationPath=@mdm/admin/migrations</span><br><span class="line"></span><br><span class="line">执行sql：（自带的rbac）  </span><br><span class="line">修改配置文件console/config/main-local.php</span><br><span class="line"><span class="built_in">return</span> [</span><br><span class="line">    <span class="string">'bootstrap'</span> =&gt; [<span class="string">'gii'</span>],</span><br><span class="line">    <span class="string">'modules'</span> =&gt; [</span><br><span class="line">        <span class="string">'gii'</span> =&gt; <span class="string">'yii\gii\Module'</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'components'</span> =&gt; [</span><br><span class="line">        <span class="string">"authManager"</span> =&gt; [</span><br><span class="line">            <span class="string">"class"</span> =&gt; <span class="string">'yii\rbac\DbManager'</span>,</span><br><span class="line">            <span class="string">"defaultRoles"</span> =&gt; [<span class="string">"guest"</span>],</span><br><span class="line">        ],</span><br><span class="line">    ],</span><br><span class="line">];</span><br><span class="line"><span class="built_in">cd</span>到advance目录下面执行</span><br><span class="line">yii migrate --migrationPath=@yii/rbac/migrations</span><br></pre></td></tr></table></figure><h3 id="中文显示"><a href="#中文显示" class="headerlink" title="中文显示"></a>中文显示</h3><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">在 common\config\main.php 中配置</span><br><span class="line"></span><br><span class="line">return [</span><br><span class="line">    <span class="string">'language'</span> =&gt; <span class="string">'zh-CN'</span>, <span class="comment">//中文显示</span></span><br><span class="line">    <span class="string">'aliases'</span> =&gt; [</span><br><span class="line">        <span class="string">'@bower'</span> =&gt; <span class="string">'@vendor/bower-asset'</span>,</span><br><span class="line">        <span class="string">'@npm'</span>   =&gt; <span class="string">'@vendor/npm-asset'</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'vendorPath'</span> =&gt; dirname(dirname(__DIR__)) . <span class="string">'/vendor'</span>,</span><br><span class="line">    <span class="string">'components'</span> =&gt; [</span><br><span class="line">        <span class="string">'cache'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'yii\caching\FileCache'</span>,</span><br><span class="line">        ],</span><br><span class="line">    ],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">现在可以查看后台：</span><br><span class="line">&lt;Your domain <span class="keyword">name</span>&gt;/<span class="keyword">index</span>.php?r=admin/user</span><br><span class="line">&lt;Your domain <span class="keyword">name</span>&gt;/<span class="keyword">index</span>.php?r=admin</span><br><span class="line">&lt;Your domain <span class="keyword">name</span>&gt;/<span class="keyword">index</span>.php?r=admin/route</span><br><span class="line">&lt;Your domain <span class="keyword">name</span>&gt;/<span class="keyword">index</span>.php?r=admin/permission</span><br><span class="line">&lt;Your domain <span class="keyword">name</span>&gt;/<span class="keyword">index</span>.php?r=admin/menu</span><br><span class="line">&lt;Your domain <span class="keyword">name</span>&gt;/<span class="keyword">index</span>.php?r=admin/role</span><br><span class="line">&lt;Your domain <span class="keyword">name</span>&gt;/<span class="keyword">index</span>.php?r=admin/assignment</span><br></pre></td></tr></table></figure><p><img src="/img/Yii2/yii2_admin_install_end.png" alt="yii2-admin 安装完成"></p><h3 id="配置授权demo"><a href="#配置授权demo" class="headerlink" title="配置授权demo"></a>配置授权demo</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">以一个自定义的节点books为例，节点books下共有index 图书列表，view 查看图书，<span class="keyword">create</span>创建图书，<span class="keyword">update</span> 更新图书，<span class="keyword">delete</span> 删除图书这个<span class="number">5</span>个节点，，可以通过gii生成这些代码。</span><br><span class="line"></span><br><span class="line">配置目标：</span><br><span class="line">未登录用户仅能访问<span class="keyword">index</span>节点</span><br><span class="line">一般用户能访问<span class="keyword">index</span>，<span class="keyword">view</span>，<span class="keyword">create</span>三个节点</span><br><span class="line">管理员能访问所有节点</span><br><span class="line"><span class="comment">---------------------------</span></span><br><span class="line">在 backend/config/main.php 中修改配置以下内容：</span><br><span class="line">    <span class="string">'as access'</span> =&gt; [</span><br><span class="line">        <span class="string">'class'</span> =&gt; <span class="string">'mdm\admin\components\AccessControl'</span>,</span><br><span class="line">        <span class="string">'allowActions'</span> =&gt; [</span><br><span class="line">            //<span class="string">'site/*'</span>,//允许访问的节点，可自行添加</span><br><span class="line">            //<span class="string">'admin/*'</span>,//允许所有人访问<span class="keyword">admin</span>节点及其子节点</span><br><span class="line">            <span class="string">"*"</span>//不配置这个是访问不到gii，使用完记得修改回来，否则权限会出问题</span><br><span class="line">        ]</span><br><span class="line">    ],</span><br></pre></td></tr></table></figure><h3 id="添加可分配权限列表"><a href="#添加可分配权限列表" class="headerlink" title="添加可分配权限列表"></a>添加可分配权限列表</h3><p>在路由列表中，添加book各个节点路由由表添加至右侧可分配路由列表中，如下:</p><p><img src="/img/Yii2/book_route.png" alt="路由列表 图书"></p><p>在权限列表=》新增权限，填好后提交，然后填的路由规则即可，如下：</p><p><img src="/img/Yii2/authority_add_01.png" alt="权限列表 新增权限"></p><p><img src="/img/Yii2/authority_add_03.png" alt="权限列表 新增权限的对应路由"></p><p><img src="/img/Yii2/authority_add_04.png" alt="权限列表"></p><h3 id="添加角色并分配权限"><a href="#添加角色并分配权限" class="headerlink" title="添加角色并分配权限"></a>添加角色并分配权限</h3><p><img src="/img/Yii2/role_add_01.png" alt="角色列表 新增角色"></p><p><img src="/img/Yii2/role_add_02.png" alt="角色列表 新增角色对应的权限"></p><p><img src="/img/Yii2/role_add_03.png" alt="角色列表"></p><h3 id="分配角色"><a href="#分配角色" class="headerlink" title="分配角色"></a>分配角色</h3><p>手动注册用户，我这里注册admin和test进行测试。其中admin为管理员，test为一般用户</p><p><img src="/img/Yii2/register_user.png" alt="分配列表 00"></p><p><img src="/img/Yii2/assignments_list_01.png" alt="分配列表 list 01"></p><p><img src="/img/Yii2/assignments_list_02.png" alt="分配列表 add 02"></p><p><img src="/img/Yii2/assignments_list_03.png" alt="分配列表 add 03"></p><h2 id="！！！测试权限之前"><a href="#！！！测试权限之前" class="headerlink" title="！！！测试权限之前"></a><font color="red">！！！测试权限之前</font></h2><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">！！！ 测试权限之前，把这里注释掉</span><br><span class="line">在 backend<span class="regexp">/config/m</span>ain.php 中修改配置以下内容：</span><br><span class="line">    <span class="string">'as access'</span> =&gt; [</span><br><span class="line">        <span class="string">'class'</span> =&gt; <span class="string">'mdm\admin\components\AccessControl'</span>,</span><br><span class="line">        <span class="string">'allowActions'</span> =&gt; [</span><br><span class="line">            <span class="regexp">//</span><span class="string">'site/*'</span>,<span class="regexp">//</span>允许访问的节点，可自行添加</span><br><span class="line">            <span class="regexp">//</span><span class="string">'admin/*'</span>,<span class="regexp">//</span>允许所有人访问admin节点及其子节点</span><br><span class="line">            <span class="regexp">//</span><span class="string">"*"</span><span class="regexp">//</span>把这个注释掉！！！</span><br><span class="line">        ]</span><br><span class="line">    ],</span><br></pre></td></tr></table></figure><h3 id="开始测试"><a href="#开始测试" class="headerlink" title="开始测试"></a>开始测试</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、以管理员身份登录时，可以进行所有操作。ok</span><br><span class="line"><span class="number">2</span>、如果不登录，在访问book首页的时候会跳转到登录页面。预期结果是未登录时能访问book首页，就是说当前系统默认不认可我们配置给未登录用户的权限。</span><br><span class="line">有<span class="number">2</span>中办法</span><br><span class="line">第一种 在 backend<span class="regexp">/config/m</span>ain.php 中加一行指定默认规则的代码即可，如下：</span><br><span class="line"></span><br><span class="line"><span class="string">'authManager'</span>=&gt; [</span><br><span class="line">    <span class="string">'class'</span> =&gt; <span class="string">'yii\rbac\DbManager'</span>,</span><br><span class="line">    <span class="string">'defaultRoles'</span> =&gt; [<span class="string">'未登录用户'</span>],<span class="regexp">//</span>添加此行代码，指定默认规则为 <span class="string">'未登录用户'</span></span><br><span class="line">],</span><br><span class="line"></span><br><span class="line">或者在 backend<span class="regexp">/config/m</span>ain.php 修改为：</span><br><span class="line">    <span class="string">'as access'</span> =&gt; [</span><br><span class="line">        <span class="string">'class'</span> =&gt; <span class="string">'mdm\admin\components\AccessControl'</span>,</span><br><span class="line">        <span class="string">'allowActions'</span> =&gt; [</span><br><span class="line">            <span class="regexp">//</span><span class="string">'site/*'</span>,<span class="regexp">//</span>允许访问的节点，可自行添加</span><br><span class="line">            <span class="regexp">//</span><span class="string">'admin/*'</span>,<span class="regexp">//</span>允许所有人访问admin节点及其子节点</span><br><span class="line">            <span class="regexp">//</span><span class="string">"*"</span><span class="regexp">//</span>不配置这个是访问不到gii，使用完记得修改回来，否则权限会出问题</span><br><span class="line">            <span class="string">"book/index"</span>,<span class="regexp">//</span>未登录用户也可以访问图书列表</span><br><span class="line">        ]</span><br><span class="line">    ],</span><br></pre></td></tr></table></figure><h3 id="……"><a href="#……" class="headerlink" title="……"></a>……</h3><hr><h3 id="安装yii2-AdminLTE后台主题"><a href="#安装yii2-AdminLTE后台主题" class="headerlink" title="安装yii2 AdminLTE后台主题"></a>安装yii2 AdminLTE后台主题</h3><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">composer <span class="built_in">require</span> dmstr/yii2-adminlte-asset <span class="string">"^2.1"</span></span><br><span class="line"></span><br><span class="line">安装过程中可能需要输入github的<span class="keyword">token</span></span><br></pre></td></tr></table></figure><h3 id="引入主题"><a href="#引入主题" class="headerlink" title="引入主题"></a>引入主题</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">方式一：(建议使用这种方式)</span><br><span class="line">复制整个vendor/dmstr/yii2-adminlte-asset/example-views/yiisoft/yii2-app目录下的layouts目录和site目录到backend/views，覆盖原始文件。</span><br><span class="line"></span><br><span class="line">方式二：</span><br><span class="line"><span class="string">'components'</span> =&gt; [</span><br><span class="line">    <span class="string">'view'</span> =&gt; [</span><br><span class="line">         <span class="string">'theme'</span> =&gt; [</span><br><span class="line">             <span class="string">'pathMap'</span> =&gt; [</span><br><span class="line">                <span class="string">'@app/views'</span> =&gt; <span class="string">'@vendor/dmstr/yii2-adminlte-asset/example-views/yiisoft/yii2-app'</span></span><br><span class="line">             ],</span><br><span class="line">         ],</span><br><span class="line">    ],</span><br><span class="line">],</span><br><span class="line"></span><br><span class="line">现在可以查看后台：</span><br><span class="line">&lt;Your domain name&gt;/index.php?r=admin%<span class="number">2</span>Fuser</span><br><span class="line">！！！如果访问权限相关的路径，如/admin/route/index并不是上面看到的样式，请将配置文件中的modules数组中配置的layouts的值删掉即可。如下：</span><br><span class="line">        <span class="string">'admin'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'mdm\admin\Module'</span>,</span><br><span class="line">            <span class="comment">//'layout' =&gt; 'left-menu',//yii2-admin的导航菜单</span></span><br><span class="line">        ]</span><br></pre></td></tr></table></figure><p><img src="/img/Yii2/yii2_adminlte_install_end.png" alt="yii2-adminlte 安装完成"></p><h3 id="配置数据库，登录"><a href="#配置数据库，登录" class="headerlink" title="配置数据库，登录"></a>配置数据库，登录</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、修改common/config/main-local.php数据库配置</span><br><span class="line"></span><br><span class="line">        <span class="string">'db'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'yii\db\Connection'</span>,</span><br><span class="line">            <span class="string">'dsn'</span> =&gt; <span class="string">'mysql:host=localhost;dbname=yii2advanced'</span>,</span><br><span class="line">            <span class="string">'username'</span> =&gt; <span class="string">'root'</span>,</span><br><span class="line">            <span class="string">'password'</span> =&gt; <span class="string">'root'</span>,</span><br><span class="line">            <span class="string">'charset'</span> =&gt; <span class="string">'utf8'</span>,</span><br><span class="line">        ],</span><br><span class="line"><span class="number">2</span>、注册后台账户，登录     </span><br><span class="line"></span><br><span class="line"><span class="number">3</span>、在 common\config\main.php 中配置</span><br><span class="line"><span class="keyword">return</span> [</span><br><span class="line">    <span class="string">'language'</span> =&gt; <span class="string">'zh-CN'</span>, <span class="comment">//中文显示</span></span><br><span class="line">    <span class="string">'aliases'</span> =&gt; [</span><br><span class="line">        <span class="string">'@bower'</span> =&gt; <span class="string">'@vendor/bower-asset'</span>,</span><br><span class="line">        <span class="string">'@npm'</span>   =&gt; <span class="string">'@vendor/npm-asset'</span>,</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">'vendorPath'</span> =&gt; dirname(dirname(<span class="keyword">__DIR__</span>)) . <span class="string">'/vendor'</span>,</span><br><span class="line">    <span class="string">'components'</span> =&gt; [</span><br><span class="line">        <span class="string">'cache'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'yii\caching\FileCache'</span>,</span><br><span class="line">        ],</span><br><span class="line">    ],</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h3 id="配置简短路由"><a href="#配置简短路由" class="headerlink" title="配置简短路由"></a>配置简短路由</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">在 backend/config/main.php文件的compontents加上下面的配置</span><br><span class="line"><span class="string">"urlManager"</span> =&gt; [    </span><br><span class="line">    <span class="comment">//用于表明urlManager是否启用URL美化功能，在Yii1.1中称为path格式URL，    </span></span><br><span class="line">    <span class="comment">// Yii2.0中改称美化。   </span></span><br><span class="line">    <span class="comment">// 默认不启用。但实际使用中，特别是产品环境，一般都会启用。   </span></span><br><span class="line">    <span class="string">"enablePrettyUrl"</span> =&gt; <span class="keyword">true</span>,    </span><br><span class="line">    <span class="comment">// 是否启用严格解析，如启用严格解析，要求当前请求应至少匹配1个路由规则，    </span></span><br><span class="line">    <span class="comment">// 否则认为是无效路由。    </span></span><br><span class="line">    <span class="comment">// 这个选项仅在 enablePrettyUrl 启用后才有效。    </span></span><br><span class="line">    <span class="string">"enableStrictParsing"</span> =&gt; <span class="keyword">false</span>,    </span><br><span class="line">    <span class="comment">// 是否在URL中显示入口脚本。是对美化功能的进一步补充。    </span></span><br><span class="line">    <span class="string">"showScriptName"</span> =&gt; <span class="keyword">false</span>,    </span><br><span class="line">    <span class="comment">// 指定续接在URL后面的一个后缀，如 .html 之类的。仅在 enablePrettyUrl 启用时有效。    </span></span><br><span class="line">    <span class="string">"suffix"</span> =&gt; <span class="string">""</span>,    </span><br><span class="line">    <span class="string">"rules"</span> =&gt; [        </span><br><span class="line">        <span class="string">"&lt;controller:\w+&gt;/&lt;id:\d+&gt;"</span>=&gt;<span class="string">"&lt;controller&gt;/view"</span>,  </span><br><span class="line">        <span class="string">"&lt;controller:\w+&gt;/&lt;action:\w+&gt;"</span>=&gt;<span class="string">"&lt;controller&gt;/&lt;action&gt;"</span>    </span><br><span class="line">    ],</span><br><span class="line">],</span><br><span class="line"></span><br><span class="line">配置web server</span><br><span class="line">Apache作为服务器，在应用的目录 backend/web下面创建.htaccess文件并添加如下内容：</span><br><span class="line">Options +FollowSymLinks</span><br><span class="line">IndexIgnore  *<span class="comment">/*</span></span><br><span class="line"><span class="comment">RewriteEngine on</span></span><br><span class="line"><span class="comment"># if a directory or a file exists, use it directly</span></span><br><span class="line"><span class="comment">RewriteCond  %&#123;REQUEST_FILENAME&#125; !-f</span></span><br><span class="line"><span class="comment">RewriteCond %&#123;REQUEST_FILENAME&#125; !-d</span></span><br><span class="line"><span class="comment"># otherwise forward it to index.php</span></span><br><span class="line"><span class="comment">RewriteRule . index.php</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">nginx用户，修改server部分，如下：</span></span><br><span class="line"><span class="comment">server &#123;</span></span><br><span class="line"><span class="comment">    listen       80;</span></span><br><span class="line"><span class="comment">    server_name  yourdomain;</span></span><br><span class="line"><span class="comment">    root yourdirectory/backend/web;</span></span><br><span class="line"><span class="comment">    index  index.php index.html;</span></span><br><span class="line"><span class="comment">    charset utf-8;</span></span><br><span class="line"><span class="comment">    location / &#123;</span></span><br><span class="line"><span class="comment">        index  index.php;</span></span><br><span class="line"><span class="comment">        if (!-e $request_filename) &#123;</span></span><br><span class="line"><span class="comment">            rewrite  ^(.*)$  /index.php/$1  last;</span></span><br><span class="line"><span class="comment">            break;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    location ~ .+\.php($|/) &#123;</span></span><br><span class="line"><span class="comment">        fastcgi_pass 127.0.0.1:9000;</span></span><br><span class="line"><span class="comment">        fastcgi_index index.php;</span></span><br><span class="line"><span class="comment">        include fastcgi.conf;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="启动更多分配路由"><a href="#启动更多分配路由" class="headerlink" title="启动更多分配路由"></a>启动更多分配路由</h3><p>我们先访问路由页面 /admin/route ，尽可能的把左侧的全部选中，然后移动到右侧，并记得给当前用户分配相关的可访问权限。</p><p><img src="/img/Yii2/adminLTE_route_all.png" alt="yii2-adminlte 所有路由"></p><h3 id="添加菜单"><a href="#添加菜单" class="headerlink" title="添加菜单"></a>添加菜单</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">访问菜单列表 admin/menu 点击添加菜单admin/menu/create按钮。</span><br><span class="line">&gt; 如果这个时候你没有权限访问了，需要在配置文件（backend/config/main.php）的 <span class="keyword">as</span> access数组暂时允许当前用户访问任意权限，并在我们添加完权限的时候去掉<span class="keyword">as</span> access的设置，切记。</span><br><span class="line">    <span class="string">'as access'</span> =&gt; [</span><br><span class="line">        <span class="string">'class'</span> =&gt; <span class="string">'mdm\admin\components\AccessControl'</span>,</span><br><span class="line">        <span class="string">'allowActions'</span> =&gt; [</span><br><span class="line">            <span class="comment">//'site/*',//允许访问的节点，可自行添加</span></span><br><span class="line">            <span class="comment">//'admin/*',//允许所有人访问admin节点及其子节点</span></span><br><span class="line">            <span class="string">"*"</span><span class="comment">//不配置这个是访问不到gii，使用完记得修改回来，否则权限会出问题</span></span><br><span class="line">            <span class="comment">//"book/index",//未登录用户也可以访问图书列表</span></span><br><span class="line">        ]</span><br><span class="line">    ],</span><br><span class="line">    </span><br><span class="line">？？？？？？？？？父级一直添加不上？？？先手动修改数据库？？？？最后解决这个问题？？？？    </span><br><span class="line">添加界面如下：</span><br></pre></td></tr></table></figure><p><img src="/img/Yii2/adminLTE_menu_add_01.png" alt="yii2-adminlte 添加菜单01"></p><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">一、例如添加一级菜单<span class="string">"权限管理"</span>，按照如下填写：</span><br><span class="line">名称：权限管理</span><br><span class="line">父级名称：不填</span><br><span class="line">路由：/admin/<span class="keyword">default</span>/<span class="keyword">index</span></span><br><span class="line">排序：<span class="number">1</span></span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">二、添加一个二级菜单<span class="string">"角色列表"</span>，如下：</span><br><span class="line">名称：角色列表</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/admin/role/<span class="keyword">index</span></span><br><span class="line">排序：<span class="number">2</span></span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">三、添加一个二级菜单<span class="string">"权限列表"</span>，如下：</span><br><span class="line">名称：权限列表</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/admin/permission/<span class="keyword">index</span></span><br><span class="line">排序：<span class="number">3</span></span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">四、添加一个二级菜单<span class="string">"路由列表"</span>，如下：</span><br><span class="line">名称：路由列表</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/admin/route/<span class="keyword">index</span></span><br><span class="line">排序：<span class="number">4</span></span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">五、添加一个二级菜单<span class="string">"规则管理"</span>，如下：</span><br><span class="line">名称：规则管理</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/admin/rule/<span class="keyword">index</span></span><br><span class="line">排序：<span class="number">5</span></span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">六、添加一个二级菜单<span class="string">"分配用户到角色"</span>，如下：</span><br><span class="line">名称：分配用户到角色</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/admin/assignment/<span class="keyword">index</span></span><br><span class="line">排序：<span class="number">6</span></span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">七、添加一个二级菜单<span class="string">"菜单列表"</span>，如下：</span><br><span class="line">名称：菜单列表</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/admin/menu/<span class="keyword">index</span></span><br><span class="line">排序：<span class="number">7</span></span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">八、添加一个二级菜单<span class="string">"用户列表"</span>，如下：</span><br><span class="line">名称：用户列表</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/admin/user/<span class="keyword">index</span></span><br><span class="line">排序：<span class="number">8</span></span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">九、添加一个二级菜单<span class="string">"图书列表"</span>，如下：</span><br><span class="line">名称：图书列表</span><br><span class="line">父级名称：权限管理</span><br><span class="line">路由：/book/<span class="keyword">index</span></span><br><span class="line">排序：<span class="number">9</span></span><br><span class="line">数据：暂不填写</span><br><span class="line"></span><br><span class="line">具体如下</span><br></pre></td></tr></table></figure><p><img src="/img/Yii2/adminLTE_menu_add_02.png" alt="yii2-adminlte 添加菜单02"></p><h3 id="左侧菜单展示"><a href="#左侧菜单展示" class="headerlink" title="左侧菜单展示"></a>左侧菜单展示</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">修改</span><br><span class="line">&lt;project&gt;/backend/views/layouts/left.php</span><br><span class="line">文件（保证这个文件是从</span><br><span class="line">&lt;project&gt;/vendor/dmstr/yii2-adminlte-asset/example-views/yiisoft/yii2-app/views/layouts/left.php</span><br><span class="line">地方复制过来的，否则去修改源文件），添加如下代码：</span><br><span class="line">侧菜单上把权限的栏目加上,代码可直接复制，放置于 &lt;section class=<span class="string">"sidebar"</span>&gt;&lt;/section&gt;标签内即可</span><br><span class="line"></span><br><span class="line">        //第一种显示方式</span><br><span class="line">        <span class="variable">$callback</span> = <span class="keyword">function</span>(<span class="variable">$menu</span>)&#123;</span><br><span class="line">            <span class="built_in">return</span> [</span><br><span class="line">                <span class="string">'label'</span> =&gt; <span class="variable">$menu</span>[<span class="string">'name'</span>],</span><br><span class="line">                <span class="string">'url'</span> =&gt; [<span class="variable">$menu</span>[<span class="string">'route'</span>]],</span><br><span class="line">                <span class="string">'icon'</span> =&gt; <span class="variable">$menu</span>[<span class="string">'data'</span>],</span><br><span class="line">                <span class="string">'items'</span> =&gt; <span class="variable">$menu</span>[<span class="string">'children'</span>]</span><br><span class="line">            ];</span><br><span class="line">        &#125;;</span><br><span class="line">        use mdm\admin\components\MenuHelper;</span><br><span class="line">        <span class="variable">$items</span> = MenuHelper::getAssignedMenu(Yii::<span class="variable">$app</span>-&gt;user-&gt;id, null, <span class="variable">$callback</span>, <span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">echo</span> dmstr\widgets\Menu::widget([</span><br><span class="line">            <span class="string">'options'</span> =&gt; [<span class="string">'class'</span> =&gt; <span class="string">'sidebar-menu'</span>, <span class="string">'data-widget'</span>=&gt; <span class="string">'tree'</span>],</span><br><span class="line">            <span class="string">'items'</span> =&gt; <span class="variable">$items</span></span><br><span class="line">        ]);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //第二种显示方式</span><br><span class="line">        //use mdm\admin\components\MenuHelper;</span><br><span class="line">        use yii\bootstrap\Nav;</span><br><span class="line">        <span class="built_in">echo</span> Nav::widget(</span><br><span class="line">            [</span><br><span class="line">                //<span class="string">"encodeLabels"</span> =&gt; <span class="literal">false</span>,</span><br><span class="line">                <span class="string">"options"</span> =&gt; [<span class="string">"class"</span> =&gt; <span class="string">"sidebar-menu"</span>, <span class="string">'data-widget'</span>=&gt; <span class="string">'tree'</span>],</span><br><span class="line">                <span class="string">"items"</span> =&gt; MenuHelper::getAssignedMenu(Yii::<span class="variable">$app</span>-&gt;user-&gt;id),</span><br><span class="line">            ]</span><br><span class="line">        );</span><br></pre></td></tr></table></figure><p><img src="/img/Yii2/adminLTE_left.png" alt="yii2-adminlte 左侧菜单"></p><h3 id="整合完毕后存在问题（原因是-yii2-admin-2-0版本）"><a href="#整合完毕后存在问题（原因是-yii2-admin-2-0版本）" class="headerlink" title="整合完毕后存在问题（原因是 yii2-admin 2.0版本）"></a>整合完毕后存在问题（原因是 yii2-admin 2.0版本）</h3><p>一、菜单小图标并控制菜单显示：<br>我们在创建菜单的时候，没填写的”数据”一栏，我们填写 <a href="http://www.runoob.com/font-awesome/fontawesome-tutorial.html" target="_blank" rel="noopener"><font color="red">Font Awesome</font></a> 从这里面选择图标，例如在品牌图标中 使用这个是    fa fa-android  ；我们在 菜单“数据”一栏应该写 android，如图：<br><img src="/img/Yii2/bug_menu_icon.png" alt="bug 图标填写错误"></p><p>二、菜单列表中父级一直添加不上 ，父级名意图提示样式会跑到最左侧，路由意图样式会跑到最左侧（yii2-admin 版本1.0没有此问题）<br><img src="/img/Yii2/bug_menu_add_menu.png" alt="bug 新增菜单样式错误"></p><p>解决办法：</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line">一、解决父级添加不上：</span><br><span class="line">修改&lt;project&gt;/vendor/mdmsoft/yii2-admin/models/Menu.php中</span><br><span class="line">原来：</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">rules</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            [[<span class="string">'name'</span>], <span class="string">'required'</span>],</span><br><span class="line">            [[<span class="string">'parent_name'</span>], <span class="string">'in'</span>,</span><br><span class="line">                <span class="string">'range'</span> =&gt; <span class="keyword">static</span>::find()-&gt;select([<span class="string">'name'</span>])-&gt;column(),</span><br><span class="line">                <span class="string">'message'</span> =&gt; <span class="string">'Menu "&#123;value&#125;" not found.'</span>],</span><br><span class="line">            [[<span class="string">'parent'</span>, <span class="string">'route'</span>, <span class="string">'data'</span>, <span class="string">'order'</span>], <span class="string">'default'</span>],</span><br><span class="line">            [[<span class="string">'parent'</span>], <span class="string">'filterParent'</span>, <span class="string">'when'</span> =&gt; <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> !<span class="keyword">$this</span>-&gt;isNewRecord;</span><br><span class="line">            &#125;], </span><br><span class="line">            [[<span class="string">'order'</span>], <span class="string">'integer'</span>],</span><br><span class="line">            [[<span class="string">'route'</span>], <span class="string">'in'</span>,</span><br><span class="line">                <span class="string">'range'</span> =&gt; <span class="keyword">static</span>::getSavedRoutes(),</span><br><span class="line">                <span class="string">'message'</span> =&gt; <span class="string">'Route "&#123;value&#125;" not found.'</span>]</span><br><span class="line">        ];</span><br><span class="line">    &#125;</span><br><span class="line">    修改后：</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">rules</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [</span><br><span class="line">            [[<span class="string">'name'</span>], <span class="string">'required'</span>],</span><br><span class="line">            [[<span class="string">'parent_name'</span>], <span class="string">'in'</span>,</span><br><span class="line">                <span class="string">'range'</span> =&gt; <span class="keyword">static</span>::find()-&gt;select([<span class="string">'name'</span>])-&gt;column(),</span><br><span class="line">                <span class="string">'message'</span> =&gt; <span class="string">'Menu "&#123;value&#125;" not found.'</span>],</span><br><span class="line">            [[<span class="string">'parent'</span>, <span class="string">'route'</span>, <span class="string">'data'</span>, <span class="string">'order'</span>], <span class="string">'default'</span>],</span><br><span class="line">            <span class="comment">/*[['parent'], 'filterParent', 'when' =&gt; function() &#123;</span></span><br><span class="line"><span class="comment">                return !$this-&gt;isNewRecord;</span></span><br><span class="line"><span class="comment">            &#125;],*/</span></span><br><span class="line">            [[<span class="string">'parent_name'</span>], <span class="string">'filterParent'</span>],<span class="comment">//修改此方法</span></span><br><span class="line">            [[<span class="string">'order'</span>], <span class="string">'integer'</span>],</span><br><span class="line">            [[<span class="string">'route'</span>], <span class="string">'in'</span>,</span><br><span class="line">                <span class="string">'range'</span> =&gt; <span class="keyword">static</span>::getSavedRoutes(),</span><br><span class="line">                <span class="string">'message'</span> =&gt; <span class="string">'Route "&#123;value&#125;" not found.'</span>]</span><br><span class="line">        ];</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    原来：</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">filterParent</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        $parent = <span class="keyword">$this</span>-&gt;parent;</span><br><span class="line">        $db = <span class="keyword">static</span>::getDb();</span><br><span class="line">        $query = (<span class="keyword">new</span> Query)-&gt;select([<span class="string">'parent'</span>])</span><br><span class="line">            -&gt;from(<span class="keyword">static</span>::tableName())</span><br><span class="line">            -&gt;where(<span class="string">'[[id]]=:id'</span>);</span><br><span class="line">        <span class="keyword">while</span> ($parent) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">$this</span>-&gt;id == $parent) &#123;</span><br><span class="line">                <span class="keyword">$this</span>-&gt;addError(<span class="string">'parent_name'</span>, <span class="string">'Loop detected.'</span>);</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            $parent = $query-&gt;params([<span class="string">':id'</span> =&gt; $parent])-&gt;scalar($db);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    修改后：</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">filterParent</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//修改此方法</span></span><br><span class="line">        $value = <span class="keyword">$this</span>-&gt;parent_name;</span><br><span class="line">        $parent = <span class="keyword">self</span>::findOne([<span class="string">'name'</span> =&gt; $value]);</span><br><span class="line">        <span class="keyword">if</span> ($parent) &#123;</span><br><span class="line">            $id = <span class="keyword">$this</span>-&gt;id;</span><br><span class="line">            $parent_id = $parent-&gt;id;</span><br><span class="line">            <span class="keyword">while</span> ($parent) &#123;</span><br><span class="line">                <span class="keyword">if</span> ($parent-&gt;id == $id) &#123;</span><br><span class="line">                    <span class="keyword">$this</span>-&gt;addError(<span class="string">'parent_name'</span>, <span class="string">'Loop detected.'</span>);</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                $parent = $parent-&gt;menuParent;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;parent = $parent_id;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">二、解决意图提示样式</span><br><span class="line">下载 yiisoft/yii2-jui</span><br><span class="line">php composer.phar <span class="keyword">require</span> --prefer-dist yiisoft/yii2-jui</span><br><span class="line"></span><br><span class="line">现在已经可以上试试效果，完全没有问题，如果不想用form中原来的书写方式可以按下面的办法；</span><br><span class="line">修改 &lt;project&gt;/vendor/mdmsoft/yii2-admin/views/menu/_form.php中parent_name和route表单：</span><br><span class="line">修改之前：</span><br><span class="line">            <span class="meta">&lt;?</span>= $form-&gt;field($model, <span class="string">'parent_name'</span>)-&gt;textInput([<span class="string">'id'</span> =&gt; <span class="string">'parent_name'</span>]) <span class="meta">?&gt;</span></span><br><span class="line">            <span class="meta">&lt;?</span>= $form-&gt;field($model, <span class="string">'route'</span>)-&gt;textInput([<span class="string">'id'</span> =&gt; <span class="string">'route'</span>]) <span class="meta">?&gt;</span></span><br><span class="line">修改之后：</span><br><span class="line">            <span class="meta">&lt;?</span>= $form-&gt;field($model, <span class="string">'parent_name'</span>)-&gt;widget(<span class="string">'yii\jui\AutoComplete'</span>,[</span><br><span class="line">                <span class="string">'options'</span>=&gt;[<span class="string">'class'</span>=&gt;<span class="string">'form-control'</span>],</span><br><span class="line">                <span class="string">'clientOptions'</span>=&gt;[</span><br><span class="line">                    <span class="string">'source'</span>=&gt;  Menu::find()-&gt;select([<span class="string">'name'</span>])-&gt;column()</span><br><span class="line">                ]</span><br><span class="line">            ]) <span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="meta">&lt;?</span>= $form-&gt;field($model, <span class="string">'route'</span>)-&gt;widget(<span class="string">'yii\jui\AutoComplete'</span>,[</span><br><span class="line">                <span class="string">'options'</span>=&gt;[<span class="string">'class'</span>=&gt;<span class="string">'form-control'</span>],</span><br><span class="line">                <span class="string">'clientOptions'</span>=&gt;[</span><br><span class="line">                    <span class="string">'source'</span>=&gt; Menu::getSavedRoutes()</span><br><span class="line">                ]</span><br><span class="line">            ]) <span class="meta">?&gt;</span></span><br><span class="line">三、在 &lt;project&gt;/vendor/mdmsoft/yii2-admin/views/role/_form.php 同样会有样式问题，按照二的步骤修改即可</span><br><span class="line">   使用到的时候再改就可以。</span><br><span class="line">   修改后的：</span><br><span class="line">   <span class="meta">&lt;?</span>=</span><br><span class="line">    $form-&gt;field($model, <span class="string">'ruleName'</span>)-&gt;widget(<span class="string">'yii\jui\AutoComplete'</span>, [</span><br><span class="line">        <span class="string">'options'</span> =&gt; [</span><br><span class="line">            <span class="string">'class'</span> =&gt; <span class="string">'form-control'</span>,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">'clientOptions'</span> =&gt; [</span><br><span class="line">            <span class="string">'source'</span> =&gt; array_keys(Yii::$app-&gt;authManager-&gt;getRules()),</span><br><span class="line">        ]</span><br><span class="line">    ])</span><br><span class="line">    <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="/img/Yii2/bug_menu_add_menu_ok_01.png" alt="bug 新增菜单父级改好1"></p><p><img src="/img/Yii2/bug_menu_add_menu_ok_02.png" alt="bug 新增菜单父级改好2"></p><p><img src="/img/Yii2/bug_menu_add_menu_ok_03.png" alt="bug 新增菜单父级改好3"></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>hexo常用命令笔记</title>
      <link href="/2017/11/30/hexo/hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%AC%94%E8%AE%B0/"/>
      <url>/2017/11/30/hexo/hexo%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E7%AC%94%E8%AE%B0/</url>
      <content type="html"><![CDATA[<h3 id="hexo"><a href="#hexo" class="headerlink" title="hexo"></a>hexo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo -g <span class="comment">#安装  </span></span><br><span class="line">npm update hexo -g <span class="comment">#升级  </span></span><br><span class="line">hexo init <span class="comment">#初始化</span></span><br></pre></td></tr></table></figure><h3 id="简写"><a href="#简写" class="headerlink" title="简写"></a>简写</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hexo n <span class="string">"我的博客"</span> == hexo new <span class="string">"我的博客"</span> <span class="comment">#新建文章</span></span><br><span class="line">hexo p == hexo publish</span><br><span class="line">hexo g == hexo generate<span class="comment">#生成</span></span><br><span class="line">hexo s == hexo server <span class="comment">#启动服务预览</span></span><br><span class="line">hexo d == hexo deploy<span class="comment">#部署</span></span><br></pre></td></tr></table></figure><h3 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hexo server <span class="comment">#Hexo 会监视文件变动并自动更新，您无须重启服务器。</span></span><br><span class="line">hexo server -s <span class="comment">#静态模式</span></span><br><span class="line">hexo server -p 5000 <span class="comment">#更改端口</span></span><br><span class="line">hexo server -i 192.168.1.1 <span class="comment">#自定义 IP</span></span><br><span class="line">hexo clean <span class="comment">#清除缓存 网页正常情况下可以忽略此条命令</span></span><br><span class="line">hexo g <span class="comment">#生成静态网页</span></span><br><span class="line">hexo d <span class="comment">#开始部署</span></span><br></pre></td></tr></table></figure><h3 id="监视文件变动"><a href="#监视文件变动" class="headerlink" title="监视文件变动"></a>监视文件变动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hexo generate <span class="comment">#使用 Hexo 生成静态文件快速而且简单</span></span><br><span class="line">hexo generate --watch <span class="comment">#监视文件变动</span></span><br><span class="line"></span><br><span class="line">完成后部署</span><br><span class="line">两个命令的作用是相同的</span><br><span class="line">hexo generate --deploy</span><br><span class="line">hexo deploy --generate</span><br><span class="line">hexo deploy -g</span><br><span class="line">hexo server -g</span><br></pre></td></tr></table></figure><h3 id="草稿"><a href="#草稿" class="headerlink" title="草稿"></a>草稿</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo publish [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure><h3 id="模版"><a href="#模版" class="headerlink" title="模版"></a>模版</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="string">"postName"</span> <span class="comment">#新建文章</span></span><br><span class="line">hexo new page <span class="string">"pageName"</span> <span class="comment">#新建页面</span></span><br><span class="line">hexo generate <span class="comment">#生成静态页面至public目录</span></span><br><span class="line">hexo server <span class="comment">#开启预览访问端口（默认端口4000，'ctrl + c'关闭server）</span></span><br><span class="line">hexo deploy <span class="comment">#将.deploy目录部署到GitHub</span></span><br><span class="line"></span><br><span class="line">hexo new [layout] &lt;title&gt;</span><br><span class="line">hexo new photo <span class="string">"My Gallery"</span></span><br><span class="line">hexo new <span class="string">"Hello World"</span> --lang tw</span><br></pre></td></tr></table></figure><table><thead><tr><th>变量</th><th style="text-align:right">描述</th></tr></thead><tbody><tr><td>layout</td><td style="text-align:right">布局</td></tr><tr><td>title</td><td style="text-align:right">标题</td></tr><tr><td>date</td><td style="text-align:right">建立</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">title: 使用Hexo搭建个人博客</span><br><span class="line">layout: post</span><br><span class="line">date: 2014-03-03 19:07:43</span><br><span class="line">comments: <span class="literal">true</span></span><br><span class="line">categories: Blog</span><br><span class="line">tags: [Hexo]</span><br><span class="line">keywords: Hexo, Blog</span><br><span class="line">description: 暮色匆匆去，音消尘也无</span><br><span class="line">模版（Scaffold）</span><br><span class="line">hexo new photo <span class="string">"My Gallery"</span></span><br></pre></td></tr></table></figure><h3 id="设置文章摘要"><a href="#设置文章摘要" class="headerlink" title="设置文章摘要"></a>设置文章摘要</h3><p>以上是文章摘要 以下是余下全文 </p><h3 id="写作"><a href="#写作" class="headerlink" title="写作"></a>写作</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new page &lt;title&gt;</span><br><span class="line">hexo new post &lt;title&gt;</span><br></pre></td></tr></table></figure><table><thead><tr><th>变量</th><th>描述</th></tr></thead><tbody><tr><td>:title</td><td>标题</td></tr><tr><td>:year</td><td>建立的年份（4 位数）</td></tr><tr><td>:month</td><td>建立的月份（2 位数）</td></tr><tr><td>:i_month</td><td>建立的月份（去掉开头的零）</td></tr><tr><td>:day</td><td>建立的日期（2 位数）</td></tr><tr><td>:i_day</td><td>建立的日期（去掉开头的零）</td></tr></tbody></table><h3 id="推送到服务器上"><a href="#推送到服务器上" class="headerlink" title="推送到服务器上"></a>推送到服务器上</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo n <span class="comment">#写文章</span></span><br><span class="line">hexo g <span class="comment">#生成</span></span><br><span class="line">hexo d <span class="comment">#部署 #可与hexo g合并为 hexo d -g</span></span><br></pre></td></tr></table></figure><h3 id="报错"><a href="#报错" class="headerlink" title="报错"></a>报错</h3><p>1.找不到git部署</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ERROR Deployer not found: git</span><br></pre></td></tr></table></figure><p>解决方法</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>3.部署类型设置git<br>hexo 3.0 部署类型不再是github，<code>_config.yml</code> 中修改</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: http://hexo.io/docs/deployment.html</span></span><br><span class="line">deploy:</span><br><span class="line"><span class="built_in">type</span>: git</span><br><span class="line">repository: git@***.github.com:***/***.github.io.git</span><br><span class="line">branch: master</span><br></pre></td></tr></table></figure><ol><li>xcodebuild</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xcode-select: error: tool <span class="string">'xcodebuild'</span> requires Xcode, but active developer directory <span class="string">'/Library/Developer/CommandLineTools'</span> is a <span class="built_in">command</span> line tools instance</span><br><span class="line"></span><br><span class="line">npm install bcrypt</span><br></pre></td></tr></table></figure><ol><li>RSS不显示<br>安装RSS插件</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><h3 id="开启RSS功能"><a href="#开启RSS功能" class="headerlink" title="开启RSS功能"></a>开启RSS功能</h3><p>编辑<code>hexo/_config.yml</code>，添加如下代码：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rss: /atom.xml <span class="comment">#rss地址  默认即可</span></span><br></pre></td></tr></table></figure><h3 id="开启评论"><a href="#开启评论" class="headerlink" title="开启评论"></a>开启评论</h3><p>1.我使用多说代替自带的评论，在多说 网站注册 &gt; 后台管理 &gt; 添加新站点 &gt; 工具 === 复制通用代码 里面有 short_name</p><p>1 在根目录 <code>_config.yml</code> 添加一行 <code>disqus_shortname: jslite</code> 是在多说注册时产生的<br>复制到 <code>themes\landscape\layout\_partial\article.ejs</code><br>2 把</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (!index &amp;&amp; post.comments &amp;&amp; config.disqus_shortname)&#123; %&gt;</span><br><span class="line">&lt;section id=<span class="string">"comments"</span>&gt;</span><br><span class="line">&lt;div id=<span class="string">"disqus_thread"</span>&gt;</span><br><span class="line">  &lt;noscript&gt;Please <span class="built_in">enable</span> JavaScript to view the &lt;a href=<span class="string">"//disqus.com/?ref_noscript"</span>&gt;comments powered by Disqus.&lt;/a&gt;&lt;/noscript&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/section&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>改为</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (!index &amp;&amp; post.comments &amp;&amp; config.disqus_shortname)&#123; %&gt;</span><br><span class="line">  &lt;section id=<span class="string">"comments"</span>&gt;</span><br><span class="line">    &lt;!-- 多说评论框 start --&gt;</span><br><span class="line">    &lt;div class=<span class="string">"ds-thread"</span> data-thread-key=<span class="string">"&lt;%= post.layout %&gt;-&lt;%= post.slug %&gt;"</span> data-title=<span class="string">"&lt;%= post.title %&gt;"</span> data-url=<span class="string">"&lt;%= page.permalink %&gt;"</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;!-- 多说评论框 end --&gt;</span><br><span class="line">    &lt;!-- 多说公共JS代码 start (一个网页只需插入一次) --&gt;</span><br><span class="line">    &lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">    var duoshuoQuery = &#123;short_name:<span class="string">'&lt;%= config.disqus_shortname %&gt;'</span>&#125;;</span><br><span class="line">      (<span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">        var ds = document.createElement(<span class="string">'script'</span>);</span><br><span class="line">        ds.type = <span class="string">'text/javascript'</span>;ds.async = <span class="literal">true</span>;</span><br><span class="line">        ds.src = (document.location.protocol == <span class="string">'https:'</span> ? <span class="string">'https:'</span> : <span class="string">'http:'</span>) + <span class="string">'//static.duoshuo.com/embed.js'</span>;</span><br><span class="line">        ds.charset = <span class="string">'UTF-8'</span>;</span><br><span class="line">        (document.getElementsByTagName(<span class="string">'head'</span>)[0] </span><br><span class="line">         || document.getElementsByTagName(<span class="string">'body'</span>)[0]).appendChild(ds);</span><br><span class="line">      &#125;)();</span><br><span class="line">      &lt;/script&gt;</span><br><span class="line">    &lt;!-- 多说公共JS代码 end --&gt;</span><br><span class="line">  &lt;/section&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><h3 id="hexo-git-backup"><a href="#hexo-git-backup" class="headerlink" title="hexo-git-backup"></a>hexo-git-backup</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">安装备份插件</span><br><span class="line">参考网址：  https://github.com/coneycode/hexo-git-backup</span><br><span class="line">Update</span><br><span class="line"><span class="keyword">if</span> you install with --save, you must remove firstly when you update it.</span><br><span class="line">$ npm remove hexo-git-backup</span><br><span class="line">$ npm install hexo-git-backup --save</span><br><span class="line">--------------------------------------</span><br><span class="line">安装主题</span><br><span class="line">参考网址：   https://github.com/chaooo/hexo-theme-BlueLake</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/chaooo/hexo-theme-BlueLake.git themes/BlueLake</span><br><span class="line">-------------------------------------</span><br><span class="line">生成、部署</span><br><span class="line">hexo g</span><br><span class="line">hexo d</span><br><span class="line">hexo b</span><br><span class="line">hexo server -p 5000   【本地查看】</span><br></pre></td></tr></table></figure><h3 id="hexo-1"><a href="#hexo-1" class="headerlink" title="hexo"></a>hexo</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
    </entry>
    
    <entry>
      <title>Hello World</title>
      <link href="/2017/11/30/hello-world/"/>
      <url>/2017/11/30/hello-world/</url>
      <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
    </entry>
    
  
  
</search>
